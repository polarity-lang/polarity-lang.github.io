"use strict";(self.webpackChunkmonaco_lsp_streams=self.webpackChunkmonaco_lsp_streams||[]).push([[4397],{94397:(t,e,i)=>{i.r(e),i.d(e,{AbstractResourceEditorInput:()=>Fs.y,AbstractTextResourceEditorInput:()=>Ws.f,ConfirmResult:()=>Gs.yN,DomScrollableElement:()=>Hs.MU,EditorInput:()=>zs.m,EditorInputCapabilities:()=>Ee.oG,EditorPane:()=>Zs,Parts:()=>u.Fy,RegisteredEditorPriority:()=>Bs.C8,SimpleEditorInput:()=>Ks,SimpleEditorPane:()=>Us,SplitView:()=>js.U,ViewContainerLocation:()=>Ts.gZ,ViewPaneContainer:()=>Ps.zv,default:()=>dn,getPanelPosition:()=>rn,getSideBarPosition:()=>cn,isPartVisibile:()=>sn,onDidChangePanelPosition:()=>on,onDidChangeSideBarPosition:()=>an,registerCustomView:()=>en,registerEditor:()=>$s,registerEditorPane:()=>Xs,registerEditorSerializer:()=>qs,setPartVisibility:()=>nn,viewContainerRegistry:()=>Js,viewRegistry:()=>tn});var s=i(92518),n=(i(80118),i(68836)),o=i(1661),r=i(93765),a=i(75824),c=i(46271),h=i(53658),l=i(71478),d=i(10635),u=i(81893),m=i(39924),g=i(75369),p=i(64533),b=i(819),f=i(71512),w=i(54521),v=i(6162);(0,v.A)(".monaco-workbench>.notifications-center{border-radius:4px;bottom:31px;display:none;overflow:hidden;position:absolute;right:8px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-center{bottom:8px}.monaco-workbench>.notifications-center.visible{display:block}.monaco-workbench>.notifications-center>.notifications-center-header{align-items:center;display:flex;height:35px;padding-left:8px;padding-right:5px}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-title{font-size:11px;text-transform:uppercase}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar{flex:1}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .actions-container{justify-content:flex-end}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:not(:last-child)>.notification-list-item{border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:last-child{border-radius:0 0 4px 4px}.monaco-workbench>.notifications-center .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}",{}),(0,v.A)(".monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item{margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item:first-child,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item:first-child{margin-left:4px}",{});var y=i(5336),C=i(32545),S=i(40240),k=i(46361),D=i(50928),E=i(64788),I=i(77512),_=i(61478),x=i(92372),M=i(69612),A=i(24821),N=i(76390),V=i(87427),T=i(28103),L=i(79367),P=i(32834);class B extends A.jG{constructor(t,e){super(),this.item=t,this.onClose=e,this._onDidClose=this._register(new o.vl),this.onDidClose=this._onDidClose.event,this._onDidChangeVisibility=this._register(new o.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.registerListeners()}registerListeners(){this._register(this.item.onDidChangeVisibility((t=>this._onDidChangeVisibility.fire(t)))),o.Jh.once(this.item.onDidClose)((()=>{this._onDidClose.fire(),this.dispose()}))}get progress(){return this.item.progress}updateSeverity(t){this.item.updateSeverity(t)}updateMessage(t){this.item.updateMessage(t)}updateActions(t){this.item.updateActions(t)}close(){this.onClose(this.item),this.dispose()}}class R extends A.jG{constructor(){super(...arguments),this._onDidChangeNotification=this._register(new o.vl),this.onDidChangeNotification=this._onDidChangeNotification.event,this._onDidChangeStatusMessage=this._register(new o.vl),this.onDidChangeStatusMessage=this._onDidChangeStatusMessage.event,this._onDidChangeFilter=this._register(new o.vl),this.onDidChangeFilter=this._onDidChangeFilter.event,this._notifications=[],this.filter={global:x.Pl.OFF,sources:new Map}}static{this.NO_OP_NOTIFICATION=new x.Kz}get notifications(){return this._notifications}get statusMessage(){return this._statusMessage}setFilter(t){let e=!1;"number"==typeof t.global&&(e=this.filter.global!==t.global,this.filter.global=t.global);let i=!1;t.sources&&(i=!(0,L.R6)(this.filter.sources,t.sources),this.filter.sources=t.sources),(e||i)&&this._onDidChangeFilter.fire({global:e?t.global:void 0,sources:i?t.sources:void 0})}addNotification(t){const e=this.createViewItem(t);if(!e)return R.NO_OP_NOTIFICATION;const i=this.findNotification(e);return i?.close(),this._notifications.splice(0,0,e),this._onDidChangeNotification.fire({item:e,index:0,kind:0}),new B(e,(t=>this.onClose(t)))}onClose(t){const e=this.findNotification(t);e&&e!==t?e.close():t.close()}findNotification(t){return this._notifications.find((e=>e.equals(t)))}createViewItem(t){const e=H.create(t,this.filter);if(!e)return;const i=(t,i)=>{const s=this._notifications.indexOf(e);s>=0&&this._onDidChangeNotification.fire({item:e,index:s,kind:t,detail:i})},s=e.onDidChangeExpansion((()=>i(2))),n=e.onDidChangeContent((t=>i(1,t.kind)));return o.Jh.once(e.onDidClose)((()=>{s.dispose(),n.dispose();const t=this._notifications.indexOf(e);t>=0&&(this._notifications.splice(t,1),this._onDidChangeNotification.fire({item:e,index:t,kind:3}))})),e}showStatusMessage(t,e){const i=F.create(t,e);return i?(this._statusMessage=i,this._onDidChangeStatusMessage.fire({kind:0,item:i}),(0,A.s)((()=>{this._statusMessage===i&&(this._statusMessage=void 0,this._onDidChangeStatusMessage.fire({kind:1,item:i}))}))):A.jG.None}}function z(t){return t instanceof H}class O extends A.jG{constructor(){super(),this._onDidChange=this._register(new o.vl),this.onDidChange=this._onDidChange.event,this._state=Object.create(null)}get state(){return this._state}infinite(){this._state.infinite||(this._state.infinite=!0,this._state.total=void 0,this._state.worked=void 0,this._state.done=void 0,this._onDidChange.fire())}done(){this._state.done||(this._state.done=!0,this._state.infinite=void 0,this._state.total=void 0,this._state.worked=void 0,this._onDidChange.fire())}total(t){this._state.total!==t&&(this._state.total=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire())}worked(t){"number"==typeof this._state.worked?this._state.worked+=t:this._state.worked=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire()}}class H extends A.jG{static{this.MAX_MESSAGE_LENGTH=1e3}static create(t,e){if(!t||!t.message||(0,h.MB)(t.message))return;let i;i="number"==typeof t.severity?t.severity:P.A.Info;const s=H.parseNotificationMessage(t.message);if(!s)return;let n;t.actions?n=t.actions:(0,M.C4)(t.message)&&(n={primary:t.message.actions});let o=t.priority??x.AE.DEFAULT;return o===x.AE.DEFAULT&&i!==P.A.Error&&(e.global===x.Pl.ERROR||(0,x.Xq)(t.source)&&e.sources.get(t.source.id)===x.Pl.ERROR)&&(o=x.AE.SILENT),new H(t.id,i,t.sticky,o,s,t.source,t.progress,n)}static parseNotificationMessage(t){let e;if(t instanceof Error?e=(0,M.rx)(t,!1):"string"==typeof t&&(e=t),!e)return;const i=e;return e.length>H.MAX_MESSAGE_LENGTH&&(e=`${e.substr(0,H.MAX_MESSAGE_LENGTH)}...`),e=e.replace(/(\r\n|\n|\r)/gm," ").trim(),{raw:i,linkedText:(0,T.q)(e),original:t}}constructor(t,e,i,s,n,r,a,c){super(),this.id=t,this._severity=e,this._sticky=i,this._priority=s,this._message=n,this._source=r,this._visible=!1,this._onDidChangeExpansion=this._register(new o.vl),this.onDidChangeExpansion=this._onDidChangeExpansion.event,this._onDidClose=this._register(new o.vl),this.onDidClose=this._onDidClose.event,this._onDidChangeContent=this._register(new o.vl),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeVisibility=this._register(new o.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,a&&this.setProgress(a),this.setActions(c)}setProgress(t){t.infinite?this.progress.infinite():t.total&&(this.progress.total(t.total),t.worked&&this.progress.worked(t.worked))}setActions(t={primary:[],secondary:[]}){this._actions={primary:Array.isArray(t.primary)?t.primary:[],secondary:Array.isArray(t.secondary)?t.secondary:[]},this._expanded=t.primary&&t.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky)return!0;const t=this.hasActions;return!!(t&&this._severity===P.A.Error||!t&&this._expanded||this._progress&&!this._progress.state.done)}get priority(){return this._priority}get hasActions(){return!!this._actions&&!!this._actions.primary&&this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){return this._progress||(this._progress=this._register(new O),this._register(this._progress.onDidChange((()=>this._onDidChangeContent.fire({kind:3}))))),this._progress}get message(){return this._message}get source(){return"string"==typeof this._source?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&"string"!=typeof this._source&&"id"in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(t){t!==this._severity&&(this._severity=t,this._onDidChangeContent.fire({kind:0}))}updateMessage(t){const e=H.parseNotificationMessage(t);e&&e.raw!==this._message.raw&&(this._message=e,this._onDidChangeContent.fire({kind:1}))}updateActions(t){this.setActions(t),this._onDidChangeContent.fire({kind:2})}updateVisibility(t){this._visible!==t&&(this._visible=t,this._onDidChangeVisibility.fire(t))}expand(){!this._expanded&&this.canCollapse&&(this._expanded=!0,this._onDidChangeExpansion.fire())}collapse(t){this._expanded&&this.canCollapse&&(this._expanded=!1,t||this._onDidChangeExpansion.fire())}toggle(){this._expanded?this.collapse():this.expand()}close(){this._onDidClose.fire(),this.dispose()}equals(t){if(this.hasProgress||t.hasProgress)return!1;if("string"==typeof this.id||"string"==typeof t.id)return this.id===t.id;if("object"==typeof this._source){if(this._source.label!==t.source||this._source.id!==t.sourceId)return!1}else if(this._source!==t.source)return!1;if(this._message.raw!==t.message.raw)return!1;const e=this._actions&&this._actions.primary||[],i=t.actions&&t.actions.primary||[];return(0,V.aI)(e,i,((t,e)=>t.id+t.label===e.id+e.label))}}class G extends N.rc{constructor(t,e){super(t,e.label,void 0,!0,(async()=>{e.run(),this._onDidRun.fire()})),this._onDidRun=this._register(new o.vl),this.onDidRun=this._onDidRun.event,this._keepOpen=!!e.keepOpen,this._menu=!e.isSecondary&&e.menu?e.menu.map(((e,i)=>new G(`${t}.${i}`,e))):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}}class F{static create(t,e){if(!t||(0,h.MB)(t))return;let i;return t instanceof Error?i=(0,M.rx)(t,!1):"string"==typeof t&&(i=t),i?{message:i,options:e}:void 0}}var W=i(63288),Q=i(25934),j=i(12234),Y=i(21747),Z=i(84793),U=i(37653);function K(t,e,i){return{id:(0,U.tW)(t.toString()).toString(),silent:i,source:e||"core"}}let X=class extends A.jG{constructor(t,e){super(),this.telemetryService=t,this.notificationService=e,this.registerListeners()}registerListeners(){this._register(this.notificationService.onDidAddNotification((t=>{const e=t.source&&"string"!=typeof t.source?t.source.id:t.source;this.telemetryService.publicLog2("notification:show",K(t.message,e,t.priority===x.AE.SILENT))}))),this._register(this.notificationService.onDidRemoveNotification((t=>{const e=t.source&&"string"!=typeof t.source?t.source.id:t.source;this.telemetryService.publicLog2("notification:close",K(t.message,e,t.priority===x.AE.SILENT))})))}};X=(0,s.C)([(0,s.Q)(0,Z.k),(0,s.Q)(1,w.O)],X);var $=i(47622),q=i(28672),J=i(9957),tt=i(32042),et=i(92915);const it="notifications.showList",st="notifications.hideList",nt="notifications.hideToasts",ot="notifications.focusToasts",rt="notification.collapse",at="notification.expand",ct="notification.acceptPrimaryAction",ht="notification.clear",lt="notifications.clearAll",dt="notifications.toggleDoNotDisturbMode",ut="notifications.toggleDoNotDisturbModeBySource";function mt(t,e){if(z(e))return e;const i=t.lastFocusedList;if(i instanceof j.Ei){let t=i.getFocusedElements()[0];if(z(t)||i.isDOMFocused()&&(t=i.element(0)),z(t))return t}}let gt=class extends N.LN{constructor(t,e){super(),this.telemetryService=t,this.notificationService=e}async runAction(t,e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.id,from:"message"}),z(e)&&this.telemetryService.publicLog2("notification:actionExecuted",{id:(0,U.tW)(e.message.original.toString()).toString(),actionLabel:t.label,source:e.sourceId||"core",silent:e.priority===x.AE.SILENT});try{await super.runAction(t,e)}catch(t){this.notificationService.error(t)}}};gt=(0,s.C)([(0,s.Q)(0,Z.k),(0,s.Q)(1,w.O)],gt),(0,v.A)(".monaco-workbench .notifications-list-container{background:var(--vscode-notifications-background);color:var(--vscode-notifications-foreground);outline-color:var(--vscode-contrastBorder)}.monaco-workbench .notifications-list-container .notification-list-item{box-sizing:border-box;display:flex;flex-direction:column;flex-direction:column-reverse;height:100%;padding:10px 5px}.monaco-workbench .notifications-list-container .notification-offset-helper{word-wrap:break-word;line-height:22px;opacity:0;position:absolute}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-main-row{display:flex;flex-grow:1}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-icon{align-items:center;background-position:50%;background-repeat:no-repeat;display:flex;flex:0 0 16px;font-size:18px;height:22px;margin-left:4px;margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message{flex:1;line-height:22px;overflow:hidden;text-overflow:ellipsis;user-select:text;-webkit-user-select:text}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a{color:var(--vscode-notificationLink-foreground)}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a:focus{outline-color:var(--vscode-focusBorder);outline-style:solid;outline-width:1px}.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-message{word-wrap:break-word;white-space:normal}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container{display:none;height:22px}.monaco-workbench .notifications-list-container .monaco-list-row.focused .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .monaco-list:focus-within .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item:hover .notification-list-item-toolbar-container{display:block}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-details-row{align-items:center;display:none;overflow:hidden;padding-left:5px}.monaco-workbench .notifications-list-container .notification-list-item.expanded>.notification-list-item-details-row{display:flex}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-source{flex:1;font-size:12px;overflow:hidden;text-overflow:ellipsis}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container{display:flex;overflow:hidden}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button,.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button-dropdown{margin:4px 5px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-button{outline-offset:2px!important}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-text-button{display:inline-block;font-size:12px;overflow:hidden;padding:4px 10px;text-overflow:ellipsis;width:fit-content}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-dropdown-button{padding:5px}.monaco-workbench .notifications-list-container .progress-bit{bottom:0}",{});var pt=i(43773),bt=i(19871),ft=i(52526),wt=i(19660),vt=i(87276),yt=i(84261),Ct=i(70950),St=i(14956),kt=i(63383),Dt=i(80914);const Et=(0,kt.pU)("notifications-clear",St.W6.close,(0,Q.kg)(7095,"Icon for the clear action in notifications.")),It=(0,kt.pU)("notifications-clear-all",St.W6.clearAll,(0,Q.kg)(7096,"Icon for the clear all action in notifications.")),_t=(0,kt.pU)("notifications-hide",St.W6.chevronDown,(0,Q.kg)(7097,"Icon for the hide action in notifications.")),xt=(0,kt.pU)("notifications-expand",St.W6.chevronUp,(0,Q.kg)(7098,"Icon for the expand action in notifications.")),Mt=(0,kt.pU)("notifications-collapse",St.W6.chevronDown,(0,Q.kg)(7099,"Icon for the collapse action in notifications.")),At=(0,kt.pU)("notifications-configure",St.W6.gear,(0,Q.kg)(7100,"Icon for the configure action in notifications.")),Nt=(0,kt.pU)("notifications-do-not-disturb",St.W6.bellSlash,(0,Q.kg)(7101,"Icon for the mute all action in notifications."));let Vt=class extends N.rc{static{this.ID=ht}static{this.LABEL=(0,Q.kg)(7102,"Clear Notification")}constructor(t,e,i){super(t,e,Dt.L0.asClassName(Et)),this.commandService=i}async run(t){this.commandService.executeCommand(ht,t)}};Vt=(0,s.C)([(0,s.Q)(2,yt.w)],Vt);let Tt=class extends N.rc{static{this.ID=lt}static{this.LABEL=(0,Q.kg)(7103,"Clear All Notifications")}constructor(t,e,i){super(t,e,Dt.L0.asClassName(It)),this.commandService=i}async run(){this.commandService.executeCommand(lt)}};Tt=(0,s.C)([(0,s.Q)(2,yt.w)],Tt);let Lt=class extends N.rc{static{this.ID=dt}static{this.LABEL=(0,Q.kg)(7104,"Toggle Do Not Disturb Mode")}constructor(t,e,i){super(t,e,Dt.L0.asClassName(Nt)),this.commandService=i}async run(){this.commandService.executeCommand(dt)}};Lt=(0,s.C)([(0,s.Q)(2,yt.w)],Lt);let Pt=class extends N.rc{static{this.ID=ut}static{this.LABEL=(0,Q.kg)(7105,"Toggle Do Not Disturb Mode By Source...")}constructor(t,e,i){super(t,e),this.commandService=i}async run(){this.commandService.executeCommand(ut)}};Pt=(0,s.C)([(0,s.Q)(2,yt.w)],Pt);class Bt extends N.rc{static{this.ID="workbench.action.configureDoNotDisturbMode"}static{this.LABEL=(0,Q.kg)(7106,"Configure Do Not Disturb...")}constructor(t,e){super(t,e,Dt.L0.asClassName(Nt))}}let Rt=class extends N.rc{static{this.ID=st}static{this.LABEL=(0,Q.kg)(7107,"Hide Notifications")}constructor(t,e,i){super(t,e,Dt.L0.asClassName(_t)),this.commandService=i}async run(){this.commandService.executeCommand(st)}};Rt=(0,s.C)([(0,s.Q)(2,yt.w)],Rt);let zt=class extends N.rc{static{this.ID=at}static{this.LABEL=(0,Q.kg)(7108,"Expand Notification")}constructor(t,e,i){super(t,e,Dt.L0.asClassName(xt)),this.commandService=i}async run(t){this.commandService.executeCommand(at,t)}};zt=(0,s.C)([(0,s.Q)(2,yt.w)],zt);let Ot=class extends N.rc{static{this.ID=rt}static{this.LABEL=(0,Q.kg)(7109,"Collapse Notification")}constructor(t,e,i){super(t,e,Dt.L0.asClassName(Mt)),this.commandService=i}async run(t){this.commandService.executeCommand(rt,t)}};Ot=(0,s.C)([(0,s.Q)(2,yt.w)],Ot);class Ht extends N.rc{static{this.ID="workbench.action.configureNotification"}static{this.LABEL=(0,Q.kg)(7110,"More Actions...")}constructor(t,e,i){super(t,e,Dt.L0.asClassName(At)),this.notification=i}}let Gt=class extends N.rc{static{this.ID="workbench.action.copyNotificationMessage"}static{this.LABEL=(0,Q.kg)(7111,"Copy Text")}constructor(t,e,i){super(t,e),this.clipboardService=i}run(t){return this.clipboardService.writeText(t.message.raw)}};Gt=(0,s.C)([(0,s.Q)(2,Ct.h)],Gt);var Ft,Wt,Qt=i(76257),jt=i(74504),Yt=i(2765),Zt=i(96288),Ut=i(4859),Kt=i(45103),Xt=i(999),$t=i(69993),qt=i(70348);class Jt{static{this.ROW_HEIGHT=42}static{this.LINE_HEIGHT=22}constructor(t){this.offsetHelper=this.createOffsetHelper(t)}createOffsetHelper(t){const e=document.createElement("div");return e.classList.add("notification-offset-helper"),t.appendChild(e),e}getHeight(t){if(!t.expanded)return Jt.ROW_HEIGHT;let e=Jt.ROW_HEIGHT;const i=this.computePreferredHeight(t);return Jt.LINE_HEIGHT<i&&(e+=i-Jt.LINE_HEIGHT),(t.source||(0,V.EI)(t.actions&&t.actions.primary))&&(e+=Jt.ROW_HEIGHT),e===Jt.ROW_HEIGHT&&t.collapse(!0),e}computePreferredHeight(t){let e=0;t.hasProgress||e++,t.canCollapse&&e++,(0,V.EI)(t.actions&&t.actions.secondary)&&e++,this.offsetHelper.style.width=450-(40+30*e-4*Math.max(e-1,0))+"px";const i=te.render(t.message);this.offsetHelper.appendChild(i);const s=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return(0,n.w_)(this.offsetHelper),s}getTemplateId(t){if(t instanceof H)return ee.TEMPLATE_ID;throw new Error("unknown element type: "+t)}}class te{static render(t,e){const i=document.createElement("span");for(const s of t.linkedText.nodes)if("string"==typeof s)i.appendChild(document.createTextNode(s));else{let t=s.title;!t&&s.href.startsWith("command:")?t=(0,Q.kg)(10748,"Click to execute command '{0}'",s.href.substr(8)):t||(t=s.href);const r=(0,n.$)("a",{href:s.href,title:t,tabIndex:0},s.label);if(e){const t=t=>{(0,n.sd)(t)&&n.fs.stop(t,!0),e.callback(s.href)},i=e.toDispose.add(new Zt.f(r,n.Bx.CLICK)).event,a=e.toDispose.add(new Zt.f(r,n.Bx.KEY_DOWN)).event,c=o.Jh.chain(a,(t=>t.filter((t=>{const e=new Xt.Zh(t);return e.equals(10)||e.equals(3)}))));e.toDispose.add(Ut.q.addTarget(r));const h=e.toDispose.add(new Zt.f(r,Ut.B.Tap)).event;o.Jh.any(i,h,c)(t,null,e.toDispose)}i.appendChild(r)}return i}}let ee=class{static{Ft=this}static{this.TEMPLATE_ID="notification"}constructor(t,e,i,s){this.actionRunner=t,this.contextMenuService=e,this.instantiationService=i,this.notificationService=s}get templateId(){return Ft.TEMPLATE_ID}renderTemplate(t){const e=Object.create(null);e.toDispose=new A.Cm,e.container=document.createElement("div"),e.container.classList.add("notification-list-item"),e.mainRow=document.createElement("div"),e.mainRow.classList.add("notification-list-item-main-row"),e.icon=document.createElement("div"),e.icon.classList.add("notification-list-item-icon","codicon"),e.message=document.createElement("div"),e.message.classList.add("notification-list-item-message");const i=this,s=document.createElement("div");return s.classList.add("notification-list-item-toolbar-container"),e.toolbar=new wt.E(s,{ariaLabel:(0,Q.kg)(10749,"Notification Actions"),actionViewItemProvider:(t,s)=>{if(t instanceof Ht)return e.toDispose.add(new Yt.d(t,{getActions(){const e=[],s={id:t.notification.sourceId,label:t.notification.source};if((0,x.Xq)(s)){const n=i.notificationService.getFilter(s)===x.Pl.ERROR;e.push((0,N.ih)({id:s.id,label:n?(0,Q.kg)(10750,"Turn On All Notifications from '{0}'",s.label):(0,Q.kg)(10751,"Turn Off Info and Warning Notifications from '{0}'",s.label),run:()=>i.notificationService.setFilter({...s,filter:n?x.Pl.OFF:x.Pl.ERROR})})),t.notification.actions?.secondary?.length&&e.push(new N.wv)}return Array.isArray(t.notification.actions?.secondary)&&e.push(...t.notification.actions.secondary),e}},this.contextMenuService,{...s,actionRunner:this.actionRunner,classNames:t.class}))},actionRunner:this.actionRunner}),e.toDispose.add(e.toolbar),e.detailsRow=document.createElement("div"),e.detailsRow.classList.add("notification-list-item-details-row"),e.source=document.createElement("div"),e.source.classList.add("notification-list-item-source"),e.buttonsContainer=document.createElement("div"),e.buttonsContainer.classList.add("notification-list-item-buttons-container"),t.appendChild(e.container),e.container.appendChild(e.detailsRow),e.detailsRow.appendChild(e.source),e.detailsRow.appendChild(e.buttonsContainer),e.container.appendChild(e.mainRow),e.mainRow.appendChild(e.icon),e.mainRow.appendChild(e.message),e.mainRow.appendChild(s),e.progress=new jt.z(t,Kt.oJ),e.toDispose.add(e.progress),e.renderer=this.instantiationService.createInstance(ie,e,this.actionRunner),e.toDispose.add(e.renderer),e}renderElement(t,e,i){i.renderer.setInput(t)}disposeTemplate(t){(0,A.AS)(t.toDispose)}};ee=Ft=(0,s.C)([(0,s.Q)(1,vt.Z),(0,s.Q)(2,q._Y),(0,s.Q)(3,w.O)],ee);let ie=class extends A.jG{static{Wt=this}static{this.SEVERITIES=[P.A.Info,P.A.Warning,P.A.Error]}constructor(t,e,i,s,n,o,r){super(),this.template=t,this.actionRunner=e,this.openerService=i,this.instantiationService=s,this.keybindingService=n,this.contextMenuService=o,this.hoverService=r,this.inputDisposables=this._register(new A.Cm),Wt.closeNotificationAction||(Wt.closeNotificationAction=s.createInstance(Vt,Vt.ID,Vt.LABEL),Wt.expandNotificationAction=s.createInstance(zt,zt.ID,zt.LABEL),Wt.collapseNotificationAction=s.createInstance(Ot,Ot.ID,Ot.LABEL))}setInput(t){this.inputDisposables.clear(),this.render(t)}render(t){this.template.container.classList.toggle("expanded",t.expanded),this.inputDisposables.add((0,n.ko)(this.template.container,n.Bx.MOUSE_UP,(t=>{1===t.button&&n.fs.stop(t,!0)}))),this.inputDisposables.add((0,n.ko)(this.template.container,n.Bx.AUXCLICK,(e=>{t.hasProgress||1!==e.button||(n.fs.stop(e,!0),t.close())}))),this.renderSeverity(t);const e=this.inputDisposables.add(this.hoverService.setupManagedHover((0,$t.nZ)("mouse"),this.template.message,"")),i=this.renderMessage(t,e);this.renderSecondaryActions(t,i);const s=this.inputDisposables.add(this.hoverService.setupManagedHover((0,$t.nZ)("mouse"),this.template.source,""));this.renderSource(t,s),this.renderButtons(t),this.renderProgress(t),this.inputDisposables.add(t.onDidChangeContent((i=>{switch(i.kind){case 0:this.renderSeverity(t);break;case 3:this.renderProgress(t);break;case 1:this.renderMessage(t,e)}})))}renderSeverity(t){Wt.SEVERITIES.forEach((e=>{t.severity!==e&&this.template.icon.classList.remove(...Dt.L0.asClassNameArray(this.toSeverityIcon(e)))})),this.template.icon.classList.add(...Dt.L0.asClassNameArray(this.toSeverityIcon(t.severity)))}renderMessage(t,e){(0,n.w_)(this.template.message),this.template.message.appendChild(te.render(t.message,{callback:t=>this.openerService.open(bt.rz.parse(t),{allowCommands:!0}),toDispose:this.inputDisposables}));const i=t.canCollapse&&!t.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return e.update(i?this.template.message.textContent+"":""),i}renderSecondaryActions(t,e){const i=[];if((0,V.EI)(t.actions?.secondary)){const e=this.instantiationService.createInstance(Ht,Ht.ID,Ht.LABEL,t);i.push(e),this.inputDisposables.add(e)}let s=!1;t.canCollapse&&(t.expanded||t.source||e)&&(s=!0),s&&i.push(t.expanded?Wt.collapseNotificationAction:Wt.expandNotificationAction),t.hasProgress||i.push(Wt.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=t,i.forEach((t=>this.template.toolbar.push(t,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(t)})))}renderSource(t,e){t.expanded&&t.source?(this.template.source.textContent=(0,Q.kg)(10752,"Source: {0}",t.source),e.update(t.source)):(this.template.source.textContent="",e.update(""))}renderButtons(t){(0,n.w_)(this.template.buttonsContainer);const e=t.actions?t.actions.primary:void 0;if(t.expanded&&(0,V.EI)(e)){const i=this,s=new class extends N.LN{async runAction(e){i.actionRunner.run(e,t),e instanceof G&&e.keepOpen||t.close()}},o=this.inputDisposables.add(new ft.WN(this.template.buttonsContainer));for(let t=0;t<e.length;t++){const i=e[t],r={title:!0,secondary:t>0,...Kt.cv},a=i instanceof G?i.menu:void 0,c=this.inputDisposables.add(a?o.addButtonWithDropdown({...r,contextMenuProvider:this.contextMenuService,actions:a,actionRunner:s}):o.addButton(r));c.label=i.label,this.inputDisposables.add(c.onDidClick((t=>{t&&n.fs.stop(t,!0),s.run(i)})))}}}renderProgress(t){if(!t.hasProgress)return void this.template.progress.stop().hide();const e=t.progress.state;e.infinite?this.template.progress.infinite().show():"number"==typeof e.total||"number"==typeof e.worked?("number"!=typeof e.total||this.template.progress.hasTotal()||this.template.progress.total(e.total),"number"==typeof e.worked&&this.template.progress.setWorked(e.worked).show()):this.template.progress.done().hide()}toSeverityIcon(t){switch(t){case P.A.Warning:return St.W6.warning;case P.A.Error:return St.W6.error}return St.W6.info}getKeybindingLabel(t){const e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}};ie=Wt=(0,s.C)([(0,s.Q)(2,pt.C),(0,s.Q)(3,q._Y),(0,s.Q)(4,Qt.b),(0,s.Q)(5,vt.Z),(0,s.Q)(6,qt.T)],ie);var se=i(1180);let ne=class extends A.jG{constructor(t,e,i,s){super(),this.container=t,this.options=e,this.instantiationService=i,this.contextMenuService=s,this.viewModel=[]}show(){this.isVisible||(this.list||this.createNotificationsList(),this.isVisible=!0)}createNotificationsList(){this.listContainer=document.createElement("div"),this.listContainer.classList.add("notifications-list-container");const t=this._register(this.instantiationService.createInstance(gt)),e=this.instantiationService.createInstance(ee,t),i=this.listDelegate=new Jt(this.listContainer),s=this.options,o=this.list=this._register(this.instantiationService.createInstance(j.Ei,"NotificationsList",this.listContainer,i,[e],{...s,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:y.QZ},accessibilityProvider:this.instantiationService.createInstance(oe,s)})),r=this._register(this.instantiationService.createInstance(Gt,Gt.ID,Gt.LABEL));this._register(o.onContextMenu((e=>{e.element&&this.contextMenuService.showContextMenu({getAnchor:()=>e.anchor,getActions:()=>[r],getActionsContext:()=>e.element,actionRunner:t})}))),this._register(o.onMouseDblClick((t=>t.element.toggle())));const a=this._register((0,n.w5)(o.getHTMLElement()));this._register(a.onDidBlur((()=>{(0,n.zk)(this.listContainer).document.hasFocus()&&o.setFocus([])}))),$.LM.bindTo(o.contextKeyService),this._register(o.onDidChangeSelection((t=>{t.indexes.length>0&&o.setSelection([])}))),this.container.appendChild(this.listContainer)}updateNotificationsList(t,e,i=[]){const[s,o]=(0,se.Rd)(this.list,this.listContainer),r=(0,n.nR)(o),a=s.getFocus()[0],c=this.viewModel[a];let h=null;if("number"==typeof a&&(h=s.getRelativeTop(a)),this.viewModel.splice(t,e,...i),s.splice(t,e,i),s.layout(),0===this.viewModel.length)this.hide();else if("number"==typeof a){let t=0;if(c){let e=this.viewModel.indexOf(c);-1===e&&(e=a-1),e<this.viewModel.length&&e>=0&&(t=e)}"number"==typeof h&&s.reveal(t,h),s.setFocus([t])}this.isVisible&&r&&s.domFocus()}updateNotificationHeight(t){const e=this.viewModel.indexOf(t);if(-1===e)return;const[i,s]=(0,se.Rd)(this.list,this.listDelegate);i.updateElementHeight(e,s.getHeight(t)),i.layout()}hide(){this.isVisible&&this.list&&(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){this.list&&(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return!!this.listContainer&&(0,n.nR)(this.listContainer)}layout(t,e){this.listContainer&&this.list&&(this.listContainer.style.width=`${t}px`,"number"==typeof e&&(this.list.getHTMLElement().style.maxHeight=`${e}px`),this.list.layout())}dispose(){this.hide(),super.dispose()}};ne=(0,s.C)([(0,s.Q)(2,q._Y),(0,s.Q)(3,vt.Z)],ne);let oe=class{constructor(t,e,i){this._options=t,this._keybindingService=e,this._configurationService=i}getAriaLabel(t){let e;const i=this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel();return this._configurationService.getValue("accessibility.verbosity.notification")&&(e=i?(0,Q.kg)(7088,"Inspect the response in the accessible view with {0}",i):(0,Q.kg)(7089,"Inspect the response in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding")),t.source?e?(0,Q.kg)(7092,"{0}, source: {1}, notification, {2}",t.message.raw,t.source,e):(0,Q.kg)(7093,"{0}, source: {1}, notification",t.message.raw,t.source):e?(0,Q.kg)(7090,"{0}, notification, {1}",t.message.raw,e):(0,Q.kg)(7091,"{0}, notification",t.message.raw)}getWidgetAriaLabel(){return this._options.widgetAriaLabel??(0,Q.kg)(7094,"Notifications List")}getRole(){return"dialog"}};oe=(0,s.C)([(0,s.Q)(1,Qt.b),(0,s.Q)(2,b.p)],oe),i(86849);var re,ae=i(55325),ce=(i(27785),i(82437)),he=(i(32802),i(77692),i(16115),i(79849),i(17960),i(69416),i(10380),i(92449)),le=i(19730);let de=class extends C.lR{static{re=this}static{this.MAX_DIMENSIONS=new n.fg(450,400)}static{this.MAX_NOTIFICATION_SOURCES=10}constructor(t,e,i,s,n,r,a,c,h,l,d){super(i),this.container=t,this.model=e,this.instantiationService=s,this.layoutService=n,this.contextKeyService=r,this.editorGroupService=a,this.keybindingService=c,this.notificationService=h,this.accessibilitySignalService=l,this.contextMenuService=d,this._onDidChangeVisibility=this._register(new o.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.notificationsCenterVisibleContextKey=$.d7.bindTo(this.contextKeyService),this.notificationsCenterVisibleContextKey=$.d7.bindTo(r),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification((t=>this.onDidChangeNotification(t)))),this._register(this.layoutService.onDidLayoutMainContainer((t=>this.layout(n.fg.lift(t))))),this._register(this.notificationService.onDidChangeFilter((()=>this.onDidChangeFilter())))}onDidChangeFilter(){this.notificationService.getFilter()===x.Pl.ERROR&&this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){const t=(0,se.eU)(this.notificationsList);return t.show(),void t.focusFirst()}this.notificationsCenterContainer||this.create(),this.updateTitle();const[t,e]=(0,se.Rd)(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,e.classList.add("visible"),t.show(),this.layout(this.workbenchDimensions),t.updateNotificationsList(0,0,this.model.notifications),t.focusFirst(),this.updateStyles(),this.model.notifications.forEach((t=>t.updateVisibility(!0))),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){const[t,e]=(0,se.Rd)(this.notificationsCenterTitle,this.clearAllAction);0===this.model.notifications.length?(t.textContent=(0,Q.kg)(2651,"No new notifications"),e.enabled=!1):(t.textContent=(0,Q.kg)(2652,"Notifications"),e.enabled=this.model.notifications.some((t=>!t.hasProgress)))}create(){this.notificationsCenterContainer=document.createElement("div"),this.notificationsCenterContainer.classList.add("notifications-center"),this.notificationsCenterHeader=document.createElement("div"),this.notificationsCenterHeader.classList.add("notifications-center-header"),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=document.createElement("span"),this.notificationsCenterTitle.classList.add("notifications-center-header-title"),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);const t=document.createElement("div");t.classList.add("notifications-center-header-toolbar"),this.notificationsCenterHeader.appendChild(t);const e=this._register(this.instantiationService.createInstance(gt)),i=this,s=this._register(new wt.E(t,{ariaLabel:(0,Q.kg)(2653,"Notification Center Actions"),actionRunner:e,actionViewItemProvider:(t,s)=>{if(t.id===Bt.ID)return this._register(this.instantiationService.createInstance(Yt.d,t,{getActions(){const t=[(0,N.ih)({id:Lt.ID,label:i.notificationService.getFilter()===x.Pl.OFF?(0,Q.kg)(2654,"Enable Do Not Disturb Mode"):(0,Q.kg)(2655,"Disable Do Not Disturb Mode"),run:()=>i.notificationService.setFilter(i.notificationService.getFilter()===x.Pl.OFF?x.Pl.ERROR:x.Pl.OFF)})],e=i.notificationService.getFilters().sort(((t,e)=>t.label.localeCompare(e.label)));for(const s of e.slice(0,re.MAX_NOTIFICATION_SOURCES))1===t.length&&t.push(new N.wv),t.push((0,N.ih)({id:`${Lt.ID}.${s.id}`,label:s.label,checked:s.filter!==x.Pl.ERROR,run:()=>i.notificationService.setFilter({...s,filter:s.filter===x.Pl.ERROR?x.Pl.OFF:x.Pl.ERROR})}));return e.length>re.MAX_NOTIFICATION_SOURCES&&(t.push(new N.wv),t.push(i._register(i.instantiationService.createInstance(Pt,Pt.ID,(0,Q.kg)(2656,"More…"))))),t}},this.contextMenuService,{...s,actionRunner:e,classNames:t.class,keybindingProvider:t=>this.keybindingService.lookupKeybinding(t.id)}))}}));this.clearAllAction=this._register(this.instantiationService.createInstance(Tt,Tt.ID,Tt.LABEL)),s.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.configureDoNotDisturbAction=this._register(this.instantiationService.createInstance(Bt,Bt.ID,Bt.LABEL)),s.push(this.configureDoNotDisturbAction,{icon:!0,label:!1});const n=this._register(this.instantiationService.createInstance(Rt,Rt.ID,Rt.LABEL));s.push(n,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(n)}),this.notificationsList=this.instantiationService.createInstance(ne,this.notificationsCenterContainer,{widgetAriaLabel:(0,Q.kg)(2657,"Notifications Center")}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(t){const e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}onDidChangeNotification(t){if(!this._isVisible)return;let e=!1;const[i,s]=(0,se.Rd)(this.notificationsList,this.notificationsCenterContainer);switch(t.kind){case 0:i.updateNotificationsList(t.index,0,[t.item]),t.item.updateVisibility(!0);break;case 1:switch(t.detail){case 2:i.updateNotificationsList(t.index,1,[t.item]);break;case 1:t.item.expanded&&i.updateNotificationHeight(t.item)}break;case 2:i.updateNotificationsList(t.index,1,[t.item]);break;case 3:e=(0,n.nR)(s),i.updateNotificationsList(t.index,1),t.item.updateVisibility(!1)}this.updateTitle(),0===this.model.notifications.length&&(this.hide(),e&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;const t=(0,n.nR)(this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove("visible"),this.notificationsList.hide(),this.model.notifications.forEach((t=>t.updateVisibility(!1))),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),t&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){const t=this.getColor(ce.f9);this.notificationsCenterContainer.style.boxShadow=t?`0 0 8px 2px ${t}`:"";const e=this.getColor(y.cb);this.notificationsCenterContainer.style.border=e?`1px solid ${e}`:"";const i=this.getColor(y.tE);this.notificationsCenterHeader.style.color=i??"";const s=this.getColor(y.cH);this.notificationsCenterHeader.style.background=s??""}}layout(t){if(this.workbenchDimensions=t,this._isVisible&&this.notificationsCenterContainer){const t=re.MAX_DIMENSIONS.width,e=re.MAX_DIMENSIONS.height;let i=t,s=e;this.workbenchDimensions&&(i=this.workbenchDimensions.width,i-=16,s=this.workbenchDimensions.height-35,this.layoutService.isVisible("workbench.parts.statusbar",le.Gs)&&(s-=22),this.layoutService.isVisible("workbench.parts.titlebar",le.Gs)&&(s-=22),s-=24),(0,se.eU)(this.notificationsList).layout(Math.min(t,i),Math.min(e,s))}}clearAll(){this.hide();for(const t of[...this.model.notifications])t.hasProgress||t.close(),this.accessibilitySignalService.playSignal(tt.Rh.clear)}};de=re=(0,s.C)([(0,s.Q)(2,S.G),(0,s.Q)(3,q._Y),(0,s.Q)(4,m.Y),(0,s.Q)(5,k.f),(0,s.Q)(6,he.m),(0,s.Q)(7,Qt.b),(0,s.Q)(8,w.O),(0,s.Q)(9,et.N),(0,s.Q)(10,vt.Z)],de);var ue=i(70481);class me extends A.jG{constructor(t){super(),this.model=t;for(const e of t.notifications)this.triggerAriaAlert(e);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification((t=>this.onDidChangeNotification(t))))}onDidChangeNotification(t){0===t.kind&&(this.triggerAriaAlert(t.item),t.item.severity===P.A.Error&&(t.item.message.original instanceof Error?console.error(t.item.message.original):console.error((0,M.rx)(t.item.message.linkedText.toString(),!0))))}triggerAriaAlert(t){if(t.priority===x.AE.SILENT)return;const e=t.onDidChangeContent((e=>{1===e.kind&&this.doTriggerAriaAlert(t)}));o.Jh.once(t.onDidClose)((()=>e.dispose())),this.doTriggerAriaAlert(t)}doTriggerAriaAlert(t){let e;e=t.severity===P.A.Error?(0,Q.kg)(2658,"Error: {0}",t.message.linkedText.toString()):t.severity===P.A.Warning?(0,Q.kg)(2659,"Warning: {0}",t.message.linkedText.toString()):(0,Q.kg)(2660,"Info: {0}",t.message.linkedText.toString()),(0,ue.xE)(e)}}var ge=i(47813);let pe=class extends A.jG{constructor(t,e,i){super(),this.model=t,this.statusbarService=e,this.notificationService=i,this.newNotificationsCount=0,this.isNotificationsCenterVisible=!1,this.isNotificationsToastsVisible=!1,this.updateNotificationsCenterStatusItem(),t.statusMessage&&this.doSetStatusMessage(t.statusMessage),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification((t=>this.onDidChangeNotification(t)))),this._register(this.model.onDidChangeStatusMessage((t=>this.onDidChangeStatusMessage(t)))),this._register(this.notificationService.onDidChangeFilter((()=>this.updateNotificationsCenterStatusItem())))}onDidChangeNotification(t){this.isNotificationsCenterVisible||(0===t.kind?this.newNotificationsCount++:3===t.kind&&this.newNotificationsCount>0&&this.newNotificationsCount--),this.updateNotificationsCenterStatusItem()}updateNotificationsCenterStatusItem(){let t=0;if(!this.isNotificationsCenterVisible&&!this.isNotificationsToastsVisible)for(const e of this.model.notifications)e.hasProgress&&t++;let e={name:(0,Q.kg)(2661,"Notifications"),text:t>0||this.newNotificationsCount>0?"$(bell-dot)":"$(bell)",ariaLabel:(0,Q.kg)(2661,"Notifications"),command:this.isNotificationsCenterVisible?st:it,tooltip:this.getTooltip(t),showBeak:this.isNotificationsCenterVisible};this.notificationService.getFilter()===x.Pl.ERROR&&(e={...e,text:t>0||this.newNotificationsCount>0?"$(bell-slash-dot)":"$(bell-slash)",ariaLabel:(0,Q.kg)(2662,"Do Not Disturb"),tooltip:(0,Q.kg)(2663,"Do Not Disturb Mode is Enabled")}),this.notificationsCenterStatusItem?this.notificationsCenterStatusItem.update(e):this.notificationsCenterStatusItem=this.statusbarService.addEntry(e,"status.notifications",1,-Number.MAX_VALUE)}getTooltip(t){return this.isNotificationsCenterVisible?(0,Q.kg)(2664,"Hide Notifications"):0===this.model.notifications.length?(0,Q.kg)(2665,"No Notifications"):0===t?0===this.newNotificationsCount?(0,Q.kg)(2666,"No New Notifications"):1===this.newNotificationsCount?(0,Q.kg)(2667,"1 New Notification"):(0,Q.kg)(2668,"{0} New Notifications",this.newNotificationsCount):0===this.newNotificationsCount?(0,Q.kg)(2669,"No New Notifications ({0} in progress)",t):1===this.newNotificationsCount?(0,Q.kg)(2670,"1 New Notification ({0} in progress)",t):(0,Q.kg)(2671,"{0} New Notifications ({1} in progress)",this.newNotificationsCount,t)}update(t,e){let i=!1;this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.newNotificationsCount=0,i=!0),this.isNotificationsToastsVisible!==e&&(this.isNotificationsToastsVisible=e,i=!0),i&&this.updateNotificationsCenterStatusItem()}onDidChangeStatusMessage(t){const e=t.item;switch(t.kind){case 0:this.doSetStatusMessage(e);break;case 1:this.currentStatusMessage&&this.currentStatusMessage[0]===e&&((0,A.AS)(this.currentStatusMessage[1]),this.currentStatusMessage=void 0)}}doSetStatusMessage(t){const e=t.message,i=t.options&&"number"==typeof t.options.showAfter?t.options.showAfter:0,s=t.options&&"number"==typeof t.options.hideAfter?t.options.hideAfter:-1;let n;this.currentStatusMessage&&(0,A.AS)(this.currentStatusMessage[1]);let o,r=setTimeout((()=>{n=this.statusbarService.addEntry({name:(0,Q.kg)(2672,"Status Message"),text:e,ariaLabel:e},"status.message",0,-Number.MAX_VALUE),r=null}),i);const a={dispose:()=>{r&&clearTimeout(r),o&&clearTimeout(o),n?.dispose()}};s>0&&(o=setTimeout((()=>a.dispose()),s)),this.currentStatusMessage=[t,a]}};pe=(0,s.C)([(0,s.Q)(1,ge.S),(0,s.Q)(2,w.O)],pe),(0,v.A)(".monaco-workbench>.notifications-toasts{bottom:26px;display:none;overflow:hidden;position:absolute;right:3px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-toasts{bottom:3px}.monaco-workbench>.notifications-toasts.visible{display:flex;flex-direction:column}.monaco-workbench>.notifications-toasts .notification-toast-container{overflow:hidden}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast{margin:8px;opacity:0;transform:translate3d(0,100%,0);transition:transform .3s ease-out,opacity .3s ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list-row,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list:not(.element-focused):focus:before,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-scrollable-element,.monaco-workbench>.notifications-toasts .notifications-list-container{border-radius:4px}.monaco-workbench.reduce-motion>.notifications-toasts .notification-toast-container>.notification-toast{transition:transform 0ms ease-out,opacity 0ms ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in{opacity:1;transform:none}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in-done{opacity:1;transform:none;transition:none}.monaco-workbench>.notifications-toasts .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}",{});var be,fe,we=i(16849);!function(t){t[t.HIDDEN_OR_VISIBLE=0]="HIDDEN_OR_VISIBLE",t[t.HIDDEN=1]="HIDDEN",t[t.VISIBLE=2]="VISIBLE"}(fe||(fe={}));let ve=class extends C.lR{static{be=this}static{this.MAX_WIDTH=450}static{this.MAX_NOTIFICATIONS=3}static{this.PURGE_TIMEOUT={[P.A.Info]:15e3,[P.A.Warning]:18e3,[P.A.Error]:2e4}}static{this.SPAM_PROTECTION={interval:800,limit:this.MAX_NOTIFICATIONS}}get isVisible(){return!!this._isVisible}constructor(t,e,i,s,n,a,c,h,l){super(n),this.container=t,this.model=e,this.instantiationService=i,this.layoutService=s,this.editorGroupService=a,this.contextKeyService=c,this.lifecycleService=h,this.hostService=l,this._onDidChangeVisibility=this._register(new o.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._isVisible=!1,this.mapNotificationToToast=new Map,this.mapNotificationToDisposable=new Map,this.notificationsToastsVisibleContextKey=$.M8.bindTo(this.contextKeyService),this.addedToastsIntervalCounter=new r.qw(be.SPAM_PROTECTION.interval),this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayoutMainContainer((t=>this.layout(n.fg.lift(t))))),this.lifecycleService.when(3).then((()=>{this.model.notifications.forEach((t=>this.addToast(t))),this._register(this.model.onDidChangeNotification((t=>this.onDidChangeNotification(t))))})),this._register(this.model.onDidChangeFilter((({global:t,sources:e})=>{if(t===x.Pl.ERROR)this.hide();else if(e)for(const[t]of this.mapNotificationToToast)"string"==typeof t.sourceId&&e.get(t.sourceId)===x.Pl.ERROR&&t.severity!==P.A.Error&&t.priority!==x.AE.URGENT&&this.removeToast(t)})))}onDidChangeNotification(t){switch(t.kind){case 0:return this.addToast(t.item);case 3:return this.removeToast(t.item)}}addToast(t){if(this.isNotificationsCenterVisible)return;if(t.priority===x.AE.SILENT)return;if(this.addedToastsIntervalCounter.increment()>be.SPAM_PROTECTION.limit)return;const e=new A.Cm;this.mapNotificationToDisposable.set(t,e),e.add((0,n.PG)((0,n.zk)(this.container),(()=>this.doAddToast(t,e))))}doAddToast(t,e){let i=this.notificationsToastsContainer;i||(i=this.notificationsToastsContainer=document.createElement("div"),i.classList.add("notifications-toasts"),this.container.appendChild(i)),i.classList.add("visible");const s=document.createElement("div");s.classList.add("notification-toast-container");const r=i.firstChild;r?i.insertBefore(s,r):i.appendChild(s);const a=document.createElement("div");a.classList.add("notification-toast"),s.appendChild(a);const c=this.instantiationService.createInstance(ne,a,{verticalScrollMode:2,widgetAriaLabel:t.source?(0,Q.kg)(2640,"{0}, source: {1}, notification",t.message.raw,t.source):(0,Q.kg)(2639,"{0}, notification",t.message.raw)});e.add(c);const h={item:t,list:c,container:s,toast:a};this.mapNotificationToToast.set(t,h),e.add((0,A.s)((()=>this.updateToastVisibility(h,!1)))),c.show();const l=this.computeMaxDimensions();this.layoutLists(l.width),c.updateNotificationsList(0,0,[t]),this.layoutContainer(l.height),e.add(t.onDidChangeExpansion((()=>{c.updateNotificationsList(0,1,[t])}))),e.add(t.onDidChangeContent((e=>{switch(e.kind){case 2:c.updateNotificationsList(0,1,[t]);break;case 1:t.expanded&&c.updateNotificationHeight(t)}}))),o.Jh.once(t.onDidClose)((()=>{this.removeToast(t)})),this.purgeNotification(t,s,c,e),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),a.classList.add("notification-fade-in"),e.add((0,n.ko)(a,"transitionend",(()=>{a.classList.remove("notification-fade-in"),a.classList.add("notification-fade-in-done")}))),t.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(t,e,i,s){let o,r,a=!1;s.add((0,n.ko)(e,n.Bx.MOUSE_OVER,(()=>a=!0))),s.add((0,n.ko)(e,n.Bx.MOUSE_OUT,(()=>a=!1)));const c=()=>{o=setTimeout((()=>{this.hostService.hasFocus?t.sticky||i.hasFocus()||a?c():this.removeToast(t):r||(r=this.hostService.onDidChangeFocus((t=>{t&&c()})),s.add(r))}),be.PURGE_TIMEOUT[t.severity])};c(),s.add((0,A.s)((()=>clearTimeout(o))))}removeToast(t){let e=!1;const i=this.mapNotificationToToast.get(t);i&&((0,n.nR)(i.container)&&(e=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(t));const s=this.mapNotificationToDisposable.get(t);s&&((0,A.AS)(s),this.mapNotificationToDisposable.delete(t)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),e&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach((t=>(0,A.AS)(t))),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){this.notificationsToastsContainer?.classList.remove("visible"),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){const t=!!this.notificationsToastsContainer&&(0,n.nR)(this.notificationsToastsContainer);this.removeToasts(),t&&this.editorGroupService.activeGroup.focus()}focus(){const t=this.getToasts(fe.VISIBLE);return t.length>0&&(t[0].list.focusFirst(),!0)}focusNext(){const t=this.getToasts(fe.VISIBLE);for(let e=0;e<t.length;e++)if(t[e].list.hasFocus()){const i=t[e+1];if(i)return i.list.focusFirst(),!0;break}return!1}focusPrevious(){const t=this.getToasts(fe.VISIBLE);for(let e=0;e<t.length;e++)if(t[e].list.hasFocus()){const i=t[e-1];if(i)return i.list.focusFirst(),!0;break}return!1}focusFirst(){const t=this.getToasts(fe.VISIBLE)[0];return!!t&&(t.list.focusFirst(),!0)}focusLast(){const t=this.getToasts(fe.VISIBLE);return t.length>0&&(t[t.length-1].list.focusFirst(),!0)}update(t){this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach((({toast:t})=>{const e=this.getColor(y.QZ);t.style.background=e||"";const i=this.getColor(ce.f9);t.style.boxShadow=i?`0 0 8px 2px ${i}`:"";const s=this.getColor(y.s8);t.style.border=s?`1px solid ${s}`:""}))}getToasts(t){const e=[];return this.mapNotificationToToast.forEach((i=>{switch(t){case fe.HIDDEN_OR_VISIBLE:e.push(i);break;case fe.HIDDEN:this.isToastInDOM(i)||e.push(i);break;case fe.VISIBLE:this.isToastInDOM(i)&&e.push(i)}})),e.reverse()}layout(t){this.workbenchDimensions=t;const e=this.computeMaxDimensions();e.height&&this.layoutContainer(e.height),this.layoutLists(e.width)}computeMaxDimensions(){const t=be.MAX_WIDTH;let e,i=t;return this.workbenchDimensions&&(i=this.workbenchDimensions.width,i-=16,e=this.workbenchDimensions.height,this.layoutService.isVisible("workbench.parts.statusbar",le.Gs)&&(e-=22),this.layoutService.isVisible("workbench.parts.titlebar",le.Gs)&&(e-=22),e-=24),e="number"==typeof e?Math.round(.618*e):0,new n.fg(Math.min(t,i),e)}layoutLists(t){this.mapNotificationToToast.forEach((({list:e})=>e.layout(t)))}layoutContainer(t){let e=0;for(const i of this.getToasts(fe.HIDDEN_OR_VISIBLE)){i.container.style.opacity="0",this.updateToastVisibility(i,!0),t-=i.container.offsetHeight;let s=!1;e===be.MAX_NOTIFICATIONS?s=!1:t>=0&&(s=!0),this.updateToastVisibility(i,s),i.container.style.opacity="",s&&e++}}updateToastVisibility(t,e){if(this.isToastInDOM(t)===e)return;const i=(0,se.eU)(this.notificationsToastsContainer);e?i.appendChild(t.container):t.container.remove(),t.item.updateVisibility(e)}isToastInDOM(t){return!!t.container.parentElement}};ve=be=(0,s.C)([(0,s.Q)(2,q._Y),(0,s.Q)(3,m.Y),(0,s.Q)(4,S.G),(0,s.Q)(5,he.m),(0,s.Q)(6,k.f),(0,s.Q)(7,f.f),(0,s.Q)(8,we.v)],ve);var ye,Ce=i(83629),Se=i(36055),ke=i(49865),De=i(96670),Ee=i(80512),Ie=i(39371),_e=i(7869),xe=i(81200),Me=i(77829),Ae=i(77192),Ne=i(3560),Ve=i(3272),Te=i(12417),Le=i(27064),Pe=i(19510),Be=i(96485),Re=i(34559),ze=i(92986),Oe=i(65965),He=i(44622),Ge=i(30875),Fe=i(27076),We=i(82561),Qe=i(96334),je=i(45484);!function(t){t.SIDEBAR_HIDDEN="nosidebar",t.MAIN_EDITOR_AREA_HIDDEN="nomaineditorarea",t.PANEL_HIDDEN="nopanel",t.AUXILIARYBAR_HIDDEN="noauxiliarybar",t.STATUSBAR_HIDDEN="nostatusbar",t.FULLSCREEN="fullscreen",t.MAXIMIZED="maximized",t.WINDOW_BORDER="border"}(ye||(ye={}));const Ye=["workbench.activityBar.location","window.commandCenter","workbench.editor.editorActionsLocation","workbench.layoutControl.enabled","window.menuBarVisibility","window.titleBarStyle","window.customTitleBarVisibility"];class Ze extends A.jG{get activeContainer(){return this.getContainerFromDocument((0,n.a)())}get containers(){const t=[];for(const{window:e}of(0,n.sl)())t.push(this.getContainerFromDocument(e.document));return t}getContainerFromDocument(t){return t===this.mainContainer.ownerDocument?this.mainContainer:t.body.getElementsByClassName("monaco-workbench")[0]}whenContainerStylesLoaded(t){return this.containerStylesLoaded.get(t.vscodeWindowId)}get mainContainerDimension(){return this._mainContainerDimension}get activeContainerDimension(){return this.getContainerDimension(this.activeContainer)}getContainerDimension(t){return t===this.mainContainer?this.mainContainerDimension:(0,n.tG)(t)}get mainContainerOffset(){return this.computeContainerOffset(le.Gs)}get activeContainerOffset(){return this.computeContainerOffset((0,n.zk)(this.activeContainer))}computeContainerOffset(t){let e=0,i=0;this.isVisible("workbench.parts.banner")&&(e=this.getPart("workbench.parts.banner").maximumHeight,i=e);const s=this.isVisible("workbench.parts.titlebar",t);return s&&(e+=this.getPart("workbench.parts.titlebar").maximumHeight,i=e),s&&!1!==this.configurationService.getValue("window.commandCenter")&&(i=6),{top:e,quickPickTop:i}}constructor(t){super(),this.parent=t,this._onDidChangeZenMode=this._register(new o.vl),this.onDidChangeZenMode=this._onDidChangeZenMode.event,this._onDidChangeMainEditorCenteredLayout=this._register(new o.vl),this.onDidChangeMainEditorCenteredLayout=this._onDidChangeMainEditorCenteredLayout.event,this._onDidChangePanelAlignment=this._register(new o.vl),this.onDidChangePanelAlignment=this._onDidChangePanelAlignment.event,this._onDidChangeWindowMaximized=this._register(new o.vl),this.onDidChangeWindowMaximized=this._onDidChangeWindowMaximized.event,this._onDidChangePanelPosition=this._register(new o.vl),this.onDidChangePanelPosition=this._onDidChangePanelPosition.event,this._onDidChangePartVisibility=this._register(new o.vl),this.onDidChangePartVisibility=this._onDidChangePartVisibility.event,this._onDidChangeNotificationsVisibility=this._register(new o.vl),this.onDidChangeNotificationsVisibility=this._onDidChangeNotificationsVisibility.event,this._onDidLayoutMainContainer=this._register(new o.vl),this.onDidLayoutMainContainer=this._onDidLayoutMainContainer.event,this._onDidLayoutActiveContainer=this._register(new o.vl),this.onDidLayoutActiveContainer=this._onDidLayoutActiveContainer.event,this._onDidLayoutContainer=this._register(new o.vl),this.onDidLayoutContainer=this._onDidLayoutContainer.event,this._onDidAddContainer=this._register(new o.vl),this.onDidAddContainer=this._onDidAddContainer.event,this._onDidChangeActiveContainer=this._register(new o.vl),this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event,this.mainContainer=document.createElement("div"),this.containerStylesLoaded=new Map,this.parts=new Map,this.initialized=!1,this.disposed=!1,this._openedDefaultEditors=!1,this.whenReadyPromise=new r.Zv,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new r.Zv,this.whenRestored=this.whenRestoredPromise.p,this.restored=!1}initLayout(t){this.environmentService=t.get(Ve.L),this.configurationService=t.get(b.p),this.hostService=t.get(we.v),this.contextService=t.get(Me.V),this.storageService=t.get(p.C),this.workingCopyBackupService=t.get(De.L),this.themeService=t.get(S.G),this.extensionService=t.get(He.c),this.logService=t.get(Ge.r),this.telemetryService=t.get(Z.k),this.auxiliaryWindowService=t.get(je.f),this.editorService=t.get(Te.I),this.mainPartEditorService=this.editorService.createScoped("main",this._store),this.editorGroupService=t.get(he.m),this.paneCompositeService=t.get(We.b),this.viewDescriptorService=t.get(ze.X),this.titleService=t.get(Ae.p),this.notificationService=t.get(w.O),this.statusBarService=t.get(ge.S),t.get(Fe.f),this.registerLayoutListeners(),this.initLayoutState(t.get(f.f),t.get(Be.$))}registerLayoutListeners(){const t=()=>{this.isVisible("workbench.parts.editor",le.Gs)||this.toggleMaximizedPanel()};this.editorGroupService.whenRestored.then((()=>{this._register(this.mainPartEditorService.onDidVisibleEditorsChange(t)),this._register(this.editorGroupService.mainPart.onDidActivateGroup(t)),this._register(this.mainPartEditorService.onDidActiveEditorChange((()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(qe.MAIN_EDITOR_CENTERED)))))})),this._register(this.configurationService.onDidChangeConfiguration((t=>{if([...Ye,ti.SIDEBAR_POSITION,ti.STATUSBAR_VISIBLE].some((e=>t.affectsConfiguration(e)))){const e=t.affectsConfiguration("workbench.editor.editorActionsLocation")&&"titleBar"===this.configurationService.getValue("workbench.editor.editorActionsLocation");let i=!1;if(t.affectsConfiguration("workbench.activityBar.location")){const t=this.configurationService.getValue("workbench.activityBar.location");i="top"===t||"bottom"===t}(i||e)&&"never"===this.configurationService.getValue("window.customTitleBarVisibility")&&this.configurationService.updateValue("window.customTitleBarVisibility","auto"),this.doUpdateLayoutConfiguration()}}))),this._register((0,a.EX)((t=>this.onFullscreenChanged(t)))),this._register(this.editorGroupService.mainPart.onDidAddGroup((()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(qe.MAIN_EDITOR_CENTERED))))),this._register(this.editorGroupService.mainPart.onDidRemoveGroup((()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(qe.MAIN_EDITOR_CENTERED))))),this._register(this.editorGroupService.mainPart.onDidChangeGroupMaximized((()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(qe.MAIN_EDITOR_CENTERED))))),this._register((0,n.ko)(this.mainContainer,n.Bx.SCROLL,(()=>this.mainContainer.scrollTop=0))),(l.uF||l.j9||l.HZ)&&!(0,Ne.tx)(this.configurationService)&&this._register(this.titleService.onMenubarVisibilityChange((t=>this.onMenubarToggled(t)))),this._register(this.themeService.onDidColorThemeChange((()=>this.updateWindowsBorder()))),this._register(this.hostService.onDidChangeFocus((t=>this.onWindowFocusChanged(t)))),this._register(this.hostService.onDidChangeActiveWindow((()=>this.onActiveWindowChanged()))),l.HZ&&"object"==typeof navigator.windowControlsOverlay&&this._register((0,n.ko)(navigator.windowControlsOverlay,"geometrychange",(()=>this.onDidChangeWCO()))),this._register(this.auxiliaryWindowService.onDidOpenAuxiliaryWindow((({window:t,disposables:e})=>{const i=t.window.vscodeWindowId;this.containerStylesLoaded.set(i,t.whenStylesHaveLoaded),t.whenStylesHaveLoaded.then((()=>this.containerStylesLoaded.delete(i))),e.add((0,A.s)((()=>this.containerStylesLoaded.delete(i))));const s=e.add(new A.Cm);this._onDidAddContainer.fire({container:t.container,disposables:s}),e.add(t.onDidLayout((e=>this.handleContainerDidLayout(t.container,e))))})))}onMenubarToggled(t){if(t!==this.state.runtime.menuBar.toggled){this.state.runtime.menuBar.toggled=t;const e=(0,Ne.nx)(this.configurationService);l.HZ&&"toggle"===e?this.workbenchGrid.setViewVisible(this.titleBarPartView,(0,u.Xy)(this.configurationService,le.Gs,this.state.runtime.menuBar.toggled)):!this.state.runtime.mainWindowFullscreen||"toggle"!==e&&"classic"!==e||this.workbenchGrid.setViewVisible(this.titleBarPartView,(0,u.Xy)(this.configurationService,le.Gs,this.state.runtime.menuBar.toggled)),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}handleContainerDidLayout(t,e){t===this.mainContainer&&this._onDidLayoutMainContainer.fire(e),(0,n.G1)(t)&&this._onDidLayoutActiveContainer.fire(e),this._onDidLayoutContainer.fire({container:t,dimension:e})}onFullscreenChanged(t){t===le.Gs.vscodeWindowId&&(this.state.runtime.mainWindowFullscreen=(0,a.aS)(le.Gs),this.state.runtime.mainWindowFullscreen?this.mainContainer.classList.add(ye.FULLSCREEN):(this.mainContainer.classList.remove(ye.FULLSCREEN),this.stateModel.getRuntimeValue(qe.ZEN_MODE_EXIT_INFO).transitionedToFullScreen&&this.isZenModeActive()&&this.toggleZenMode()),this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen,this.workbenchGrid.setViewVisible(this.titleBarPartView,(0,u.Xy)(this.configurationService,le.Gs,this.state.runtime.menuBar.toggled)),this.updateWindowsBorder(!0))}onActiveWindowChanged(){const t=this.getActiveContainerId();this.state.runtime.activeContainerId!==t&&(this.state.runtime.activeContainerId=t,this.updateWindowsBorder(),this._onDidChangeActiveContainer.fire())}onWindowFocusChanged(t){this.state.runtime.hasFocus!==t&&(this.state.runtime.hasFocus=t,this.updateWindowsBorder())}getActiveContainerId(){const t=this.activeContainer;return(0,n.zk)(t).vscodeWindowId}doUpdateLayoutConfiguration(t){this.updateCustomTitleBarVisibility(),this.updateMenubarVisibility(!!t),this.editorGroupService.whenRestored.then((()=>{this.centerMainEditorLayout(this.stateModel.getRuntimeValue(qe.MAIN_EDITOR_CENTERED),t)}))}setSideBarPosition(t){const e=this.getPart("workbench.parts.activitybar"),i=this.getPart("workbench.parts.sidebar"),s=this.getPart("workbench.parts.auxiliarybar"),n=0===t?"left":"right",o=1===t?"left":"right",r=this.getPanelAlignment(),a=this.getPanelPosition();this.stateModel.setRuntimeValue(qe.SIDEBAR_POSITON,t);const c=(0,se.eU)(e.getContainer()),h=(0,se.eU)(i.getContainer()),l=(0,se.eU)(s.getContainer());c.classList.remove(o),h.classList.remove(o),c.classList.add(n),h.classList.add(n),l.classList.remove(n),l.classList.add(o),e.updateStyles(),i.updateStyles(),s.updateStyles(),this.adjustPartPositions(t,r,a)}updateWindowsBorder(t=!1){if(l.HZ||l.uF||(0,Ne.YQ)(this.configurationService)||(0,Ne.tx)(this.configurationService))return;const e=this.themeService.getColorTheme(),i=e.getColor(y.XY),s=e.getColor(y.CF),o=this.hasMainWindowBorder();for(const t of this.containers){const e=t===this.mainContainer,o=this.activeContainer===t,r=(0,n.Q2)((0,n.zk)(t));let a=!1;if(!this.state.runtime.mainWindowFullscreen&&!this.state.runtime.maximized.has(r)&&(i||s)){a=!0;const e=o&&this.state.runtime.hasFocus?i:s??i;t.style.setProperty("--window-border-color",e?.toString()??"transparent")}e&&(this.state.runtime.mainWindowBorder=a),t.classList.toggle(ye.WINDOW_BORDER,a)}t||o===this.hasMainWindowBorder()||this.layout()}initLayoutState(t,e){this.stateModel=new ei(this.storageService,this.configurationService,this.contextService,this.parent),this.stateModel.load(),this.stateModel.getRuntimeValue(qe.PANEL_HIDDEN)&&this.stateModel.getRuntimeValue(qe.EDITOR_HIDDEN)&&this.stateModel.setRuntimeValue(qe.EDITOR_HIDDEN,!1),this._register(this.stateModel.onDidChangeState((t=>{t.key===qe.ACTIVITYBAR_HIDDEN&&this.setActivityBarHidden(t.value),t.key===qe.STATUSBAR_HIDDEN&&this.setStatusBarHidden(t.value),t.key===qe.SIDEBAR_POSITON&&this.setSideBarPosition(t.value),t.key===qe.PANEL_POSITION&&this.setPanelPosition(t.value),t.key===qe.PANEL_ALIGNMENT&&this.setPanelAlignment(t.value),this.doUpdateLayoutConfiguration()})));const i=this.getInitialEditorsState();i&&this.logService.trace("Initial editor state",i);const s={layout:{editors:i?.layout},editor:{restoreEditors:this.shouldRestoreEditors(this.contextService,i),editorsToOpen:this.resolveEditorsToOpen(e,i)},views:{defaults:this.getDefaultLayoutViews(this.environmentService,this.storageService),containerToRestore:{}}},n={activeContainerId:this.getActiveContainerId(),mainWindowFullscreen:(0,a.aS)(le.Gs),hasFocus:this.hostService.hasFocus,maximized:new Set,mainWindowBorder:!1,menuBar:{toggled:!1},zenMode:{transitionDisposables:new A.$w}};if(this.state={initialization:s,runtime:n},this.isVisible("workbench.parts.sidebar")){let e;e=!this.environmentService.isBuilt||3===t.startupKind||this.environmentService.isExtensionDevelopment&&!this.environmentService.extensionTestsLocationURI?this.storageService.get(Ie.E.activeViewletSettingsKey,1,this.viewDescriptorService.getDefaultViewContainer(0)?.id):this.viewDescriptorService.getDefaultViewContainer(0)?.id,e?this.state.initialization.views.containerToRestore.sideBar=e:this.stateModel.setRuntimeValue(qe.SIDEBAR_HIDDEN,!0)}if(this.isVisible("workbench.parts.panel")){const t=this.storageService.get(_e.s.activePanelSettingsKey,1,this.viewDescriptorService.getDefaultViewContainer(1)?.id);t?this.state.initialization.views.containerToRestore.panel=t:this.stateModel.setRuntimeValue(qe.PANEL_HIDDEN,!0)}if(this.isVisible("workbench.parts.auxiliarybar")){let t=this.storageService.get(Qe.z.activePanelSettingsKey,1,this.viewDescriptorService.getDefaultViewContainer(2)?.id);t?("workbench.panel.chatSidebar"===t&&(t="workbench.panel.chat"),this.state.initialization.views.containerToRestore.auxiliaryBar=t):this.stateModel.setRuntimeValue(qe.AUXILIARYBAR_HIDDEN,!0)}this.updateWindowsBorder(!0)}getDefaultLayoutViews(t,e){const i=t.options?.defaultLayout;if(!i)return;if(!i.force&&!e.isNew(1))return;const{views:s}=i;return s?.length?s.map((t=>t.id)):void 0}shouldRestoreEditors(t,e){return!(0,xe.PR)(t.getWorkspace())&&(!("preserve"!==this.configurationService.getValue("window.restoreWindows"))||void 0===e)}willRestoreEditors(){return this.state.initialization.editor.restoreEditors}async resolveEditorsToOpen(t,e){if(e){const i=(0,V.Yc)(await(0,Ee.m6)(e.filesToMerge,t,this.logService));if(4===i.length&&(0,Ee.iY)(i[0])&&(0,Ee.iY)(i[1])&&(0,Ee.iY)(i[2])&&(0,Ee.iY)(i[3]))return[{editor:{input1:{resource:i[0].resource},input2:{resource:i[1].resource},base:{resource:i[2].resource},result:{resource:i[3].resource},options:{pinned:!0}}}];const s=(0,V.Yc)(await(0,Ee.m6)(e.filesToDiff,t,this.logService));if(2===s.length)return[{editor:{original:{resource:s[0].resource},modified:{resource:s[1].resource},options:{pinned:!0}}}];const n=[],o=await(0,Ee.m6)(e.filesToOpenOrCreate,t,this.logService);for(let t=0;t<o.length;t++){const i=o[t];i&&n.push({editor:i,viewColumn:e.filesToOpenOrCreate?.[t].viewColumn})}return n}return 1===this.contextService.getWorkbenchState()&&"newUntitledFile"===this.configurationService.getValue("workbench.startupEditor")?this.editorGroupService.hasRestorableState||await this.workingCopyBackupService.hasBackups()?[]:[{editor:{resource:void 0}}]:[]}get openedDefaultEditors(){return this._openedDefaultEditors}getInitialEditorsState(){const t=this.environmentService.options?.defaultLayout;if((t?.editors?.length||t?.layout?.editors)&&(t.force||this.storageService.isNew(1)))return this._openedDefaultEditors=!0,{layout:t.layout?.editors,filesToOpenOrCreate:t?.editors?.map((t=>({viewColumn:t.viewColumn,fileUri:bt.rz.revive(t.uri),openOnlyIfExists:t.openOnlyIfExists,options:t.options})))};const{filesToOpenOrCreate:e,filesToDiff:i,filesToMerge:s}=this.environmentService;return e||i||s?{filesToOpenOrCreate:e,filesToDiff:i,filesToMerge:s}:void 0}isRestored(){return this.restored}restoreParts(){const t=[],e=[];t.push((async()=>{(0,c.G)("code/willRestoreEditors"),await this.editorGroupService.whenReady,(0,c.G)("code/restoreEditors/editorGroupsReady"),this.state.initialization.layout?.editors&&this.editorGroupService.mainPart.applyLayout(this.state.initialization.layout.editors);const t=await this.state.initialization.editor.editorsToOpen;let i;if((0,c.G)("code/restoreEditors/editorsToOpenResolved"),t.length){const e=this.editorGroupService.mainPart.getGroups(2),s=new Map;for(const i of t){const t=e[(i.viewColumn??1)-1];let n=s.get(t.id);n||(n=new Set,s.set(t.id,n)),n.add(i.editor)}i=Promise.all(Array.from(s).map((async([t,e])=>{try{await this.editorService.openEditors(Array.from(e),t,{validateTrust:!0})}catch(t){this.logService.error(t)}})))}e.push(Promise.all([i?.finally((()=>(0,c.G)("code/restoreEditors/editorsOpened"))),this.editorGroupService.whenRestored.finally((()=>(0,c.G)("code/restoreEditors/editorGroupsRestored")))]).finally((()=>{(0,c.G)("code/didRestoreEditors")})))})());const i=(async()=>{if(this.state.initialization.views.defaults?.length){(0,c.G)("code/willOpenDefaultViews");const t=[],e=e=>{const i=this.viewDescriptorService.getViewLocationById(e.id);if(null!==i){const s=this.viewDescriptorService.getViewContainerByViewId(e.id);if(s){e.order>=(t?.[i]?.order??0)&&(t[i]={id:s.id,order:e.order});const n=this.viewDescriptorService.getViewContainerModel(s);return n.setCollapsed(e.id,!1),n.setVisible(e.id,!0),!0}}return!1},i=[...this.state.initialization.views.defaults].reverse().map(((t,e)=>({id:t,order:e})));let s=i.length;for(;s;)s--,e(i[s])&&i.splice(s,1);if(i.length){await this.extensionService.whenInstalledExtensionsRegistered();let t=i.length;for(;t;)t--,e(i[t])&&i.splice(t,1)}t[0]&&(this.state.initialization.views.containerToRestore.sideBar=t[0].id),t[1]&&(this.state.initialization.views.containerToRestore.panel=t[1].id),t[2]&&(this.state.initialization.views.containerToRestore.auxiliaryBar=t[2].id),(0,c.G)("code/didOpenDefaultViews")}})();t.push(i),t.push((async()=>{await i,this.state.initialization.views.containerToRestore.sideBar&&((0,c.G)("code/willRestoreViewlet"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.sideBar,0)||await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(0)?.id,0),(0,c.G)("code/didRestoreViewlet"))})()),t.push((async()=>{await i,this.state.initialization.views.containerToRestore.panel&&((0,c.G)("code/willRestorePanel"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.panel,1)||await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(1)?.id,1),(0,c.G)("code/didRestorePanel"))})()),t.push((async()=>{await i,this.state.initialization.views.containerToRestore.auxiliaryBar&&((0,c.G)("code/willRestoreAuxiliaryBar"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.auxiliaryBar,2)||await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(2)?.id,2),(0,c.G)("code/didRestoreAuxiliaryBar"))})());const s=this.isZenModeActive(),n=Ue(this.configurationService).restore;s&&(this.setZenModeActive(!n),this.toggleZenMode(!1,!0)),this.stateModel.getRuntimeValue(qe.MAIN_EDITOR_CENTERED)&&this.centerMainEditorLayout(!0,!0),r.HC.settled(t).finally((()=>{this.whenReadyPromise.complete(),r.HC.settled(e).finally((()=>{this.restored=!0,this.whenRestoredPromise.complete()}))}))}registerPart(t){const e=t.getId();return this.parts.set(e,t),(0,A.s)((()=>this.parts.delete(e)))}getPart(t){const e=this.parts.get(t);if(!e)throw new Error(`Unknown part ${t}`);return e}registerNotifications(t){this._register(t.onDidChangeNotificationsVisibility((t=>this._onDidChangeNotificationsVisibility.fire(t))))}hasFocus(t){const e=this.getContainer((0,n.fz)(),t);if(!e)return!1;const i=(0,n.bq)();return!!i&&(0,n.TZ)(i,e)}focusPart(t,e=le.Gs){const i=this.getContainer(e,t)??this.mainContainer;switch(t){case"workbench.parts.editor":this.editorGroupService.getPart(i).activeGroup.focus();break;case"workbench.parts.panel":this.paneCompositeService.getActivePaneComposite(1)?.focus();break;case"workbench.parts.sidebar":this.paneCompositeService.getActivePaneComposite(0)?.focus();break;case"workbench.parts.auxiliarybar":this.paneCompositeService.getActivePaneComposite(2)?.focus();break;case"workbench.parts.activitybar":this.getPart("workbench.parts.sidebar").focusActivityBar();break;case"workbench.parts.statusbar":this.statusBarService.getPart(i).focus();break;default:i?.focus()}}getContainer(t,e){if(void 0===e)return this.getContainerFromDocument(t.document);if(t===le.Gs)return this.getPart(e).getContainer();let i;return"workbench.parts.editor"===e?i=this.editorGroupService.getPart(this.getContainerFromDocument(t.document)):"workbench.parts.statusbar"===e?i=this.statusBarService.getPart(this.getContainerFromDocument(t.document)):"workbench.parts.titlebar"===e&&(i=this.titleService.getPart(this.getContainerFromDocument(t.document))),i instanceof Pe.e?i.getContainer():void 0}isVisible(t,e=le.Gs){if(e!==le.Gs&&"workbench.parts.editor"===t)return!0;if(this.initialized)switch(t){case"workbench.parts.titlebar":return this.workbenchGrid.isViewVisible(this.titleBarPartView);case"workbench.parts.sidebar":return!this.stateModel.getRuntimeValue(qe.SIDEBAR_HIDDEN);case"workbench.parts.panel":return!this.stateModel.getRuntimeValue(qe.PANEL_HIDDEN);case"workbench.parts.auxiliarybar":return!this.stateModel.getRuntimeValue(qe.AUXILIARYBAR_HIDDEN);case"workbench.parts.statusbar":return!this.stateModel.getRuntimeValue(qe.STATUSBAR_HIDDEN);case"workbench.parts.activitybar":return!this.stateModel.getRuntimeValue(qe.ACTIVITYBAR_HIDDEN);case"workbench.parts.editor":return!this.stateModel.getRuntimeValue(qe.EDITOR_HIDDEN);case"workbench.parts.banner":return this.workbenchGrid.isViewVisible(this.bannerPartView);default:return!1}switch(t){case"workbench.parts.titlebar":return(0,u.Xy)(this.configurationService,le.Gs,this.state.runtime.menuBar.toggled);case"workbench.parts.sidebar":return!this.stateModel.getRuntimeValue(qe.SIDEBAR_HIDDEN);case"workbench.parts.panel":return!this.stateModel.getRuntimeValue(qe.PANEL_HIDDEN);case"workbench.parts.auxiliarybar":return!this.stateModel.getRuntimeValue(qe.AUXILIARYBAR_HIDDEN);case"workbench.parts.statusbar":return!this.stateModel.getRuntimeValue(qe.STATUSBAR_HIDDEN);case"workbench.parts.activitybar":return!this.stateModel.getRuntimeValue(qe.ACTIVITYBAR_HIDDEN);case"workbench.parts.editor":return!this.stateModel.getRuntimeValue(qe.EDITOR_HIDDEN);default:return!1}}shouldShowBannerFirst(){return l.HZ&&!(0,a.tW)()}focus(){this.focusPart("workbench.parts.editor",(0,n.zk)(this.activeContainer))}focusPanelOrEditor(){const t=this.paneCompositeService.getActivePaneComposite(1);!this.hasFocus("workbench.parts.panel")&&this.isVisible("workbench.parts.editor")||!t?this.focus():t.focus()}getMaximumEditorDimensions(t){const e=(0,n.zk)(t),i=this.getContainerDimension(t);if(t===this.mainContainer){const t=(0,u.$b)(this.getPanelPosition()),s=(this.isVisible("workbench.parts.activitybar")?this.activityBarPartView.minimumWidth:0)+(this.isVisible("workbench.parts.sidebar")?this.sideBarPartView.minimumWidth:0)+(this.isVisible("workbench.parts.panel")&&!t?this.panelPartView.minimumWidth:0)+(this.isVisible("workbench.parts.auxiliarybar")?this.auxiliaryBarPartView.minimumWidth:0),n=(this.isVisible("workbench.parts.titlebar",e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.statusbar",e)?this.statusBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.panel")&&t?this.panelPartView.minimumHeight:0);return{width:i.width-s,height:i.height-n}}{const t=(this.isVisible("workbench.parts.titlebar",e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.statusbar",e)?this.statusBarPartView.minimumHeight:0);return{width:i.width,height:i.height-t}}}isZenModeActive(){return this.stateModel.getRuntimeValue(qe.ZEN_MODE_ACTIVE)}setZenModeActive(t){this.stateModel.setRuntimeValue(qe.ZEN_MODE_ACTIVE,t)}toggleZenMode(t,e=!1){this.setZenModeActive(!this.isZenModeActive()),this.state.runtime.zenMode.transitionDisposables.clearAndDisposeAll();const i=t=>{for(const e of this.mainPartEditorService.visibleTextEditorControls){if(!t&&(0,Re.z9)(e)&&e.hasModel()){const i=e.getModel();t=this.configurationService.getValue("editor.lineNumbers",{resource:i.uri,overrideIdentifier:i.getLanguageId()})}t||(t=this.configurationService.getValue("editor.lineNumbers")),e.updateOptions({lineNumbers:t})}};let s=!1;const n=Ue(this.configurationService),o=this.stateModel.getRuntimeValue(qe.ZEN_MODE_EXIT_INFO);this.isZenModeActive()?(s=!this.state.runtime.mainWindowFullscreen&&n.fullScreen&&!l.un,e||(o.transitionedToFullScreen=s,o.transitionedToCenteredEditorLayout=!this.isMainEditorLayoutCentered()&&n.centerLayout,o.handleNotificationsDoNotDisturbMode=this.notificationService.getFilter()===x.Pl.OFF,o.wasVisible.sideBar=this.isVisible("workbench.parts.sidebar"),o.wasVisible.panel=this.isVisible("workbench.parts.panel"),o.wasVisible.auxiliaryBar=this.isVisible("workbench.parts.auxiliarybar"),this.stateModel.setRuntimeValue(qe.ZEN_MODE_EXIT_INFO,o)),this.setPanelHidden(!0,!0),this.setAuxiliaryBarHidden(!0,!0),this.setSideBarHidden(!0,!0),n.hideActivityBar&&this.setActivityBarHidden(!0,!0),n.hideStatusBar&&this.setStatusBarHidden(!0,!0),n.hideLineNumbers&&(i("off"),this.state.runtime.zenMode.transitionDisposables.set("zenMode.hideLineNumbers",this.mainPartEditorService.onDidVisibleEditorsChange((()=>i("off"))))),n.showTabs!==this.editorGroupService.partOptions.showTabs&&this.state.runtime.zenMode.transitionDisposables.set("zenMode.showTabs",this.editorGroupService.mainPart.enforcePartOptions({showTabs:n.showTabs})),n.silentNotifications&&o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(x.Pl.ERROR),n.centerLayout&&this.centerMainEditorLayout(!0,!0),this.state.runtime.zenMode.transitionDisposables.set("configurationChange",this.configurationService.onDidChangeConfiguration((t=>{if(t.affectsConfiguration("zenMode.hideActivityBar")){const t=this.configurationService.getValue("zenMode.hideActivityBar");this.setActivityBarHidden(t,!0)}if(t.affectsConfiguration("zenMode.hideStatusBar")){const t=this.configurationService.getValue("zenMode.hideStatusBar");this.setStatusBarHidden(t,!0)}if(t.affectsConfiguration("zenMode.centerLayout")){const t=this.configurationService.getValue("zenMode.centerLayout");this.centerMainEditorLayout(t,!0)}if(t.affectsConfiguration("zenMode.showTabs")){const t=this.configurationService.getValue("zenMode.showTabs")??"multiple";this.state.runtime.zenMode.transitionDisposables.set("zenMode.showTabs",this.editorGroupService.mainPart.enforcePartOptions({showTabs:t}))}if(t.affectsConfiguration("zenMode.silentNotifications")){const t=!!this.configurationService.getValue("zenMode.silentNotifications");o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(t?x.Pl.ERROR:x.Pl.OFF)}if(t.affectsConfiguration("zenMode.hideLineNumbers")){const t=this.configurationService.getValue("zenMode.hideLineNumbers")?"off":void 0;i(t),this.state.runtime.zenMode.transitionDisposables.set("zenMode.hideLineNumbers",this.mainPartEditorService.onDidVisibleEditorsChange((()=>i(t))))}})))):(o.wasVisible.panel&&this.setPanelHidden(!1,!0),o.wasVisible.auxiliaryBar&&this.setAuxiliaryBarHidden(!1,!0),o.wasVisible.sideBar&&this.setSideBarHidden(!1,!0),this.stateModel.getRuntimeValue(qe.ACTIVITYBAR_HIDDEN,!0)||this.setActivityBarHidden(!1,!0),this.stateModel.getRuntimeValue(qe.STATUSBAR_HIDDEN,!0)||this.setStatusBarHidden(!1,!0),o.transitionedToCenteredEditorLayout&&this.centerMainEditorLayout(!1,!0),o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(x.Pl.OFF),i(),this.focus(),s=o.transitionedToFullScreen&&this.state.runtime.mainWindowFullscreen),t||this.layout(),s&&this.hostService.toggleFullScreen(le.Gs),this._onDidChangeZenMode.fire(this.isZenModeActive())}setStatusBarHidden(t,e){this.stateModel.setRuntimeValue(qe.STATUSBAR_HIDDEN,t),t?this.mainContainer.classList.add(ye.STATUSBAR_HIDDEN):this.mainContainer.classList.remove(ye.STATUSBAR_HIDDEN),this.workbenchGrid.setViewVisible(this.statusBarPartView,!t)}createWorkbenchLayout(){const t=this.getPart("workbench.parts.titlebar"),e=this.getPart("workbench.parts.banner"),i=this.getPart("workbench.parts.editor"),s=this.getPart("workbench.parts.activitybar"),n=this.getPart("workbench.parts.panel"),o=this.getPart("workbench.parts.auxiliarybar"),r=this.getPart("workbench.parts.sidebar"),a=this.getPart("workbench.parts.statusbar");this.titleBarPartView=t,this.bannerPartView=e,this.sideBarPartView=r,this.activityBarPartView=s,this.editorPartView=i,this.panelPartView=n,this.auxiliaryBarPartView=o,this.statusBarPartView=a;const c={"workbench.parts.activitybar":this.activityBarPartView,"workbench.parts.banner":this.bannerPartView,"workbench.parts.titlebar":this.titleBarPartView,"workbench.parts.editor":this.editorPartView,"workbench.parts.panel":this.panelPartView,"workbench.parts.sidebar":this.sideBarPartView,"workbench.parts.statusbar":this.statusBarPartView,"workbench.parts.auxiliarybar":this.auxiliaryBarPartView},h=Le.A_.deserialize(this.createGridDescriptor(),{fromJSON:({type:t})=>c[t]},{proportionalLayout:!1});this.mainContainer.prepend(h.element),this.mainContainer.setAttribute("role","application"),this.workbenchGrid=h,this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen;for(const c of[t,i,s,n,r,a,o,e])this._register(c.onDidVisibilityChange((t=>{c===r?this.setSideBarHidden(!t,!0):c===n?this.setPanelHidden(!t,!0):c===o?this.setAuxiliaryBarHidden(!t,!0):c===i&&this.setEditorHidden(!t,!0),this._onDidChangePartVisibility.fire(),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)})));this._register(this.storageService.onWillSaveState((t=>{const e=this.stateModel.getRuntimeValue(qe.SIDEBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView):this.workbenchGrid.getViewSize(this.sideBarPartView).width;this.stateModel.setInitializationValue(qe.SIDEBAR_SIZE,e);const i=this.stateModel.getRuntimeValue(qe.PANEL_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView):(0,u.$b)(this.stateModel.getRuntimeValue(qe.PANEL_POSITION))?this.workbenchGrid.getViewSize(this.panelPartView).height:this.workbenchGrid.getViewSize(this.panelPartView).width;this.stateModel.setInitializationValue(qe.PANEL_SIZE,i);const s=this.stateModel.getRuntimeValue(qe.AUXILIARYBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView):this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setInitializationValue(qe.AUXILIARYBAR_SIZE,s),this.stateModel.save(!0,!0)})))}layout(){this.disposed||(this._mainContainerDimension=(0,n.tG)(this.state.runtime.mainWindowFullscreen?le.Gs.document.body:this.parent),this.logService.trace(`Layout#layout, height: ${this._mainContainerDimension.height}, width: ${this._mainContainerDimension.width}`),(0,n.nE)(this.mainContainer,0,0,0,0,"relative"),(0,n.Ej)(this.mainContainer,this._mainContainerDimension.width,this._mainContainerDimension.height),this.workbenchGrid.layout(this._mainContainerDimension.width,this._mainContainerDimension.height),this.initialized=!0,this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension))}isMainEditorLayoutCentered(){return this.stateModel.getRuntimeValue(qe.MAIN_EDITOR_CENTERED)}centerMainEditorLayout(t,e){this.stateModel.setRuntimeValue(qe.MAIN_EDITOR_CENTERED,t);const i=this.mainPartEditorService.activeEditor;let s=!1;i instanceof Oe.p?s=this.configurationService.getValue("diffEditor.renderSideBySide"):i?.hasCapability(256)&&(s=!0),this.configurationService.getValue("workbench.editor.centeredLayoutAutoResize")&&(this.editorGroupService.mainPart.groups.length>1&&!this.editorGroupService.mainPart.hasMaximizedGroup()||s)&&(t=!1),this.editorGroupService.mainPart.isLayoutCentered()!==t&&(this.editorGroupService.mainPart.centerLayout(t),e||this.layout()),this._onDidChangeMainEditorCenteredLayout.fire(this.stateModel.getRuntimeValue(qe.MAIN_EDITOR_CENTERED))}resizePart(t,e,i){const s=Math.sign(e)*(0,n.vT)((0,n.fz)(),Math.abs(e)),o=Math.sign(i)*(0,n.vT)((0,n.fz)(),Math.abs(i));let r;switch(t){case"workbench.parts.sidebar":r=this.workbenchGrid.getViewSize(this.sideBarPartView),this.workbenchGrid.resizeView(this.sideBarPartView,{width:r.width+s,height:r.height});break;case"workbench.parts.panel":r=this.workbenchGrid.getViewSize(this.panelPartView),this.workbenchGrid.resizeView(this.panelPartView,{width:r.width+((0,u.$b)(this.getPanelPosition())?0:s),height:r.height+((0,u.$b)(this.getPanelPosition())?o:0)});break;case"workbench.parts.auxiliarybar":r=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:r.width+s,height:r.height});break;case"workbench.parts.editor":if(r=this.workbenchGrid.getViewSize(this.editorPartView),1===this.editorGroupService.mainPart.count)this.workbenchGrid.resizeView(this.editorPartView,{width:r.width+s,height:r.height+o});else{const t=this.editorGroupService.mainPart.activeGroup,{width:e,height:i}=this.editorGroupService.mainPart.getSize(t);this.editorGroupService.mainPart.setSize(t,{width:e+s,height:i+o});const{width:n,height:a}=this.editorGroupService.mainPart.getSize(t);(o&&i===a||s&&e===n)&&this.workbenchGrid.resizeView(this.editorPartView,{width:r.width+(s&&e===n?s:0),height:r.height+(o&&i===a?o:0)})}break;default:return}}setActivityBarHidden(t,e){this.stateModel.setRuntimeValue(qe.ACTIVITYBAR_HIDDEN,t),this.workbenchGrid.setViewVisible(this.activityBarPartView,!t)}setBannerHidden(t){this.workbenchGrid.setViewVisible(this.bannerPartView,!t)}setEditorHidden(t,e){this.stateModel.setRuntimeValue(qe.EDITOR_HIDDEN,t),t?this.mainContainer.classList.add(ye.MAIN_EDITOR_AREA_HIDDEN):this.mainContainer.classList.remove(ye.MAIN_EDITOR_AREA_HIDDEN),this.workbenchGrid.setViewVisible(this.editorPartView,!t),t&&!this.isVisible("workbench.parts.panel")&&this.setPanelHidden(!1,!0)}getLayoutClasses(){return(0,V.Yc)([this.isVisible("workbench.parts.sidebar")?void 0:ye.SIDEBAR_HIDDEN,this.isVisible("workbench.parts.editor",le.Gs)?void 0:ye.MAIN_EDITOR_AREA_HIDDEN,this.isVisible("workbench.parts.panel")?void 0:ye.PANEL_HIDDEN,this.isVisible("workbench.parts.auxiliarybar")?void 0:ye.AUXILIARYBAR_HIDDEN,this.isVisible("workbench.parts.statusbar")?void 0:ye.STATUSBAR_HIDDEN,this.state.runtime.mainWindowFullscreen?ye.FULLSCREEN:void 0])}setSideBarHidden(t,e){if(this.stateModel.setRuntimeValue(qe.SIDEBAR_HIDDEN,t),t?this.mainContainer.classList.add(ye.SIDEBAR_HIDDEN):this.mainContainer.classList.remove(ye.SIDEBAR_HIDDEN),t&&this.paneCompositeService.getActivePaneComposite(0))this.paneCompositeService.hideActivePaneComposite(0),this.focusPanelOrEditor();else if(!t&&!this.paneCompositeService.getActivePaneComposite(0)){const t=this.paneCompositeService.getLastActivePaneCompositeId(0);t&&(this.paneCompositeService.openPaneComposite(t,0,!0)||this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(0)?.id,0,!0))}this.workbenchGrid.setViewVisible(this.sideBarPartView,!t)}hasViews(t){const e=this.viewDescriptorService.getViewContainerById(t);if(!e)return!1;const i=this.viewDescriptorService.getViewContainerModel(e);return!!i&&i.activeViewDescriptors.length>=1}adjustPartPositions(t,e,i){const s=!(0,u.$b)(i),n=s||!("center"===e||0===t&&"right"===e||1===t&&"left"===e),o=s||!("center"===e||1===t&&"right"===e||0===t&&"left"===e),r=this.isVisible("workbench.parts.panel")?this.workbenchGrid.getViewSize(this.panelPartView).width:Le.XQ.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumWidth),a=this.isVisible("workbench.parts.panel")?this.workbenchGrid.getViewSize(this.panelPartView).height:Le.XQ.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumHeight),c=this.isVisible("workbench.parts.sidebar")?this.workbenchGrid.getViewSize(this.sideBarPartView).width:Le.XQ.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView)??this.sideBarPartView.minimumWidth),h=this.isVisible("workbench.parts.auxiliarybar")?this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width:Le.XQ.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView)??this.auxiliaryBarPartView.minimumWidth);0===t?(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,0]),this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?2:3),o?this.workbenchGrid.moveView(this.auxiliaryBarPartView,h,this.editorPartView,3):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,-1])):(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,-1]),this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?3:2),o?this.workbenchGrid.moveView(this.auxiliaryBarPartView,h,this.editorPartView,2):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,0])),s&&(this.workbenchGrid.moveView(this.panelPartView,r,this.editorPartView,0===i?2:3),this.workbenchGrid.resizeView(this.panelPartView,{height:a,width:r})),this.isVisible("workbench.parts.sidebar")&&this.workbenchGrid.resizeView(this.sideBarPartView,{height:this.workbenchGrid.getViewSize(this.sideBarPartView).height,width:c}),this.isVisible("workbench.parts.auxiliarybar")&&this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{height:this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).height,width:h})}setPanelAlignment(t,e){(0,u.$b)(this.getPanelPosition())||this.setPanelPosition(2),"center"!==t&&this.isPanelMaximized()&&this.toggleMaximizedPanel(),this.stateModel.setRuntimeValue(qe.PANEL_ALIGNMENT,t),this.adjustPartPositions(this.getSideBarPosition(),t,this.getPanelPosition()),this._onDidChangePanelAlignment.fire(t)}setPanelHidden(t,e){if(!this.workbenchGrid)return;const i=!this.isVisible("workbench.parts.panel");this.stateModel.setRuntimeValue(qe.PANEL_HIDDEN,t);const s=this.isPanelMaximized(),n=this.panelOpensMaximized();t?this.mainContainer.classList.add(ye.PANEL_HIDDEN):this.mainContainer.classList.remove(ye.PANEL_HIDDEN);let o=!1;if(t&&this.paneCompositeService.getActivePaneComposite(1))this.paneCompositeService.hideActivePaneComposite(1),o=!l.un;else if(!t&&!this.paneCompositeService.getActivePaneComposite(1)){let t=this.paneCompositeService.getLastActivePaneCompositeId(1);if(t&&this.hasViews(t)||(t=this.viewDescriptorService.getViewContainersByLocation(1).find((t=>this.hasViews(t.id)))?.id),t){const i=!e;this.paneCompositeService.openPaneComposite(t,1,i)}}t&&s&&this.toggleMaximizedPanel(),i!==t&&(this.workbenchGrid.setViewVisible(this.panelPartView,!t),t?this.stateModel.setRuntimeValue(qe.PANEL_WAS_LAST_MAXIMIZED,s):e||s===n||this.toggleMaximizedPanel(),o&&this.editorGroupService.mainPart.activeGroup.focus())}toggleMaximizedPanel(){const t=this.workbenchGrid.getViewSize(this.panelPartView),e=this.getPanelPosition(),i=this.isPanelMaximized();i?(this.setEditorHidden(!1),this.workbenchGrid.resizeView(this.panelPartView,{width:(0,u.$b)(e)?t.width:this.stateModel.getRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_WIDTH),height:(0,u.$b)(e)?this.stateModel.getRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_HEIGHT):t.height})):(this.isVisible("workbench.parts.panel")&&((0,u.$b)(e)?this.stateModel.setRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_HEIGHT,t.height):this.stateModel.setRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_WIDTH,t.width)),this.setEditorHidden(!0)),this.stateModel.setRuntimeValue(qe.PANEL_WAS_LAST_MAXIMIZED,!i)}panelOpensMaximized(){if("center"!==this.getPanelAlignment()&&(0,u.$b)(this.getPanelPosition()))return!1;const t=(0,u.bJ)(this.configurationService.getValue(Je.PANEL_OPENS_MAXIMIZED)),e=this.stateModel.getRuntimeValue(qe.PANEL_WAS_LAST_MAXIMIZED);return 0===t||2===t&&e}setAuxiliaryBarHidden(t,e){if(this.stateModel.setRuntimeValue(qe.AUXILIARYBAR_HIDDEN,t),t?this.mainContainer.classList.add(ye.AUXILIARYBAR_HIDDEN):this.mainContainer.classList.remove(ye.AUXILIARYBAR_HIDDEN),t&&this.paneCompositeService.getActivePaneComposite(2))this.paneCompositeService.hideActivePaneComposite(2),this.focusPanelOrEditor();else if(!t&&!this.paneCompositeService.getActivePaneComposite(2)){let t=this.paneCompositeService.getLastActivePaneCompositeId(2);if(t&&this.hasViews(t)||(t=this.viewDescriptorService.getViewContainersByLocation(2).find((t=>this.hasViews(t.id)))?.id),t){const i=!e;this.paneCompositeService.openPaneComposite(t,2,i)}}this.workbenchGrid.setViewVisible(this.auxiliaryBarPartView,!t)}setPartHidden(t,e,i=le.Gs){switch(e){case"workbench.parts.activitybar":return this.setActivityBarHidden(t);case"workbench.parts.sidebar":return this.setSideBarHidden(t);case"workbench.parts.editor":return this.setEditorHidden(t);case"workbench.parts.banner":return this.setBannerHidden(t);case"workbench.parts.auxiliarybar":return this.setAuxiliaryBarHidden(t);case"workbench.parts.panel":return this.setPanelHidden(t)}}hasMainWindowBorder(){return this.state.runtime.mainWindowBorder}getMainWindowBorderRadius(){return this.state.runtime.mainWindowBorder&&l.zx?"5px":void 0}isPanelMaximized(){return!("center"!==this.getPanelAlignment()&&(0,u.$b)(this.getPanelPosition())||this.isVisible("workbench.parts.editor",le.Gs))}getSideBarPosition(){return this.stateModel.getRuntimeValue(qe.SIDEBAR_POSITON)}getPanelAlignment(){return this.stateModel.getRuntimeValue(qe.PANEL_ALIGNMENT)}updateMenubarVisibility(t){const e=(0,u.Xy)(this.configurationService,le.Gs,this.state.runtime.menuBar.toggled);!t&&this.workbenchGrid&&e!==this.isVisible("workbench.parts.titlebar",le.Gs)&&this.workbenchGrid.setViewVisible(this.titleBarPartView,e)}updateCustomTitleBarVisibility(){const t=(0,u.Xy)(this.configurationService,le.Gs,this.state.runtime.menuBar.toggled);t!==this.isVisible("workbench.parts.titlebar")&&this.workbenchGrid.setViewVisible(this.titleBarPartView,t)}toggleMenuBar(){let t,e=(0,Ne.nx)(this.configurationService);"string"!=typeof e&&(e="classic"),t="visible"===e||"classic"===e?(0,Ne.tx)(this.configurationService)?"toggle":"compact":"classic",this.configurationService.updateValue("window.menuBarVisibility",t)}getPanelPosition(){return this.stateModel.getRuntimeValue(qe.PANEL_POSITION)}setPanelPosition(t){this.isVisible("workbench.parts.panel")||this.setPanelHidden(!1);const e=this.getPart("workbench.parts.panel"),i=(0,u.Wf)(this.getPanelPosition()),s=(0,u.Wf)(t),n=(0,se.eU)(e.getContainer());n.classList.remove(i),n.classList.add(s),e.updateStyles();const o=this.workbenchGrid.getViewSize(this.panelPartView),r=this.workbenchGrid.getViewSize(this.sideBarPartView),a=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView);let c=!this.isVisible("workbench.parts.editor",le.Gs);s===i||c||((0,u.$b)(t)?this.stateModel.setRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_WIDTH,o.width):(0,u.$b)((0,u.n4)(i))&&this.stateModel.setRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_HEIGHT,o.height)),(0,u.$b)(t)&&"center"!==this.getPanelAlignment()&&c&&(this.toggleMaximizedPanel(),c=!1),this.stateModel.setRuntimeValue(qe.PANEL_POSITION,t);const h=this.isVisible("workbench.parts.sidebar"),l=this.isVisible("workbench.parts.auxiliarybar");2===t?this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,1):3===t?this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,0):1===t?this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,3):this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(qe.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,2),this.workbenchGrid.resizeView(this.sideBarPartView,r),h||this.setSideBarHidden(!0),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,a),l||this.setAuxiliaryBarHidden(!0),(0,u.$b)(t)&&this.adjustPartPositions(this.getSideBarPosition(),this.getPanelAlignment(),t),this._onDidChangePanelPosition.fire(s)}isWindowMaximized(t){return this.state.runtime.maximized.has((0,n.Q2)(t))}updateWindowMaximizedState(t,e){this.mainContainer.classList.toggle(ye.MAXIMIZED,e);const i=(0,n.Q2)(t);e!==this.state.runtime.maximized.has(i)&&(e?this.state.runtime.maximized.add(i):this.state.runtime.maximized.delete(i),this.updateWindowsBorder(),this._onDidChangeWindowMaximized.fire({windowId:i,maximized:e}))}getVisibleNeighborPart(t,e){if(!this.workbenchGrid)return;if(!this.isVisible(t,le.Gs))return;const i=this.workbenchGrid.getNeighborViews(this.getPart(t),e,!1);if(i)for(const t of i){const e=["workbench.parts.activitybar","workbench.parts.editor","workbench.parts.panel","workbench.parts.auxiliarybar","workbench.parts.sidebar","workbench.parts.statusbar","workbench.parts.titlebar"].find((e=>this.getPart(e)===t&&this.isVisible(e,le.Gs)));if(void 0!==e)return e}}onDidChangeWCO(){const t=this.workbenchGrid.getNeighborViews(this.titleBarPartView,0,!1).length>0,e=this.shouldShowBannerFirst();t!==e&&this.workbenchGrid.moveView(this.bannerPartView,Le.XQ.Distribute,this.titleBarPartView,e?0:1),this.workbenchGrid.setViewVisible(this.titleBarPartView,(0,u.Xy)(this.configurationService,le.Gs,this.state.runtime.menuBar.toggled))}arrangeEditorNodes(t,e,i){if(!t.sideBar&&!t.auxiliaryBar)return t.editor.size=e,t.editor;const s=[t.editor];return t.editor.size=i,t.sideBar&&(0===this.stateModel.getRuntimeValue(qe.SIDEBAR_POSITON)?s.splice(0,0,t.sideBar):s.push(t.sideBar),t.editor.size-=this.stateModel.getRuntimeValue(qe.SIDEBAR_HIDDEN)?0:t.sideBar.size),t.auxiliaryBar&&(1===this.stateModel.getRuntimeValue(qe.SIDEBAR_POSITON)?s.splice(0,0,t.auxiliaryBar):s.push(t.auxiliaryBar),t.editor.size-=this.stateModel.getRuntimeValue(qe.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size),{type:"branch",data:s,size:e}}arrangeMiddleSectionNodes(t,e,i){const s=this.stateModel.getRuntimeValue(qe.ACTIVITYBAR_HIDDEN)?0:t.activityBar.size,n=this.stateModel.getRuntimeValue(qe.SIDEBAR_HIDDEN)?0:t.sideBar.size,o=this.stateModel.getRuntimeValue(qe.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size,r=this.stateModel.getInitializationValue(qe.PANEL_SIZE)?0:t.panel.size,a=this.stateModel.getRuntimeValue(qe.PANEL_POSITION),c=this.stateModel.getRuntimeValue(qe.SIDEBAR_POSITON),h=[];if((0,u.$b)(a)){const l=this.stateModel.getRuntimeValue(qe.PANEL_ALIGNMENT),d=!("center"===l||0===c&&"right"===l||1===c&&"left"===l),u=!("center"===l||1===c&&"right"===l||0===c&&"left"===l),m=e-s-(d?0:n)-(u?0:o),g=this.arrangeEditorNodes({editor:t.editor,sideBar:d?t.sideBar:void 0,auxiliaryBar:u?t.auxiliaryBar:void 0},i-r,m);h.push({type:"branch",data:2===a?[g,t.panel]:[t.panel,g],size:m}),d||(0===c?h.splice(0,0,t.sideBar):h.push(t.sideBar)),u||(1===c?h.splice(0,0,t.auxiliaryBar):h.push(t.auxiliaryBar)),0===c?h.splice(0,0,t.activityBar):h.push(t.activityBar)}else h.push(t.editor),t.editor.size=e-s-n-r-o,1===a?h.push(t.panel):h.splice(0,0,t.panel),0===c?(h.push(t.auxiliaryBar),h.splice(0,0,t.sideBar),h.splice(0,0,t.activityBar)):(h.splice(0,0,t.auxiliaryBar),h.push(t.sideBar),h.push(t.activityBar));return h}createGridDescriptor(){const{width:t,height:e}=this.stateModel.getInitializationValue(qe.GRID_SIZE),i=this.stateModel.getInitializationValue(qe.SIDEBAR_SIZE),s=this.stateModel.getInitializationValue(qe.AUXILIARYBAR_SIZE),n=this.stateModel.getInitializationValue(qe.PANEL_SIZE),o=this.titleBarPartView.minimumHeight,r=this.bannerPartView.minimumHeight,a=this.statusBarPartView.minimumHeight,c=this.activityBarPartView.minimumWidth,h=e-o-a,l=[{type:"leaf",data:{type:"workbench.parts.titlebar"},size:o,visible:this.isVisible("workbench.parts.titlebar",le.Gs)},{type:"leaf",data:{type:"workbench.parts.banner"},size:r,visible:!1}],d={type:"leaf",data:{type:"workbench.parts.activitybar"},size:c,visible:!this.stateModel.getRuntimeValue(qe.ACTIVITYBAR_HIDDEN)},m={type:"leaf",data:{type:"workbench.parts.sidebar"},size:i,visible:!this.stateModel.getRuntimeValue(qe.SIDEBAR_HIDDEN)},g={type:"leaf",data:{type:"workbench.parts.auxiliarybar"},size:s,visible:this.isVisible("workbench.parts.auxiliarybar")},p={type:"leaf",data:{type:"workbench.parts.editor"},size:0,visible:!this.stateModel.getRuntimeValue(qe.EDITOR_HIDDEN)},b={type:"leaf",data:{type:"workbench.parts.panel"},size:n,visible:!this.stateModel.getRuntimeValue(qe.PANEL_HIDDEN)},f=this.arrangeMiddleSectionNodes({activityBar:d,auxiliaryBar:g,editor:p,panel:b,sideBar:m},t,h),w={root:{type:"branch",size:t,data:[...this.shouldShowBannerFirst()?l.reverse():l,{type:"branch",data:f,size:h},{type:"leaf",data:{type:"workbench.parts.statusbar"},size:a,visible:!this.stateModel.getRuntimeValue(qe.STATUSBAR_HIDDEN)}]},orientation:0,width:t,height:e},v={activityBarVisible:!this.stateModel.getRuntimeValue(qe.ACTIVITYBAR_HIDDEN),sideBarVisible:!this.stateModel.getRuntimeValue(qe.SIDEBAR_HIDDEN),auxiliaryBarVisible:!this.stateModel.getRuntimeValue(qe.AUXILIARYBAR_HIDDEN),panelVisible:!this.stateModel.getRuntimeValue(qe.PANEL_HIDDEN),statusbarVisible:!this.stateModel.getRuntimeValue(qe.STATUSBAR_HIDDEN),sideBarPosition:(0,u.Wf)(this.stateModel.getRuntimeValue(qe.SIDEBAR_POSITON)),panelPosition:(0,u.Wf)(this.stateModel.getRuntimeValue(qe.PANEL_POSITION))};return this.telemetryService.publicLog2("startupLayout",v),w}dispose(){super.dispose(),this.disposed=!0}}function Ue(t){return t.getValue(Je.ZEN_MODE_CONFIG)}class Ke{constructor(t,e,i,s){this.name=t,this.scope=e,this.target=i,this.defaultValue=s}}class Xe extends Ke{constructor(t,e,i,s,n){super(t,e,i,s),this.zenModeIgnore=n,this.runtime=!0}}class $e extends Ke{constructor(){super(...arguments),this.runtime=!1}}const qe={MAIN_EDITOR_CENTERED:new Xe("editor.centered",1,1,!1),ZEN_MODE_ACTIVE:new Xe("zenMode.active",1,1,!1),ZEN_MODE_EXIT_INFO:new Xe("zenMode.exitInfo",1,1,{transitionedToCenteredEditorLayout:!1,transitionedToFullScreen:!1,handleNotificationsDoNotDisturbMode:!1,wasVisible:{auxiliaryBar:!1,panel:!1,sideBar:!1}}),GRID_SIZE:new $e("grid.size",0,1,{width:800,height:600}),SIDEBAR_SIZE:new $e("sideBar.size",0,1,200),AUXILIARYBAR_SIZE:new $e("auxiliaryBar.size",0,1,200),PANEL_SIZE:new $e("panel.size",0,1,300),PANEL_LAST_NON_MAXIMIZED_HEIGHT:new Xe("panel.lastNonMaximizedHeight",0,1,300),PANEL_LAST_NON_MAXIMIZED_WIDTH:new Xe("panel.lastNonMaximizedWidth",0,1,300),PANEL_WAS_LAST_MAXIMIZED:new Xe("panel.wasLastMaximized",1,1,!1),SIDEBAR_POSITON:new Xe("sideBar.position",1,1,0),PANEL_POSITION:new Xe("panel.position",1,1,2),PANEL_ALIGNMENT:new Xe("panel.alignment",0,0,"center"),ACTIVITYBAR_HIDDEN:new Xe("activityBar.hidden",1,1,!1,!0),SIDEBAR_HIDDEN:new Xe("sideBar.hidden",1,1,!1),EDITOR_HIDDEN:new Xe("editor.hidden",1,1,!1),PANEL_HIDDEN:new Xe("panel.hidden",1,1,!0),AUXILIARYBAR_HIDDEN:new Xe("auxiliaryBar.hidden",1,1,!0),STATUSBAR_HIDDEN:new Xe("statusBar.hidden",1,1,!1,!0)};var Je,ti;!function(t){t.PANEL_POSITION="workbench.panel.defaultLocation",t.PANEL_OPENS_MAXIMIZED="workbench.panel.opensMaximized",t.ZEN_MODE_CONFIG="zenMode",t.EDITOR_CENTERED_LAYOUT_AUTO_RESIZE="workbench.editor.centeredLayoutAutoResize"}(Je||(Je={})),function(t){t.STATUSBAR_VISIBLE="workbench.statusBar.visible",t.SIDEBAR_POSITION="workbench.sideBar.location"}(ti||(ti={}));class ei extends A.jG{static{this.STORAGE_PREFIX="workbench."}constructor(t,e,i,s){super(),this.storageService=t,this.configurationService=e,this.contextService=i,this.container=s,this._onDidChangeState=this._register(new o.vl),this.onDidChangeState=this._onDidChangeState.event,this.stateCache=new Map,this._register(this.configurationService.onDidChangeConfiguration((t=>this.updateStateFromLegacySettings(t))))}updateStateFromLegacySettings(t){t.affectsConfiguration("workbench.activityBar.location")&&this.setRuntimeValueAndFire(qe.ACTIVITYBAR_HIDDEN,this.isActivityBarHidden()),t.affectsConfiguration(ti.STATUSBAR_VISIBLE)&&this.setRuntimeValueAndFire(qe.STATUSBAR_HIDDEN,!this.configurationService.getValue(ti.STATUSBAR_VISIBLE)),t.affectsConfiguration(ti.SIDEBAR_POSITION)&&this.setRuntimeValueAndFire(qe.SIDEBAR_POSITON,(0,u.n4)(this.configurationService.getValue(ti.SIDEBAR_POSITION)??"left"))}updateLegacySettingsFromState(t,e){const i=this.getRuntimeValue(qe.ZEN_MODE_ACTIVE);t.zenModeIgnore&&i||(t===qe.ACTIVITYBAR_HIDDEN?this.configurationService.updateValue("workbench.activityBar.location",e?"hidden":void 0):t===qe.STATUSBAR_HIDDEN?this.configurationService.updateValue(ti.STATUSBAR_VISIBLE,!e):t===qe.SIDEBAR_POSITON&&this.configurationService.updateValue(ti.SIDEBAR_POSITION,(0,u.Wf)(e)))}load(){let t;for(t in qe){const e=qe[t],i=this.loadKeyFromStorage(e);void 0!==i&&this.stateCache.set(e.name,i)}this.stateCache.set(qe.ACTIVITYBAR_HIDDEN.name,this.isActivityBarHidden()),this.stateCache.set(qe.STATUSBAR_HIDDEN.name,!this.configurationService.getValue(ti.STATUSBAR_VISIBLE)),this.stateCache.set(qe.SIDEBAR_POSITON.name,(0,u.n4)(this.configurationService.getValue(ti.SIDEBAR_POSITION)??"left"));const e=(0,n.tG)(this.container);for(t in qe.PANEL_POSITION.defaultValue=(0,u.n4)(this.configurationService.getValue(Je.PANEL_POSITION)??"bottom"),qe.GRID_SIZE.defaultValue={height:e.height,width:e.width},qe.SIDEBAR_SIZE.defaultValue=Math.min(300,e.width/4),qe.AUXILIARYBAR_SIZE.defaultValue=Math.min(300,e.width/4),qe.PANEL_SIZE.defaultValue=this.stateCache.get(qe.PANEL_POSITION.name)??(0,u.$b)(qe.PANEL_POSITION.defaultValue)?e.height/3:e.width/4,qe.SIDEBAR_HIDDEN.defaultValue=1===this.contextService.getWorkbenchState(),qe){const e=qe[t];void 0===this.stateCache.get(e.name)&&this.stateCache.set(e.name,e.defaultValue)}this._register(this.storageService.onDidChangeValue(0,void 0,this._register(new A.Cm))((t=>{let e;for(e in qe){const i=qe[e];if(i instanceof Xe&&0===i.scope&&0===i.target&&`${ei.STORAGE_PREFIX}${i.name}`===t.key){const t=this.loadKeyFromStorage(i)??i.defaultValue;this.stateCache.get(i.name)!==t&&(this.stateCache.set(i.name,t),this._onDidChangeState.fire({key:i,value:t}))}}})))}save(t,e){let i;const s=this.getRuntimeValue(qe.ZEN_MODE_ACTIVE);for(i in qe){const n=qe[i];if(t&&1===n.scope||e&&0===n.scope){if(s&&n instanceof Xe&&n.zenModeIgnore)continue;this.saveKeyToStorage(n)}}}getInitializationValue(t){return this.stateCache.get(t.name)}setInitializationValue(t,e){this.stateCache.set(t.name,e)}getRuntimeValue(t,e){if(e)switch(t){case qe.ACTIVITYBAR_HIDDEN:this.stateCache.set(t.name,this.isActivityBarHidden());break;case qe.STATUSBAR_HIDDEN:this.stateCache.set(t.name,!this.configurationService.getValue(ti.STATUSBAR_VISIBLE));break;case qe.SIDEBAR_POSITON:this.stateCache.set(t.name,this.configurationService.getValue(ti.SIDEBAR_POSITION)??"left")}return this.stateCache.get(t.name)}setRuntimeValue(t,e){this.stateCache.set(t.name,e);const i=this.getRuntimeValue(qe.ZEN_MODE_ACTIVE);0===t.scope&&(i&&t.zenModeIgnore||(this.saveKeyToStorage(t),this.updateLegacySettingsFromState(t,e)))}isActivityBarHidden(){const t=this.configurationService.getValue("workbench.activityBar.visible");return void 0!==t?!t:"default"!==this.configurationService.getValue("workbench.activityBar.location")}setRuntimeValueAndFire(t,e){this.stateCache.get(t.name)!==e&&(this.setRuntimeValue(t,e),this._onDidChangeState.fire({key:t,value:e}))}saveKeyToStorage(t){const e=this.stateCache.get(t.name);this.storageService.store(`${ei.STORAGE_PREFIX}${t.name}`,"object"==typeof e?JSON.stringify(e):e,t.scope,t.target)}loadKeyFromStorage(t){let e=this.storageService.get(`${ei.STORAGE_PREFIX}${t.name}`,t.scope);if(void 0!==e)switch(typeof t.defaultValue){case"boolean":e="true"===e;break;case"number":e=parseInt(e);break;case"object":e=JSON.parse(e)}return e}}var ii=i(16093),si=i(58361);let ni=class extends A.jG{constructor(t,e,i){super(),this._accessibilitySignalService=i,this._scheduler=new r.uC((()=>{this._signalLoop=this._accessibilitySignalService.playSignalLoop(tt.Rh.progress,e??5e3)}),t),this._scheduler.schedule()}dispose(){super.dispose(),this._signalLoop?.dispose(),this._scheduler.dispose()}};ni=(0,s.C)([(0,s.Q)(2,et.N)],ni);var oi=i(92245),ri=i(22513),ai=i(6230),ci=i(39519);class hi{constructor(){this.priority=90,this.name="notifications",this.when=$.LM,this.type="view"}getProvider(t){const e=t.get(ci.w),i=t.get(Y.P),s=t.get(yt.w),n=t.get(et.N);return function(){const t=mt(i);if(!t)return;let o;s.executeCommand("notifications.showList");const r=i.lastFocusedList;if(r instanceof j.Ei&&(o=r.indexOf(t)),void 0===o)return;function a(){if(s.executeCommand("notifications.showList"),r&&void 0!==o){r.domFocus();try{r.setFocus([o])}catch{}}}function c(){const t=mt(i),e=t?.message.original.toString();if(t)return t.source?(0,Q.kg)(8842,"{0} Source: {1}",e,t.source):(0,Q.kg)(8843,"{0}",e)}const h=c();return h?(t.onDidClose((()=>e.next())),new ai.h("notification",{type:"view"},(()=>h),(()=>a()),"accessibility.verbosity.notification",void 0,function(t,e){let i;if(t.actions&&(i=[],t.actions.primary&&i.push(...t.actions.primary),t.actions.secondary&&i.push(...t.actions.secondary)),i)for(const e of i){e.class=Dt.L0.asClassName(St.W6.bell);const i=e.run;e.run=()=>{i(),t.close()}}const s=i?.find((t=>t.label.includes("Manage Extension")));return s&&(s.class=Dt.L0.asClassName(St.W6.gear)),i&&i.push({id:"clearNotification",label:(0,Q.kg)(8844,"Clear Notification"),tooltip:(0,Q.kg)(8844,"Clear Notification"),run:()=>{t.close(),e.playSignal(tt.Rh.clear)},enabled:!0,class:Dt.L0.asClassName(St.W6.clearAll)}),i}(t,n),(()=>{if(r)return a(),r.focusNext(),c()}),(()=>{if(r)return a(),r.focusPrevious(),c()}))):void 0}()}}class li extends Ze{constructor(t,e,i,s){super(t),this.options=e,this.serviceCollection=i,this._onWillShutdown=this._register(new o.vl),this.onWillShutdown=this._onWillShutdown.event,this._onDidShutdown=this._register(new o.vl),this.onDidShutdown=this._onDidShutdown.event,this.previousUnexpectedError={message:void 0,time:0},(0,c.G)("code/willStartWorkbench"),this.registerErrorHandler(s)}registerErrorHandler(t){le.Gs.addEventListener("unhandledrejection",(t=>{(0,h.dz)(t.reason),t.preventDefault()})),(0,h.Wj)((e=>this.handleUnexpectedError(e,t)))}handleUnexpectedError(t,e){const i=(0,M.rx)(t,!0);if(!i)return;const s=Date.now();i===this.previousUnexpectedError.message&&s-this.previousUnexpectedError.time<=1e3||(this.previousUnexpectedError.time=s,this.previousUnexpectedError.message=i,e.error(i))}startup(){try{this._register((0,o.OA)(175));const t=this.initServices(this.serviceCollection);return t.invokeFunction((e=>{const i=e.get(f.f),s=e.get(p.C),n=e.get(b.p),o=e.get(we.v),r=e.get(ii.X),a=e.get(w.O);this.initLayout(e),this.registerListeners(i,s,n,o,r),this.renderWorkbench(t,a,s,n),this.createWorkbenchLayout(),this.layout(),this.restore(i)})),t}catch(t){throw(0,h.dz)(t),t}}initServices(t){t.set(m.Y,this);const e=(0,d.N)();for(const[i,s]of e)t.set(i,s);const i=new ke.n(t,!0);return i.invokeFunction((t=>{const e=t.get(f.f),s=t.get(b.p);"function"==typeof s.acquireInstantiationService&&s.acquireInstantiationService(i),e.phase=2})),i}registerListeners(t,e,i,s,n){this._register(i.onDidChangeConfiguration((t=>this.updateFontAliasing(t,i)))),l.ib?this._register(e.onWillSaveState((t=>{t.reason===g.LP.SHUTDOWN&&this.storeFontInfo(e)}))):this._register(t.onWillShutdown((()=>this.storeFontInfo(e)))),this._register(t.onWillShutdown((t=>this._onWillShutdown.fire(t)))),this._register(t.onDidShutdown((()=>{this._onDidShutdown.fire(),this.dispose()}))),this._register(s.onDidChangeFocus((t=>{t||e.flush()}))),this._register(n.onWillShowDialog((()=>this.mainContainer.classList.add("modal-dialog-visible")))),this._register(n.onDidShowDialog((()=>this.mainContainer.classList.remove("modal-dialog-visible"))))}updateFontAliasing(t,e){if(!l.zx)return;if(t&&!t.affectsConfiguration("workbench.fontAliasing"))return;const i=e.getValue("workbench.fontAliasing");if(this.fontAliasing===i)return;this.fontAliasing=i;const s=["antialiased","none","auto"];this.mainContainer.classList.remove(...s.map((t=>`monaco-font-aliasing-${t}`))),s.some((t=>t===i))&&this.mainContainer.classList.add(`monaco-font-aliasing-${i}`)}restoreFontInfo(t,e){const i=t.get("editorFontInfo",-1);if(i)try{const t=JSON.parse(i);Array.isArray(t)&&Ce.T.restoreFontInfo(le.Gs,t)}catch(t){}Ce.T.readFontInfo(le.Gs,Se._8.createFromRawSettings(e.getValue("editor"),si.c.getInstance(le.Gs).value))}storeFontInfo(t){const e=Ce.T.serializeFontInfo(le.Gs);e&&t.store("editorFontInfo",JSON.stringify(e),-1,1)}renderWorkbench(t,e,i,s){(0,ue.vr)(this.mainContainer),(0,oi.O)(((e,i)=>t.createInstance(ni,e,i)));const n=l.uF?"windows":l.j9?"linux":"mac",o=(0,V.Yc)(["monaco-workbench",n,l.HZ?"web":void 0,a.H8?"chromium":a.gm?"firefox":a.nr?"safari":void 0,...this.getLayoutClasses(),...this.options?.extraClasses?this.options.extraClasses:[]]);this.mainContainer.classList.add(...o),le.Gs.document.body.classList.add(n),l.HZ&&le.Gs.document.body.classList.add("web"),this.updateFontAliasing(void 0,s),this.restoreFontInfo(i,s);for(const{id:t,role:e,classes:i,options:s}of[{id:"workbench.parts.titlebar",role:"none",classes:["titlebar"]},{id:"workbench.parts.banner",role:"banner",classes:["banner"]},{id:"workbench.parts.activitybar",role:"none",classes:["activitybar",0===this.getSideBarPosition()?"left":"right"]},{id:"workbench.parts.sidebar",role:"none",classes:["sidebar",0===this.getSideBarPosition()?"left":"right"]},{id:"workbench.parts.editor",role:"main",classes:["editor"],options:{restorePreviousState:this.willRestoreEditors()}},{id:"workbench.parts.panel",role:"none",classes:["panel","basepanel",(0,u.Wf)(this.getPanelPosition())]},{id:"workbench.parts.auxiliarybar",role:"none",classes:["auxiliarybar","basepanel",0===this.getSideBarPosition()?"right":"left"]},{id:"workbench.parts.statusbar",role:"status",classes:["statusbar"]}]){const n=this.createPart(t,e,i);(0,c.G)(`code/willCreatePart/${t}`),this.getPart(t).create(n,s),(0,c.G)(`code/didCreatePart/${t}`)}this.createNotificationsHandlers(t,e),this.parent.appendChild(this.mainContainer)}createPart(t,e,i){const s=document.createElement("status"===e?"footer":"div");return s.classList.add("part",...i),s.id=t,s.setAttribute("role",e),"status"===e&&s.setAttribute("aria-live","off"),s}createNotificationsHandlers(t,e){const i=this._register(t.createInstance(de,this.mainContainer,e.model)),s=this._register(t.createInstance(ve,this.mainContainer,e.model));this._register(t.createInstance(me,e.model));const n=t.createInstance(pe,e.model);this._register(t.createInstance(X)),this._register(i.onDidChangeVisibility((()=>{n.update(i.isVisible,s.isVisible),s.update(i.isVisible)}))),this._register(s.onDidChangeVisibility((()=>{n.update(i.isVisible,s.isVisible)}))),function(t,e,i){I.f.registerCommandAndKeybindingRule({id:it,weight:200,primary:(0,_.m5)(2089,3116),handler:()=>{e.hide(),t.show()}}),I.f.registerCommandAndKeybindingRule({id:st,weight:250,when:$.d7,primary:9,handler:e=>{const s=e.get(Z.k);for(const t of i.notifications)t.visible&&s.publicLog2("notification:hide",K(t.message.original,t.sourceId,t.priority===x.AE.SILENT));t.hide()}}),D.w.registerCommand("notifications.toggleList",(()=>{t.isVisible?t.hide():(e.hide(),t.show())})),I.f.registerCommandAndKeybindingRule({id:ht,weight:200,when:$.LM,primary:20,mac:{primary:2049},handler:(t,e)=>{const i=t.get(et.N),s=mt(t.get(Y.P),e);s&&!s.hasProgress&&(s.close(),i.playSignal(tt.Rh.clear))}}),I.f.registerCommandAndKeybindingRule({id:at,weight:200,when:$.LM,primary:17,handler:(t,e)=>{const i=mt(t.get(Y.P),e);i?.expand()}}),I.f.registerCommandAndKeybindingRule({id:ct,weight:200,when:E.M$.or($.LM,$.M8),primary:3103,handler:t=>{const e=t.get(q._Y).createInstance(gt),s=mt(t.get(Y.P))||i.notifications.at(0);if(!s)return;const n=s.actions?.primary?s.actions.primary.at(0):void 0;n&&(e.run(n,s),s.close())}}),I.f.registerCommandAndKeybindingRule({id:rt,weight:200,when:$.LM,primary:15,handler:(t,e)=>{const i=mt(t.get(Y.P),e);i?.collapse()}}),I.f.registerCommandAndKeybindingRule({id:"notification.toggle",weight:200,when:$.LM,primary:10,secondary:[3],handler:t=>{const e=mt(t.get(Y.P));e?.toggle()}}),D.w.registerCommand(nt,(t=>{const s=t.get(Z.k);for(const t of i.notifications)t.visible&&s.publicLog2("notification:hide",K(t.message.original,t.sourceId,t.priority===x.AE.SILENT));e.hide()})),I.f.registerKeybindingRule({id:nt,weight:150,when:$.M8,primary:9}),I.f.registerKeybindingRule({id:nt,weight:300,when:E.M$.and($.M8,$.LM),primary:9}),D.w.registerCommand(ot,(()=>e.focus())),I.f.registerCommandAndKeybindingRule({id:"notifications.focusNextToast",weight:200,when:E.M$.and($.LM,$.M8),primary:18,handler:()=>{e.focusNext()}}),I.f.registerCommandAndKeybindingRule({id:"notifications.focusPreviousToast",weight:200,when:E.M$.and($.LM,$.M8),primary:16,handler:()=>{e.focusPrevious()}}),I.f.registerCommandAndKeybindingRule({id:"notifications.focusFirstToast",weight:200,when:E.M$.and($.LM,$.M8),primary:11,secondary:[14],handler:()=>{e.focusFirst()}}),I.f.registerCommandAndKeybindingRule({id:"notifications.focusLastToast",weight:200,when:E.M$.and($.LM,$.M8),primary:12,secondary:[13],handler:()=>{e.focusLast()}}),D.w.registerCommand(lt,(()=>t.clearAll())),D.w.registerCommand(dt,(t=>{const e=t.get(w.O);e.setFilter(e.getFilter()===x.Pl.ERROR?x.Pl.OFF:x.Pl.ERROR)})),D.w.registerCommand(ut,(t=>{const e=t.get(w.O),i=t.get(J.G),s=e.getFilters().sort(((t,e)=>t.label.localeCompare(e.label))),n=new A.Cm,o=n.add(i.createQuickPick());o.items=s.map((t=>({id:t.id,label:t.label,tooltip:`${t.label} (${t.id})`,filter:t.filter}))),o.canSelectMany=!0,o.placeholder=(0,Q.kg)(2642,"Select sources to enable all notifications from"),o.selectedItems=o.items.filter((t=>t.filter===x.Pl.OFF)),o.show(),n.add(o.onDidAccept((async()=>{for(const t of o.items)e.setFilter({id:t.id,label:t.label,filter:o.selectedItems.includes(t)?x.Pl.OFF:x.Pl.ERROR});o.hide()}))),n.add(o.onDidHide((()=>n.dispose())))}));const s=(0,Q.aS)(2643,"Notifications");W.ZG.appendMenuItem(W.D8.CommandPalette,{command:{id:it,title:(0,Q.aS)(2644,"Show Notifications"),category:s}}),W.ZG.appendMenuItem(W.D8.CommandPalette,{command:{id:st,title:(0,Q.aS)(2645,"Hide Notifications"),category:s},when:$.d7}),W.ZG.appendMenuItem(W.D8.CommandPalette,{command:{id:lt,title:(0,Q.aS)(2646,"Clear All Notifications"),category:s}}),W.ZG.appendMenuItem(W.D8.CommandPalette,{command:{id:ct,title:(0,Q.aS)(2647,"Accept Notification Primary Action"),category:s}}),W.ZG.appendMenuItem(W.D8.CommandPalette,{command:{id:dt,title:(0,Q.aS)(2648,"Toggle Do Not Disturb Mode"),category:s}}),W.ZG.appendMenuItem(W.D8.CommandPalette,{command:{id:ut,title:(0,Q.aS)(2649,"Toggle Do Not Disturb Mode By Source..."),category:s}}),W.ZG.appendMenuItem(W.D8.CommandPalette,{command:{id:ot,title:(0,Q.aS)(2650,"Focus Notification Toast"),category:s},when:$.M8})}(i,s,e.model),ri.Z.register(new hi),this.registerNotifications({onDidChangeNotificationsVisibility:o.Jh.map(o.Jh.any(s.onDidChangeVisibility,i.onDidChangeVisibility),(()=>s.isVisible||i.isVisible))})}restore(t){try{this.restoreParts()}catch(t){(0,h.dz)(t)}this.whenReady.finally((()=>Promise.race([this.whenRestored,(0,r.wR)(2e3)]).finally((()=>{function e(){(0,c.G)("code/didStartWorkbench"),performance.measure("perf: workbench create & restore","code/didLoadWorkbenchMain","code/didStartWorkbench")}this.isRestored()?e():this.whenRestored.finally((()=>e())),t.phase=3,this._register(new r.uC((()=>{this._register((0,n.U3)(le.Gs,(()=>t.phase=4),2500))}),2500)).schedule()}))))}}var di=i(46490),ui=i(82015),mi=i(65669),gi=i(60970),pi=i(47060),bi=i(77845),fi=i(52347);(0,v.A)('.monaco-workbench .part.titlebar{display:flex;flex-direction:row}.monaco-workbench.mac .part.titlebar{flex-direction:row-reverse}.monaco-workbench .part.titlebar>.titlebar-container{align-items:center;box-sizing:border-box;display:flex;flex-grow:1;flex-shrink:1;height:100%;justify-content:space-between;overflow:hidden;user-select:none;-webkit-user-select:none;width:100%}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom{zoom:calc(1/var(--zoom-factor))}.monaco-workbench.mac .part.titlebar>.titlebar-container{line-height:22px}.monaco-workbench.linux .part.titlebar>.titlebar-container,.monaco-workbench.web .part.titlebar>.titlebar-container,.monaco-workbench.windows .part.titlebar>.titlebar-container{justify-content:left;line-height:22px}.monaco-workbench.web.safari .part.titlebar,.monaco-workbench.web.safari .part.titlebar>.titlebar-container{overflow:visible}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-drag-region{-webkit-app-region:drag;display:block;height:100%;left:0;position:absolute;top:0;width:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{align-items:center;display:flex;height:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left{flex-grow:2;justify-content:flex-start;order:0;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center{justify-content:center;margin:0 10px;max-width:fit-content;min-width:0;order:1;width:60%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{flex-grow:2;justify-content:flex-end;min-width:min-content;order:2;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title{flex:0 1 auto;font-size:12px;margin-left:auto;margin-right:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.windows .part.titlebar>.titlebar-container>.titlebar-center>.window-title{cursor:default}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title{font-size:inherit}.monaco-workbench .part.titlebar>.titlebar-container .monaco-toolbar .actions-container{gap:4px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center{-webkit-app-region:no-drag;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center.hide{visibility:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-activeForeground)}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{align-items:stretch;background-color:var(--vscode-commandCenter-background);border:1px solid var(--vscode-commandCenter-border);border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:6px;border-top-right-radius:6px;color:var(--vscode-commandCenter-foreground);display:flex;height:22px;margin:0 6px;max-width:600px;overflow:hidden;width:38vw}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick{display:flex;justify-content:start;margin:auto;max-width:600px;overflow:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-commandCenter-foreground);font-size:14px;margin:auto 3px;opacity:.8}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-label{overflow:hidden;text-overflow:ellipsis}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple{justify-content:flex-start;padding:0 12px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple.active .action-label{background-color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:only-child{margin-left:0}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{border-color:var(--vscode-commandCenter-inactiveBorder)!important;color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .codicon-copilot{font-size:14px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:HOVER{background-color:var(--vscode-commandCenter-activeBackground);border-color:var(--vscode-commandCenter-activeBorder);color:var(--vscode-commandCenter-activeForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.menubar{flex-wrap:nowrap;min-width:36px;order:2;z-index:2500}.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-left>.menubar{margin-left:4px}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .menubar .menubar-menu-button>.menubar-menu-items-holder.monaco-menu-container,.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .monaco-toolbar .dropdown-action-container{zoom:var(--zoom-factor)}.monaco-workbench.linux .part.titlebar>.titlebar-container>.resizer,.monaco-workbench.windows .part.titlebar>.titlebar-container>.resizer{-webkit-app-region:no-drag;height:4px;position:absolute;top:0;width:100%}.monaco-workbench.linux.fullscreen .part.titlebar>.titlebar-container>.resizer,.monaco-workbench.windows.fullscreen .part.titlebar>.titlebar-container>.resizer{display:none}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{flex-shrink:0;height:100%;order:1;position:relative;width:35px;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon:not(.codicon){background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon.codicon{line-height:30px}.monaco-workbench.fullscreen .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{display:none}.monaco-workbench .part.titlebar>.titlebar-container .window-appicon>.home-bar-icon-badge{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:8px;border-left:1px solid transparent;border-top:1px solid transparent;bottom:6px;height:8px;pointer-events:none;position:absolute;right:9px;width:8px;z-index:1}.monaco-workbench .part.titlebar .window-controls-container{-webkit-app-region:no-drag;display:flex;flex-grow:0;flex-shrink:0;height:100%;text-align:center;width:0;z-index:3000}.monaco-workbench.fullscreen .part.titlebar .window-controls-container{background-color:transparent;display:none}.monaco-workbench.web .part.titlebar .titlebar-right .window-controls-container{height:env(titlebar-area-height,35px);width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench.web .part.titlebar .titlebar-left .window-controls-container{height:env(titlebar-area-height,35px);width:env(titlebar-area-x,0)}.monaco-workbench.web.mac .part.titlebar .titlebar-left .window-controls-container{order:0}.monaco-workbench.web.mac .part.titlebar .titlebar-right .window-controls-container{order:1}.monaco-workbench:not(.web):not(.mac) .part.titlebar .window-controls-container{width:calc(138px/var(--zoom-factor, 1))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container.counter-zoom .window-controls-container{width:138px}.monaco-workbench.linux:not(.web) .part.titlebar .titlebar-container.counter-zoom .window-controls-container.wco-enabled,.monaco-workbench.linux:not(.web) .part.titlebar .window-controls-container.wco-enabled{width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container:not(.counter-zoom) .window-controls-container *{zoom:calc(1/var(--zoom-factor, 1))}.monaco-workbench:not(.web).mac .part.titlebar .window-controls-container{width:70px}.monaco-workbench .part.titlebar .window-controls-container>.window-icon{align-items:center;color:var(--vscode-titleBar-activeForeground);display:flex;font-size:16px;height:100%;justify-content:center;width:46px}.monaco-workbench .part.titlebar.inactive .window-controls-container>.window-icon{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar .window-controls-container>.window-icon:before{height:16px;line-height:16px}.monaco-workbench .part.titlebar .window-controls-container>.window-icon:hover{background-color:hsla(0,0%,100%,.1)}.monaco-workbench .part.titlebar.light .window-controls-container>.window-icon:hover{background-color:rgba(0,0,0,.1)}.monaco-workbench .part.titlebar .window-controls-container>.window-icon.window-close:hover{background-color:rgba(232,17,35,.9)}.monaco-workbench .part.titlebar .window-controls-container .window-icon.window-close:hover{color:#fff}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{-webkit-app-region:no-drag;display:none;flex-grow:0;flex-shrink:0;height:100%;margin-left:auto;padding-right:2px;position:relative;text-align:center;z-index:2500}.monaco-workbench.mac:not(.web) .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{right:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container:not(.has-no-actions){display:flex;justify-content:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .codicon{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item{display:flex}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge{align-items:center;display:flex;margin-left:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge{margin-left:0}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge .badge-content{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:9px;font-weight:400;height:16px;line-height:11px;min-width:11px;padding:3px 5px;position:relative;text-align:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%;z-index:2}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content:before{mask-size:12px;-webkit-mask-size:12px;top:2px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content{border-radius:16px;font-size:9px;font-weight:600;height:12px;line-height:12px;min-width:12px;padding:0 2px;position:absolute;right:0;text-align:center;top:10px}',{});var wi,vi=i(85655),yi=i(10442),Ci=i(82804),Si=i(79268),ki=i(4141),Di=i(86003),Ei=i(7016),Ii=i(12707),_i=i(33825);let xi=class{constructor(t,e,i,s){this._disposables=new A.Cm,this._onDidChangeVisibility=new o.vl,this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.element=document.createElement("div"),this.element.classList.add("command-center");const r=i.createInstance(_i.m,this.element,W.D8.CommandCenter,{contextMenu:W.D8.TitleBarContext,hiddenItemStrategy:-1,toolbarOptions:{primaryGroup:()=>!0},telemetrySource:"commandCenter",actionViewItemProvider:(s,n)=>s instanceof W.nI&&s.item.submenu===W.D8.CommandCenterCenter?i.createInstance(Mi,s,t,{...n,hoverDelegate:e}):(0,Si.rN)(i,s,{...n,hoverDelegate:e})});this._disposables.add(o.Jh.filter(s.onShow,(()=>(0,n.G1)(this.element)),this._disposables)(this._setVisibility.bind(this,!1))),this._disposables.add(s.onHide(this._setVisibility.bind(this,!0))),this._disposables.add(r)}_setVisibility(t){this.element.classList.toggle("hide",!t),this._onDidChangeVisibility.fire()}dispose(){this._disposables.dispose()}};xi=(0,s.C)([(0,s.Q)(2,q._Y),(0,s.Q)(3,J.G)],xi);let Mi=class extends Ei.EH{static{wi=this}static{this._quickOpenCommandId="workbench.action.quickOpenWithModes"}constructor(t,e,i,s,n,o,r){super(void 0,t.actions.find((t=>"workbench.action.quickOpenWithModes"===t.id))??t.actions[0],i),this._submenu=t,this._windowTitle=e,this._hoverService=s,this._keybindingService=n,this._instaService=o,this._editorGroupService=r,this._hoverDelegate=i.hoverDelegate??(0,$t.nZ)("mouse")}render(t){super.render(t),t.classList.add("command-center-center"),t.classList.toggle("multiple",this._submenu.actions.length>1);const e=this._store.add(this._hoverService.setupManagedHover(this._hoverDelegate,t,this.getTooltip()));this._store.add(this._windowTitle.onDidChange((()=>{e.update(this.getTooltip())})));const i=[];for(const t of this._submenu.actions)t instanceof N.YH?i.push(t.actions):i.push([t]);for(let e=0;e<i.length;e++){const s=i[e],o=this._instaService.createInstance(_i.p,t,{hiddenItemStrategy:-1,telemetrySource:"commandCenterCenter",actionViewItemProvider:(t,e)=>{if(e={...e,hoverDelegate:this._hoverDelegate},t.id!==wi._quickOpenCommandId)return(0,Si.rN)(this._instaService,t,e);const i=this;return this._instaService.createInstance(class extends Ei.EH{constructor(){super(void 0,t,e)}render(t){super.render(t),t.classList.toggle("command-center-quick-pick"),t.role="button";const e=this.action,s=document.createElement("span");s.ariaHidden="true",s.className=e.class??"",s.classList.add("search-icon");const o=this._getLabel(),r=document.createElement("span");r.classList.add("search-label"),r.innerText=o,(0,n.Ln)(t,s,r);const a=this._store.add(i._hoverService.setupManagedHover(i._hoverDelegate,t,this.getTooltip()));this._store.add(i._windowTitle.onDidChange((()=>{a.update(this.getTooltip()),r.innerText=this._getLabel()}))),this._store.add(i._editorGroupService.onDidChangeEditorPartOptions((({newPartOptions:t,oldPartOptions:e})=>{t.showTabs!==e.showTabs&&(a.update(this.getTooltip()),r.innerText=this._getLabel())})))}getTooltip(){return i.getTooltip()}_getLabel(){const{prefix:t,suffix:e}=i._windowTitle.getTitleDecorations();let s=i._windowTitle.workspaceName;return i._windowTitle.isCustomTitleFormat()?s=i._windowTitle.getWindowTitle():"none"===i._editorGroupService.partOptions.showTabs&&(s=i._windowTitle.fileName??s),s||(s=(0,Q.kg)(7006,"Search")),t&&(s=(0,Q.kg)(7007,"{0} {1}",t,s)),e&&(s=(0,Q.kg)(7008,"{0} {1}",s,e)),s.replaceAll(/\r\n|\r|\n/g,"⏎")}})}});if(o.setActions(s),this._store.add(o),e<i.length-1){const e=(0,Ii.s)(St.W6.circleSmallFilled);e.style.padding="0 12px",e.style.height="100%",e.style.opacity="0.5",t.appendChild(e)}}}getTooltip(){const t=this._keybindingService.lookupKeybinding(this.action.id)?.getLabel();return t?(0,Q.kg)(7009,"Search {0} ({1}) — {2}",this._windowTitle.workspaceName,t,this._windowTitle.value):(0,Q.kg)(7010,"Search {0} — {1}",this._windowTitle.workspaceName,this._windowTitle.value)}};Mi=wi=(0,s.C)([(0,s.Q)(3,qt.T),(0,s.Q)(4,Qt.b),(0,s.Q)(5,q._Y),(0,s.Q)(6,he.m)],Mi),W.ZG.appendMenuItem(W.D8.CommandCenter,{submenu:W.D8.CommandCenterCenter,title:(0,Q.kg)(7011,"Command Center"),icon:St.W6.shield,order:101});var Ai,Ni=i(16409),Vi=i(40268),Ti=i(43959),Li=i(36612),Pi=i(84828),Bi=i(88693),Ri=i(71723);let zi=class extends Pe.S{constructor(t,e,i){super("workbench.titleService",i,e),this.instantiationService=t,this.mainPart=this._register(this.createMainTitlebarPart()),this.onMenubarVisibilityChange=this.mainPart.onMenubarVisibilityChange,this.properties=void 0,this.variables=new Map,this._register(this.registerPart(this.mainPart)),this.registerActions(),this.registerAPICommands()}createMainTitlebarPart(){return this.instantiationService.createInstance(Hi)}registerActions(){const t=this;this._register((0,W.ug)(class extends W.L{constructor(){super({id:"workbench.action.focusTitleBar",title:(0,Q.aS)(2600,"Focus Title Bar"),category:Ni.L.View,f1:!0})}run(){t.getPartByDocument((0,n.a)()).focus()}}))}registerAPICommands(){this._register(D.w.registerCommand({id:"registerWindowTitleVariable",handler:(t,e,i)=>{this.registerVariables([{name:e,contextKey:i}])},metadata:{description:"Registers a new title variable",args:[{name:"name",schema:{type:"string"},description:"The name of the variable to register"},{name:"contextKey",schema:{type:"string"},description:"The context key to use for the value of the variable"}]}}))}createAuxiliaryTitlebarPart(t,e){const i=document.createElement("div");i.classList.add("part","titlebar"),i.setAttribute("role","none"),i.style.position="relative",t.insertBefore(i,t.firstChild);const s=new A.Cm,n=this.doCreateAuxiliaryTitlebarPart(i,e);return s.add(this.registerPart(n)),s.add(o.Jh.runAndSubscribe(n.onDidChange,(()=>i.style.height=`${n.height}px`))),n.create(i),this.properties&&n.updateProperties(this.properties),this.variables.size&&n.registerVariables(Array.from(this.variables.values())),o.Jh.once(n.onWillDispose)((()=>s.dispose())),n}doCreateAuxiliaryTitlebarPart(t,e){return this.instantiationService.createInstance(Gi,t,e,this.mainPart)}updateProperties(t){this.properties=t;for(const e of this.parts)e.updateProperties(t)}registerVariables(t){const e=[];for(const i of t)this.variables.has(i.name)||(this.variables.set(i.name,i),e.push(i));for(const t of this.parts)t.registerVariables(e)}};zi=(0,s.C)([(0,s.Q)(0,q._Y),(0,s.Q)(1,p.C),(0,s.Q)(2,S.G)],zi);let Oi=class extends Pe.e{get minimumHeight(){const t=l.HZ&&(0,a.tW)();let e=this.isCommandCenterVisible||t?Ne.EX:30;return t&&(e=Math.max(e,(0,a.YG)((0,n.zk)(this.element))?.height??0)),e/(this.preventZoom?(0,a.pR)((0,n.zk)(this.element)):1)}get maximumHeight(){return this.minimumHeight}constructor(t,e,i,s,r,a,c,h,l,d,u,m,g,p,b,f){super(t,{hasTitle:!1},h,l,d),this.contextMenuService=s,this.configurationService=r,this.environmentService=a,this.instantiationService=c,this.storageService=l,this.contextKeyService=u,this.hostService=m,this.editorGroupService=g,this.menuService=b,this.keybindingService=f,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this._onMenubarVisibilityChange=this._register(new o.vl),this.onMenubarVisibilityChange=this._onMenubarVisibilityChange.event,this._onWillDispose=this._register(new o.vl),this.onWillDispose=this._onWillDispose.event,this.actionToolBarDisposable=this._register(new A.Cm),this.editorActionsChangeDisposable=this._register(new A.Cm),this.editorToolbarMenuDisposables=this._register(new A.Cm),this.layoutToolbarMenuDisposables=this._register(new A.Cm),this.activityToolbarDisposables=this._register(new A.Cm),this.titleDisposables=this._register(new A.Cm),this.titleBarStyle=(0,Ne.LF)(this.configurationService),this.isInactive=!1,this.isAuxiliary="main"!==i,this.editorService=p.createScoped(i,this._store),this.editorGroupsContainer="main"===i?g.mainPart:i,this.windowTitle=this._register(c.createInstance(Di.b7,e,i)),this.hoverDelegate=this._register((0,$t.bW)()),this.registerListeners((0,n.Q2)(e))}registerListeners(t){this._register(this.hostService.onDidChangeFocus((t=>t?this.onFocus():this.onBlur()))),this._register(this.hostService.onDidChangeActiveWindow((e=>e===t?this.onFocus():this.onBlur()))),this._register(this.configurationService.onDidChangeConfiguration((t=>this.onConfigurationChanged(t)))),this._register(this.editorGroupService.onDidChangeEditorPartOptions((t=>this.onEditorPartConfigurationChange(t))))}onBlur(){this.isInactive=!0,this.updateStyles()}onFocus(){this.isInactive=!1,this.updateStyles()}onEditorPartConfigurationChange({oldPartOptions:t,newPartOptions:e}){t.editorActionsLocation===e.editorActionsLocation&&t.showTabs===e.showTabs||this.actionToolBar&&(this.createActionToolBar(),this.createActionToolBarMenus({editorActions:!0}),this._onDidChange.fire(void 0))}onConfigurationChanged(t){if(this.isAuxiliary||(0,Ne.tx)(this.configurationService,this.titleBarStyle)||l.zx&&!l.HZ||t.affectsConfiguration("window.menuBarVisibility")&&("compact"===this.currentMenubarVisibility?this.uninstallMenubar():this.installMenubar()),this.actionToolBar){const e=t.affectsConfiguration("workbench.layoutControl.enabled"),i=t.affectsConfiguration("workbench.activityBar.location");(e||i)&&(this.createActionToolBarMenus({layoutActions:e,activityActions:i}),this._onDidChange.fire(void 0))}t.affectsConfiguration("window.commandCenter")&&(this.createTitle(),this._onDidChange.fire(void 0))}installMenubar(){this.menubar||(this.customMenubar=this._register(this.instantiationService.createInstance(Ci.j)),this.menubar=(0,n.BC)(this.leftContent,(0,n.$)("div.menubar")),this.menubar.setAttribute("role","menubar"),this._register(this.customMenubar.onVisibilityChange((t=>this.onMenubarVisibilityChanged(t)))),this.customMenubar.create(this.menubar))}uninstallMenubar(){this.customMenubar?.dispose(),this.customMenubar=void 0,this.menubar?.remove(),this.menubar=void 0,this.onMenubarVisibilityChanged(!1)}onMenubarVisibilityChanged(t){(l.HZ||l.uF||l.j9)&&(this.lastLayoutDimensions&&this.layout(this.lastLayoutDimensions.width,this.lastLayoutDimensions.height),this._onMenubarVisibilityChange.fire(t))}updateProperties(t){this.windowTitle.updateProperties(t)}registerVariables(t){this.windowTitle.registerVariables(t)}createContentArea(t){if(this.element=t,this.rootContainer=(0,n.BC)(t,(0,n.$)(".titlebar-container")),this.leftContent=(0,n.BC)(this.rootContainer,(0,n.$)(".titlebar-left")),this.centerContent=(0,n.BC)(this.rootContainer,(0,n.$)(".titlebar-center")),this.rightContent=(0,n.BC)(this.rootContainer,(0,n.$)(".titlebar-right")),!l.zx&&!l.HZ&&!(0,Ne.tx)(this.configurationService,this.titleBarStyle)&&(this.appIcon=(0,n.Hs)(this.leftContent,(0,n.$)("a.window-appicon")),!this.isAuxiliary&&l.HZ)){const t=this.environmentService.options?.homeIndicator;if(t){const e=(0,kt.HT)().getIcon(t.icon)?{id:t.icon}:St.W6.code;this.appIcon.setAttribute("href",t.href),this.appIcon.classList.add(...Dt.L0.asClassNameArray(e)),this.appIconBadge=document.createElement("div"),this.appIconBadge.classList.add("home-bar-icon-badge"),this.appIcon.appendChild(this.appIconBadge)}}if(this.dragRegion=(0,n.Hs)(this.rootContainer,(0,n.$)("div.titlebar-drag-region")),this.isAuxiliary||(0,Ne.tx)(this.configurationService,this.titleBarStyle)||l.zx&&!l.HZ||"compact"===this.currentMenubarVisibility||this.installMenubar(),this.title=(0,n.BC)(this.centerContent,(0,n.$)("div.window-title")),this.createTitle(),this.actionToolBarElement=(0,n.BC)(this.rightContent,(0,n.$)("div.action-toolbar-container")),this.createActionToolBar(),this.createActionToolBarMenus(),!(0,Ne.tx)(this.configurationService,this.titleBarStyle)){let t=l.zx?"left":"right";if(l.zx&&l.ib){const e=new Intl.Locale(l.my);"rtl"===e?.textInfo?.direction&&(t="right")}l.zx&&l.ib&&"left"===t||(this.windowControlsContainer=(0,n.BC)("left"===t?this.leftContent:this.rightContent,(0,n.$)("div.window-controls-container")),l.HZ&&(0,n.BC)("left"===t?this.rightContent:this.leftContent,(0,n.$)("div.window-controls-container")),(0,a.tW)()&&this.windowControlsContainer.classList.add("wco-enabled"))}return this._register((0,n.ko)(this.rootContainer,n.Bx.CONTEXT_MENU,(t=>{let e;n.fs.stop(t),e=l.zx&&(0,n.sb)(t.target)&&(0,n.QX)(t.target,this.title)?W.D8.TitleBarTitleContext:W.D8.TitleBarContext,this.onContextMenu(t,e)}))),l.zx&&this._register((0,n.ko)(this.title,n.Bx.MOUSE_DOWN,(t=>{t.metaKey&&(n.fs.stop(t,!0),this.onContextMenu(t,W.D8.TitleBarTitleContext))}),!0)),this.updateStyles(),this.element}createTitle(){if(this.titleDisposables.clear(),this.isCommandCenterVisible){const t=this.instantiationService.createInstance(xi,this.windowTitle,this.hoverDelegate);(0,n.Ln)(this.title,t.element),this.titleDisposables.add(t)}else this.title.innerText=this.windowTitle.value,this.titleDisposables.add(this.windowTitle.onDidChange((()=>{this.title.innerText=this.windowTitle.value})))}actionViewItemProvider(t,e){if(!this.isAuxiliary){if(t.id===Vi.y)return this.instantiationService.createInstance(Ti.jD,{position:()=>2},e);if(t.id===Vi.Z)return this.instantiationService.createInstance(Ti.D,{position:()=>2},e)}const i=this.editorGroupsContainer.activeGroup?.activeEditorPane;if(i&&i instanceof Pi.M){const s=i.getActionViewItem(t,e);if(s)return s}return(0,Si.rN)(this.instantiationService,t,{...e,menuAsChild:!1})}getKeybinding(t){const e=this.editorGroupsContainer.activeGroup?.activeEditorPane?.scopedContextKeyService??this.contextKeyService;return this.keybindingService.lookupKeybinding(t.id,e)}createActionToolBar(){this.actionToolBarDisposable.clear(),this.actionToolBar=this.actionToolBarDisposable.add(this.instantiationService.createInstance(_i.p,this.actionToolBarElement,{contextMenu:W.D8.TitleBarContext,orientation:0,ariaLabel:(0,Q.kg)(2601,"Title actions"),getKeyBinding:t=>this.getKeybinding(t),overflowBehavior:{maxItems:9,exempted:[Vi.Z,Vi.y,...Li.wr]},anchorAlignmentProvider:()=>1,telemetrySource:"titlePart",highlightToggledItems:this.editorActionsEnabled,actionViewItemProvider:(t,e)=>this.actionViewItemProvider(t,e),hoverDelegate:this.hoverDelegate})),this.editorActionsEnabled&&this.actionToolBarDisposable.add(this.editorGroupsContainer.onDidChangeActiveGroup((()=>this.createActionToolBarMenus({editorActions:!0}))))}createActionToolBarMenus(t=!0){!0===t&&(t={editorActions:!0,layoutActions:!0,activityActions:!0});const e=()=>{const t={primary:[],secondary:[]};if(this.editorActionsEnabled){this.editorActionsChangeDisposable.clear();const i=this.editorGroupsContainer.activeGroup;if(i){const s=i.createEditorActions(this.editorActionsChangeDisposable);t.primary.push(...s.actions.primary),t.secondary.push(...s.actions.secondary),this.editorActionsChangeDisposable.add(s.onDidChange((()=>e())))}}this.layoutToolbarMenu&&(0,Si.Ot)(this.layoutToolbarMenu,{},t,(()=>!this.editorActionsEnabled)),this.activityActionsEnabled&&((0,Ti.FB)(this.storageService)&&t.primary.push(Ri.NX),t.primary.push(Ri.Ov)),this.actionToolBar.setActions((0,wt.p)(t.primary),(0,wt.p)(t.secondary))};if(t.editorActions)if(this.editorToolbarMenuDisposables.clear(),this.editorActionsEnabled&&void 0!==this.editorService.activeEditor){const t={groupId:this.editorGroupsContainer.activeGroup.id};this.actionToolBar.actionRunner=new Bi.f(t),this.actionToolBar.context=t,this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner)}else this.actionToolBar.actionRunner=new N.LN,this.actionToolBar.context=void 0,this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner);t.layoutActions&&(this.layoutToolbarMenuDisposables.clear(),this.layoutControlEnabled?(this.layoutToolbarMenu=this.menuService.createMenu(W.D8.LayoutControlMenu,this.contextKeyService),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu.onDidChange((()=>e())))):this.layoutToolbarMenu=void 0),t.activityActions&&(this.activityToolbarDisposables.clear(),this.activityActionsEnabled&&this.activityToolbarDisposables.add(this.storageService.onDidChangeValue(0,Ti.ot.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)((()=>e())))),e()}updateStyles(){if(super.updateStyles(),this.element){this.isInactive?this.element.classList.add("inactive"):this.element.classList.remove("inactive");const t=this.getColor(this.isInactive?y.YW:y.Jl,((t,e)=>t.isOpaque()?t:t.makeOpaque((0,y.p9)(e))))||"";this.element.style.backgroundColor=t,this.appIconBadge&&(this.appIconBadge.style.backgroundColor=t),t&&yi.Q1.fromHex(t).isLighter()?this.element.classList.add("light"):this.element.classList.remove("light");const e=this.getColor(this.isInactive?y.Jn:y._B);this.element.style.color=e||"";const i=this.getColor(y.OP);this.element.style.borderBottom=i?`1px solid ${i}`:""}}onContextMenu(t,e){const i=new vi.P((0,n.zk)(this.element),t);this.contextMenuService.showContextMenu({getAnchor:()=>i,menuId:e,contextKeyService:this.contextKeyService,domForShadowRoot:l.zx&&l.ib?i.target:void 0})}get currentMenubarVisibility(){return this.isAuxiliary?"hidden":(0,Ne.nx)(this.configurationService)}get layoutControlEnabled(){return!this.isAuxiliary&&!1!==this.configurationService.getValue("workbench.layoutControl.enabled")}get isCommandCenterVisible(){return!1!==this.configurationService.getValue("window.commandCenter")}get editorActionsEnabled(){return"titleBar"===this.editorGroupService.partOptions.editorActionsLocation||"default"===this.editorGroupService.partOptions.editorActionsLocation&&"none"===this.editorGroupService.partOptions.showTabs}get activityActionsEnabled(){const t=this.configurationService.getValue("workbench.activityBar.location");return!this.isAuxiliary&&("top"===t||"bottom"===t)}get hasZoomableElements(){const t=!("hidden"===this.currentMenubarVisibility||"compact"===this.currentMenubarVisibility||!l.HZ&&l.zx),e=this.isCommandCenterVisible,i=this.layoutControlEnabled||this.editorActionsEnabled||this.activityActionsEnabled;return t||e||i}get preventZoom(){return(0,a.pR)((0,n.zk)(this.element))<1||!this.hasZoomableElements}layout(t,e){this.updateLayout(new n.fg(t,e)),super.layoutContents(t,e)}updateLayout(t){this.lastLayoutDimensions=t;{const e=(0,a.pR)((0,n.zk)(this.element));if(this.element.style.setProperty("--zoom-factor",e.toString()),this.rootContainer.classList.toggle("counter-zoom",this.preventZoom),this.customMenubar){const e=new n.fg(0,t.height);this.customMenubar.layout(e)}}}focus(){this.customMenubar?this.customMenubar.toggleFocus():this.element.querySelector('[tabindex]:not([tabindex="-1"])').focus()}toJSON(){return{type:"workbench.parts.titlebar"}}dispose(){this._onWillDispose.fire(),super.dispose()}};Oi=(0,s.C)([(0,s.Q)(3,vt.Z),(0,s.Q)(4,b.p),(0,s.Q)(5,Ve.L),(0,s.Q)(6,q._Y),(0,s.Q)(7,S.G),(0,s.Q)(8,p.C),(0,s.Q)(9,m.Y),(0,s.Q)(10,k.f),(0,s.Q)(11,we.v),(0,s.Q)(12,he.m),(0,s.Q)(13,Te.I),(0,s.Q)(14,ki.e),(0,s.Q)(15,Qt.b)],Oi);let Hi=class extends Oi{constructor(t,e,i,s,n,o,r,a,c,h,l,d,u){super("workbench.parts.titlebar",le.Gs,"main",t,e,i,s,n,o,r,a,c,h,l,d,u)}};Hi=(0,s.C)([(0,s.Q)(0,vt.Z),(0,s.Q)(1,b.p),(0,s.Q)(2,Ve.L),(0,s.Q)(3,q._Y),(0,s.Q)(4,S.G),(0,s.Q)(5,p.C),(0,s.Q)(6,m.Y),(0,s.Q)(7,k.f),(0,s.Q)(8,we.v),(0,s.Q)(9,he.m),(0,s.Q)(10,Te.I),(0,s.Q)(11,ki.e),(0,s.Q)(12,Qt.b)],Hi);let Gi=class extends Oi{static{Ai=this}static{this.COUNTER=1}get height(){return this.minimumHeight}constructor(t,e,i,s,o,r,a,c,h,l,d,u,m,g,p,b){super("workbench.parts.auxiliaryTitle."+Ai.COUNTER++,(0,n.zk)(t),e,s,o,r,a,c,h,l,d,u,m,g,p,b),this.container=t,this.mainTitlebar=i}get preventZoom(){return(0,a.pR)((0,n.zk)(this.element))<1||!this.mainTitlebar.hasZoomableElements}};Gi=Ai=(0,s.C)([(0,s.Q)(3,vt.Z),(0,s.Q)(4,b.p),(0,s.Q)(5,Ve.L),(0,s.Q)(6,q._Y),(0,s.Q)(7,S.G),(0,s.Q)(8,p.C),(0,s.Q)(9,m.Y),(0,s.Q)(10,k.f),(0,s.Q)(11,we.v),(0,s.Q)(12,he.m),(0,s.Q)(13,Te.I),(0,s.Q)(14,ki.e),(0,s.Q)(15,Qt.b)],Gi);var Fi=i(8957);(0,Fi.S8)((async t=>{t.get(Ae.p)})),(0,v.A)('.monaco-workbench .part.statusbar{box-sizing:border-box;cursor:default;display:flex;font-size:12px;height:22px;overflow:hidden;width:100%}.monaco-workbench:not(.reduce-motion) .part.statusbar{transition:background-color .15s ease-out}.monaco-workbench .part.statusbar.status-border-top:after{background-color:var(--status-border-top-color);content:"";height:1px;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:5}.monaco-workbench .part.statusbar>.left-items,.monaco-workbench .part.statusbar>.right-items{display:flex}.monaco-workbench .part.statusbar>.right-items{flex-direction:row-reverse;flex-wrap:wrap}.monaco-workbench .part.statusbar>.left-items{flex-grow:1}.monaco-workbench .part.statusbar>.items-container>.statusbar-item{display:inline-block;font-variant-numeric:tabular-nums;height:100%;line-height:22px;max-width:40vw;vertical-align:top}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak{position:relative}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container{height:5px;left:calc(50% - 5px);position:absolute;top:-5px;width:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container:before{border-bottom-style:solid;border-bottom-width:5px;border-left:5px solid transparent;border-right:5px solid transparent;content:"";position:fixed}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{margin-left:3px;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label{margin-left:0;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{margin-left:3px;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.compact-right>.statusbar-item-label{margin-left:0;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.left.first-visible-item{padding-left:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.right.last-visible-item{margin-right:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.left.first-visible-item,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.right.last-visible-item{padding-left:0;padding-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color>.statusbar-item-label{margin-left:0;margin-right:0;padding-left:10px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.has-background-color>.statusbar-item-label{padding-left:3px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right.has-background-color>.statusbar-item-label{padding-left:10px;padding-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{align-items:center;cursor:pointer;display:flex;height:100%;outline-width:0;overflow:hidden;padding:0 5px;text-overflow:ellipsis;white-space:pre}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{padding:0 3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a:hover:not(.disabled){color:var(--vscode-statusBarItem-hoverForeground);text-decoration:none}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a.disabled{cursor:default}.monaco-workbench .part.statusbar>.items-container>.statusbar-item span.codicon{color:inherit;font-size:14px;text-align:center}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){outline:1px solid var(--vscode-contrastActiveBorder)!important;outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){background-color:var(--vscode-statusBarItem-activeBackground)!important}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){outline:1px dashed var(--vscode-contrastActiveBorder);outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-hoverBackground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.warning-kind{background-color:var(--vscode-statusBarItem-warningBackground);color:var(--vscode-statusBarItem-warningForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.warning-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-warningHoverBackground)!important;color:var(--vscode-statusBarItem-warningHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.error-kind{background-color:var(--vscode-statusBarItem-errorBackground);color:var(--vscode-statusBarItem-errorForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.error-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-errorHoverBackground)!important;color:var(--vscode-statusBarItem-errorHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.prominent-kind{background-color:var(--vscode-statusBarItem-prominentBackground);color:var(--vscode-statusBarItem-prominentForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.prominent-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-prominentHoverBackground)!important;color:var(--vscode-statusBarItem-prominentHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.remote-kind{background-color:var(--vscode-statusBarItem-remoteBackground);color:var(--vscode-statusBarItem-remoteForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.remote-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-remoteHoverBackground)!important;color:var(--vscode-statusBarItem-remoteHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.offline-kind{background-color:var(--vscode-statusBarItem-offlineBackground);color:var(--vscode-statusBarItem-offlineForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.offline-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-offlineHoverBackground)!important;color:var(--vscode-statusBarItem-offlineHoverForeground)}',{});var Wi=i(66512),Qi=i(71849),ji=i(32696),Yi=i(99453);class Zi extends N.rc{constructor(t,e,i){super(t,e,void 0,!0),this.model=i,this.checked=!i.isHidden(t)}async run(){this.model.isHidden(this.id)?this.model.show(this.id):this.model.hide(this.id)}}class Ui extends N.rc{constructor(t,e,i){super(t,(0,Q.kg)(6986,"Hide '{0}'",e),void 0,!0),this.model=i}async run(){this.model.hide(this.id)}}I.f.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusPrevious",weight:200,primary:15,secondary:[16],when:$.tm,handler:t=>{t.get(ge.S).focusPreviousEntry()}}),I.f.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusNext",weight:200,primary:17,secondary:[18],when:$.tm,handler:t=>{t.get(ge.S).focusNextEntry()}}),I.f.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusFirst",weight:200,primary:14,when:$.tm,handler:t=>{const e=t.get(ge.S);e.focus(!1),e.focusNextEntry()}}),I.f.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusLast",weight:200,primary:13,when:$.tm,handler:t=>{const e=t.get(ge.S);e.focus(!1),e.focusPreviousEntry()}}),I.f.registerCommandAndKeybindingRule({id:"workbench.statusBar.clearFocus",weight:200,primary:9,when:$.tm,handler:t=>{const e=t.get(ge.S),i=t.get(Te.I);e.isEntryFocused()?e.focus(!1):i.activeEditorPane&&i.activeEditorPane.focus()}});class Ki extends W.L{constructor(){super({id:"workbench.action.focusStatusBar",title:(0,Q.aS)(6987,"Focus Status Bar"),category:Ni.L.View,f1:!0})}async run(t){t.get(m.Y).focusPart("workbench.parts.statusbar",(0,n.fz)())}}(0,W.ug)(Ki);class Xi extends A.jG{static{this.HIDDEN_ENTRIES_KEY="workbench.statusbar.hidden"}get entries(){return this._entries.slice(0)}get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}constructor(t){super(),this.storageService=t,this._onDidChangeEntryVisibility=this._register(new o.vl),this.onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event,this._entries=[],this.hidden=new Set,this.restoreState(),this.registerListeners()}restoreState(){const t=this.storageService.get(Xi.HIDDEN_ENTRIES_KEY,0);if(t)try{this.hidden=new Set(JSON.parse(t))}catch(t){}}registerListeners(){this._register(this.storageService.onDidChangeValue(0,Xi.HIDDEN_ENTRIES_KEY,this._register(new A.Cm))((()=>this.onDidStorageValueChange())))}onDidStorageValueChange(){const t=new Set(this.hidden);this.hidden.clear(),this.restoreState();const e=new Set;for(const i of t)this.hidden.has(i)||e.add(i);for(const i of this.hidden)t.has(i)||e.add(i);if(e.size>0)for(const t of this._entries)e.has(t.id)&&(this.updateVisibility(t.id,!0),e.delete(t.id))}add(t){this._entries.push(t),this.updateVisibility(t,!1),this.sort(),this.markFirstLastVisibleEntry()}remove(t){const e=this._entries.indexOf(t);e>=0&&(this._entries.splice(e,1),this._entries.some((e=>(0,Wi.xR)(e.priority.primary)&&e.priority.primary.id===t.id))&&this.sort(),this.markFirstLastVisibleEntry())}isHidden(t){return this.hidden.has(t)}hide(t){this.hidden.has(t)||(this.hidden.add(t),this.updateVisibility(t,!0),this.saveState())}show(t){this.hidden.has(t)&&(this.hidden.delete(t),this.updateVisibility(t,!0),this.saveState())}findEntry(t){return this._entries.find((e=>e.container===t))}getEntries(t){return this._entries.filter((e=>e.alignment===t))}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find((t=>(0,n.nR)(t.container)))}focusEntry(t,e){const i=e=>{let i=e,s=i>=0&&i<this._entries.length?this._entries[i]:void 0;for(;s&&this.isHidden(s.id);)i+=t,s=i>=0&&i<this._entries.length?this._entries[i]:void 0;return s},s=this.getFocusedEntry();if(s){const e=i(this._entries.indexOf(s)+t);if(e)return this._lastFocusedEntry=e,void e.labelContainer.focus()}const n=i(e);n&&(this._lastFocusedEntry=n,n.labelContainer.focus())}updateVisibility(t,e){if("string"==typeof t){const i=t;for(const t of this._entries)t.id===i&&this.updateVisibility(t,e)}else{const i=t,s=this.isHidden(i.id);s?(0,n.jD)(i.container):(0,n.WU)(i.container),e&&this._onDidChangeEntryVisibility.fire({id:i.id,visible:!s}),this.markFirstLastVisibleEntry()}}saveState(){this.hidden.size>0?this.storageService.store(Xi.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),0,0):this.storageService.remove(Xi.HIDDEN_ENTRIES_KEY,0)}sort(){const t=new Map,e=new Map;for(let i=0;i<this._entries.length;i++){const s=this._entries[i];if("number"==typeof s.priority.primary)t.set(s,i);else{const t=s.priority.primary.id;let i=e.get(t);if(!i){for(const s of e.values())if(s.has(t)){i=s;break}i||(i=new Map,e.set(t,i))}i.set(s.id,s)}}const i=Array.from(t.keys());let s;if(i.sort(((e,i)=>e.alignment===i.alignment?e.priority.primary!==i.priority.primary?Number(i.priority.primary)-Number(e.priority.primary):e.priority.secondary!==i.priority.secondary?i.priority.secondary-e.priority.secondary:t.get(e)-t.get(i):0===e.alignment?-1:0===i.alignment?1:0)),e.size>0){s=[];for(const t of i){const i=e.get(t.id),n=i?Array.from(i.values()):void 0;n&&s.push(...n.filter((t=>(0,Wi.xR)(t.priority.primary)&&0===t.priority.primary.alignment))),s.push(t),n&&s.push(...n.filter((t=>(0,Wi.xR)(t.priority.primary)&&1===t.priority.primary.alignment))),e.delete(t.id)}for(const[,t]of e)s.push(...t.values())}else s=i;this._entries=s}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(0)),this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(1))}doMarkFirstLastVisibleStatusbarItem(t){let e,i;for(const s of t)s.container.classList.remove("first-visible-item","last-visible-item"),!this.isHidden(s.id)&&(e||(e=s),i=s);e?.container.classList.add("first-visible-item"),i?.container.classList.add("last-visible-item")}}var $i=i(46002),qi=i(72901),Ji=i(33435);let ts=class extends A.jG{get name(){return(0,se.eU)(this.entry).name}get hasCommand(){return void 0!==this.entry?.command}constructor(t,e,i,s,n,o,r,a){super(),this.container=t,this.hoverDelegate=i,this.commandService=s,this.hoverService=n,this.notificationService=o,this.telemetryService=r,this.themeService=a,this.entry=void 0,this.foregroundListener=this._register(new A.HE),this.backgroundListener=this._register(new A.HE),this.commandMouseListener=this._register(new A.HE),this.commandTouchListener=this._register(new A.HE),this.commandKeyboardListener=this._register(new A.HE),this.hover=void 0,this.labelContainer=document.createElement("a"),this.labelContainer.tabIndex=-1,this.labelContainer.setAttribute("role","button"),this.labelContainer.className="statusbar-item-label",this._register(Ut.q.addTarget(this.labelContainer)),this.label=this._register(new es(this.labelContainer)),this.container.appendChild(this.labelContainer),this.beakContainer=document.createElement("div"),this.beakContainer.className="status-bar-item-beak-container",this.container.appendChild(this.beakContainer),this.update(e)}update(t){if(this.label.showProgress=t.showProgress??!1,this.entry&&t.text===this.entry.text||(this.label.text=t.text,t.text?(0,n.WU)(this.labelContainer):(0,n.jD)(this.labelContainer)),this.entry&&t.ariaLabel===this.entry.ariaLabel||(this.container.setAttribute("aria-label",t.ariaLabel),this.labelContainer.setAttribute("aria-label",t.ariaLabel)),this.entry&&t.role===this.entry.role||this.labelContainer.setAttribute("role",t.role||"button"),!this.entry||!this.isEqualTooltip(this.entry,t)){const e=(0,Ji.VS)(t.tooltip)?{markdown:t.tooltip,markdownNotSupportedFallback:void 0}:t.tooltip;this.hover?this.hover.update(e):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.container,e))}if(!this.entry||t.command!==this.entry.command){this.commandMouseListener.clear(),this.commandTouchListener.clear(),this.commandKeyboardListener.clear();const e=t.command;e&&(e!==Wi.q6||this.hover)?(this.commandMouseListener.value=(0,n.ko)(this.labelContainer,n.Bx.CLICK,(()=>this.executeCommand(e))),this.commandTouchListener.value=(0,n.ko)(this.labelContainer,Ut.B.Tap,(()=>this.executeCommand(e))),this.commandKeyboardListener.value=(0,n.ko)(this.labelContainer,n.Bx.KEY_DOWN,(t=>{const i=new Xt.Zh(t);i.equals(10)||i.equals(3)?(n.fs.stop(t),this.executeCommand(e)):(i.equals(9)||i.equals(15)||i.equals(17))&&(n.fs.stop(t),this.hover?.hide())})),this.labelContainer.classList.remove("disabled")):this.labelContainer.classList.add("disabled")}this.entry&&t.showBeak===this.entry.showBeak||(t.showBeak?this.container.classList.add("has-beak"):this.container.classList.remove("has-beak"));const e=!!t.backgroundColor||t.kind&&"standard"!==t.kind;if(!this.entry||t.kind!==this.entry.kind){for(const t of Wi.vm)this.container.classList.remove(`${t}-kind`);t.kind&&"standard"!==t.kind&&this.container.classList.add(`${t.kind}-kind`),this.container.classList.toggle("has-background-color",e)}this.entry&&t.color===this.entry.color||this.applyColor(this.labelContainer,t.color),this.entry&&t.backgroundColor===this.entry.backgroundColor||(this.container.classList.toggle("has-background-color",e),this.applyColor(this.container,t.backgroundColor,!0)),this.entry=t}isEqualTooltip({tooltip:t},{tooltip:e}){return void 0===t?void 0===e:(0,Ji.VS)(t)?(0,Ji.VS)(e)&&(0,Ji.nK)(t,e):t===e}async executeCommand(t){if(t===Wi.q6)this.hover?.show(!0);else{const e="string"==typeof t?t:t.id,i="string"==typeof t?[]:t.arguments??[];this.telemetryService.publicLog2("workbenchActionExecuted",{id:e,from:"status bar"});try{await this.commandService.executeCommand(e,...i)}catch(t){this.notificationService.error((0,M.rx)(t))}}}applyColor(t,e,i){let s;if(i?this.backgroundListener.clear():this.foregroundListener.clear(),e)if((0,qi.j)(e)){s=this.themeService.getColorTheme().getColor(e.id)?.toString();const n=this.themeService.onDidColorThemeChange((s=>{const n=s.getColor(e.id)?.toString();i?t.style.backgroundColor=n??"":t.style.color=n??""}));i?this.backgroundListener.value=n:this.foregroundListener.value=n}else s=e;i?t.style.backgroundColor=s??"":t.style.color=s??""}};ts=(0,s.C)([(0,s.Q)(3,yt.w),(0,s.Q)(4,qt.T),(0,s.Q)(5,w.O),(0,s.Q)(6,Z.k),(0,s.Q)(7,S.G)],ts);class es extends $i.M{constructor(t){super(t),this.container=t,this.progressCodicon=(0,Ii.s)(kt.oE),this.currentText="",this.currentShowProgress=!1}set showProgress(t){this.currentShowProgress!==t&&(this.currentShowProgress=t,this.progressCodicon=(0,Ii.s)("syncing"===t?kt.oE:kt.VK),this.text=this.currentText)}set text(t){if(this.currentShowProgress){this.container.firstChild!==this.progressCodicon&&this.container.appendChild(this.progressCodicon);for(const t of Array.from(this.container.childNodes))t!==this.progressCodicon&&t.remove();let e=t??"";e&&(e=` ${e}`),(0,n.BC)(this.container,...(0,Ii.n)(e))}else super.text=t}}var is,ss;let ns=class extends Pe.e{static{is=this}static{this.HEIGHT=22}constructor(t,e,i,s,n,r,a,c){super(t,{hasTitle:!1},i,n,r),this.instantiationService=e,this.contextService=s,this.storageService=n,this.contextMenuService=a,this.contextKeyService=c,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=is.HEIGHT,this.maximumHeight=is.HEIGHT,this.pendingEntries=[],this.viewModel=this._register(new Xi(this.storageService)),this.onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility,this._onWillDispose=this._register(new o.vl),this.onWillDispose=this._onWillDispose.event,this.hoverDelegate=this._register(this.instantiationService.createInstance(Yi.f,"element",!0,((t,e)=>({persistence:{hideOnKeyDown:!0,sticky:e}})))),this.compactEntriesDisposable=this._register(new A.HE),this.styleOverrides=new Set,this.registerListeners()}registerListeners(){this._register(this.onDidChangeEntryVisibility((()=>this.updateCompactEntries()))),this._register(this.contextService.onDidChangeWorkbenchState((()=>this.updateStyles())))}addEntry(t,e,i,s=0){let n;return n=(0,Wi.eq)(s)?s:{primary:s,secondary:(0,U.tW)(e)},this.element?this.doAddEntry(t,e,i,n):this.doAddPendingEntry(t,e,i,n)}doAddPendingEntry(t,e,i,s){const n={entry:t,id:e,alignment:i,priority:s};this.pendingEntries.push(n);const o={update:t=>{n.accessor?n.accessor.update(t):n.entry=t},dispose:()=>{n.accessor?n.accessor.dispose():this.pendingEntries=this.pendingEntries.filter((t=>t!==n))}};return o}doAddEntry(t,e,i,s){const n=this.doCreateStatusItem(e,i),o=this.instantiationService.createInstance(ts,n,t,this.hoverDelegate),r=new class{constructor(){this.id=e,this.alignment=i,this.priority=s,this.container=n,this.labelContainer=o.labelContainer}get name(){return o.name}get hasCommand(){return o.hasCommand}},{needsFullRefresh:a}=this.doAddOrRemoveModelEntry(r,!0);return a?this.appendStatusbarEntries():this.appendStatusbarEntry(r),{update:t=>{o.update(t)},dispose:()=>{const{needsFullRefresh:t}=this.doAddOrRemoveModelEntry(r,!1);t?this.appendStatusbarEntries():n.remove(),(0,A.AS)(o)}}}doCreateStatusItem(t,e,...i){const s=document.createElement("div");return s.id=t,s.classList.add("statusbar-item"),i&&s.classList.add(...i),1===e?s.classList.add("right"):s.classList.add("left"),s}doAddOrRemoveModelEntry(t,e){const i=this.viewModel.entries;e?this.viewModel.add(t):this.viewModel.remove(t);const s=this.viewModel.entries;return e?i.splice(s.indexOf(t),0,t):i.splice(i.indexOf(t),1),{needsFullRefresh:!(0,V.aI)(i,s)}}isEntryVisible(t){return!this.viewModel.isHidden(t)}updateEntryVisibility(t,e){e?this.viewModel.show(t):this.viewModel.hide(t)}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(t=!0){this.getContainer()?.focus();const e=this.viewModel.lastFocusedEntry;t&&e&&setTimeout((()=>e.labelContainer.focus()),0)}createContentArea(t){this.element=t;const e=this._register(this.contextKeyService.createScoped(this.element));return $.tm.bindTo(e).set(!0),this.leftItemsContainer=document.createElement("div"),this.leftItemsContainer.classList.add("left-items","items-container"),this.element.appendChild(this.leftItemsContainer),this.element.tabIndex=0,this.rightItemsContainer=document.createElement("div"),this.rightItemsContainer.classList.add("right-items","items-container"),this.element.appendChild(this.rightItemsContainer),this._register((0,n.ko)(t,n.Bx.CONTEXT_MENU,(t=>this.showContextMenu(t)))),this._register(Ut.q.addTarget(t)),this._register((0,n.ko)(t,Ut.B.Contextmenu,(t=>this.showContextMenu(t)))),this.createInitialStatusbarEntries(),this.element}createInitialStatusbarEntries(){for(this.appendStatusbarEntries();this.pendingEntries.length;){const t=this.pendingEntries.shift();t&&(t.accessor=this.addEntry(t.entry,t.id,t.alignment,t.priority.primary))}}appendStatusbarEntries(){const t=(0,se.eU)(this.leftItemsContainer),e=(0,se.eU)(this.rightItemsContainer);(0,n.w_)(t),(0,n.w_)(e);for(const i of[...this.viewModel.getEntries(0),...this.viewModel.getEntries(1).reverse()])(0===i.alignment?t:e).appendChild(i.container);this.updateCompactEntries()}appendStatusbarEntry(t){const e=this.viewModel.getEntries(t.alignment);1===t.alignment&&e.reverse();const i=(0,se.eU)(0===t.alignment?this.leftItemsContainer:this.rightItemsContainer),s=e.indexOf(t);s+1===e.length?i.appendChild(t.container):i.insertBefore(t.container,e[s+1].container),this.updateCompactEntries()}updateCompactEntries(){const t=this.viewModel.entries,e=new Map;for(const i of t)this.viewModel.isHidden(i.id)||e.set(i.id,i),i.container.classList.remove("compact-left","compact-right");const i=new Map;for(const t of e.values())if((0,Wi.xR)(t.priority.primary)&&t.priority.primary.compact){const s=t.priority.primary.id,n=e.get(s);if(!n)continue;let o=i.get(s);if(!o){for(const t of i.values())if(t.has(s)){o=t;break}o||(o=new Map,i.set(s,o))}o.set(t.id,t),o.set(n.id,n),0===t.priority.primary.alignment?(n.container.classList.add("compact-left"),t.container.classList.add("compact-right")):(n.container.classList.add("compact-right"),t.container.classList.add("compact-left"))}const s=this.getColor(y.t2),o=this.getColor(y.zU);if(this.compactEntriesDisposable.value=new A.Cm,s&&o&&!(0,ji.Bb)(this.theme.type))for(const[,t]of i)for(const e of t.values())e.hasCommand&&(this.compactEntriesDisposable.value.add((0,n.ko)(e.labelContainer,n.Bx.MOUSE_OVER,(()=>{t.forEach((t=>t.labelContainer.style.backgroundColor=s)),e.labelContainer.style.backgroundColor=o}))),this.compactEntriesDisposable.value.add((0,n.ko)(e.labelContainer,n.Bx.MOUSE_OUT,(()=>{t.forEach((t=>t.labelContainer.style.backgroundColor=""))}))))}showContextMenu(t){n.fs.stop(t,!0);const e=new vi.P((0,n.zk)(this.element),t);let i;this.contextMenuService.showContextMenu({getAnchor:()=>e,getActions:()=>(i=this.getContextMenuActions(e),i),onHide:()=>{i&&(0,A.xr)(i)}})}getContextMenuActions(t){const e=[];e.push((0,N.ih)({id:Qi.gw.ID,label:(0,Q.kg)(2587,"Hide Status Bar"),run:()=>this.instantiationService.invokeFunction((t=>(new Qi.gw).run(t)))})),e.push(new N.wv);const i=new Set;for(const t of this.viewModel.entries)i.has(t.id)||(e.push(new Zi(t.id,t.name,this.viewModel)),i.add(t.id));let s;for(let e=t.target;e;e=e.parentElement){const t=this.viewModel.findEntry(e);if(t){s=t;break}}return s&&(e.push(new N.wv),e.push(new Ui(s.id,s.name,this.viewModel))),e}updateStyles(){super.updateStyles();const t=(0,se.eU)(this.getContainer()),e=[...this.styleOverrides].sort(((t,e)=>t.priority-e.priority))[0],i=this.getColor(e?.background??(1!==this.contextService.getWorkbenchState()?y.KT:y.Nn))||"";t.style.backgroundColor=i;const s=this.getColor(e?.foreground??(1!==this.contextService.getWorkbenchState()?y.NV:y.US))||"";t.style.color=s;const o=this.getColor(y.zR),r=this.getColor(e?.border??(1!==this.contextService.getWorkbenchState()?y.uy:y.d2))||this.getColor(ae.b1);r?(t.classList.add("status-border-top"),t.style.setProperty("--status-border-top-color",r)):(t.classList.remove("status-border-top"),t.style.removeProperty("--status-border-top-color"));const a=this.getColor(y.R0);this.styleElement||(this.styleElement=(0,n.li)(t)),this.styleElement.textContent=`\n\n\t\t\t\t/* Status bar focus outline */\n\t\t\t\t.monaco-workbench .part.statusbar:focus {\n\t\t\t\t\toutline-color: ${a};\n\t\t\t\t}\n\n\t\t\t\t/* Status bar item focus outline */\n\t\t\t\t.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible {\n\t\t\t\t\toutline: 1px solid ${this.getColor(ae.bu)??o};\n\t\t\t\t\toutline-offset: ${r?"-2px":"-1px"};\n\t\t\t\t}\n\n\t\t\t\t/* Notification Beak */\n\t\t\t\t.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {\n\t\t\t\t\tborder-bottom-color: ${i};\n\t\t\t\t}\n\t\t\t`}layout(t,e,i,s){super.layout(t,e,i,s),super.layoutContents(t,e)}overrideStyle(t){return this.styleOverrides.add(t),this.updateStyles(),(0,A.s)((()=>{this.styleOverrides.delete(t),this.updateStyles()}))}toJSON(){return{type:"workbench.parts.statusbar"}}dispose(){this._onWillDispose.fire(),super.dispose()}};ns=is=(0,s.C)([(0,s.Q)(1,q._Y),(0,s.Q)(2,S.G),(0,s.Q)(3,Me.V),(0,s.Q)(4,p.C),(0,s.Q)(5,m.Y),(0,s.Q)(6,vt.Z),(0,s.Q)(7,k.f)],ns);let os=class extends ns{constructor(t,e,i,s,n,o,r){super("workbench.parts.statusbar",t,e,i,s,n,o,r)}};os=(0,s.C)([(0,s.Q)(0,q._Y),(0,s.Q)(1,S.G),(0,s.Q)(2,Me.V),(0,s.Q)(3,p.C),(0,s.Q)(4,m.Y),(0,s.Q)(5,vt.Z),(0,s.Q)(6,k.f)],os);let rs=class extends ns{static{ss=this}static{this.COUNTER=1}constructor(t,e,i,s,n,o,r,a){super("workbench.parts.auxiliaryStatus."+ss.COUNTER++,e,i,s,n,o,r,a),this.container=t,this.height=ns.HEIGHT}};rs=ss=(0,s.C)([(0,s.Q)(1,q._Y),(0,s.Q)(2,S.G),(0,s.Q)(3,Me.V),(0,s.Q)(4,p.C),(0,s.Q)(5,m.Y),(0,s.Q)(6,vt.Z),(0,s.Q)(7,k.f)],rs);let as=class extends Pe.S{constructor(t,e,i){super("workbench.statusBarService",i,e),this.instantiationService=t,this.mainPart=this._register(this.instantiationService.createInstance(os)),this._onDidCreateAuxiliaryStatusbarPart=this._register(new o.vl),this.onDidCreateAuxiliaryStatusbarPart=this._onDidCreateAuxiliaryStatusbarPart.event,this.onDidChangeEntryVisibility=this.mainPart.onDidChangeEntryVisibility,this._register(this.registerPart(this.mainPart))}createAuxiliaryStatusbarPart(t){const e=document.createElement("footer");e.classList.add("part","statusbar"),e.setAttribute("role","status"),e.style.position="relative",e.setAttribute("aria-live","off"),e.setAttribute("tabindex","0"),t.appendChild(e);const i=this.instantiationService.createInstance(rs,e),s=this.registerPart(i);return i.create(e),o.Jh.once(i.onWillDispose)((()=>s.dispose())),this._onDidCreateAuxiliaryStatusbarPart.fire(i),i}createScoped(t,e){return e.add(this.instantiationService.createInstance(cs,t))}addEntry(t,e,i,s=0){return t.showInAllWindows?this.doAddEntryToAllWindows(t,e,i,s):this.mainPart.addEntry(t,e,i,s)}doAddEntryToAllWindows(t,e,i,s=0){const n=new A.Cm,o=new Set;function r(r){const a=new A.Cm;a.add(r.onWillDispose((()=>a.dispose())));const c=a.add(r.addEntry(t,e,i,s));o.add(c),a.add((0,A.s)((()=>o.delete(c)))),n.add(a),a.add((0,A.s)((()=>n.delete(a))))}for(const t of this.parts)r(t);return n.add(this.onDidCreateAuxiliaryStatusbarPart((t=>r(t)))),{update:t=>{for(const e of o)e.update(t)},dispose:()=>n.dispose()}}isEntryVisible(t){return this.mainPart.isEntryVisible(t)}updateEntryVisibility(t,e){for(const i of this.parts)i.updateEntryVisibility(t,e)}focus(t){this.activePart.focus(t)}focusNextEntry(){this.activePart.focusNextEntry()}focusPreviousEntry(){this.activePart.focusPreviousEntry()}isEntryFocused(){return this.activePart.isEntryFocused()}overrideStyle(t){const e=new A.Cm;for(const i of this.parts)e.add(i.overrideStyle(t));return e}};as=(0,s.C)([(0,s.Q)(0,q._Y),(0,s.Q)(1,p.C),(0,s.Q)(2,S.G)],as);let cs=class extends A.jG{constructor(t,e){super(),this.statusbarEntryContainer=t,this.statusbarService=e,this.onDidChangeEntryVisibility=this.statusbarEntryContainer.onDidChangeEntryVisibility}createAuxiliaryStatusbarPart(t){return this.statusbarService.createAuxiliaryStatusbarPart(t)}createScoped(t,e){return this.statusbarService.createScoped(t,e)}getPart(){return this.statusbarEntryContainer}addEntry(t,e,i,s=0){return this.statusbarEntryContainer.addEntry(t,e,i,s)}isEntryVisible(t){return this.statusbarEntryContainer.isEntryVisible(t)}updateEntryVisibility(t,e){this.statusbarEntryContainer.updateEntryVisibility(t,e)}focus(t){this.statusbarEntryContainer.focus(t)}focusNextEntry(){this.statusbarEntryContainer.focusNextEntry()}focusPreviousEntry(){this.statusbarEntryContainer.focusPreviousEntry()}isEntryFocused(){return this.statusbarEntryContainer.isEntryFocused()}overrideStyle(t){return this.statusbarEntryContainer.overrideStyle(t)}};cs=(0,s.C)([(0,s.Q)(1,ge.S)],cs);var hs=i(32273),ls=i(90099),ds=i(52808),us=i(98914),ms=i(73643),gs=i(8272),ps=i(9208),bs=i(87866);function fs(t){const e=t;return"string"==typeof e.id&&e.id.length>0&&"string"==typeof e.name&&"string"==typeof e.text&&("left"===e.alignment||"right"===e.alignment)&&(void 0===e.command||"string"==typeof e.command)&&(void 0===e.tooltip||"string"==typeof e.tooltip)&&(void 0===e.priority||"number"==typeof e.priority)&&(void 0===e.accessibilityInformation||(0,us.z4)(e.accessibilityInformation))}const ws={type:"object",required:["id","text","alignment","name"],properties:{id:{type:"string",markdownDescription:(0,Q.kg)(2588,"The identifier of the status bar entry. Must be unique within the extension. The same value must be used when calling the `vscode.window.createStatusBarItem(id, ...)`-API")},name:{type:"string",description:(0,Q.kg)(2589,"The name of the entry, like 'Python Language Indicator', 'Git Status' etc. Try to keep the length of the name short, yet descriptive enough that users can understand what the status bar item is about.")},text:{type:"string",description:(0,Q.kg)(2590,"The text to show for the entry. You can embed icons in the text by leveraging the `$(<name>)`-syntax, like 'Hello $(globe)!'")},tooltip:{type:"string",description:(0,Q.kg)(2591,"The tooltip text for the entry.")},command:{type:"string",description:(0,Q.kg)(2592,"The command to execute when the status bar entry is clicked.")},alignment:{type:"string",enum:["left","right"],description:(0,Q.kg)(2593,"The alignment of the status bar entry.")},priority:{type:"number",description:(0,Q.kg)(2594,"The priority of the status bar entry. Higher value means the item should be shown more to the left.")},accessibilityInformation:{type:"object",description:(0,Q.kg)(2595,"Defines the role and aria label to be used when the status bar entry is focused."),properties:{role:{type:"string",description:(0,Q.kg)(2596,"The role of the status bar entry which defines how a screen reader interacts with it. More about aria roles can be found here https://w3c.github.io/aria/#widget_roles")},label:{type:"string",description:(0,Q.kg)(2597,"The aria label of the status bar entry. Defaults to the entry's text.")}}}}},vs={description:(0,Q.kg)(2598,"Contributes items to the status bar."),oneOf:[ws,{type:"array",items:ws}]},ys=ds.g1.registerExtensionPoint({extensionPoint:"statusBarItems",jsonSchema:vs});let Cs=class{constructor(t){const e=new A.Cm;ys.setHandler((i=>{e.clear();for(const s of i){if(!(0,ls.o)(s.description,"contribStatusBarItems")){s.collector.error(`The ${ys.name} is proposed API`);continue}const{value:i,collector:n}=s;for(const o of ms.f.wrap(i)){if(!fs(o)){n.error((0,Q.kg)(2599,"Invalid status bar item contribution."));continue}const i=(0,ps.awo)(s.description.identifier,o.id);0===t.setOrUpdateEntry(i,i,gs.H$.toKey(s.description.identifier),o.name??s.description.displayName??s.description.name,o.text,o.tooltip,o.command?{id:o.command,title:o.name}:void 0,void 0,void 0,"left"===o.alignment,o.priority,o.accessibilityInformation)&&e.add((0,A.s)((()=>t.unsetEntry(i))))}}}))}};Cs=(0,s.C)([(0,s.Q)(0,hs.K)],Cs);let Ss=class{static{this.ID="workbench.contrib.statusBarItemsExtensionPoint"}constructor(t){this.instantiationService=t,this.instantiationService.createInstance(Cs)}};Ss=(0,s.C)([(0,s.Q)(0,q._Y)],Ss),(0,bs.tr)(Ss.ID,Ss,1),(0,v.A)('.monaco-workbench .part.banner{background-color:var(--vscode-banner-background);box-sizing:border-box;color:var(--vscode-banner-foreground);cursor:default;display:flex;font-size:12px;height:100%;overflow:visible;width:100%}.monaco-workbench .part.banner .icon-container{align-items:center;display:flex;flex-shrink:0;padding:0 6px 0 10px}.monaco-workbench .part.banner .icon-container .codicon{color:var(--vscode-banner-iconForeground)}.monaco-workbench .part.banner .icon-container.custom-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px;margin:0 6px 0 10px;padding:0;width:16px}.monaco-workbench .part.banner .message-container{line-height:26px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part.banner .message-container a{color:var(--vscode-banner-foreground)}.monaco-workbench .part.banner .message-container p{margin-block-end:0;margin-block-start:0}.monaco-workbench .part.banner .message-actions-container{flex-grow:1;flex-shrink:0;line-height:26px}.monaco-workbench .part.banner .message-actions-container a{color:var(--vscode-banner-foreground);cursor:pointer;margin-left:12px;padding:3px;text-decoration:underline}.monaco-workbench .part.banner .message-container a{cursor:pointer;text-decoration:underline}.monaco-workbench .part.banner .action-container{padding:0 10px 0 6px}.monaco-workbench .part.banner .action-container .codicon{color:var(--vscode-banner-foreground)}',{});var ks=i(68158),Ds=i(9126),Es=i(6104);let Is=class extends Pe.e{get minimumHeight(){return this.visible?this.height:0}get maximumHeight(){return this.visible?this.height:0}get onDidChange(){return this._onDidChangeSize.event}constructor(t,e,i,s,n){super("workbench.parts.banner",{hasTitle:!1},t,i,e),this.contextKeyService=s,this.instantiationService=n,this.height=26,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this._onDidChangeSize=this._register(new o.vl),this.visible=!1,this.focusedActionIndex=-1,this.markdownRenderer=this.instantiationService.createInstance(Es.T,{})}createContentArea(t){this.element=t,this.element.tabIndex=0,this._register((0,n.ko)(this.element,n.Bx.FOCUS,(()=>{-1!==this.focusedActionIndex&&this.focusActionLink()})));const e=this._register(this.contextKeyService.createScoped(this.element));return $.kn.bindTo(e).set(!0),this.element}close(t){this.setVisibility(!1),(0,n.w_)(this.element),"function"==typeof t.onClose&&t.onClose(),this.item=void 0}focusActionLink(){const t=this.item?.actions?.length??0;if(this.focusedActionIndex<t){const t=this.messageActionsContainer?.children[this.focusedActionIndex];(0,n.sb)(t)&&(this.actionBar?.setFocusable(!1),t.focus())}else this.actionBar?.focus(0)}getAriaLabel(t){return t.ariaLabel?t.ariaLabel:"string"==typeof t.message?t.message:void 0}getBannerMessage(t){if("string"==typeof t){const e=(0,n.$)("span");return e.innerText=t,e}return this.markdownRenderer.render(t).element}setVisibility(t){t!==this.visible&&(this.visible=t,this.focusedActionIndex=-1,this.layoutService.setPartHidden(!t,"workbench.parts.banner"),this._onDidChangeSize.fire(void 0))}focus(){this.focusedActionIndex=-1,this.element.focus()}focusNextAction(){const t=this.item?.actions?.length??0;this.focusedActionIndex=this.focusedActionIndex<t?this.focusedActionIndex+1:0,this.focusActionLink()}focusPreviousAction(){const t=this.item?.actions?.length??0;this.focusedActionIndex=this.focusedActionIndex>0?this.focusedActionIndex-1:t,this.focusActionLink()}hide(t){this.item?.id===t&&this.setVisibility(!1)}show(t){if(t.id===this.item?.id)return void this.setVisibility(!0);(0,n.w_)(this.element);const e=this.getAriaLabel(t);e&&this.element.setAttribute("aria-label",e);const i=(0,n.BC)(this.element,(0,n.$)("div.icon-container"));i.setAttribute("aria-hidden","true"),Dt.L0.isThemeIcon(t.icon)?i.appendChild((0,n.$)(`div${Dt.L0.asCSSSelector(t.icon)}`)):(i.classList.add("custom-icon"),bt.rz.isUri(t.icon)&&(i.style.backgroundImage=(0,ks.Tf)(t.icon)));const s=(0,n.BC)(this.element,(0,n.$)("div.message-container"));if(s.setAttribute("aria-hidden","true"),s.appendChild(this.getBannerMessage(t.message)),this.messageActionsContainer=(0,n.BC)(this.element,(0,n.$)("div.message-actions-container")),t.actions)for(const e of t.actions)this._register(this.instantiationService.createInstance(Ds.N,this.messageActionsContainer,{...e,tabIndex:-1},{}));const o=(0,n.BC)(this.element,(0,n.$)("div.action-container"));this.actionBar=this._register(new wt.E(o));const r=t.closeLabel??"Close Banner",a=this._register(new N.rc("banner.close",r,Dt.L0.asClassName(kt.$_),!0,(()=>this.close(t))));this.actionBar.push(a,{icon:!0,label:!1}),this.actionBar.setFocusable(!1),this.setVisibility(!0),this.item=t}toJSON(){return{type:"workbench.parts.banner"}}};Is=(0,s.C)([(0,s.Q)(0,S.G),(0,s.Q)(1,m.Y),(0,s.Q)(2,p.C),(0,s.Q)(3,k.f),(0,s.Q)(4,q._Y)],Is),I.f.registerCommandAndKeybindingRule({id:"workbench.banner.focusBanner",weight:200,primary:9,when:$.kn,handler:t=>{t.get(Fe.f).focus()}}),I.f.registerCommandAndKeybindingRule({id:"workbench.banner.focusNextAction",weight:200,primary:17,secondary:[18],when:$.kn,handler:t=>{t.get(Fe.f).focusNextAction()}}),I.f.registerCommandAndKeybindingRule({id:"workbench.banner.focusPreviousAction",weight:200,primary:15,secondary:[16],when:$.kn,handler:t=>{t.get(Fe.f).focusPreviousAction()}});class _s extends W.L{static{this.ID="workbench.action.focusBanner"}static{this.LABEL=(0,Q.aS)(2586,"Focus Banner")}constructor(){super({id:_s.ID,title:_s.LABEL,category:Ni.L.View,f1:!0})}async run(t){t.get(m.Y).focusPart("workbench.parts.banner")}}(0,W.ug)(_s);var xs,Ms=i(93152);let As=class{static{xs=this}static{this.WELCOME_BANNER_DISMISSED_KEY="workbench.banner.welcome.dismissed"}constructor(t,e,i){const s=i.options?.welcomeBanner;if(!s)return;if(e.getBoolean(xs.WELCOME_BANNER_DISMISSED_KEY,0,!1))return;let n;"string"==typeof s.icon?n=Dt.L0.fromId(s.icon):s.icon&&(n=bt.rz.revive(s.icon)),t.show({id:"welcome.banner",message:s.message,icon:n,actions:s.actions,onClose:()=>{e.store(xs.WELCOME_BANNER_DISMISSED_KEY,!0,0,1)}})}};As=xs=(0,s.C)([(0,s.Q)(0,Fe.f),(0,s.Q)(1,p.C),(0,s.Q)(2,Ve.L)],As),Ms.O.as(bs.Fd.Workbench).registerWorkbenchContribution(As,3),(0,Fi.S8)((async t=>{t.get(Fe.f)}));var Ns=i(90917),Vs=i(35204),Ts=i(91279),Ls=i(63101),Ps=i(73586),Bs=i(63534),Rs=i(19383),zs=i(15904),Os=i(39639),Hs=i(65734),Gs=i(48424),Fs=i(96220),Ws=i(865),Qs=i(25202),js=i(13175),Ys=i(46651);class Zs extends Pi.M{constructor(t,e){super(t,e,Qs.QE.get(Z.k),Qs.QE.get(S.G),Qs.QE.get(p.C))}}class Us extends Zs{constructor(){super(...arguments),this.inputDisposable=this._register(new A.HE)}createEditor(t){this.container=this.initialize(),this.wrapper=document.createElement("div"),this.wrapper.append(this.container),this.scrollbar=this._register(new Hs.MU(this.wrapper,{horizontal:1,vertical:1})),t.appendChild(this.scrollbar.getDomNode());const e=new ResizeObserver((()=>{(0,se.eU)(this.scrollbar).scanDomNode()}));e.observe(this.container),this._register({dispose(){e.disconnect()}})}async setInput(t,e,i,s){await super.setInput(t,e,i,s),s.isCancellationRequested||(this.inputDisposable.value=await(this.renderInput?.(t,e,i,s)),(0,se.eU)(this.scrollbar).scanDomNode())}layout(t){const[e,i]=(0,se.Rd)(this.wrapper,this.scrollbar);(0,n.Ej)(e,t.width,t.height),i.scanDomNode()}focus(){(0,se.eU)(this.container).focus()}clearInput(){this.inputDisposable.clear(),super.clearInput()}}class Ks extends zs.m{constructor(t,e){super(),this.closeHandler=e,this.dirty=!1,this._capabilities=0,this.resource=t}get capabilities(){return this._capabilities}addCapability(t){this._capabilities|=t,this._onDidChangeCapabilities.fire()}removeCapability(t){this._capabilities&=~t,this._onDidChangeCapabilities.fire()}get editorId(){return this.typeId}setName(t){this.name=t,this._onDidChangeLabel.fire()}setTitle(t){this.title=t,this._onDidChangeLabel.fire()}setDescription(t){this.description=t,this._onDidChangeLabel.fire()}getLabelValue(t,e){if("string"==typeof t)return t;switch(e){case 0:return t.short;case 2:return t.long;default:return t.medium}}getName(){return this.name??"Unnamed"}getTitle(t){return this.getLabelValue(this.title??this.getName(),t)}getDescription(t){return this.getLabelValue(this.description??this.getName(),t)}isDirty(){return this.dirty}setDirty(t){this.dirty=t,this._onDidChangeDirty.fire()}toUntyped(){if(null!=this.resource)return{resource:this.resource}}}function Xs(t,e,i,s){return Ms.O.as(Ee.q5.EditorPane).registerEditorPane(Os.nQ.create(i,t,e),s.map((t=>new ui.d(t))))}function $s(t,e,i,s){return(0,Ys.Wi)((n=>n.get(Rs.Y).registerEditor(t,e,i,s)))}function qs(t,e){return Ms.O.as(Ee.q5.EditorFactory).registerEditorSerializer(t,e)}const Js=Ms.O.as(Ts.Fd.ViewContainersRegistry),tn=Ms.O.as(Ts.Fd.ViewsRegistry);function en(t){const e=null!=t.icon?bt.rz.parse(t.icon):void 0,i=t.viewContainer??Js.registerViewContainer({id:t.id,title:{value:t.name,original:t.name},order:t.order,ctorDescriptor:new ui.d(Ps.zv,[t.id,{mergeViewWithContainerWhenSingleView:!0}]),hideIfEmpty:!0,icon:e},t.location,{isDefault:t.default}),s=[{id:t.id,name:{value:t.name,original:t.name},ctorDescriptor:new ui.d(class extends Ls.OZ{renderBody(e){super.renderBody(e),this.wrapper=document.createElement("div"),this.scrollbar=this._register(new Hs.MU(this.wrapper,{horizontal:1,vertical:1})),this.container=(0,n.$)(".view-pane-content"),this.container.style.display="flex",this.container.style.alignItems="stretch",this._register(t.renderBody(this.container,this.scrollbar)),this.wrapper.append(this.container),e.appendChild(this.scrollbar.getDomNode());const i=new ResizeObserver((()=>{(0,se.eU)(this.scrollbar).scanDomNode()}));i.observe(this.container),this._register({dispose(){i.disconnect()}})}getActionViewItem(e,i){const s=(t.actions??[]).find((t=>t.id===e.id));return null!=s?.render?new class extends Ei.EH{constructor(){super(null,e),this.render=s.render}}:super.getActionViewItem(e,i)}layoutBody(t,e){const[i,s]=(0,se.Rd)(this.wrapper,this.scrollbar);(0,n.Ej)(i,e,t),s.scanDomNode()}}),canMoveView:t.canMoveView??!0,canToggleVisibility:t.canToggleVisibility??!1,hideByDefault:t.hideByDefault??!1,collapsed:t.collapsed??!1,order:t.order,containerIcon:e}];tn.registerViews(s,i);const o=new A.Cm;o.add({dispose(){tn.deregisterViews(s,i),null==t.viewContainer&&Js.deregisterViewContainer(i)}});for(const e of t.actions??[])o.add((0,W.ug)(class extends W.L{constructor(){super({id:e.id,title:{value:e.title,original:e.title},category:Ni.L.View,menu:[{id:W.D8.ViewTitle,when:E.M$.equals("view",t.id),group:"navigation",order:e.order},{id:W.D8.CommandPalette}],tooltip:e.tooltip,icon:null!=e.icon?St.W6[e.icon]:void 0}),this.run=e.run??(async()=>{})}}));return o}function sn(t){return Qs.QE.get(m.Y).isVisible(t,window)}function nn(t,e){Qs.QE.get(m.Y).setPartHidden(!e,t,window)}const on=t=>Qs.QE.get(m.Y).onDidChangePanelPosition(t);function rn(){return Qs.QE.get(m.Y).getPanelPosition()}const an=t=>Qs.QE.get(m.Y).onDidChangeSideBarPosition(t);function cn(){return Qs.QE.get(m.Y).getSideBarPosition()}let hn=class extends li{constructor(t,e,i){super((0,Vs.Lm)(),t,new di.a,e),this.instantiationService=i,this.mainContainer.classList.add("monaco-workbench-part")}registerErrorHandler(t){(0,h.Wj)((e=>this.handleUnexpectedError(e,t)))}createNotificationsHandlers(){}initServices(){return this.instantiationService}restore(){try{this.restoreParts()}catch(t){(0,h.dz)(t)}}};hn=(0,s.C)([(0,s.Q)(1,Ge.r),(0,s.Q)(2,q._Y)],hn);const ln=(0,n.Jt)(le.Gs);function dn(t,e){return{...(0,Ns.A)(e),...(0,fi.A)({isKeybindingConfigurationVisible:()=>!0,shouldUseGlobalPicker:()=>!0}),...(0,bi.Ay)({shouldUseGlobalKeybindings:()=>!0}),[m.Y.toString()]:new ui.d(hn,[t],!1),[he.m.toString()]:new ui.d(gi.w,[],!1),[Te.I.toString()]:new ui.d(mi.x,[void 0],!1),[Ae.p.toString()]:new ui.d(zi,[],!1),[ge.S.toString()]:new ui.d(as,[],!1),[hs.K.toString()]:new ui.d(hs.d,[],!1),[Fe.f.toString()]:new ui.d(Is,[],!1)}}(0,a.gO)(null!=ln&&!ln.guess,le.Gs),(0,Fi.MI)((async t=>{t.get(m.Y).startup()})),(0,Fi.nj)((async t=>{t.get(q._Y).createInstance(pi.Z)}))}}]);
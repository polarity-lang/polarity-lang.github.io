"use strict";(self.webpackChunkmonaco_lsp_streams=self.webpackChunkmonaco_lsp_streams||[]).push([[917],{5076:(e,t,i)=>{e.exports=i.p+"d042a4f3fd893e20014c.js"},50419:(e,t,i)=>{e.exports=i.p+"aa1f88e982e0f80d7c06.html"},26373:(e,t,i)=>{e.exports=i.p+"b7fb9887011879f071b7.html"},44768:(e,t,i)=>{e.exports=i.p+"69b53294224e71490fde.html"},8171:(e,t,i)=>{e.exports=i.p+"47f1d7816777f9facc10.png"},53532:(e,t,i)=>{e.exports=i.p+"55aebc839621756e7a15.png"},12565:(e,t,i)=>{e.exports=i.p+"0bb0b78d1eb964f9450d.png"},99455:(e,t,i)=>{e.exports=i.p+"fbc7ad28873131d62658.png"},51738:(e,t,i)=>{e.exports=i.p+"6c9dd9df3a914e4dbf1d.png"},38292:(e,t,i)=>{e.exports=i.p+"0bbf353e2a239d63f7ab.png"},14874:(e,t,i)=>{e.exports=i.p+"326b2218cc5bc94af756.png"},24594:(e,t,i)=>{e.exports=i.p+"b84dfe91623eb7388cdc.png"},85347:(e,t,i)=>{i.d(t,{E:()=>a,h:()=>c});var o=i(1661),n=i(25934),s=i(80797),r=i(93152);i(28672);class a{constructor(){this._map=new Map}register(e,t){if(this._map.has(e))throw new Error(`group (${e}) has already a widget`);return this._map.set(e,t),{dispose:()=>this._map.delete(e)}}getWidget(e){return this._map.get(e)}}class c{constructor(){}static{this.IsEnabled=c._stub("breadcrumbs.enabled")}static{this.UseQuickPick=c._stub("breadcrumbs.useQuickPick")}static{this.FilePath=c._stub("breadcrumbs.filePath")}static{this.SymbolPath=c._stub("breadcrumbs.symbolPath")}static{this.SymbolSortOrder=c._stub("breadcrumbs.symbolSortOrder")}static{this.Icons=c._stub("breadcrumbs.icons")}static{this.TitleScrollbarSizing=c._stub("workbench.editor.titleScrollbarSizing")}static{this.FileExcludes=c._stub("files.exclude")}static _stub(e){return{bindTo(t){const i=new o.vl,n=t.onDidChangeConfiguration((t=>{t.affectsConfiguration(e)&&i.fire(void 0)}));return new class{constructor(){this.name=e,this.onDidChange=i.event}getValue(i){return i?t.getValue(e,i):t.getValue(e)}updateValue(i,o){return o?t.updateValue(e,i,o):t.updateValue(e,i)}dispose(){n.dispose(),i.dispose()}}}}}}r.O.as(s.Fd.Configuration).registerConfiguration({id:"breadcrumbs",title:(0,n.kg)(3915,"Breadcrumb Navigation"),order:101,type:"object",properties:{"breadcrumbs.enabled":{description:(0,n.kg)(3916,"Enable/disable navigation breadcrumbs."),type:"boolean",default:!0},"breadcrumbs.filePath":{description:(0,n.kg)(3917,"Controls whether and how file paths are shown in the breadcrumbs view."),type:"string",default:"on",enum:["on","off","last"],enumDescriptions:[(0,n.kg)(3918,"Show the file path in the breadcrumbs view."),(0,n.kg)(3919,"Do not show the file path in the breadcrumbs view."),(0,n.kg)(3920,"Only show the last element of the file path in the breadcrumbs view.")]},"breadcrumbs.symbolPath":{description:(0,n.kg)(3921,"Controls whether and how symbols are shown in the breadcrumbs view."),type:"string",default:"on",enum:["on","off","last"],enumDescriptions:[(0,n.kg)(3922,"Show all symbols in the breadcrumbs view."),(0,n.kg)(3923,"Do not show symbols in the breadcrumbs view."),(0,n.kg)(3924,"Only show the current symbol in the breadcrumbs view.")]},"breadcrumbs.symbolSortOrder":{description:(0,n.kg)(3925,"Controls how symbols are sorted in the breadcrumbs outline view."),type:"string",default:"position",scope:5,enum:["position","name","type"],enumDescriptions:[(0,n.kg)(3926,"Show symbol outline in file position order."),(0,n.kg)(3927,"Show symbol outline in alphabetical order."),(0,n.kg)(3928,"Show symbol outline in symbol type order.")]},"breadcrumbs.icons":{description:(0,n.kg)(3929,"Render breadcrumb items with icons."),type:"boolean",default:!0},"breadcrumbs.showFiles":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3930,"When enabled breadcrumbs show `file`-symbols.")},"breadcrumbs.showModules":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3931,"When enabled breadcrumbs show `module`-symbols.")},"breadcrumbs.showNamespaces":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3932,"When enabled breadcrumbs show `namespace`-symbols.")},"breadcrumbs.showPackages":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3933,"When enabled breadcrumbs show `package`-symbols.")},"breadcrumbs.showClasses":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3934,"When enabled breadcrumbs show `class`-symbols.")},"breadcrumbs.showMethods":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3935,"When enabled breadcrumbs show `method`-symbols.")},"breadcrumbs.showProperties":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3936,"When enabled breadcrumbs show `property`-symbols.")},"breadcrumbs.showFields":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3937,"When enabled breadcrumbs show `field`-symbols.")},"breadcrumbs.showConstructors":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3938,"When enabled breadcrumbs show `constructor`-symbols.")},"breadcrumbs.showEnums":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3939,"When enabled breadcrumbs show `enum`-symbols.")},"breadcrumbs.showInterfaces":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3940,"When enabled breadcrumbs show `interface`-symbols.")},"breadcrumbs.showFunctions":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3941,"When enabled breadcrumbs show `function`-symbols.")},"breadcrumbs.showVariables":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3942,"When enabled breadcrumbs show `variable`-symbols.")},"breadcrumbs.showConstants":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3943,"When enabled breadcrumbs show `constant`-symbols.")},"breadcrumbs.showStrings":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3944,"When enabled breadcrumbs show `string`-symbols.")},"breadcrumbs.showNumbers":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3945,"When enabled breadcrumbs show `number`-symbols.")},"breadcrumbs.showBooleans":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3946,"When enabled breadcrumbs show `boolean`-symbols.")},"breadcrumbs.showArrays":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3947,"When enabled breadcrumbs show `array`-symbols.")},"breadcrumbs.showObjects":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3948,"When enabled breadcrumbs show `object`-symbols.")},"breadcrumbs.showKeys":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3949,"When enabled breadcrumbs show `key`-symbols.")},"breadcrumbs.showNull":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3950,"When enabled breadcrumbs show `null`-symbols.")},"breadcrumbs.showEnumMembers":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3951,"When enabled breadcrumbs show `enumMember`-symbols.")},"breadcrumbs.showStructs":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3952,"When enabled breadcrumbs show `struct`-symbols.")},"breadcrumbs.showEvents":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3953,"When enabled breadcrumbs show `event`-symbols.")},"breadcrumbs.showOperators":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3954,"When enabled breadcrumbs show `operator`-symbols.")},"breadcrumbs.showTypeParameters":{type:"boolean",default:!0,scope:5,markdownDescription:(0,n.kg)(3955,"When enabled breadcrumbs show `typeParameter`-symbols.")}}})},86434:(e,t,i)=>{i.d(t,{$O:()=>qe,Ae:()=>Ye,As:()=>rt,B0:()=>W,BJ:()=>ft,BL:()=>Se,BW:()=>Ke,E9:()=>ue,F$:()=>At,FB:()=>ie,G_:()=>$e,H8:()=>Ze,HG:()=>ut,I0:()=>mt,I9:()=>It,IN:()=>be,Ic:()=>at,Is:()=>Fe,JV:()=>Tt,JY:()=>Ee,J_:()=>ee,LA:()=>Ht,LT:()=>Ft,N5:()=>xe,NI:()=>Lt,O0:()=>Ie,OS:()=>ve,Ol:()=>gt,Ot:()=>te,Pe:()=>oe,Q2:()=>zt,Qu:()=>Oe,Ri:()=>X,Sz:()=>Be,TG:()=>Me,Tt:()=>yt,Uu:()=>pt,VJ:()=>_e,Vg:()=>nt,WM:()=>F,WZ:()=>wt,XH:()=>Ae,XN:()=>Ue,XW:()=>Pt,YF:()=>ce,YQ:()=>Xe,Yd:()=>Vt,Zc:()=>ot,Zr:()=>Ct,Zv:()=>Bt,_8:()=>ct,_D:()=>Je,_r:()=>he,aM:()=>Et,aV:()=>z,ar:()=>Rt,aw:()=>dt,b6:()=>St,bV:()=>H,bd:()=>qt,by:()=>jt,ck:()=>pe,d7:()=>G,dO:()=>kt,dq:()=>fe,eV:()=>bt,f:()=>ht,f5:()=>Ge,fd:()=>tt,g0:()=>Qe,g6:()=>j,h9:()=>We,hc:()=>we,ho:()=>Ne,iE:()=>Q,iO:()=>st,jv:()=>Mt,kG:()=>ke,ki:()=>Gt,l$:()=>He,lG:()=>Pe,m4:()=>Y,mu:()=>Ut,my:()=>lt,no:()=>Zt,nt:()=>Le,on:()=>Nt,ox:()=>q,pM:()=>De,qT:()=>$,qs:()=>je,r4:()=>$t,rt:()=>Re,sW:()=>se,ty:()=>it,uf:()=>Ce,v_:()=>Yt,vn:()=>_t,wR:()=>Ve,wY:()=>Wt,xJ:()=>ae,xr:()=>U,xy:()=>le,y2:()=>K,yX:()=>ze,yY:()=>Dt,z0:()=>vt,zD:()=>J,zE:()=>xt,zU:()=>re});var o=i(92518),n=i(25934),s=i(76390),r=i(80512),a=i(23703),c=i(39924),d=i(67244),h=i(76257),l=i(84261),u=i(36612),p=i(20092),g=i(92449),m=i(12417),b=i(819),w=i(72841),v=i(16093),f=i(87491),y=i(9957),C=i(27091),S=i(14956),k=i(80914),_=i(53725),x=i(19383),E=i(71478),D=i(63288),I=i(64788),V=i(61478),M=i(30875),T=i(16409),A=i(47622),L=i(68836),P=i(91193),R=i(47609),B=i(21747);class O extends D.L{constructor(e,t,i){super(e),this.commandId=t,this.commandArgs=i}run(e){return e.get(l.w).executeCommand(this.commandId,this.commandArgs)}}class N extends D.L{getDirection(e){return(0,p.BD)(e)}async run(e,...t){const i=e.get(g.m),o=e.get(b.p),n=this.getDirection(o),s=(0,R.w)(t,e.get(m.I),i,e.get(B.P));(0,u.si)(i,n,s)}}class F extends N{static{this.ID=u.Ld}constructor(){super({id:F.ID,title:(0,n.aS)(9778,"Split Editor"),f1:!0,keybinding:{weight:200,primary:2141},category:T.L.View})}}class G extends N{constructor(){super({id:"workbench.action.splitEditorOrthogonal",title:(0,n.aS)(9779,"Split Editor Orthogonal"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2141)},category:T.L.View})}getDirection(e){return 3===(0,p.BD)(e)?1:3}}class W extends O{constructor(){super({id:u.PO,title:(0,n.aS)(9780,"Split Editor Left"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2141)},category:T.L.View},u.PO)}}class z extends O{constructor(){super({id:u.ys,title:(0,n.aS)(9781,"Split Editor Right"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2141)},category:T.L.View},u.ys)}}class H extends O{static{this.LABEL=(0,n.kg)(9782,"Split Editor Up")}constructor(){super({id:u.vY,title:(0,n.aS)(9782,"Split Editor Up"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2141)},category:T.L.View},u.vY)}}class Q extends O{static{this.LABEL=(0,n.kg)(9783,"Split Editor Down")}constructor(){super({id:u.kq,title:(0,n.aS)(9783,"Split Editor Down"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2141)},category:T.L.View},u.kq)}}class U extends D.L{constructor(){super({id:"workbench.action.joinTwoGroups",title:(0,n.aS)(9784,"Join Editor Group with Next Group"),f1:!0,category:T.L.View})}async run(e,t){const i=e.get(g.m);let o;if(o=t&&"number"==typeof t.groupId?i.getGroup(t.groupId):i.activeGroup,o){const e=[3,1,2,0];for(const t of e){const e=i.findGroup({direction:t},o);if(e&&o!==e){i.mergeGroup(o,e);break}}}}}class $ extends D.L{constructor(){super({id:"workbench.action.joinAllGroups",title:(0,n.aS)(9785,"Join All Editor Groups"),f1:!0,category:T.L.View})}async run(e){const t=e.get(g.m);t.mergeAllGroups(t.activeGroup)}}class K extends D.L{constructor(){super({id:"workbench.action.navigateEditorGroups",title:(0,n.aS)(9786,"Navigate Between Editor Groups"),f1:!0,category:T.L.View})}async run(e){const t=e.get(g.m),i=t.findGroup({location:2},t.activeGroup,!0);i?.focus()}}class j extends D.L{constructor(){super({id:"workbench.action.focusActiveEditorGroup",title:(0,n.aS)(9787,"Focus Active Editor Group"),f1:!0,category:T.L.View})}async run(e){e.get(g.m).activeGroup.focus()}}class Z extends D.L{constructor(e,t){super(e),this.scope=t}async run(e){const t=e.get(g.m),i=t.findGroup(this.scope,t.activeGroup,!0);i?.focus()}}class Y extends Z{constructor(){super({id:"workbench.action.focusFirstEditorGroup",title:(0,n.aS)(9788,"Focus First Editor Group"),f1:!0,keybinding:{weight:200,primary:2070},category:T.L.View},{location:0})}}class q extends Z{constructor(){super({id:"workbench.action.focusLastEditorGroup",title:(0,n.aS)(9789,"Focus Last Editor Group"),f1:!0,category:T.L.View},{location:1})}}class J extends Z{constructor(){super({id:"workbench.action.focusNextGroup",title:(0,n.aS)(9790,"Focus Next Editor Group"),f1:!0,category:T.L.View},{location:2})}}class X extends Z{constructor(){super({id:"workbench.action.focusPreviousGroup",title:(0,n.aS)(9791,"Focus Previous Editor Group"),f1:!0,category:T.L.View},{location:3})}}class ee extends Z{constructor(){super({id:"workbench.action.focusLeftGroup",title:(0,n.aS)(9792,"Focus Left Editor Group"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2063)},category:T.L.View},{direction:2})}}class te extends Z{constructor(){super({id:"workbench.action.focusRightGroup",title:(0,n.aS)(9793,"Focus Right Editor Group"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2065)},category:T.L.View},{direction:3})}}class ie extends Z{constructor(){super({id:"workbench.action.focusAboveGroup",title:(0,n.aS)(9794,"Focus Editor Group Above"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2064)},category:T.L.View},{direction:0})}}class oe extends Z{constructor(){super({id:"workbench.action.focusBelowGroup",title:(0,n.aS)(9795,"Focus Editor Group Below"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2066)},category:T.L.View},{direction:1})}}let ne=class extends s.rc{static{this.ID="workbench.action.closeActiveEditor"}static{this.LABEL=(0,n.kg)(9796,"Close Editor")}constructor(e,t,i){super(e,t,k.L0.asClassName(S.W6.close)),this.commandService=i}run(e){return this.commandService.executeCommand(u.l2,void 0,e)}};ne=(0,o.C)([(0,o.Q)(2,l.w)],ne);let se=class extends s.rc{static{this.ID="workbench.action.unpinActiveEditor"}static{this.LABEL=(0,n.kg)(9797,"Unpin Editor")}constructor(e,t,i){super(e,t,k.L0.asClassName(S.W6.pinned)),this.commandService=i}run(e){return this.commandService.executeCommand(u.f2,void 0,e)}};se=(0,o.C)([(0,o.Q)(2,l.w)],se);let re=class extends s.rc{static{this.ID="workbench.action.closeActiveEditor"}static{this.LABEL=(0,n.kg)(9798,"Close")}constructor(e,t,i){super(e,t,k.L0.asClassName(S.W6.close)),this.editorGroupService=i}async run(e){const t=e?this.editorGroupService.getGroup(e.groupId):this.editorGroupService.activeGroup;if(!t)return;const i=void 0!==e?.editorIndex?t.getEditorByIndex(e.editorIndex):t.activeEditor;if(!i)return;const o=[];t.isSelected(i)?o.push(...t.selectedEditors):o.push(i);for(const i of o)await t.closeEditor(i,{preserveFocus:e?.preserveFocus})}};re=(0,o.C)([(0,o.Q)(2,g.m)],re);class ae extends D.L{constructor(){super({id:"workbench.action.revertAndCloseActiveEditor",title:(0,n.aS)(9799,"Revert and Close Editor"),f1:!0,category:T.L.View})}async run(e){const t=e.get(m.I),i=e.get(M.r),o=t.activeEditorPane;if(o){const e=o.input,n=o.group;try{await t.revert({editor:e,groupId:n.id})}catch(o){i.error(o),await t.revert({editor:e,groupId:n.id},{soft:!0})}await n.closeEditor(e)}}}class ce extends D.L{constructor(){super({id:"workbench.action.closeEditorsToTheLeft",title:(0,n.aS)(9800,"Close Editors to the Left in Group"),f1:!0,category:T.L.View})}async run(e,t){const i=e.get(g.m),{group:o,editor:n}=this.getTarget(i,t);o&&n&&await o.closeEditors({direction:0,except:n,excludeSticky:!0})}getTarget(e,t){return t?{editor:t.editor,group:e.getGroup(t.groupId)}:{group:e.activeGroup,editor:e.activeGroup.activeEditor}}}class de extends D.L{groupsToClose(e){const t=[],i=e.getGroups(2);for(let e=i.length-1;e>=0;e--)t.push(i[e]);return t}async run(e){const t=e.get(m.I),i=e.get(M.r),o=e.get(P.G),n=e.get(g.m),s=e.get(_.U),r=e.get(v.D),c=new Set,d=new Set,h=new Set,l=new Map;for(const{editor:e,groupId:i}of t.getEditors(1,{excludeSticky:this.excludeSticky})){let t=!1;if(t=e.closeHandler?e.closeHandler.showConfirm():e.isDirty()&&!e.isSaving(),t)if("function"==typeof e.closeHandler?.confirm){let t=l.get(e.typeId);t||(t=new Set,l.set(e.typeId,t)),t.add({editor:e,groupId:i})}else e.hasCapability(4)||3!==s.getAutoSaveMode(e).mode?E.ib&&(E.uF||E.j9)&&!e.hasCapability(4)&&4===s.getAutoSaveMode(e).mode?h.add({editor:e,groupId:i}):c.add({editor:e,groupId:i}):d.add({editor:e,groupId:i})}if(c.size>0){const e=Array.from(c.values());switch(await this.revealEditorsToConfirm(e,n),await r.showSaveConfirm(e.map((({editor:e})=>e instanceof a.JL?e.primary.getName():e.getName())))){case 2:return;case 1:await this.revertEditors(t,i,o,e);break;case 0:await t.save(e,{reason:1})}}for(const[,e]of l){const s=Array.from(e.values());await this.revealEditorsToConfirm(s,n);const r=await(s.at(0)?.editor.closeHandler?.confirm?.(s));if("number"==typeof r)switch(r){case 2:return;case 1:await this.revertEditors(t,i,o,s);break;case 0:await t.save(s,{reason:1})}}if(d.size>0){const e=Array.from(d.values());await t.save(e,{reason:3})}if(h.size>0){const e=Array.from(h.values());await t.save(e,{reason:4})}return this.doCloseAll(n)}revertEditors(e,t,i,o){return i.withProgress({location:10,delay:800,title:(0,n.kg)(9801,"Reverting Editors...")},(()=>this.doRevertEditors(e,t,o)))}async doRevertEditors(e,t,i){try{await e.revert(i)}catch(o){t.error(o),await e.revert(i,{soft:!0})}}async revealEditorsToConfirm(e,t){try{const i=new Set;for(const{editor:o,groupId:n}of e){if(i.has(n))continue;i.add(n);const e=t.getGroup(n);await(e?.openEditor(o))}}catch(e){}}async doCloseAll(e){await Promise.all(this.groupsToClose(e).map((e=>e.closeAllEditors({excludeSticky:this.excludeSticky}))))}}class he extends de{static{this.ID="workbench.action.closeAllEditors"}static{this.LABEL=(0,n.aS)(9802,"Close All Editors")}constructor(){super({id:he.ID,title:he.LABEL,f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2101)},icon:S.W6.closeAll,category:T.L.View})}get excludeSticky(){return!0}}class le extends de{constructor(){super({id:"workbench.action.closeAllGroups",title:(0,n.aS)(9803,"Close All Editor Groups"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,3125)},category:T.L.View})}get excludeSticky(){return!1}async doCloseAll(e){await super.doCloseAll(e);for(const t of this.groupsToClose(e))e.removeGroup(t)}}class ue extends D.L{constructor(){super({id:"workbench.action.closeEditorsInOtherGroups",title:(0,n.aS)(9804,"Close Editors in Other Groups"),f1:!0,category:T.L.View})}async run(e,t){const i=e.get(g.m),o=t?i.getGroup(t.groupId):i.activeGroup;await Promise.all(i.getGroups(1).map((async e=>{if(!o||e.id!==o.id)return e.closeAllEditors({excludeSticky:!0})})))}}class pe extends D.L{constructor(){super({id:"workbench.action.closeEditorInAllGroups",title:(0,n.aS)(9805,"Close Editor in All Groups"),f1:!0,category:T.L.View})}async run(e){const t=e.get(m.I),i=e.get(g.m),o=t.activeEditor;o&&await Promise.all(i.getGroups(1).map((e=>e.closeEditor(o))))}}class ge extends D.L{constructor(e,t,i){super(e),this.direction=t,this.isMove=i}async run(e,t){const i=e.get(g.m);let o;if(o=t&&"number"==typeof t.groupId?i.getGroup(t.groupId):i.activeGroup,o){let e;if(this.isMove){const t=this.findTargetGroup(i,o);t&&(e=i.moveGroup(o,t,this.direction))}else e=i.copyGroup(o,o,this.direction);e&&i.activateGroup(e)}}findTargetGroup(e,t){const i=[this.direction];switch(this.direction){case 2:case 3:i.push(0,1);break;case 0:case 1:i.push(2,3)}for(const o of i){const i=e.findGroup({direction:o},t);if(i)return i}}}class me extends ge{constructor(e,t){super(e,t,!0)}}class be extends me{constructor(){super({id:"workbench.action.moveActiveEditorGroupLeft",title:(0,n.aS)(9806,"Move Editor Group Left"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,15)},category:T.L.View},2)}}class we extends me{constructor(){super({id:"workbench.action.moveActiveEditorGroupRight",title:(0,n.aS)(9807,"Move Editor Group Right"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,17)},category:T.L.View},3)}}class ve extends me{constructor(){super({id:"workbench.action.moveActiveEditorGroupUp",title:(0,n.aS)(9808,"Move Editor Group Up"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,16)},category:T.L.View},0)}}class fe extends me{constructor(){super({id:"workbench.action.moveActiveEditorGroupDown",title:(0,n.aS)(9809,"Move Editor Group Down"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,18)},category:T.L.View},1)}}class ye extends ge{constructor(e,t){super(e,t,!1)}}class Ce extends ye{constructor(){super({id:"workbench.action.duplicateActiveEditorGroupLeft",title:(0,n.aS)(9810,"Duplicate Editor Group Left"),f1:!0,category:T.L.View},2)}}class Se extends ye{constructor(){super({id:"workbench.action.duplicateActiveEditorGroupRight",title:(0,n.aS)(9811,"Duplicate Editor Group Right"),f1:!0,category:T.L.View},3)}}class ke extends ye{constructor(){super({id:"workbench.action.duplicateActiveEditorGroupUp",title:(0,n.aS)(9812,"Duplicate Editor Group Up"),f1:!0,category:T.L.View},0)}}class _e extends ye{constructor(){super({id:"workbench.action.duplicateActiveEditorGroupDown",title:(0,n.aS)(9813,"Duplicate Editor Group Down"),f1:!0,category:T.L.View},1)}}class xe extends D.L{constructor(){super({id:"workbench.action.minimizeOtherEditors",title:(0,n.aS)(9814,"Expand Editor Group"),f1:!0,category:T.L.View,precondition:A.RR})}async run(e){e.get(g.m).arrangeGroups(1)}}class Ee extends D.L{constructor(){super({id:"workbench.action.minimizeOtherEditorsHideSidebar",title:(0,n.aS)(9815,"Expand Editor Group and Hide Side Bars"),f1:!0,category:T.L.View,precondition:I.M$.or(A.RR,A.OD,A.zp)})}async run(e){const t=e.get(g.m),i=e.get(c.Y);i.setPartHidden(!0,"workbench.parts.sidebar"),i.setPartHidden(!0,"workbench.parts.auxiliarybar"),t.arrangeGroups(1)}}class De extends D.L{constructor(){super({id:"workbench.action.evenEditorWidths",title:(0,n.aS)(9816,"Reset Editor Group Sizes"),f1:!0,category:T.L.View})}async run(e){e.get(g.m).arrangeGroups(2)}}class Ie extends D.L{constructor(){super({id:"workbench.action.toggleEditorWidths",title:(0,n.aS)(9817,"Toggle Editor Group Sizes"),f1:!0,category:T.L.View})}async run(e){e.get(g.m).toggleExpandGroup()}}class Ve extends D.L{constructor(){super({id:"workbench.action.maximizeEditorHideSidebar",title:(0,n.aS)(9818,"Maximize Editor Group and Hide Side Bars"),f1:!0,category:T.L.View,precondition:I.M$.or(I.M$.and(A.sW.negate(),A.TK),A.OD,A.zp)})}async run(e){const t=e.get(c.Y),i=e.get(g.m);e.get(m.I).activeEditor&&(t.setPartHidden(!0,"workbench.parts.sidebar"),t.setPartHidden(!0,"workbench.parts.auxiliarybar"),i.arrangeGroups(0))}}class Me extends D.L{constructor(){super({id:u._A,title:(0,n.aS)(9819,"Toggle Maximize Editor Group"),f1:!0,category:T.L.View,precondition:I.M$.or(A.TK,A.sW),keybinding:{weight:200,primary:(0,V.m5)(2089,2091)},menu:[{id:D.D8.EditorTitle,order:-1e4,group:"navigation",when:A.sW},{id:D.D8.EmptyEditorGroup,order:-1e4,group:"navigation",when:A.sW}],icon:S.W6.screenFull,toggled:A.sW})}async run(e,...t){const i=e.get(g.m),o=(0,R.w)(t,e.get(m.I),i,e.get(B.P));o.groupedEditors.length&&i.toggleMaximizeGroup(o.groupedEditors[0].group)}}class Te extends D.L{async run(e){const t=e.get(g.m),i=this.navigate(t);if(!i)return;const{groupId:o,editor:n}=i;if(!n)return;const s=t.getGroup(o);s&&await s.openEditor(n)}}class Ae extends Te{constructor(){super({id:"workbench.action.nextEditor",title:(0,n.aS)(9820,"Open Next Editor"),f1:!0,keybinding:{weight:200,primary:2060,mac:{primary:2577,secondary:[3166]}},category:T.L.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1),o=t.activeEditor?i.indexOf(t.activeEditor):-1;if(o+1<i.length)return{editor:i[o+1],groupId:t.id};const n=new Set;let s=e.activeGroup;for(;s&&!n.has(s.id);)if(s=e.findGroup({location:2},s,!0),s){n.add(s.id);const e=s.getEditors(1);if(e.length>0)return{editor:e[0],groupId:s.id}}}}class Le extends Te{constructor(){super({id:"workbench.action.previousEditor",title:(0,n.aS)(9821,"Open Previous Editor"),f1:!0,keybinding:{weight:200,primary:2059,mac:{primary:2575,secondary:[3164]}},category:T.L.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1),o=t.activeEditor?i.indexOf(t.activeEditor):-1;if(o>0)return{editor:i[o-1],groupId:t.id};const n=new Set;let s=e.activeGroup;for(;s&&!n.has(s.id);)if(s=e.findGroup({location:3},s,!0),s){n.add(s.id);const e=s.getEditors(1);if(e.length>0)return{editor:e[e.length-1],groupId:s.id}}}}class Pe extends Te{constructor(){super({id:"workbench.action.nextEditorInGroup",title:(0,n.aS)(9822,"Open Next Editor in Group"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2060),mac:{primary:(0,V.m5)(2089,2577)}},category:T.L.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1),o=t.activeEditor?i.indexOf(t.activeEditor):-1;return{editor:o+1<i.length?i[o+1]:i[0],groupId:t.id}}}class Re extends Te{constructor(){super({id:"workbench.action.previousEditorInGroup",title:(0,n.aS)(9823,"Open Previous Editor in Group"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2059),mac:{primary:(0,V.m5)(2089,2575)}},category:T.L.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1),o=t.activeEditor?i.indexOf(t.activeEditor):-1;return{editor:o>0?i[o-1]:i[i.length-1],groupId:t.id}}}class Be extends Te{constructor(){super({id:"workbench.action.firstEditorInGroup",title:(0,n.aS)(9824,"Open First Editor in Group"),f1:!0,category:T.L.View})}navigate(e){const t=e.activeGroup;return{editor:t.getEditors(1)[0],groupId:t.id}}}class Oe extends Te{constructor(){super({id:"workbench.action.lastEditorInGroup",title:(0,n.aS)(9825,"Open Last Editor in Group"),f1:!0,keybinding:{weight:200,primary:533,secondary:[2078],mac:{primary:277,secondary:[2078]}},category:T.L.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1);return{editor:i[i.length-1],groupId:t.id}}}class Ne extends D.L{static{this.ID="workbench.action.navigateForward"}static{this.LABEL=(0,n.kg)(9826,"Go Forward")}constructor(){super({id:Ne.ID,title:{...(0,n.aS)(9826,"Go Forward"),mnemonicTitle:(0,n.kg)(9827,"&&Forward")},f1:!0,icon:S.W6.arrowRight,precondition:I.M$.has("canNavigateForward"),keybinding:{weight:200,win:{primary:529},mac:{primary:1368},linux:{primary:3160}},menu:[{id:D.D8.MenubarGoMenu,group:"1_history_nav",order:2},{id:D.D8.CommandCenter,order:2}]})}async run(e){const t=e.get(d.z);await t.goForward(0)}}class Fe extends D.L{static{this.ID="workbench.action.navigateBack"}static{this.LABEL=(0,n.kg)(9828,"Go Back")}constructor(){super({id:Fe.ID,title:{...(0,n.aS)(9828,"Go Back"),mnemonicTitle:(0,n.kg)(9829,"&&Back")},f1:!0,precondition:I.M$.has("canNavigateBack"),icon:S.W6.arrowLeft,keybinding:{weight:200,win:{primary:527},mac:{primary:344},linux:{primary:2648}},menu:[{id:D.D8.MenubarGoMenu,group:"1_history_nav",order:1},{id:D.D8.CommandCenter,order:1}]})}async run(e){const t=e.get(d.z);await t.goBack(0)}}class Ge extends D.L{constructor(){super({id:"workbench.action.navigateLast",title:(0,n.aS)(9830,"Go Previous"),f1:!0})}async run(e){const t=e.get(d.z);await t.goPrevious(0)}}class We extends D.L{constructor(){super({id:"workbench.action.navigateForwardInEditLocations",title:(0,n.aS)(9831,"Go Forward in Edit Locations"),f1:!0})}async run(e){const t=e.get(d.z);await t.goForward(1)}}class ze extends D.L{constructor(){super({id:"workbench.action.navigateBackInEditLocations",title:(0,n.aS)(9832,"Go Back in Edit Locations"),f1:!0})}async run(e){const t=e.get(d.z);await t.goBack(1)}}class He extends D.L{constructor(){super({id:"workbench.action.navigatePreviousInEditLocations",title:(0,n.aS)(9833,"Go Previous in Edit Locations"),f1:!0})}async run(e){const t=e.get(d.z);await t.goPrevious(1)}}class Qe extends D.L{constructor(){super({id:"workbench.action.navigateToLastEditLocation",title:(0,n.aS)(9834,"Go to Last Edit Location"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2095)}})}async run(e){const t=e.get(d.z);await t.goLast(1)}}class Ue extends D.L{constructor(){super({id:"workbench.action.navigateForwardInNavigationLocations",title:(0,n.aS)(9835,"Go Forward in Navigation Locations"),f1:!0})}async run(e){const t=e.get(d.z);await t.goForward(2)}}class $e extends D.L{constructor(){super({id:"workbench.action.navigateBackInNavigationLocations",title:(0,n.aS)(9836,"Go Back in Navigation Locations"),f1:!0})}async run(e){const t=e.get(d.z);await t.goBack(2)}}class Ke extends D.L{constructor(){super({id:"workbench.action.navigatePreviousInNavigationLocations",title:(0,n.aS)(9837,"Go Previous in Navigation Locations"),f1:!0})}async run(e){const t=e.get(d.z);await t.goPrevious(2)}}class je extends D.L{constructor(){super({id:"workbench.action.navigateToLastNavigationLocation",title:(0,n.aS)(9838,"Go to Last Navigation Location"),f1:!0})}async run(e){const t=e.get(d.z);await t.goLast(2)}}class Ze extends D.L{static{this.ID="workbench.action.reopenClosedEditor"}constructor(){super({id:Ze.ID,title:(0,n.aS)(9839,"Reopen Closed Editor"),f1:!0,keybinding:{weight:200,primary:3122},category:T.L.View})}async run(e){const t=e.get(d.z);await t.reopenLastClosedEditor()}}class Ye extends D.L{static{this.ID="workbench.action.clearRecentFiles"}constructor(){super({id:Ye.ID,title:(0,n.aS)(9840,"Clear Recently Opened..."),f1:!0,category:T.L.File})}async run(e){const t=e.get(v.X),i=e.get(w.J),o=e.get(d.z),{confirmed:s}=await t.confirm({type:"warning",message:(0,n.kg)(9841,"Do you want to clear all recently opened files and workspaces?"),detail:(0,n.kg)(9842,"This action is irreversible!"),primaryButton:(0,n.kg)(9843,"&&Clear")});s&&(i.clearRecentlyOpened(),o.clearRecentlyOpened())}}class qe extends D.L{static{this.ID="workbench.action.showEditorsInActiveGroup"}constructor(){super({id:qe.ID,title:(0,n.aS)(9844,"Show Editors in Active Group By Most Recently Used"),f1:!0,category:T.L.View})}async run(e){e.get(y.G).quickAccess.show(C.sp.PREFIX)}}class Je extends D.L{static{this.ID="workbench.action.showAllEditors"}constructor(){super({id:Je.ID,title:(0,n.aS)(9845,"Show All Editors By Appearance"),f1:!0,keybinding:{weight:200,primary:(0,V.m5)(2089,2094),mac:{primary:2562}},category:T.L.File})}async run(e){e.get(y.G).quickAccess.show(C.qv.PREFIX)}}class Xe extends D.L{static{this.ID="workbench.action.showAllEditorsByMostRecentlyUsed"}constructor(){super({id:Xe.ID,title:(0,n.aS)(9846,"Show All Editors By Most Recently Used"),f1:!0,category:T.L.View})}async run(e){e.get(y.G).quickAccess.show(C.ib.PREFIX)}}class et extends D.L{constructor(e,t,i){super(e),this.prefix=t,this.itemActivation=i}async run(e){const t=e.get(h.b),i=e.get(y.G),o=t.lookupKeybindings(this.desc.id);i.quickAccess.show(this.prefix,{quickNavigateConfiguration:{keybindings:o},itemActivation:this.itemActivation})}}class tt extends et{constructor(){super({id:"workbench.action.quickOpenPreviousRecentlyUsedEditor",title:(0,n.aS)(9847,"Quick Open Previous Recently Used Editor"),f1:!0,category:T.L.View},C.ib.PREFIX,void 0)}}class it extends et{constructor(){super({id:"workbench.action.quickOpenLeastRecentlyUsedEditor",title:(0,n.aS)(9848,"Quick Open Least Recently Used Editor"),f1:!0,category:T.L.View},C.ib.PREFIX,void 0)}}class ot extends et{constructor(){super({id:"workbench.action.quickOpenPreviousRecentlyUsedEditorInGroup",title:(0,n.aS)(9849,"Quick Open Previous Recently Used Editor in Group"),f1:!0,keybinding:{weight:200,primary:2050,mac:{primary:258}},precondition:A.ps.toNegated(),category:T.L.View},C.sp.PREFIX,void 0)}}class nt extends et{constructor(){super({id:"workbench.action.quickOpenLeastRecentlyUsedEditorInGroup",title:(0,n.aS)(9850,"Quick Open Least Recently Used Editor in Group"),f1:!0,keybinding:{weight:200,primary:3074,mac:{primary:1282}},precondition:A.ps.toNegated(),category:T.L.View},C.sp.PREFIX,f.C1.LAST)}}class st extends D.L{static{this.ID="workbench.action.openPreviousEditorFromHistory"}constructor(){super({id:st.ID,title:(0,n.aS)(9851,"Quick Open Previous Editor from History"),f1:!0})}async run(e){const t=e.get(h.b),i=e.get(y.G),o=e.get(g.m),n=t.lookupKeybindings(st.ID);let s;0===o.activeGroup.count&&(s=f.C1.FIRST),i.quickAccess.show("",{quickNavigateConfiguration:{keybindings:n},itemActivation:s})}}class rt extends D.L{constructor(){super({id:"workbench.action.openNextRecentlyUsedEditor",title:(0,n.aS)(9852,"Open Next Recently Used Editor"),f1:!0,category:T.L.View})}async run(e){e.get(d.z).openNextRecentlyUsedEditor()}}class at extends D.L{constructor(){super({id:"workbench.action.openPreviousRecentlyUsedEditor",title:(0,n.aS)(9853,"Open Previous Recently Used Editor"),f1:!0,category:T.L.View})}async run(e){e.get(d.z).openPreviouslyUsedEditor()}}class ct extends D.L{constructor(){super({id:"workbench.action.openNextRecentlyUsedEditorInGroup",title:(0,n.aS)(9854,"Open Next Recently Used Editor In Group"),f1:!0,category:T.L.View})}async run(e){const t=e.get(d.z),i=e.get(g.m);t.openNextRecentlyUsedEditor(i.activeGroup.id)}}class dt extends D.L{constructor(){super({id:"workbench.action.openPreviousRecentlyUsedEditorInGroup",title:(0,n.aS)(9855,"Open Previous Recently Used Editor In Group"),f1:!0,category:T.L.View})}async run(e){const t=e.get(d.z),i=e.get(g.m);t.openPreviouslyUsedEditor(i.activeGroup.id)}}class ht extends D.L{constructor(){super({id:"workbench.action.clearEditorHistory",title:(0,n.aS)(9856,"Clear Editor History"),f1:!0})}async run(e){const t=e.get(v.X),i=e.get(d.z),{confirmed:o}=await t.confirm({type:"warning",message:(0,n.kg)(9857,"Do you want to clear the history of recently opened editors?"),detail:(0,n.kg)(9842,"This action is irreversible!"),primaryButton:(0,n.kg)(9843,"&&Clear")});o&&i.clear()}}class lt extends O{constructor(){super({id:"workbench.action.moveEditorLeftInGroup",title:(0,n.aS)(9858,"Move Editor Left"),keybinding:{weight:200,primary:3083,mac:{primary:(0,V.m5)(2089,3087)}},f1:!0,category:T.L.View},u.lM,{to:"left"})}}class ut extends O{constructor(){super({id:"workbench.action.moveEditorRightInGroup",title:(0,n.aS)(9859,"Move Editor Right"),keybinding:{weight:200,primary:3084,mac:{primary:(0,V.m5)(2089,3089)}},f1:!0,category:T.L.View},u.lM,{to:"right"})}}class pt extends O{constructor(){super({id:"workbench.action.moveEditorToPreviousGroup",title:(0,n.aS)(9860,"Move Editor into Previous Group"),keybinding:{weight:200,primary:2575,mac:{primary:2319}},f1:!0,category:T.L.View},u.lM,{to:"previous",by:"group"})}}class gt extends O{constructor(){super({id:"workbench.action.moveEditorToNextGroup",title:(0,n.aS)(9861,"Move Editor into Next Group"),f1:!0,keybinding:{weight:200,primary:2577,mac:{primary:2321}},category:T.L.View},u.lM,{to:"next",by:"group"})}}class mt extends O{constructor(){super({id:"workbench.action.moveEditorToAboveGroup",title:(0,n.aS)(9862,"Move Editor into Group Above"),f1:!0,category:T.L.View},u.lM,{to:"up",by:"group"})}}class bt extends O{constructor(){super({id:"workbench.action.moveEditorToBelowGroup",title:(0,n.aS)(9863,"Move Editor into Group Below"),f1:!0,category:T.L.View},u.lM,{to:"down",by:"group"})}}class wt extends O{constructor(){super({id:"workbench.action.moveEditorToLeftGroup",title:(0,n.aS)(9864,"Move Editor into Left Group"),f1:!0,category:T.L.View},u.lM,{to:"left",by:"group"})}}class vt extends O{constructor(){super({id:"workbench.action.moveEditorToRightGroup",title:(0,n.aS)(9865,"Move Editor into Right Group"),f1:!0,category:T.L.View},u.lM,{to:"right",by:"group"})}}class ft extends O{constructor(){super({id:"workbench.action.moveEditorToFirstGroup",title:(0,n.aS)(9866,"Move Editor into First Group"),f1:!0,keybinding:{weight:200,primary:1558,mac:{primary:2326}},category:T.L.View},u.lM,{to:"first",by:"group"})}}class yt extends O{constructor(){super({id:"workbench.action.moveEditorToLastGroup",title:(0,n.aS)(9867,"Move Editor into Last Group"),f1:!0,keybinding:{weight:200,primary:1566,mac:{primary:2334}},category:T.L.View},u.lM,{to:"last",by:"group"})}}class Ct extends O{constructor(){super({id:"workbench.action.splitEditorToPreviousGroup",title:(0,n.aS)(9868,"Split Editor into Previous Group"),f1:!0,category:T.L.View},u.p4,{to:"previous",by:"group"})}}class St extends O{constructor(){super({id:"workbench.action.splitEditorToNextGroup",title:(0,n.aS)(9869,"Split Editor into Next Group"),f1:!0,category:T.L.View},u.p4,{to:"next",by:"group"})}}class kt extends O{constructor(){super({id:"workbench.action.splitEditorToAboveGroup",title:(0,n.aS)(9870,"Split Editor into Group Above"),f1:!0,category:T.L.View},u.p4,{to:"up",by:"group"})}}class _t extends O{constructor(){super({id:"workbench.action.splitEditorToBelowGroup",title:(0,n.aS)(9871,"Split Editor into Group Below"),f1:!0,category:T.L.View},u.p4,{to:"down",by:"group"})}}class xt extends O{static{this.ID="workbench.action.splitEditorToLeftGroup"}static{this.LABEL=(0,n.kg)(9872,"Split Editor into Left Group")}constructor(){super({id:"workbench.action.splitEditorToLeftGroup",title:(0,n.aS)(9872,"Split Editor into Left Group"),f1:!0,category:T.L.View},u.p4,{to:"left",by:"group"})}}class Et extends O{constructor(){super({id:"workbench.action.splitEditorToRightGroup",title:(0,n.aS)(9873,"Split Editor into Right Group"),f1:!0,category:T.L.View},u.p4,{to:"right",by:"group"})}}class Dt extends O{constructor(){super({id:"workbench.action.splitEditorToFirstGroup",title:(0,n.aS)(9874,"Split Editor into First Group"),f1:!0,category:T.L.View},u.p4,{to:"first",by:"group"})}}class It extends O{constructor(){super({id:"workbench.action.splitEditorToLastGroup",title:(0,n.aS)(9875,"Split Editor into Last Group"),f1:!0,category:T.L.View},u.p4,{to:"last",by:"group"})}}class Vt extends O{static{this.ID="workbench.action.editorLayoutSingle"}constructor(){super({id:Vt.ID,title:(0,n.aS)(9876,"Single Column Editor Layout"),f1:!0,category:T.L.View},u.m4,{groups:[{}],orientation:0})}}class Mt extends O{static{this.ID="workbench.action.editorLayoutTwoColumns"}constructor(){super({id:Mt.ID,title:(0,n.aS)(9877,"Two Columns Editor Layout"),f1:!0,category:T.L.View},u.m4,{groups:[{},{}],orientation:0})}}class Tt extends O{static{this.ID="workbench.action.editorLayoutThreeColumns"}constructor(){super({id:Tt.ID,title:(0,n.aS)(9878,"Three Columns Editor Layout"),f1:!0,category:T.L.View},u.m4,{groups:[{},{},{}],orientation:0})}}class At extends O{static{this.ID="workbench.action.editorLayoutTwoRows"}constructor(){super({id:At.ID,title:(0,n.aS)(9879,"Two Rows Editor Layout"),f1:!0,category:T.L.View},u.m4,{groups:[{},{}],orientation:1})}}class Lt extends O{static{this.ID="workbench.action.editorLayoutThreeRows"}constructor(){super({id:Lt.ID,title:(0,n.aS)(9880,"Three Rows Editor Layout"),f1:!0,category:T.L.View},u.m4,{groups:[{},{},{}],orientation:1})}}class Pt extends O{static{this.ID="workbench.action.editorLayoutTwoByTwoGrid"}constructor(){super({id:Pt.ID,title:(0,n.aS)(9881,"Grid Editor Layout (2x2)"),f1:!0,category:T.L.View},u.m4,{groups:[{groups:[{},{}]},{groups:[{},{}]}],orientation:0})}}class Rt extends O{static{this.ID="workbench.action.editorLayoutTwoColumnsBottom"}constructor(){super({id:Rt.ID,title:(0,n.aS)(9882,"Two Columns Bottom Editor Layout"),f1:!0,category:T.L.View},u.m4,{groups:[{},{groups:[{},{}]}],orientation:1})}}class Bt extends O{static{this.ID="workbench.action.editorLayoutTwoRowsRight"}constructor(){super({id:Bt.ID,title:(0,n.aS)(9883,"Two Rows Right Editor Layout"),f1:!0,category:T.L.View},u.m4,{groups:[{},{groups:[{},{}]}],orientation:0})}}class Ot extends D.L{constructor(e,t){super(e),this.direction=t}async run(e){const t=e.get(g.m),i=e.get(c.Y),o=(0,L.a)(),n=i.hasFocus("workbench.parts.editor")||o.activeElement===o.body,s=t.addGroup(t.activeGroup,this.direction);t.activateGroup(s),n&&s.focus()}}class Nt extends Ot{constructor(){super({id:"workbench.action.newGroupLeft",title:(0,n.aS)(9884,"New Editor Group to the Left"),f1:!0,category:T.L.View},2)}}class Ft extends Ot{constructor(){super({id:"workbench.action.newGroupRight",title:(0,n.aS)(9885,"New Editor Group to the Right"),f1:!0,category:T.L.View},3)}}class Gt extends Ot{constructor(){super({id:"workbench.action.newGroupAbove",title:(0,n.aS)(9886,"New Editor Group Above"),f1:!0,category:T.L.View},0)}}class Wt extends Ot{constructor(){super({id:"workbench.action.newGroupBelow",title:(0,n.aS)(9887,"New Editor Group Below"),f1:!0,category:T.L.View},1)}}class zt extends D.L{constructor(){super({id:"workbench.action.toggleEditorType",title:(0,n.aS)(9888,"Toggle Editor Type"),f1:!0,category:T.L.View,precondition:A.t0})}async run(e){const t=e.get(m.I),i=e.get(x.Y),o=t.activeEditorPane;if(!o)return;const n=r.tf.getCanonicalUri(o.input);if(!n)return;const s=i.getEditors(n).map((e=>e.id)).filter((e=>e!==o.input.editorId));0!==s.length&&await t.replaceEditors([{editor:o.input,replacement:{resource:n,options:{override:s[0]}}}],o.group)}}class Ht extends D.L{constructor(){super({id:"workbench.action.reopenTextEditor",title:(0,n.aS)(9889,"Reopen Editor With Text Editor"),f1:!0,category:T.L.View,precondition:A.t0})}async run(e){const t=e.get(m.I),i=t.activeEditorPane;if(!i)return;const o=r.tf.getCanonicalUri(i.input);o&&await t.replaceEditors([{editor:i.input,replacement:{resource:o,options:{override:r.Ie.id}}}],i.group)}}class Qt extends D.L{constructor(e,t,i,o){super({id:e,title:t,category:T.L.View,precondition:A.Hj,keybinding:i,f1:!0}),this.move=o}async run(e,...t){const i=e.get(g.m),o=(0,R.w)(t,e.get(m.I),i,e.get(B.P));if(!o.groupedEditors.length)return;const n=await i.createAuxiliaryEditorPart(),{group:s,editors:r}=o.groupedEditors[0],a={preserveFocus:o.preserveFocus},c=r.map((e=>({editor:e,options:a})));this.move?s.moveEditors(c,n.activeGroup):s.copyEditors(c,n.activeGroup),n.activeGroup.focus()}}class Ut extends Qt{constructor(){super(u.dn,{...(0,n.aS)(9890,"Move Editor into New Window"),mnemonicTitle:(0,n.kg)(9891,"&&Move Editor into New Window")},void 0,!0)}}class $t extends Qt{constructor(){super(u.n2,{...(0,n.aS)(9892,"Copy Editor into New Window"),mnemonicTitle:(0,n.kg)(9893,"&&Copy Editor into New Window")},{primary:(0,V.m5)(2089,45),weight:200},!1)}}class Kt extends D.L{constructor(e,t,i){super({id:e,title:t,category:T.L.View,f1:!0}),this.move=i}async run(e){const t=e.get(g.m),i=t.activeGroup,o=await t.createAuxiliaryEditorPart();t.mergeGroup(i,o.activeGroup,{mode:this.move?1:0}),o.activeGroup.focus()}}class jt extends Kt{constructor(){super(u.B$,{...(0,n.aS)(9894,"Move Editor Group into New Window"),mnemonicTitle:(0,n.kg)(9895,"&&Move Editor Group into New Window")},!0)}}class Zt extends Kt{constructor(){super(u.pz,{...(0,n.aS)(9896,"Copy Editor Group into New Window"),mnemonicTitle:(0,n.kg)(9897,"&&Copy Editor Group into New Window")},!1)}}class Yt extends D.L{constructor(){super({id:"workbench.action.restoreEditorsToMainWindow",title:{...(0,n.aS)(9898,"Restore Editors into Main Window"),mnemonicTitle:(0,n.kg)(9899,"&&Restore Editors into Main Window")},f1:!0,precondition:A.Lu,category:T.L.View})}async run(e){const t=e.get(g.m);t.mergeAllGroups(t.mainPart.activeGroup)}}class qt extends D.L{constructor(){super({id:u.gR,title:{...(0,n.aS)(9900,"New Empty Editor Window"),mnemonicTitle:(0,n.kg)(9901,"&&New Empty Editor Window")},f1:!0,category:T.L.View})}async run(e){const t=e.get(g.m);(await t.createAuxiliaryEditorPart()).activeGroup.focus()}}},90917:(e,t,i)=>{i.d(t,{A:()=>ip});var o=i(82015),n=i(92986),s=i(92518),r=i(91279),a=i(28672),c=i(64788),d=i(46361),h=i(64533),l=i(44622),u=i(93152),p=i(24821),g=i(73586),m=i(1661),b=i(84793),w=i(97634),v=i(19871),f=i(87427),y=i(1180),C=i(85412),S=i(80914),k=i(30875),_=i(63288),x=i(16409),E=i(2718),D=i(79367),I=i(25934),V=i(31275);function M(e){return`${e}.hidden`}(0,_.ug)(class extends _.L{constructor(){super({id:"_workbench.output.showViewsLog",title:(0,I.aS)(9688,"Show Views Log"),category:x.L.Developer,f1:!0})}async run(e){const t=e.get(k.x),i=e.get(E.A);t.setVisibility(r.iy,!0),i.showChannel(r.iy)}});let T=class extends p.jG{constructor(e,t,i,o){super(),this.viewContainerName=t,this.storageService=i,this._onDidChangeStoredState=this._register(new m.vl),this.onDidChangeStoredState=this._onDidChangeStoredState.event,this.logger=new V.d((()=>o.createLogger(r.iy,{name:r.CD,hidden:!0}))),this.globalViewsStateStorageId=M(e),this.workspaceViewsStateStorageId=e,this._register(this.storageService.onDidChangeValue(0,this.globalViewsStateStorageId,this._register(new p.Cm))((()=>this.onDidStorageChange()))),this.state=this.initialize()}set(e,t){this.state.set(e,t)}get(e){return this.state.get(e)}updateState(e){this.updateWorkspaceState(e),this.updateGlobalState(e)}updateWorkspaceState(e){const t=this.getStoredWorkspaceState();for(const i of e){const e=this.get(i.id);e&&(t[i.id]={collapsed:!!e.collapsed,isHidden:!e.visibleWorkspace,size:e.size,order:i.workspace&&e?e.order:void 0})}Object.keys(t).length>0?this.storageService.store(this.workspaceViewsStateStorageId,JSON.stringify(t),1,1):this.storageService.remove(this.workspaceViewsStateStorageId,1)}updateGlobalState(e){const t=this.getStoredGlobalState();for(const i of e){const e=this.get(i.id);t.set(i.id,{id:i.id,isHidden:!(!e||!i.canToggleVisibility||e.visibleGlobal),order:!i.workspace&&e?e.order:void 0})}this.setStoredGlobalState(t)}onDidStorageChange(){if(this.globalViewsStatesValue!==this.getStoredGlobalViewsStatesValue()){this._globalViewsStatesValue=void 0;const e=this.getStoredGlobalState(),t=this.getStoredWorkspaceState(),i=[];for(const[o,n]of e){const e=this.get(o);if(e)e.visibleGlobal!==!n.isHidden&&(n.isHidden||this.logger.value.info(`View visibility state changed: ${o} is now visible`,this.viewContainerName),i.push({id:o,visible:!n.isHidden}));else{const e=t[o];this.set(o,{active:!1,visibleGlobal:!n.isHidden,visibleWorkspace:(0,y.b0)(e?.isHidden)?void 0:!e?.isHidden,collapsed:e?.collapsed,order:e?.order,size:e?.size})}}if(i.length){this._onDidChangeStoredState.fire(i);for(const e of i){const t=this.get(e.id);t&&(t.visibleGlobal=e.visible)}}}}initialize(){const e=new Map,t=this.getStoredWorkspaceState();for(const i of Object.keys(t)){const o=t[i];e.set(i,{active:!1,visibleGlobal:void 0,visibleWorkspace:(0,y.b0)(o.isHidden)?void 0:!o.isHidden,collapsed:o.collapsed,order:o.order,size:o.size})}const i=this.storageService.get(this.globalViewsStateStorageId,1,"[]"),{state:o}=this.parseStoredGlobalState(i);if(o.size>0){for(const{id:t,isHidden:i}of o.values()){const o=e.get(t);o?(0,y.b0)(o.visibleWorkspace)&&(o.visibleWorkspace=!i):e.set(t,{active:!1,collapsed:void 0,visibleGlobal:void 0,visibleWorkspace:!i})}this.storageService.remove(this.globalViewsStateStorageId,1)}const{state:n,hasDuplicates:s}=this.parseStoredGlobalState(this.globalViewsStatesValue);s&&this.setStoredGlobalState(n);for(const{id:t,isHidden:i,order:o}of n.values()){const n=e.get(t);n?(n.visibleGlobal=!i,(0,y.b0)(o)||(n.order=o)):e.set(t,{active:!1,visibleGlobal:!i,order:o,collapsed:void 0,visibleWorkspace:void 0})}return e}getStoredWorkspaceState(){return JSON.parse(this.storageService.get(this.workspaceViewsStateStorageId,1,"{}"))}getStoredGlobalState(){return this.parseStoredGlobalState(this.globalViewsStatesValue).state}setStoredGlobalState(e){this.globalViewsStatesValue=JSON.stringify([...e.values()])}parseStoredGlobalState(e){const t=JSON.parse(e);let i=!1;return{state:t.reduce(((e,t)=>("string"==typeof t?(i=i||e.has(t),e.set(t,{id:t,isHidden:!0})):(i=i||e.has(t.id),e.set(t.id,t)),e)),new Map),hasDuplicates:i}}get globalViewsStatesValue(){return this._globalViewsStatesValue||(this._globalViewsStatesValue=this.getStoredGlobalViewsStatesValue()),this._globalViewsStatesValue}set globalViewsStatesValue(e){this.globalViewsStatesValue!==e&&(this._globalViewsStatesValue=e,this.setStoredGlobalViewsStatesValue(e))}getStoredGlobalViewsStatesValue(){return this.storageService.get(this.globalViewsStateStorageId,0,"[]")}setStoredGlobalViewsStatesValue(e){this.storageService.store(this.globalViewsStateStorageId,e,0,0)}};T=(0,s.C)([(0,s.Q)(2,h.C),(0,s.Q)(3,k.x)],T);let A=class extends p.jG{get title(){return this._title}get icon(){return this._icon}get keybindingId(){return this._keybindingId}get allViewDescriptors(){return this.viewDescriptorItems.map((e=>e.viewDescriptor))}get activeViewDescriptors(){return this.viewDescriptorItems.filter((e=>e.state.active)).map((e=>e.viewDescriptor))}get visibleViewDescriptors(){return this.viewDescriptorItems.filter((e=>this.isViewDescriptorVisible(e))).map((e=>e.viewDescriptor))}constructor(e,t,i,o){super(),this.viewContainer=e,this.contextKeyService=i,this.contextKeys=new D.Px,this.viewDescriptorItems=[],this._onDidChangeContainerInfo=this._register(new m.vl),this.onDidChangeContainerInfo=this._onDidChangeContainerInfo.event,this._onDidChangeAllViewDescriptors=this._register(new m.vl),this.onDidChangeAllViewDescriptors=this._onDidChangeAllViewDescriptors.event,this._onDidChangeActiveViewDescriptors=this._register(new m.vl),this.onDidChangeActiveViewDescriptors=this._onDidChangeActiveViewDescriptors.event,this._onDidAddVisibleViewDescriptors=this._register(new m.vl),this.onDidAddVisibleViewDescriptors=this._onDidAddVisibleViewDescriptors.event,this._onDidRemoveVisibleViewDescriptors=this._register(new m.vl),this.onDidRemoveVisibleViewDescriptors=this._onDidRemoveVisibleViewDescriptors.event,this._onDidMoveVisibleViewDescriptors=this._register(new m.vl),this.onDidMoveVisibleViewDescriptors=this._onDidMoveVisibleViewDescriptors.event,this.logger=new V.d((()=>o.createLogger(r.iy,{name:r.CD,hidden:!0}))),this._register(m.Jh.filter(i.onDidChangeContext,(e=>e.affectsSome(this.contextKeys)))((()=>this.onDidChangeContext()))),this.viewDescriptorsState=this._register(t.createInstance(T,e.storageId||`${e.id}.state`,"string"==typeof e.title?e.title:e.title.original)),this._register(this.viewDescriptorsState.onDidChangeStoredState((e=>this.updateVisibility(e)))),this.updateContainerInfo()}updateContainerInfo(){const e=this.viewContainer.alwaysUseContainerInfo||0===this.visibleViewDescriptors.length||this.visibleViewDescriptors.some((e=>u.O.as(r.Fd.ViewsRegistry).getViewContainer(e.id)===this.viewContainer)),t=e?"string"==typeof this.viewContainer.title?this.viewContainer.title:this.viewContainer.title.value:this.visibleViewDescriptors[0]?.containerTitle||this.visibleViewDescriptors[0]?.name?.value||"";let i=!1;this._title!==t&&(this._title=t,i=!0);const o=e?this.viewContainer.icon:this.visibleViewDescriptors[0]?.containerIcon||r.kO;let n=!1;this.isEqualIcon(o)||(this._icon=o,n=!0);const s=this.viewContainer.openCommandActionDescriptor?.id??this.activeViewDescriptors.find((e=>e.openCommandActionDescriptor))?.openCommandActionDescriptor?.id;let a=!1;this._keybindingId!==s&&(this._keybindingId=s,a=!0),(i||n||a)&&this._onDidChangeContainerInfo.fire({title:i,icon:n,keybindingId:a})}isEqualIcon(e){return v.rz.isUri(e)?v.rz.isUri(this._icon)&&(0,C.n4)(e,this._icon):S.L0.isThemeIcon(e)?S.L0.isThemeIcon(this._icon)&&S.L0.isEqual(e,this._icon):e===this._icon}isVisible(e){const t=this.viewDescriptorItems.find((t=>t.viewDescriptor.id===e));if(!t)throw new Error(`Unknown view ${e}`);return this.isViewDescriptorVisible(t)}setVisible(e,t){this.updateVisibility([{id:e,visible:t}])}updateVisibility(e){const t=(0,f.Yc)(e.filter((({visible:e})=>!e)).map((({id:e})=>this.findAndIgnoreIfNotFound(e)))),i=[];for(const{viewDescriptorItem:e,visibleIndex:o}of t)this.updateViewDescriptorItemVisibility(e,!1)&&i.push({viewDescriptor:e.viewDescriptor,index:o});i.length&&this.broadCastRemovedVisibleViewDescriptors(i);const o=[];for(const{id:t,visible:i}of e){if(!i)continue;const e=this.findAndIgnoreIfNotFound(t);if(!e)continue;const{viewDescriptorItem:n,visibleIndex:s}=e;this.updateViewDescriptorItemVisibility(n,!0)&&o.push({index:s,viewDescriptor:n.viewDescriptor,size:n.state.size,collapsed:!!n.state.collapsed})}o.length&&this.broadCastAddedVisibleViewDescriptors(o)}updateViewDescriptorItemVisibility(e,t){return!!e.viewDescriptor.canToggleVisibility&&this.isViewDescriptorVisibleWhenActive(e)!==t&&(e.viewDescriptor.workspace?e.state.visibleWorkspace=t:(e.state.visibleGlobal=t,t&&this.logger.value.info(`Showing view ${e.viewDescriptor.id} in the container ${this.viewContainer.id}`)),this.isViewDescriptorVisible(e)===t)}isCollapsed(e){return!!this.find(e).viewDescriptorItem.state.collapsed}setCollapsed(e,t){const{viewDescriptorItem:i}=this.find(e);i.state.collapsed!==t&&(i.state.collapsed=t),this.viewDescriptorsState.updateState(this.allViewDescriptors)}getSize(e){return this.find(e).viewDescriptorItem.state.size}setSizes(e){for(const{id:t,size:i}of e){const{viewDescriptorItem:e}=this.find(t);e.state.size!==i&&(e.state.size=i)}this.viewDescriptorsState.updateState(this.allViewDescriptors)}move(e,t){const i=this.viewDescriptorItems.findIndex((t=>t.viewDescriptor.id===e)),o=this.viewDescriptorItems.findIndex((e=>e.viewDescriptor.id===t)),n=this.viewDescriptorItems[i],s=this.viewDescriptorItems[o];(0,f.Cy)(this.viewDescriptorItems,i,o);for(let e=0;e<this.viewDescriptorItems.length;e++)this.viewDescriptorItems[e].state.order=e;this.broadCastMovedViewDescriptors({index:i,viewDescriptor:n.viewDescriptor},{index:o,viewDescriptor:s.viewDescriptor})}add(e){const t=[];for(const i of e){const e=i.viewDescriptor;if(e.when)for(const t of e.when.keys())this.contextKeys.add(t);let o=this.viewDescriptorsState.get(e.id);if(o){if(e.workspace)o.visibleWorkspace=(0,y.z)(i.visible)?(0,y.z)(o.visibleWorkspace)?!e.hideByDefault:o.visibleWorkspace:i.visible;else{const t=o.visibleGlobal;o.visibleGlobal=(0,y.z)(i.visible)?(0,y.z)(o.visibleGlobal)?!e.hideByDefault:o.visibleGlobal:i.visible,o.visibleGlobal&&!t&&this.logger.value.info(`Added view ${e.id} in the container ${this.viewContainer.id} and showing it.`,`${t}`,`${e.hideByDefault}`,`${i.visible}`)}o.collapsed=(0,y.z)(i.collapsed)?(0,y.z)(o.collapsed)?!!e.collapsed:o.collapsed:i.collapsed}else o={active:!1,visibleGlobal:(0,y.z)(i.visible)?!e.hideByDefault:i.visible,visibleWorkspace:(0,y.z)(i.visible)?!e.hideByDefault:i.visible,collapsed:(0,y.z)(i.collapsed)?!!e.collapsed:i.collapsed};this.viewDescriptorsState.set(e.id,o),o.active=this.contextKeyService.contextMatchesRules(e.when),t.push({viewDescriptor:e,state:o})}this.viewDescriptorItems.push(...t),this.viewDescriptorItems.sort(this.compareViewDescriptors.bind(this)),this._onDidChangeAllViewDescriptors.fire({added:t.map((({viewDescriptor:e})=>e)),removed:[]});const i=[];for(const e of t)e.state.active&&i.push({viewDescriptorItem:e,visible:this.isViewDescriptorVisible(e)});i.length&&this._onDidChangeActiveViewDescriptors.fire({added:i.map((({viewDescriptorItem:e})=>e.viewDescriptor)),removed:[]});const o=[];for(const{viewDescriptorItem:e,visible:t}of i)if(t&&this.isViewDescriptorVisible(e)){const{visibleIndex:t}=this.find(e.viewDescriptor.id);o.push({index:t,viewDescriptor:e.viewDescriptor,size:e.state.size,collapsed:!!e.state.collapsed})}this.broadCastAddedVisibleViewDescriptors(o)}remove(e){const t=[],i=[],o=[],n=[];for(const s of e){if(s.when)for(const e of s.when.keys())this.contextKeys.delete(e);const e=this.viewDescriptorItems.findIndex((e=>e.viewDescriptor.id===s.id));if(-1!==e){t.push(s);const r=this.viewDescriptorItems[e];if(r.state.active&&o.push(r.viewDescriptor),this.isViewDescriptorVisible(r)){const{visibleIndex:e}=this.find(r.viewDescriptor.id);n.push({index:e,viewDescriptor:r.viewDescriptor})}i.push(r)}}i.forEach((e=>this.viewDescriptorItems.splice(this.viewDescriptorItems.indexOf(e),1))),this.broadCastRemovedVisibleViewDescriptors(n),o.length&&this._onDidChangeActiveViewDescriptors.fire({added:[],removed:o}),t.length&&this._onDidChangeAllViewDescriptors.fire({added:[],removed:t})}onDidChangeContext(){const e=[],t=[];for(const i of this.viewDescriptorItems){const o=i.state.active,n=this.contextKeyService.contextMatchesRules(i.viewDescriptor.when);o!==n&&(n?e.push({item:i,visibleWhenActive:this.isViewDescriptorVisibleWhenActive(i)}):t.push(i))}const i=[];for(const e of t)if(this.isViewDescriptorVisible(e)){const{visibleIndex:t}=this.find(e.viewDescriptor.id);i.push({index:t,viewDescriptor:e.viewDescriptor})}t.forEach((e=>e.state.active=!1)),e.forEach((({item:e})=>e.state.active=!0)),this.broadCastRemovedVisibleViewDescriptors(i),(e.length||t.length)&&this._onDidChangeActiveViewDescriptors.fire({added:e.map((({item:e})=>e.viewDescriptor)),removed:t.map((e=>e.viewDescriptor))});const o=[];for(const{item:t,visibleWhenActive:i}of e)if(i&&this.isViewDescriptorVisible(t)){const{visibleIndex:e}=this.find(t.viewDescriptor.id);o.push({index:e,viewDescriptor:t.viewDescriptor,size:t.state.size,collapsed:!!t.state.collapsed})}this.broadCastAddedVisibleViewDescriptors(o)}broadCastAddedVisibleViewDescriptors(e){e.length&&(this._onDidAddVisibleViewDescriptors.fire(e.sort(((e,t)=>e.index-t.index))),this.updateState(`Added views:${e.map((e=>e.viewDescriptor.id)).join(",")} in ${this.viewContainer.id}`))}broadCastRemovedVisibleViewDescriptors(e){e.length&&(this._onDidRemoveVisibleViewDescriptors.fire(e.sort(((e,t)=>t.index-e.index))),this.updateState(`Removed views:${e.map((e=>e.viewDescriptor.id)).join(",")} from ${this.viewContainer.id}`))}broadCastMovedViewDescriptors(e,t){this._onDidMoveVisibleViewDescriptors.fire({from:e,to:t}),this.updateState(`Moved view ${e.viewDescriptor.id} to ${t.viewDescriptor.id} in ${this.viewContainer.id}`)}updateState(e){this.logger.value.info(e),this.viewDescriptorsState.updateState(this.allViewDescriptors),this.updateContainerInfo()}isViewDescriptorVisible(e){return!!e.state.active&&this.isViewDescriptorVisibleWhenActive(e)}isViewDescriptorVisibleWhenActive(e){return e.viewDescriptor.workspace?!!e.state.visibleWorkspace:!!e.state.visibleGlobal}find(e){const t=this.findAndIgnoreIfNotFound(e);if(t)return t;throw new Error(`view descriptor ${e} not found`)}findAndIgnoreIfNotFound(e){for(let t=0,i=0;t<this.viewDescriptorItems.length;t++){const o=this.viewDescriptorItems[t];if(o.viewDescriptor.id===e)return{index:t,visibleIndex:i,viewDescriptorItem:o};this.isViewDescriptorVisible(o)&&i++}}compareViewDescriptors(e,t){return e.viewDescriptor.id===t.viewDescriptor.id?0:this.getViewOrder(e)-this.getViewOrder(t)||this.getGroupOrderResult(e.viewDescriptor,t.viewDescriptor)}getViewOrder(e){const t="number"==typeof e.state.order?e.state.order:e.viewDescriptor.order;return"number"==typeof t?t:Number.MAX_VALUE}getGroupOrderResult(e,t){return e.group&&t.group?e.group===t.group?0:e.group<t.group?-1:1:0}};var L;function P(e){return`${e}.state`}A=(0,s.C)([(0,s.Q)(1,a._Y),(0,s.Q)(2,d.f),(0,s.Q)(3,k.x)],A);let R=class extends p.jG{static{L=this}static{this.VIEWS_CUSTOMIZATIONS="views.customizations"}static{this.COMMON_CONTAINER_ID_PREFIX="workbench.views.service"}get viewContainers(){return this.viewContainersRegistry.all}constructor(e,t,i,o,n,s){super(),this.instantiationService=e,this.contextKeyService=t,this.storageService=i,this.extensionService=o,this.telemetryService=n,this._onDidChangeContainer=this._register(new m.vl),this.onDidChangeContainer=this._onDidChangeContainer.event,this._onDidChangeLocation=this._register(new m.vl),this.onDidChangeLocation=this._onDidChangeLocation.event,this._onDidChangeContainerLocation=this._register(new m.vl),this.onDidChangeContainerLocation=this._onDidChangeContainerLocation.event,this.viewContainerModels=this._register(new p.$w),this.viewsVisibilityActionDisposables=this._register(new p.$w),this.canRegisterViewsVisibilityActions=!1,this._onDidChangeViewContainers=this._register(new m.vl),this.onDidChangeViewContainers=this._onDidChangeViewContainers.event,this.logger=new V.d((()=>s.createLogger(r.iy,{name:r.CD,hidden:!0}))),this.activeViewContextKeys=new Map,this.movableViewContextKeys=new Map,this.defaultViewLocationContextKeys=new Map,this.defaultViewContainerLocationContextKeys=new Map,this.viewContainersRegistry=u.O.as(r.Fd.ViewContainersRegistry),this.viewsRegistry=u.O.as(r.Fd.ViewsRegistry),this.migrateToViewsCustomizationsStorage(),this.viewContainersCustomLocations=new Map(Object.entries(this.viewCustomizations.viewContainerLocations)),this.viewDescriptorsCustomLocations=new Map(Object.entries(this.viewCustomizations.viewLocations)),this.viewContainerBadgeEnablementStates=new Map(Object.entries(this.viewCustomizations.viewContainerBadgeEnablementStates)),this.viewContainers.forEach((e=>this.onDidRegisterViewContainer(e))),this._register(this.viewsRegistry.onViewsRegistered((e=>this.onDidRegisterViews(e)))),this._register(this.viewsRegistry.onViewsDeregistered((({views:e,viewContainer:t})=>this.onDidDeregisterViews(e,t)))),this._register(this.viewsRegistry.onDidChangeContainer((({views:e,from:t,to:i})=>this.onDidChangeDefaultContainer(e,t,i)))),this._register(this.viewContainersRegistry.onDidRegister((({viewContainer:e})=>{this.onDidRegisterViewContainer(e),this._onDidChangeViewContainers.fire({added:[{container:e,location:this.getViewContainerLocation(e)}],removed:[]})}))),this._register(this.viewContainersRegistry.onDidDeregister((({viewContainer:e,viewContainerLocation:t})=>{this.onDidDeregisterViewContainer(e),this._onDidChangeViewContainers.fire({removed:[{container:e,location:t}],added:[]})}))),this._register(this.storageService.onDidChangeValue(0,L.VIEWS_CUSTOMIZATIONS,this._register(new p.Cm))((()=>this.onDidStorageChange()))),this.extensionService.whenInstalledExtensionsRegistered().then((()=>this.whenExtensionsRegistered()))}migrateToViewsCustomizationsStorage(){if(this.storageService.get(L.VIEWS_CUSTOMIZATIONS,0))return;const e=this.storageService.get("views.cachedViewContainerLocations",0),t=this.storageService.get("views.cachedViewPositions",0);if(!e&&!t)return;const i=e?JSON.parse(e):[],o=t?JSON.parse(t):[],n={viewContainerLocations:i.reduce(((e,[t,i])=>(e[t]=i,e)),{}),viewLocations:o.reduce(((e,[t,{containerId:i}])=>(e[t]=i,e)),{}),viewContainerBadgeEnablementStates:{}};this.storageService.store(L.VIEWS_CUSTOMIZATIONS,JSON.stringify(n),0,0),this.storageService.remove("views.cachedViewContainerLocations",0),this.storageService.remove("views.cachedViewPositions",0)}registerGroupedViews(e){for(const[t,i]of e.entries()){const e=this.viewContainersRegistry.get(t);if(!e||!this.viewContainerModels.has(e)){if(this.isGeneratedContainerId(t)){const e=this.viewContainersCustomLocations.get(t);void 0!==e&&this.registerGeneratedViewContainer(e,t)}continue}const o=i.filter((t=>0===this.getViewContainerModel(e).allViewDescriptors.filter((e=>e.id===t.id)).length));this.addViews(e,o)}}deregisterGroupedViews(e){for(const[t,i]of e.entries()){const e=this.viewContainersRegistry.get(t);e&&this.viewContainerModels.has(e)&&this.removeViews(e,i)}}moveOrphanViewsToDefaultLocation(){for(const[e,t]of this.viewDescriptorsCustomLocations.entries()){if(this.viewContainersRegistry.get(t))continue;const i=this.viewsRegistry.getViewContainer(e),o=this.getViewDescriptorById(e);i&&o&&this.addViews(i,[o])}}whenExtensionsRegistered(){this.moveOrphanViewsToDefaultLocation();for(const e of[...this.viewContainersCustomLocations.keys()])this.cleanUpGeneratedViewContainer(e);this.saveViewCustomizations();for(const[e,t]of this.viewContainerModels)this.registerViewsVisibilityActions(e,t);this.canRegisterViewsVisibilityActions=!0}onDidRegisterViews(e){this.contextKeyService.bufferChangeEvents((()=>{e.forEach((({views:e,viewContainer:t})=>{const i=this.regroupViews(t.id,e);this.registerGroupedViews(i),e.forEach((e=>this.getOrCreateMovableViewContextKey(e).set(!!e.canMoveView)))}))}))}isGeneratedContainerId(e){return e.startsWith(L.COMMON_CONTAINER_ID_PREFIX)}onDidDeregisterViews(e,t){const i=this.regroupViews(t.id,e);this.deregisterGroupedViews(i),this.contextKeyService.bufferChangeEvents((()=>{e.forEach((e=>this.getOrCreateMovableViewContextKey(e).set(!1)))}))}regroupViews(e,t){const i=new Map;for(const o of t){const t=this.viewDescriptorsCustomLocations.get(o.id)??e;let n=i.get(t);n||i.set(t,n=[]),n.push(o)}return i}getViewDescriptorById(e){return this.viewsRegistry.getView(e)}getViewLocationById(e){const t=this.getViewContainerByViewId(e);return null===t?null:this.getViewContainerLocation(t)}getViewContainerByViewId(e){const t=this.viewDescriptorsCustomLocations.get(e);return t?this.viewContainersRegistry.get(t)??null:this.getDefaultContainerById(e)}getViewContainerLocation(e){return this.viewContainersCustomLocations.get(e.id)??this.getDefaultViewContainerLocation(e)}getDefaultViewContainerLocation(e){return this.viewContainersRegistry.getViewContainerLocation(e)}getDefaultContainerById(e){return this.viewsRegistry.getViewContainer(e)??null}getViewContainerModel(e){return this.getOrRegisterViewContainerModel(e)}getViewContainerById(e){return this.viewContainersRegistry.get(e)||null}getViewContainersByLocation(e){return this.viewContainers.filter((t=>this.getViewContainerLocation(t)===e))}getDefaultViewContainer(e){return this.viewContainersRegistry.getDefaultViewContainer(e)}moveViewContainerToLocation(e,t,i,o){this.logger.value.info(`moveViewContainerToLocation: viewContainer:${e.id} location:${t} reason:${o}`),this.moveViewContainerToLocationWithoutSaving(e,t,i),this.saveViewCustomizations()}getViewContainerBadgeEnablementState(e){return this.viewContainerBadgeEnablementStates.get(e)??!0}setViewContainerBadgeEnablementState(e,t){this.viewContainerBadgeEnablementStates.set(e,t),this.saveViewCustomizations()}moveViewToLocation(e,t,i){this.logger.value.info(`moveViewToLocation: view:${e.id} location:${t} reason:${i}`);const o=this.registerGeneratedViewContainer(t);this.moveViewsToContainer([e],o)}moveViewsToContainer(e,t,i,o){if(!e.length)return;this.logger.value.info(`moveViewsToContainer: views:${e.map((e=>e.id)).join(",")} viewContainer:${t.id} reason:${o}`);const n=this.getViewContainerByViewId(e[0].id),s=t;n&&s&&n!==s&&(this.moveViewsWithoutSaving(e,n,s,i),this.cleanUpGeneratedViewContainer(n.id),this.saveViewCustomizations(),this.reportMovedViews(e,n,s))}reset(){for(const e of this.viewContainers){const t=this.getViewContainerModel(e);for(const e of t.allViewDescriptors){const t=this.getDefaultContainerById(e.id),i=this.getViewContainerByViewId(e.id);i&&t&&i!==t&&this.moveViewsWithoutSaving([e],i,t)}const i=this.getDefaultViewContainerLocation(e),o=this.getViewContainerLocation(e);null!==i&&o!==i&&this.moveViewContainerToLocationWithoutSaving(e,i),this.cleanUpGeneratedViewContainer(e.id)}this.viewContainersCustomLocations.clear(),this.viewDescriptorsCustomLocations.clear(),this.saveViewCustomizations()}isViewContainerRemovedPermanently(e){return this.isGeneratedContainerId(e)&&!this.viewContainersCustomLocations.has(e)}onDidChangeDefaultContainer(e,t,i){const o=e.filter((e=>!this.viewDescriptorsCustomLocations.has(e.id)||!this.viewContainers.includes(t)&&this.viewDescriptorsCustomLocations.get(e.id)===t.id));o.length&&this.moveViewsWithoutSaving(o,t,i)}reportMovedViews(e,t,i){const o=e=>e.id.startsWith(L.COMMON_CONTAINER_ID_PREFIX)?"custom":e.extensionId?"extension":e.id,n=this.getViewContainerLocation(t),s=this.getViewContainerLocation(i),r=e.length,a=o(t),c=o(i),d=1===n?"panel":"sidebar",h=1===s?"panel":"sidebar";this.telemetryService.publicLog2("viewDescriptorService.moveViews",{viewCount:r,fromContainer:a,toContainer:c,fromLocation:d,toLocation:h})}moveViewsWithoutSaving(e,t,i,o=r.jl.Expand){this.removeViews(t,e),this.addViews(i,e,o);const n=this.getViewContainerLocation(t),s=this.getViewContainerLocation(i);n!==s&&this._onDidChangeLocation.fire({views:e,from:n,to:s}),this._onDidChangeContainer.fire({views:e,from:t,to:i})}moveViewContainerToLocationWithoutSaving(e,t,i){const o=this.getViewContainerLocation(e),n=t;if(o!==n){const t=this.isGeneratedContainerId(e.id),s=n===this.getDefaultViewContainerLocation(e);t||!s?this.viewContainersCustomLocations.set(e.id,n):this.viewContainersCustomLocations.delete(e.id),this.getOrCreateDefaultViewContainerLocationContextKey(e).set(t||s),e.requestedIndex=i,this._onDidChangeContainerLocation.fire({viewContainer:e,from:o,to:n});const r=this.getViewsByContainer(e);this._onDidChangeLocation.fire({views:r,from:o,to:n})}}cleanUpGeneratedViewContainer(e){if(!this.isGeneratedContainerId(e))return;const t=this.getViewContainerById(e);t&&this.getViewContainerModel(t)?.allViewDescriptors.length||[...this.viewDescriptorsCustomLocations.values()].includes(e)||(t&&this.viewContainersRegistry.deregisterViewContainer(t),this.viewContainersCustomLocations.delete(e),this.viewContainerBadgeEnablementStates.delete(e),this.storageService.remove(M(t?.storageId||P(e)),0))}registerGeneratedViewContainer(e,t){const i=t||this.generateContainerId(e),n=this.viewContainersRegistry.registerViewContainer({id:i,ctorDescriptor:new o.d(g.zv,[i,{mergeViewWithContainerWhenSingleView:!0}]),title:{value:i,original:i},icon:0===e?r.kO:void 0,storageId:P(i),hideIfEmpty:!0},e,{doNotRegisterOpenCommand:!0});return this.viewContainersCustomLocations.get(n.id)!==e&&this.viewContainersCustomLocations.set(n.id,e),this.getOrCreateDefaultViewContainerLocationContextKey(n).set(!0),n}onDidStorageChange(){JSON.stringify(this.viewCustomizations)!==this.getStoredViewCustomizationsValue()&&this.onDidViewCustomizationsStorageChange()}onDidViewCustomizationsStorageChange(){this._viewCustomizations=void 0;const e=new Map(Object.entries(this.viewCustomizations.viewContainerLocations)),t=new Map(Object.entries(this.viewCustomizations.viewLocations)),i=[],o=[];for(const[t,o]of e.entries()){const e=this.getViewContainerById(t);e?o!==this.getViewContainerLocation(e)&&i.push([e,o]):this.isGeneratedContainerId(t)&&this.registerGeneratedViewContainer(o,t)}for(const t of this.viewContainers)if(!e.has(t.id)){const e=this.getViewContainerLocation(t),o=this.getDefaultViewContainerLocation(t);e!==o&&i.push([t,o])}for(const[e,i]of t.entries()){const t=this.getViewDescriptorById(e);if(t){const n=this.getViewContainerByViewId(e),s=this.viewContainersRegistry.get(i);n&&s&&s!==n&&o.push({views:[t],from:n,to:s})}}for(const e of this.viewContainers){const i=this.getViewContainerModel(e);for(const e of i.allViewDescriptors)if(!t.has(e.id)){const t=this.getViewContainerByViewId(e.id),i=this.getDefaultContainerById(e.id);t&&i&&t!==i&&o.push({views:[e],from:t,to:i})}}for(const[e,t]of i)this.moveViewContainerToLocationWithoutSaving(e,t);for(const{views:e,from:t,to:i}of o)this.moveViewsWithoutSaving(e,t,i,r.jl.Default);this.viewContainersCustomLocations=e,this.viewDescriptorsCustomLocations=t}generateContainerId(e){return`${L.COMMON_CONTAINER_ID_PREFIX}.${(0,r._4)(e)}.${(0,w.b)()}`}saveViewCustomizations(){const e={viewContainerLocations:{},viewLocations:{},viewContainerBadgeEnablementStates:{}};for(const[t,i]of this.viewContainersCustomLocations){const o=this.getViewContainerById(t);o&&!this.isGeneratedContainerId(t)&&i===this.getDefaultViewContainerLocation(o)||(e.viewContainerLocations[t]=i)}for(const[t,i]of this.viewDescriptorsCustomLocations){const o=this.getViewContainerById(i);if(o){const e=this.getDefaultContainerById(t);if(e?.id===o.id)continue}e.viewLocations[t]=i}for(const[t,i]of this.viewContainerBadgeEnablementStates)!1===i&&(e.viewContainerBadgeEnablementStates[t]=i);this.viewCustomizations=e}get viewCustomizations(){return this._viewCustomizations||(this._viewCustomizations=JSON.parse(this.getStoredViewCustomizationsValue()),this._viewCustomizations.viewContainerLocations=this._viewCustomizations.viewContainerLocations??{},this._viewCustomizations.viewLocations=this._viewCustomizations.viewLocations??{},this._viewCustomizations.viewContainerBadgeEnablementStates=this._viewCustomizations.viewContainerBadgeEnablementStates??{}),this._viewCustomizations}set viewCustomizations(e){const t=JSON.stringify(e);JSON.stringify(this.viewCustomizations)!==t&&(this._viewCustomizations=e,this.setStoredViewCustomizationsValue(t))}getStoredViewCustomizationsValue(){return this.storageService.get(L.VIEWS_CUSTOMIZATIONS,0,"{}")}setStoredViewCustomizationsValue(e){this.storageService.store(L.VIEWS_CUSTOMIZATIONS,e,0,0)}getViewsByContainer(e){const t=this.viewsRegistry.getViews(e).filter((t=>(this.viewDescriptorsCustomLocations.get(t.id)??e.id)===e.id));for(const[i,o]of this.viewDescriptorsCustomLocations.entries()){if(o!==e.id)continue;if(this.viewsRegistry.getViewContainer(i)===e)continue;const n=this.getViewDescriptorById(i);n&&t.push(n)}return t}onDidRegisterViewContainer(e){const t=!!this.isGeneratedContainerId(e.id)||this.getViewContainerLocation(e)===this.getDefaultViewContainerLocation(e);this.getOrCreateDefaultViewContainerLocationContextKey(e).set(t),this.getOrRegisterViewContainerModel(e)}getOrRegisterViewContainerModel(e){let t=this.viewContainerModels.get(e)?.viewContainerModel;if(!t){const i=new p.Cm;t=i.add(this.instantiationService.createInstance(A,e)),this.onDidChangeActiveViews({added:t.activeViewDescriptors,removed:[]}),t.onDidChangeActiveViewDescriptors((e=>this.onDidChangeActiveViews(e)),this,i),this.onDidChangeVisibleViews({added:[...t.visibleViewDescriptors],removed:[]}),t.onDidAddVisibleViewDescriptors((e=>this.onDidChangeVisibleViews({added:e.map((({viewDescriptor:e})=>e)),removed:[]})),this,i),t.onDidRemoveVisibleViewDescriptors((e=>this.onDidChangeVisibleViews({added:[],removed:e.map((({viewDescriptor:e})=>e))})),this,i),i.add((0,p.s)((()=>this.viewsVisibilityActionDisposables.deleteAndDispose(e)))),i.add(this.registerResetViewContainerAction(e));const o={viewContainerModel:t,disposables:i,dispose:()=>i.dispose()};this.viewContainerModels.set(e,o),this.onDidRegisterViews([{views:this.viewsRegistry.getViews(e),viewContainer:e}]);const n=this.getViewsByContainer(e).filter((t=>this.getDefaultContainerById(t.id)!==e));n.length&&(this.addViews(e,n),this.contextKeyService.bufferChangeEvents((()=>{n.forEach((e=>this.getOrCreateMovableViewContextKey(e).set(!!e.canMoveView)))}))),this.canRegisterViewsVisibilityActions&&this.registerViewsVisibilityActions(e,o)}return t}onDidDeregisterViewContainer(e){this.viewContainerModels.deleteAndDispose(e),this.viewsVisibilityActionDisposables.deleteAndDispose(e)}onDidChangeActiveViews({added:e,removed:t}){this.contextKeyService.bufferChangeEvents((()=>{e.forEach((e=>this.getOrCreateActiveViewContextKey(e).set(!0))),t.forEach((e=>this.getOrCreateActiveViewContextKey(e).set(!1)))}))}onDidChangeVisibleViews({added:e,removed:t}){this.contextKeyService.bufferChangeEvents((()=>{e.forEach((e=>this.getOrCreateVisibleViewContextKey(e).set(!0))),t.forEach((e=>this.getOrCreateVisibleViewContextKey(e).set(!1)))}))}registerViewsVisibilityActions(e,{viewContainerModel:t,disposables:i}){this.viewsVisibilityActionDisposables.deleteAndDispose(e),this.viewsVisibilityActionDisposables.set(e,this.registerViewsVisibilityActionsForContainer(t)),i.add(m.Jh.any(t.onDidChangeActiveViewDescriptors,t.onDidAddVisibleViewDescriptors,t.onDidRemoveVisibleViewDescriptors,t.onDidMoveVisibleViewDescriptors)((i=>{this.viewsVisibilityActionDisposables.deleteAndDispose(e),this.viewsVisibilityActionDisposables.set(e,this.registerViewsVisibilityActionsForContainer(t))})))}registerViewsVisibilityActionsForContainer(e){const t=new p.Cm;return e.activeViewDescriptors.forEach(((i,o)=>{i.remoteAuthority||(t.add((0,_.ug)(class extends g.fW{constructor(){super({id:`${i.id}.toggleVisibility`,viewPaneContainerId:e.viewContainer.id,precondition:i.canToggleVisibility&&(!e.isVisible(i.id)||e.visibleViewDescriptors.length>1)?c.M$.true():c.M$.false(),toggled:c.M$.has(`${i.id}.visible`),title:i.name,metadata:{description:(0,I.aS)(3902,"Toggles the visibility of the {0} view if the view container it is located in is visible",i.name.value)},menu:[{id:g.Ox,when:c.M$.equals("viewContainer",e.viewContainer.id),order:o},{id:_.D8.ViewContainerTitleContext,when:c.M$.and(c.M$.equals("viewContainer",e.viewContainer.id)),order:o,group:"1_toggleVisibility"},{id:_.D8.ViewTitleContext,when:c.M$.and(c.M$.or(...e.visibleViewDescriptors.map((e=>c.M$.equals("view",e.id))))),order:o,group:"2_toggleVisibility"}]})}async runInViewPaneContainer(e,t){t.toggleViewVisibility(i.id)}})),t.add((0,_.ug)(class extends g.fW{constructor(){super({id:`${i.id}.removeView`,viewPaneContainerId:e.viewContainer.id,title:(0,I.kg)(3903,"Hide '{0}'",i.name.value),metadata:{description:(0,I.aS)(3904,"Hides the {0} view if it is visible and the view container it is located in is visible",i.name.value)},precondition:i.canToggleVisibility&&(!e.isVisible(i.id)||e.visibleViewDescriptors.length>1)?c.M$.true():c.M$.false(),menu:[{id:_.D8.ViewTitleContext,when:c.M$.and(c.M$.equals("view",i.id),c.M$.has(`${i.id}.visible`)),group:"1_hide",order:1}]})}async runInViewPaneContainer(e,t){t.getView(i.id)?.isVisible()&&t.toggleViewVisibility(i.id)}})))})),t}registerResetViewContainerAction(e){const t=this;return(0,_.ug)(class extends _.L{constructor(){super({id:`${e.id}.resetViewContainerLocation`,title:(0,I.aS)(3905,"Reset Location"),menu:[{id:_.D8.ViewContainerTitleContext,when:c.M$.or(c.M$.and(c.M$.equals("viewContainer",e.id),c.M$.equals(`${e.id}.defaultViewContainerLocation`,!1)))}]})}run(){t.moveViewContainerToLocation(e,t.getDefaultViewContainerLocation(e),void 0,this.desc.id)}})}addViews(e,t,i=r.jl.Default){this.contextKeyService.bufferChangeEvents((()=>{t.forEach((t=>{const i=this.getDefaultContainerById(t.id)===e;this.getOrCreateDefaultViewLocationContextKey(t).set(i),i?this.viewDescriptorsCustomLocations.delete(t.id):this.viewDescriptorsCustomLocations.set(t.id,e.id)}))})),this.getViewContainerModel(e).add(t.map((e=>({viewDescriptor:e,collapsed:i===r.jl.Default&&void 0,visible:i!==r.jl.Default||void 0}))))}removeViews(e,t){this.contextKeyService.bufferChangeEvents((()=>{t.forEach((t=>{this.viewDescriptorsCustomLocations.get(t.id)===e.id&&this.viewDescriptorsCustomLocations.delete(t.id),this.getOrCreateDefaultViewLocationContextKey(t).set(!1)}))})),this.getViewContainerModel(e).remove(t)}getOrCreateActiveViewContextKey(e){const t=`${e.id}.active`;let i=this.activeViewContextKeys.get(t);return i||(i=new c.N1(t,!1).bindTo(this.contextKeyService),this.activeViewContextKeys.set(t,i)),i}getOrCreateVisibleViewContextKey(e){const t=`${e.id}.visible`;let i=this.activeViewContextKeys.get(t);return i||(i=new c.N1(t,!1).bindTo(this.contextKeyService),this.activeViewContextKeys.set(t,i)),i}getOrCreateMovableViewContextKey(e){const t=`${e.id}.canMove`;let i=this.movableViewContextKeys.get(t);return i||(i=new c.N1(t,!1).bindTo(this.contextKeyService),this.movableViewContextKeys.set(t,i)),i}getOrCreateDefaultViewLocationContextKey(e){const t=`${e.id}.defaultViewLocation`;let i=this.defaultViewLocationContextKeys.get(t);return i||(i=new c.N1(t,!1).bindTo(this.contextKeyService),this.defaultViewLocationContextKeys.set(t,i)),i}getOrCreateDefaultViewContainerLocationContextKey(e){const t=`${e.id}.defaultViewContainerLocation`;let i=this.defaultViewContainerLocationContextKeys.get(t);return i||(i=new c.N1(t,!1).bindTo(this.contextKeyService),this.defaultViewContainerLocationContextKeys.set(t,i)),i}};R=L=(0,s.C)([(0,s.Q)(0,a._Y),(0,s.Q)(1,d.f),(0,s.Q)(2,h.C),(0,s.Q)(3,l.c),(0,s.Q)(4,b.k),(0,s.Q)(5,k.x)],R);var B,O=i(74670),N=i(31255),F=i(82561),G=i(19383),W=i(57651),z=i(819),H=i(58544),Q=i(80512),U=i(92449),$=i(30787),K=i(63534),j=i(9957),Z=i(92372),Y=i(54521),q=i(26888),J=i(23703),X=i(32834);let ee=class extends p.jG{static{B=this}static{this.configureDefaultID="promptOpenWith.configureDefault"}static{this.cacheStorageID="editorOverrideService.cache"}static{this.conflictingDefaultsStorageID="editorOverrideService.conflictingDefaults"}constructor(e,t,i,o,n,s,r,a,c){super(),this.editorGroupService=e,this.instantiationService=t,this.configurationService=i,this.quickInputService=o,this.notificationService=n,this.telemetryService=s,this.storageService=r,this.extensionService=a,this.logService=c,this._onDidChangeEditorRegistrations=this._register(new m.fV),this.onDidChangeEditorRegistrations=this._onDidChangeEditorRegistrations.event,this._editors=new Map,this._flattenedEditors=new Map,this._shouldReFlattenEditors=!0,this.cache=new Set(JSON.parse(this.storageService.get(B.cacheStorageID,0,JSON.stringify([])))),this.storageService.remove(B.cacheStorageID,0),this._register(this.storageService.onWillSaveState((()=>{this.cacheEditors()}))),this._register(this.extensionService.onDidRegisterExtensions((()=>{this.cache=void 0})))}resolveUntypedInputAndGroup(e,t){const i=e,o=this.instantiationService.invokeFunction(q.$,i,t);if(o instanceof Promise)return o.then((([e,t])=>[i,e,t]));{const[e,t]=o;return[i,e,t]}}async resolveEditor(e,t){if(this._flattenedEditors=this._flattenEditorsMap(),(0,Q.nM)(e))return this.doResolveSideBySideEditor(e,t);let i;const o=this.resolveUntypedInputAndGroup(e,t);if(i=o instanceof Promise?await o:o,!i)return 2;const[n,s,r]=i;r&&(n.options={...n.options,activation:r});let a=Q.tf.getCanonicalUri(n,{supportSideBySide:Q.zX.PRIMARY});if(this.cache&&a&&this.resourceMatchesCache(a)&&await this.extensionService.whenInstalledExtensionsRegistered(),void 0===a)a=v.rz.from({scheme:$.ny.untitled});else if(void 0===a.scheme||null===a)return 2;if(n.options?.override===H.gS.PICK){const e=await this.doPickEditor(n);if(!e)return 1;n.options=e}let{editor:c,conflictingDefault:d}=this.getEditor(a,n.options?.override);if(!c&&(n.options?.override||(0,Q.cs)(e)))return 2;if(!c){const e=this.getEditor(a,Q.Ie.id);if(c=e?.editor,d=e?.conflictingDefault,!c)return 2}if((0,Q.bV)(n)&&void 0===n.options?.override){let e=Q.tf.getCanonicalUri(n,{supportSideBySide:Q.zX.SECONDARY});e||(e=v.rz.from({scheme:$.ny.untitled}));const{editor:t}=this.getEditor(e,void 0);if(!t||c.editorInfo.id!==t.editorInfo.id){const{editor:e,conflictingDefault:t}=this.getEditor(a,Q.Ie.id);c=e,d=t}if(!c)return 2}if(n.options={override:c.editorInfo.id,...n.options},void 0===c.editorFactoryObject.createDiffEditorInput&&(0,Q.bV)(n))return 2;const h=await this.doResolveEditor(n,s,c);return d&&h&&await this.doHandleConflictingDefaults(a,c.editorInfo.label,n,h.editor,s),h?(this.sendEditorResolutionTelemetry(h.editor),h.editor.editorId!==c.editorInfo.id&&this.logService.warn(`Editor ID Mismatch: ${h.editor.editorId} !== ${c.editorInfo.id}. This will cause bugs. Please ensure editorInput.editorId matches the registered id`),{...h,group:s}):1}async doResolveSideBySideEditor(e,t){const i=await this.resolveEditor(e.primary,t);if(!(0,Q.kc)(i))return 2;const o=await this.resolveEditor(e.secondary,i.group??t);return(0,Q.kc)(o)?{group:i.group??o.group,editor:this.instantiationService.createInstance(J.JL,e.label,e.description,o.editor,i.editor),options:e.options}:2}bufferChangeEvents(e){this._onDidChangeEditorRegistrations.pause();try{e()}finally{this._onDidChangeEditorRegistrations.resume()}}registerEditor(e,t,i,o){let n=this._editors.get(e);void 0===n&&(n=new Map,this._editors.set(e,n));let s=n.get(t.id);void 0===s&&(s=[]);const r=(0,f.Yr)(s,{globPattern:e,editorInfo:t,options:i,editorFactoryObject:o});return n.set(t.id,s),this._shouldReFlattenEditors=!0,this._onDidChangeEditorRegistrations.fire(),(0,p.s)((()=>{r(),s&&0===s.length&&n?.delete(t.id),this._shouldReFlattenEditors=!0,this._onDidChangeEditorRegistrations.fire()}))}getAssociationsForResource(e){let t=this.getAllUserAssociations().filter((t=>t.filenamePattern&&(0,K.gP)(t.filenamePattern,e)));t=t.sort(((e,t)=>(t.filenamePattern?.length??0)-(e.filenamePattern?.length??0)));const i=this._registeredEditors;return t.filter((e=>i.find((t=>t.editorInfo.id===e.viewType))))}getAllUserAssociations(){const e=this.configurationService.inspect(K.kY)||{},t=e.defaultValue??{},i=e.workspaceValue??{},o=e.userValue??{},n={...i};for(const[e,i]of Object.entries({...t,...o}))void 0===n[e]&&(n[e]=i);const s=[];for(const[e,t]of Object.entries(n)){const i={filenamePattern:e,viewType:t};s.push(i)}return s}_flattenEditorsMap(){if(!this._shouldReFlattenEditors)return this._flattenedEditors;this._shouldReFlattenEditors=!1;const e=new Map;for(const[t,i]of this._editors){const o=[];for(const e of i.values()){let t;for(const i of e)t||(t={editorInfo:i.editorInfo,globPattern:i.globPattern,options:{},editorFactoryObject:{}}),t.options={...t.options,...i.options},t.editorFactoryObject={...t.editorFactoryObject,...i.editorFactoryObject};t&&o.push(t)}e.set(t,o)}return e}get _registeredEditors(){return Array.from(this._flattenedEditors.values()).flat()}updateUserAssociations(e,t){const i={viewType:t,filenamePattern:e},o=this.getAllUserAssociations(),n=Object.create(null);for(const e of[...o,i])e.filenamePattern&&(n[e.filenamePattern]=e.viewType);this.configurationService.updateValue(K.kY,n)}findMatchingEditors(e){const t=this.getAssociationsForResource(e),i=[];for(const[o,n]of this._flattenedEditors)for(const s of n)(t.find((e=>e.viewType===s.editorInfo.id))&&s.editorInfo.priority!==K.C8.exclusive||(0,K.gP)(o,e))&&i.push(s);return i.sort(((e,t)=>(0,K.Y)(t.editorInfo.priority)===(0,K.Y)(e.editorInfo.priority)&&"string"==typeof t.globPattern&&"string"==typeof e.globPattern?t.globPattern.length-e.globPattern.length:(0,K.Y)(t.editorInfo.priority)-(0,K.Y)(e.editorInfo.priority)))}getEditors(e){if(this._flattenedEditors=this._flattenEditorsMap(),v.rz.isUri(e)){const t=this.findMatchingEditors(e);return t.find((e=>e.editorInfo.priority===K.C8.exclusive))?[]:t.map((e=>e.editorInfo))}return(0,f.dM)(this._registeredEditors.map((e=>e.editorInfo)),(e=>e.id))}getEditor(e,t){const i=(t,i)=>t.find((t=>t.options&&void 0!==t.options.canSupportResource?t.editorInfo.id===i&&t.options.canSupportResource(e):t.editorInfo.id===i));if(t&&t!==H.gS.EXCLUSIVE_ONLY)return{editor:i(this._registeredEditors,t),conflictingDefault:!1};const o=this.findMatchingEditors(e),n=this.getAssociationsForResource(e),s=t===H.gS.EXCLUSIVE_ONLY?K.C8.exclusive:K.C8.builtin;let r=o.filter((e=>(0,K.Y)(e.editorInfo.priority)>=(0,K.Y)(s)&&e.editorInfo.id!==Q.Ie.id));if(0===r.length)return{editor:n[0]&&s!==K.C8.exclusive?i(o,n[0].viewType):void 0,conflictingDefault:!1};const a=r[0].editorInfo.priority===K.C8.exclusive?r[0].editorInfo.id:n[0]?.viewType||r[0].editorInfo.id;let c=!1;return r=r.filter((e=>e.editorInfo.priority!==K.C8.exclusive)),0===n.length&&r.length>1&&(c=!0),{editor:i(o,a),conflictingDefault:c}}async doResolveEditor(e,t,i){let o=e.options;const n=Q.tf.getCanonicalUri(e,{supportSideBySide:Q.zX.PRIMARY});if(o&&void 0===o.activation&&(o={...o,activation:o.preserveFocus?H.u2.RESTORE:void 0}),(0,Q.CD)(e)){if(!i.editorFactoryObject.createMergeEditorInput)return;const n=await i.editorFactoryObject.createMergeEditorInput(e,t);return{editor:n.editor,options:n.options??o}}if((0,Q.bV)(e)){if(!i.editorFactoryObject.createDiffEditorInput)return;const n=await i.editorFactoryObject.createDiffEditorInput(e,t);return{editor:n.editor,options:n.options??o}}if((0,Q.Kk)(e)){if(!i.editorFactoryObject.createMultiDiffEditorInput)return;const n=await i.editorFactoryObject.createMultiDiffEditorInput(e,t);return{editor:n.editor,options:n.options??o}}if((0,Q.nM)(e))throw new Error("Untyped side by side editor input not supported here.");if((0,Q.x3)(e)){if(!i.editorFactoryObject.createUntitledEditorInput)return;const n=await i.editorFactoryObject.createUntitledEditorInput(e,t);return{editor:n.editor,options:n.options??o}}if(void 0===n)throw new Error("Undefined resource on non untitled editor input.");if("function"==typeof i.options?.singlePerResource?i.options.singlePerResource():i.options?.singlePerResource){const e=this.findExistingEditorsForResource(n,i.editorInfo.id);if(e.length){const i=await this.moveExistingEditorForResource(e,t);return i?{editor:i,options:o}:void 0}}if(!i.editorFactoryObject.createEditorInput)return;const s=await i.editorFactoryObject.createEditorInput(e,t);return o=s.options??o,{editor:s.editor,options:o}}async moveExistingEditorForResource(e,t){const i=e[0];for(const{editor:t,group:o}of e)if(t!==i.editor&&!await o.closeEditor(t))return;if(t.id===i.group.id||i.group.moveEditor(i.editor,t))return i.editor}findExistingEditorsForResource(e,t){const i=[],o=(0,f.dM)([...this.editorGroupService.groups]);for(const n of o)for(const o of n.editors)(0,C.n4)(o.resource,e)&&o.editorId===t&&i.push({editor:o,group:n});return i}async doHandleConflictingDefaults(e,t,i,o,n){const s=this.findMatchingEditors(e),r=JSON.parse(this.storageService.get(B.conflictingDefaultsStorageID,0,"{}")),a=`*${(0,C.LC)(e)}`,c=()=>{r[a]=[],s.forEach((e=>r[a].push(e.editorInfo.id))),this.storageService.store(B.conflictingDefaultsStorageID,JSON.stringify(r),0,1)};if(r[a]&&r[a].find((e=>e===o.editorId)))return;const d=this.notificationService.prompt(X.A.Warning,(0,I.kg)(3906,"There are multiple default editors available for the resource."),[{label:(0,I.kg)(3907,"Configure Default"),run:async()=>{const e=await this.doPickEditor(i,!0);if(!e)return;i.options=e;const t=await this.resolveEditor(i,n);1!==t&&2!==t&&n.replaceEditors([{editor:o,replacement:t.editor,options:t.options??e}])}},{label:(0,I.kg)(3908,"Keep {0}",t),run:c}]).onDidClose((()=>{c(),d.dispose()}))}mapEditorsToQuickPickEntry(e,t){const i=this.editorGroupService.activeGroup.findEditors(e).at(0);let o=e.scheme===$.ny.untitled?this._registeredEditors.filter((e=>e.editorInfo.priority!==K.C8.exclusive)):this.findMatchingEditors(e);o=(0,f.dM)(o,(e=>e.editorInfo.id));const n=this.getAssociationsForResource(e)[0]?.viewType;o=o.sort(((e,t)=>e.editorInfo.id===Q.Ie.id?-1:t.editorInfo.id===Q.Ie.id?1:(0,K.Y)(t.editorInfo.priority)-(0,K.Y)(e.editorInfo.priority)));const s=[],r=(0,I.kg)(3909,"Active"),a=(0,I.kg)(3910,"Default"),c=(0,I.kg)(3911,"Active and Default");let d=n;if(!d&&o.length>2&&o[1]?.editorInfo.priority!==K.C8.option&&(d=o[1]?.editorInfo.id),d||(d=Q.Ie.id),o.forEach((e=>{const t=i?.editorId??Q.Ie.id,o=!!i&&e.editorInfo.id===t,n=e.editorInfo.id===d,h={id:e.editorInfo.id,label:e.editorInfo.label,description:o&&n?c:o?r:n?a:void 0,detail:e.editorInfo.detail??e.editorInfo.priority};s.push(h)})),!t&&""!==(0,C.LC)(e)){const t={type:"separator"};s.push(t);const i={id:B.configureDefaultID,label:(0,I.kg)(3912,"Configure default editor for '{0}'...",`*${(0,C.LC)(e)}`)};s.push(i)}return s}async doPickEditor(e,t){let i=Q.tf.getOriginalUri(e,{supportSideBySide:Q.zX.PRIMARY});void 0===i&&(i=v.rz.from({scheme:$.ny.untitled}));const o=this.mapEditorsToQuickPickEntry(i,t),n=new p.Cm,s=n.add(this.quickInputService.createQuickPick({useSeparators:!0})),r=t?(0,I.kg)(3913,"Select new default editor for '{0}'",`*${(0,C.LC)(i)}`):(0,I.kg)(3914,"Select editor for '{0}'",(0,C.P8)(i));s.placeholder=r,s.canAcceptInBackground=!0,s.items=o;const a=s.items.find((e=>"item"===e.type));a&&(s.selectedItems=[a]);const c=await new Promise((e=>{n.add(s.onDidAccept((o=>{let n;1===s.selectedItems.length&&(n={item:s.selectedItems[0],keyMods:s.keyMods,openInBackground:o.inBackground}),i&&t&&n?.item.id&&this.updateUserAssociations(`*${(0,C.LC)(i)}`,n.item.id),e(n)}))),n.add(s.onDidHide((()=>{n.dispose(),e(void 0)}))),n.add(s.onDidTriggerItemButton((t=>{e({item:t.item,openInBackground:!1}),i&&t.item&&t.item.id&&this.updateUserAssociations(`*${(0,C.LC)(i)}`,t.item.id)}))),s.show()}));if(s.dispose(),c)return c.item.id===B.configureDefaultID?this.doPickEditor(e,!0):{...e.options,override:c.item.id,preserveFocus:c.openInBackground||e.options?.preserveFocus}}sendEditorResolutionTelemetry(e){e.editorId&&this.telemetryService.publicLog2("override.viewType",{viewType:e.editorId})}cacheEditors(){const e=new Set;for(const[t,i]of this._flattenedEditors)i.find((e=>e.editorInfo.priority!==K.C8.option&&e.editorInfo.id!==Q.Ie.id))&&((0,W.v9)(t)?e.add(`${t.pattern}`):e.add(t));const t=this.getAllUserAssociations();for(const i of t)i.filenamePattern&&e.add(i.filenamePattern);this.storageService.store(B.cacheStorageID,JSON.stringify(Array.from(e)),0,1)}resourceMatchesCache(e){if(!this.cache)return!1;for(const t of this.cache)if((0,K.gP)(t,e))return!0;return!1}};ee=B=(0,s.C)([(0,s.Q)(0,U.m),(0,s.Q)(1,a._Y),(0,s.Q)(2,z.p),(0,s.Q)(3,j.G),(0,s.Q)(4,Y.O),(0,s.Q)(5,b.k),(0,s.Q)(6,h.C),(0,s.Q)(7,l.c),(0,s.Q)(8,k.r)],ee);var te,ie=i(85347),oe=i(75560),ne=i(87276),se=i(53354),re=i(30846),ae=i(88609),ce=i(97008),de=i(95560),he=i(56944);let le=class extends p.jG{static{te=this}static{this.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX=/Untitled-\d+/}constructor(e,t){super(),this.instantiationService=e,this.configurationService=t,this._onDidChangeDirty=this._register(new m.vl),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidChangeEncoding=this._register(new m.vl),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this._onDidCreate=this._register(new m.vl),this.onDidCreate=this._onDidCreate.event,this._onWillDispose=this._register(new m.vl),this.onWillDispose=this._onWillDispose.event,this._onDidChangeLabel=this._register(new m.vl),this.onDidChangeLabel=this._onDidChangeLabel.event,this.mapResourceToModel=new D.fT}get(e){return this.mapResourceToModel.get(e)}getValue(e){return this.get(e)?.textEditorModel?.getValue()}async resolve(e){const t=this.doCreateOrGet(e);return await t.resolve(),t}create(e){return this.doCreateOrGet(e)}doCreateOrGet(e=Object.create(null)){const t=this.massageOptions(e);return t.untitledResource&&this.mapResourceToModel.has(t.untitledResource)?this.mapResourceToModel.get(t.untitledResource):this.doCreate(t)}massageOptions(e){const t=Object.create(null);if(e.associatedResource?(t.untitledResource=v.rz.from({scheme:$.ny.untitled,authority:e.associatedResource.authority,fragment:e.associatedResource.fragment,path:e.associatedResource.path,query:e.associatedResource.query}),t.associatedResource=e.associatedResource):e.untitledResource?.scheme===$.ny.untitled&&(t.untitledResource=e.untitledResource),e.languageId)t.languageId=e.languageId;else if(!t.associatedResource){const e=this.configurationService.getValue();e.files?.defaultLanguage&&(t.languageId=e.files.defaultLanguage)}return t.encoding=e.encoding,t.initialValue=e.initialValue,t}doCreate(e){let t=e.untitledResource;if(!t){let e=1;do{t=v.rz.from({scheme:$.ny.untitled,path:`Untitled-${e}`}),e++}while(this.mapResourceToModel.has(t))}const i=this._register(this.instantiationService.createInstance(he.x,t,!!e.associatedResource,e.initialValue,e.languageId,e.encoding));return this.registerModel(i),i}registerModel(e){const t=new p.Cm;t.add(e.onDidChangeDirty((()=>this._onDidChangeDirty.fire(e)))),t.add(e.onDidChangeName((()=>this._onDidChangeLabel.fire(e)))),t.add(e.onDidChangeEncoding((()=>this._onDidChangeEncoding.fire(e)))),t.add(e.onWillDispose((()=>this._onWillDispose.fire(e)))),m.Jh.once(e.onWillDispose)((()=>{this.mapResourceToModel.delete(e.resource),t.dispose()})),this.mapResourceToModel.set(e.resource,e),this._onDidCreate.fire(e),e.isDirty()&&this._onDidChangeDirty.fire(e)}isUntitledWithAssociatedResource(e){return e.scheme===$.ny.untitled&&e.path.length>1&&!te.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX.test(e.path)}canDispose(e){return!!e.isDisposed()||this.doCanDispose(e)}async doCanDispose(e){return!e.isDirty()||(await m.Jh.toPromise(e.onDidChangeDirty),this.canDispose(e))}};le=te=(0,s.C)([(0,s.Q)(0,a._Y),(0,s.Q)(1,z.p)],le);var ue,pe,ge=i(49567),me=i(67244),be=i(12417),we=i(94384),ve=i(96485),fe=i(77829),ye=i(71319),Ce=i(39924),Se=i(10635),ke=i(68836),_e=i(72841),xe=i(53658),Ee=i(7728),De=i(65693),Ie=i(47575),Ve=i(71512),Me=i(31858),Te=i(19730);let Ae=class extends p.jG{static{ue=this}static{this.MOUSE_NAVIGATION_SETTING="workbench.editor.mouseBackForwardToNavigate"}static{this.NAVIGATION_SCOPE_SETTING="workbench.editor.navigationScope"}constructor(e,t,i,o,n,s,r,a,d,h,l){super(),this.editorService=e,this.editorGroupService=t,this.contextService=i,this.storageService=o,this.configurationService=n,this.fileService=s,this.workspacesService=r,this.instantiationService=a,this.layoutService=d,this.contextKeyService=h,this.logService=l,this.activeEditorListeners=this._register(new p.Cm),this.lastActiveEditor=void 0,this.editorHelper=this.instantiationService.createInstance(Oe),this.canNavigateBackContextKey=new c.N1("canNavigateBack",!1,(0,I.kg)(3956,"Whether it is possible to navigate back in editor history")).bindTo(this.contextKeyService),this.canNavigateForwardContextKey=new c.N1("canNavigateForward",!1,(0,I.kg)(3957,"Whether it is possible to navigate forward in editor history")).bindTo(this.contextKeyService),this.canNavigateBackInNavigationsContextKey=new c.N1("canNavigateBackInNavigationLocations",!1,(0,I.kg)(3958,"Whether it is possible to navigate back in editor navigation locations history")).bindTo(this.contextKeyService),this.canNavigateForwardInNavigationsContextKey=new c.N1("canNavigateForwardInNavigationLocations",!1,(0,I.kg)(3959,"Whether it is possible to navigate forward in editor navigation locations history")).bindTo(this.contextKeyService),this.canNavigateToLastNavigationLocationContextKey=new c.N1("canNavigateToLastNavigationLocation",!1,(0,I.kg)(3960,"Whether it is possible to navigate to the last editor navigation location")).bindTo(this.contextKeyService),this.canNavigateBackInEditsContextKey=new c.N1("canNavigateBackInEditLocations",!1,(0,I.kg)(3961,"Whether it is possible to navigate back in editor edit locations history")).bindTo(this.contextKeyService),this.canNavigateForwardInEditsContextKey=new c.N1("canNavigateForwardInEditLocations",!1,(0,I.kg)(3962,"Whether it is possible to navigate forward in editor edit locations history")).bindTo(this.contextKeyService),this.canNavigateToLastEditLocationContextKey=new c.N1("canNavigateToLastEditLocation",!1,(0,I.kg)(3963,"Whether it is possible to navigate to the last editor edit location")).bindTo(this.contextKeyService),this.canReopenClosedEditorContextKey=new c.N1("canReopenClosedEditor",!1,(0,I.kg)(3964,"Whether it is possible to reopen the last closed editor")).bindTo(this.contextKeyService),this._onDidChangeEditorNavigationStack=this._register(new m.vl),this.onDidChangeEditorNavigationStack=this._onDidChangeEditorNavigationStack.event,this.defaultScopedEditorNavigationStack=void 0,this.editorGroupScopedNavigationStacks=new Map,this.editorScopedNavigationStacks=new Map,this.editorNavigationScope=0,this.recentlyUsedEditorsStack=void 0,this.recentlyUsedEditorsStackIndex=0,this.recentlyUsedEditorsInGroupStack=void 0,this.recentlyUsedEditorsInGroupStackIndex=0,this.navigatingInRecentlyUsedEditorsStack=!1,this.navigatingInRecentlyUsedEditorsInGroupStack=!1,this.recentlyClosedEditors=[],this.ignoreEditorCloseEvent=!1,this.history=void 0,this.editorHistoryListeners=new Map,this.resourceExcludeMatcher=this._register(new ke.Ij(Te.Gs,(()=>{const e=this._register(this.instantiationService.createInstance(Ee.x,(e=>(0,ye.mc)(e?this.configurationService.getValue({resource:e}):this.configurationService.getValue())||Object.create(null)),(e=>e.affectsConfiguration(we.Sy)||e.affectsConfiguration(ye.pB))));return this._register(e.onExpressionChange((()=>this.removeExcludedFromHistory()))),e}))),this.registerListeners(),this.editorService.activeEditorPane&&this.onDidActiveEditorChange()}registerListeners(){this.registerMouseNavigationListener(),this._register(this.editorService.onDidActiveEditorChange((()=>this.onDidActiveEditorChange()))),this._register(this.editorService.onDidOpenEditorFail((e=>this.remove(e.editor)))),this._register(this.editorService.onDidCloseEditor((e=>this.onDidCloseEditor(e)))),this._register(this.editorService.onDidMostRecentlyActiveEditorsChange((()=>this.handleEditorEventInRecentEditorsStack()))),this._register(this.editorGroupService.onDidRemoveGroup((e=>this.onDidRemoveGroup(e)))),this._register(this.fileService.onDidFilesChange((e=>this.onDidFilesChange(e)))),this._register(this.fileService.onDidRunOperation((e=>this.onDidFilesChange(e)))),this._register(this.storageService.onWillSaveState((()=>this.saveState()))),this.registerEditorNavigationScopeChangeListener(),this._register(this.onDidChangeEditorNavigationStack((()=>this.updateContextKeys()))),this._register(this.editorGroupService.onDidChangeActiveGroup((()=>this.updateContextKeys())))}onDidCloseEditor(e){this.handleEditorCloseEventInHistory(e),this.handleEditorCloseEventInReopen(e)}registerMouseNavigationListener(){const e=this._register(new p.Cm),t=()=>{e.clear(),this.configurationService.getValue(ue.MOUSE_NAVIGATION_SETTING)&&this._register(m.Jh.runAndSubscribe(this.layoutService.onDidAddContainer,(({container:t,disposables:i})=>{const o=i.add(new p.Cm);o.add((0,ke.ko)(t,ke.Bx.MOUSE_DOWN,(e=>this.onMouseDownOrUp(e,!0)))),o.add((0,ke.ko)(t,ke.Bx.MOUSE_UP,(e=>this.onMouseDownOrUp(e,!1)))),e.add(o)}),{container:this.layoutService.mainContainer,disposables:this._store}))};this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(ue.MOUSE_NAVIGATION_SETTING)&&t()}))),t()}onMouseDownOrUp(e,t){switch(e.button){case 3:ke.fs.stop(e),t&&this.goBack();break;case 4:ke.fs.stop(e),t&&this.goForward()}}onDidRemoveGroup(e){this.handleEditorGroupRemoveInNavigationStacks(e)}onDidActiveEditorChange(){const e=this.editorGroupService.activeGroup,t=e.activeEditorPane;if(!this.lastActiveEditor||!this.editorHelper.matchesEditorIdentifier(this.lastActiveEditor,t)){if(this.lastActiveEditor=t?.input?{editor:t.input,groupId:t.group.id}:void 0,this.activeEditorListeners.clear(),t?.group.isTransient(t.input)){this.logService.trace(`[History]: ignoring transient editor change until becoming non-transient (editor: ${t.input?.resource?.toString()}})`);const i=e.onDidModelChange((o=>{12!==o.kind||o.editor!==t.input||t.group.isTransient(t.input)||(i.dispose(),this.handleActiveEditorChange(e,t))}));this.activeEditorListeners.add(i)}else this.handleActiveEditorChange(e,t);(0,Q.FC)(t)&&this.activeEditorListeners.add(t.onDidChangeSelection((i=>{t.group.isTransient(t.input)?this.logService.trace(`[History]: ignoring transient editor selection change (editor: ${t.input?.resource?.toString()}})`):this.handleActiveEditorSelectionChangeEvent(e,t,i)}))),this.updateContextKeys()}}onDidFilesChange(e){e instanceof we.Qt?e.gotDeleted()&&this.remove(e):e.isOperation(1)?this.remove(e):e.isOperation(2)&&e.target.isFile&&this.move(e)}handleActiveEditorChange(e,t){this.handleActiveEditorChangeInHistory(t),this.handleActiveEditorChangeInNavigationStacks(e,t)}handleActiveEditorSelectionChangeEvent(e,t,i){this.handleActiveEditorSelectionChangeInNavigationStacks(e,t,i)}move(e){this.moveInHistory(e),this.moveInEditorNavigationStacks(e)}remove(e){this.removeFromHistory(e),this.removeFromEditorNavigationStacks(e),this.removeFromRecentlyClosedEditors(e),this.removeFromRecentlyOpened(e)}removeFromRecentlyOpened(e){let t;(0,Q.ct)(e)?t=Q.tf.getOriginalUri(e):e instanceof we.Qt||(t=e.resource),t&&this.workspacesService.removeRecentlyOpened([t])}clear(){this.clearRecentlyOpened(),this.clearEditorNavigationStacks(),this.recentlyClosedEditors=[],this.updateContextKeys()}updateContextKeys(){this.contextKeyService.bufferChangeEvents((()=>{const e=this.getStack();this.canNavigateBackContextKey.set(e.canGoBack(0)),this.canNavigateForwardContextKey.set(e.canGoForward(0)),this.canNavigateBackInNavigationsContextKey.set(e.canGoBack(2)),this.canNavigateForwardInNavigationsContextKey.set(e.canGoForward(2)),this.canNavigateToLastNavigationLocationContextKey.set(e.canGoLast(2)),this.canNavigateBackInEditsContextKey.set(e.canGoBack(1)),this.canNavigateForwardInEditsContextKey.set(e.canGoForward(1)),this.canNavigateToLastEditLocationContextKey.set(e.canGoLast(1)),this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length>0)}))}registerEditorNavigationScopeChangeListener(){const e=()=>{this.disposeEditorNavigationStacks();const e=this.configurationService.getValue(ue.NAVIGATION_SCOPE_SETTING);this.editorNavigationScope="editorGroup"===e?1:"editor"===e?2:0};this._register(this.configurationService.onDidChangeConfiguration((t=>{t.affectsConfiguration(ue.NAVIGATION_SCOPE_SETTING)&&e()}))),e()}getStack(e=this.editorGroupService.activeGroup,t=e.activeEditor){switch(this.editorNavigationScope){case 2:{if(!t)return new Re;let i=this.editorScopedNavigationStacks.get(e.id);i||(i=new Map,this.editorScopedNavigationStacks.set(e.id,i));let o=i.get(t)?.stack;if(!o){const e=new p.Cm;o=e.add(this.instantiationService.createInstance(Pe,2)),e.add(o.onDidChange((()=>this._onDidChangeEditorNavigationStack.fire()))),i.set(t,{stack:o,disposable:e})}return o}case 1:{let t=this.editorGroupScopedNavigationStacks.get(e.id)?.stack;if(!t){const i=new p.Cm;t=i.add(this.instantiationService.createInstance(Pe,1)),i.add(t.onDidChange((()=>this._onDidChangeEditorNavigationStack.fire()))),this.editorGroupScopedNavigationStacks.set(e.id,{stack:t,disposable:i})}return t}case 0:return this.defaultScopedEditorNavigationStack||(this.defaultScopedEditorNavigationStack=this._register(this.instantiationService.createInstance(Pe,0)),this._register(this.defaultScopedEditorNavigationStack.onDidChange((()=>this._onDidChangeEditorNavigationStack.fire())))),this.defaultScopedEditorNavigationStack}}goForward(e){return this.getStack().goForward(e)}goBack(e){return this.getStack().goBack(e)}goPrevious(e){return this.getStack().goPrevious(e)}goLast(e){return this.getStack().goLast(e)}handleActiveEditorChangeInNavigationStacks(e,t){this.getStack(e,t?.input).handleActiveEditorChange(t)}handleActiveEditorSelectionChangeInNavigationStacks(e,t,i){this.getStack(e,t.input).handleActiveEditorSelectionChange(t,i)}handleEditorCloseEventInHistory(e){const t=this.editorScopedNavigationStacks.get(e.groupId);if(t){const i=t.get(e.editor);i&&(i.disposable.dispose(),t.delete(e.editor)),0===t.size&&this.editorScopedNavigationStacks.delete(e.groupId)}}handleEditorGroupRemoveInNavigationStacks(e){this.defaultScopedEditorNavigationStack?.remove(e.id);const t=this.editorGroupScopedNavigationStacks.get(e.id);t&&(t.disposable.dispose(),this.editorGroupScopedNavigationStacks.delete(e.id))}clearEditorNavigationStacks(){this.withEachEditorNavigationStack((e=>e.clear()))}removeFromEditorNavigationStacks(e){this.withEachEditorNavigationStack((t=>t.remove(e)))}moveInEditorNavigationStacks(e){this.withEachEditorNavigationStack((t=>t.move(e)))}withEachEditorNavigationStack(e){this.defaultScopedEditorNavigationStack&&e(this.defaultScopedEditorNavigationStack);for(const[,t]of this.editorGroupScopedNavigationStacks)e(t.stack);for(const[,t]of this.editorScopedNavigationStacks)for(const[,i]of t)e(i.stack)}disposeEditorNavigationStacks(){this.defaultScopedEditorNavigationStack?.dispose(),this.defaultScopedEditorNavigationStack=void 0;for(const[,e]of this.editorGroupScopedNavigationStacks)e.disposable.dispose();this.editorGroupScopedNavigationStacks.clear();for(const[,e]of this.editorScopedNavigationStacks)for(const[,t]of e)t.disposable.dispose();this.editorScopedNavigationStacks.clear()}openNextRecentlyUsedEditor(e){const[t,i]=this.ensureRecentlyUsedStack((e=>e-1),e);return this.doNavigateInRecentlyUsedEditorsStack(t[i],e)}openPreviouslyUsedEditor(e){const[t,i]=this.ensureRecentlyUsedStack((e=>e+1),e);return this.doNavigateInRecentlyUsedEditorsStack(t[i],e)}async doNavigateInRecentlyUsedEditorsStack(e,t){if(e){const i="number"!=typeof t||!this.editorGroupService.getGroup(t);i?this.navigatingInRecentlyUsedEditorsStack=!0:this.navigatingInRecentlyUsedEditorsInGroupStack=!0;const o=this.editorGroupService.getGroup(e.groupId)??this.editorGroupService.activeGroup;try{await o.openEditor(e.editor)}finally{i?this.navigatingInRecentlyUsedEditorsStack=!1:this.navigatingInRecentlyUsedEditorsInGroupStack=!1}}}ensureRecentlyUsedStack(e,t){let i,o;const n="number"==typeof t?this.editorGroupService.getGroup(t):void 0;n?(i=this.recentlyUsedEditorsInGroupStack||n.getEditors(0).map((e=>({groupId:n.id,editor:e}))),o=this.recentlyUsedEditorsInGroupStackIndex):(i=this.recentlyUsedEditorsStack||this.editorService.getEditors(0),o=this.recentlyUsedEditorsStackIndex);let s=e(o);return s<0?s=0:s>i.length-1&&(s=i.length-1),n?(this.recentlyUsedEditorsInGroupStack=i,this.recentlyUsedEditorsInGroupStackIndex=s):(this.recentlyUsedEditorsStack=i,this.recentlyUsedEditorsStackIndex=s),[i,s]}handleEditorEventInRecentEditorsStack(){this.navigatingInRecentlyUsedEditorsStack||(this.recentlyUsedEditorsStack=void 0,this.recentlyUsedEditorsStackIndex=0),this.navigatingInRecentlyUsedEditorsInGroupStack||(this.recentlyUsedEditorsInGroupStack=void 0,this.recentlyUsedEditorsInGroupStackIndex=0)}static{this.MAX_RECENTLY_CLOSED_EDITORS=20}handleEditorCloseEventInReopen(e){if(this.ignoreEditorCloseEvent)return;const{editor:t,context:i}=e;if(i===Q.TW.REPLACE||i===Q.TW.MOVE)return;const o=t.toUntyped();if(!o)return;const n=[],s=Q.tf.getOriginalUri(t,{supportSideBySide:Q.zX.BOTH});v.rz.isUri(s)?n.push(s):s&&n.push(...(0,f.Yc)([s.primary,s.secondary])),this.removeFromRecentlyClosedEditors(t),this.recentlyClosedEditors.push({editorId:t.editorId,editor:o,resource:Q.tf.getOriginalUri(t),associatedResources:n,index:e.index,sticky:e.sticky}),this.recentlyClosedEditors.length>ue.MAX_RECENTLY_CLOSED_EDITORS&&this.recentlyClosedEditors.shift(),this.canReopenClosedEditorContextKey.set(!0)}async reopenLastClosedEditor(){const e=this.recentlyClosedEditors.pop();let t;return e&&(t=this.doReopenLastClosedEditor(e)),this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length>0),t}async doReopenLastClosedEditor(e){const t={pinned:!0,sticky:e.sticky,index:e.index,ignoreError:!0};let i;if((e.sticky&&!this.editorGroupService.activeGroup.isSticky(e.index)||!e.sticky&&this.editorGroupService.activeGroup.isSticky(e.index))&&(t.index=void 0),!this.editorGroupService.activeGroup.contains(e.editor)){this.ignoreEditorCloseEvent=!0;try{i=await this.editorService.openEditor({...e.editor,options:{...e.editor.options,...t}})}finally{this.ignoreEditorCloseEvent=!1}}i||((0,f.TF)(this.recentlyClosedEditors,e),this.reopenLastClosedEditor())}removeFromRecentlyClosedEditors(e){this.recentlyClosedEditors=this.recentlyClosedEditors.filter((t=>!((!(0,Q.ct)(e)||t.editorId===e.editorId)&&(t.resource&&this.editorHelper.matchesFile(t.resource,e)||t.associatedResources.some((t=>this.editorHelper.matchesFile(t,e))))))),this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length>0)}static{this.MAX_HISTORY_ITEMS=200}static{this.HISTORY_STORAGE_KEY="history.entries"}handleActiveEditorChangeInHistory(e){const t=e?.input;t&&!t.isDisposed()&&this.includeInHistory(t)&&(this.removeFromHistory(t),this.addToHistory(t))}addToHistory(e,t=!0){this.ensureHistoryLoaded(this.history);const i=this.editorHelper.preferResourceEditorInput(e);i&&(t?this.history.unshift(i):this.history.push(i),this.history.length>ue.MAX_HISTORY_ITEMS&&this.editorHelper.clearOnEditorDispose(this.history.pop(),this.editorHistoryListeners),(0,Q.ct)(e)&&this.editorHelper.onEditorDispose(e,(()=>this.updateHistoryOnEditorDispose(i)),this.editorHistoryListeners))}updateHistoryOnEditorDispose(e){if((0,Q.ct)(e))if((0,Q.Zv)(e)){const t=[],i=e.primary.matches(e.secondary)?[e.primary]:[e.primary,e.secondary];for(const e of i){const i=this.editorHelper.preferResourceEditorInput(e);(0,Q.iY)(i)&&this.includeInHistory(i)&&t.push(i)}this.replaceInHistory(e,...t)}else this.removeFromHistory(e);else this.includeInHistory(e)||this.removeFromHistory(e)}includeInHistory(e){return!!(0,Q.ct)(e)||!this.resourceExcludeMatcher.value.matches(e.resource)}removeExcludedFromHistory(){this.ensureHistoryLoaded(this.history),this.history=this.history.filter((e=>{const t=this.includeInHistory(e);return t||this.editorHelper.clearOnEditorDispose(e,this.editorHistoryListeners),t}))}moveInHistory(e){e.isOperation(2)&&this.removeFromHistory(e)&&this.addToHistory({resource:e.target.resource})}removeFromHistory(e){let t=!1;return this.ensureHistoryLoaded(this.history),this.history=this.history.filter((i=>{const o=this.editorHelper.matchesEditor(e,i);return o&&(this.editorHelper.clearOnEditorDispose(e,this.editorHistoryListeners),t=!0),!o})),t}replaceInHistory(e,...t){this.ensureHistoryLoaded(this.history);let i=!1;const o=[];for(const n of this.history)this.editorHelper.matchesEditor(e,n)?(this.editorHelper.clearOnEditorDispose(e,this.editorHistoryListeners),i||(o.push(...t),i=!0)):t.some((e=>this.editorHelper.matchesEditor(e,n)))||o.push(n);i||o.push(...t),this.history=o}clearRecentlyOpened(){this.history=[];for(const[,e]of this.editorHistoryListeners)(0,p.AS)(e);this.editorHistoryListeners.clear()}getHistory(){return this.ensureHistoryLoaded(this.history),this.history}ensureHistoryLoaded(e){this.history||(this.history=[],this.editorGroupService.isReady?this.loadHistory():(async()=>{await this.editorGroupService.whenReady,this.loadHistory()})())}loadHistory(){this.history=[];const e=this.loadHistoryFromStorage(),t=[...this.editorService.getEditors(0)].reverse(),i=new Set;for(const{editor:e}of t)this.includeInHistory(e)&&(this.addToHistory(e),e.resource&&i.add(`${e.resource.toString()}/${e.editorId}`));for(const t of e)!i.has(`${t.resource.toString()}/${t.options?.override}`)&&this.includeInHistory(t)&&this.addToHistory(t,!1)}loadHistoryFromStorage(){const e=[],t=this.storageService.get(ue.HISTORY_STORAGE_KEY,1);if(t)try{const i=JSON.parse(t);for(const t of i)if(t.editor&&t.editor.resource)try{e.push({...t.editor,resource:"string"==typeof t.editor.resource?v.rz.parse(t.editor.resource):v.rz.from(t.editor.resource)})}catch(e){(0,xe.dz)(e)}}catch(e){(0,xe.dz)(e)}return e}saveState(){if(!this.history)return;const e=[];for(const t of this.history)!(0,Q.ct)(t)&&(0,Q.iY)(t)&&e.push({editor:{...t,resource:t.resource.toString()}});this.storageService.store(ue.HISTORY_STORAGE_KEY,JSON.stringify(e),1,1)}getLastActiveWorkspaceRoot(e,t){const i=this.contextService.getWorkspace().folders;if(0!==i.length){if(1===i.length){const o=i[0].uri;return e&&o.scheme!==e||t&&o.authority!==t?void 0:o}for(const i of this.getHistory()){if((0,Q.ct)(i))continue;if(e&&i.resource.scheme!==e)continue;if(t&&i.resource.authority!==t)continue;const o=this.contextService.getWorkspaceFolder(i.resource);if(o)return o.uri}for(const o of i){const i=o.uri;if(!(e&&i.scheme!==e||t&&i.authority!==t))return i}}}getLastActiveFile(e,t){for(const i of this.getHistory()){let o;if(o=(0,Q.ct)(i)?Q.tf.getOriginalUri(i,{filterByScheme:e}):i.resource,o&&o.scheme===e&&(!t||o.authority===t))return o}}dispose(){super.dispose();for(const[,e]of this.editorGroupScopedNavigationStacks)e.disposable.dispose();for(const[,e]of this.editorScopedNavigationStacks)for(const[,t]of e)t.disposable.dispose();for(const[,e]of this.editorHistoryListeners)e.dispose()}};Ae=ue=(0,s.C)([(0,s.Q)(0,be.I),(0,s.Q)(1,U.m),(0,s.Q)(2,fe.V),(0,s.Q)(3,h.C),(0,s.Q)(4,z.p),(0,s.Q)(5,ve.$),(0,s.Q)(6,_e.J),(0,s.Q)(7,a._Y),(0,s.Q)(8,Ce.Y),(0,s.Q)(9,d.f),(0,s.Q)(10,k.r)],Ae),(0,Se.v)(me.z,Ae,0);class Le{constructor(e,t,i){this.editorIdentifier=e,this.selection=t,this.reason=i}justifiesNewNavigationEntry(e){if(this.editorIdentifier.groupId!==e.editorIdentifier.groupId)return!0;if(!this.editorIdentifier.editor.matches(e.editorIdentifier.editor))return!0;if(!this.selection||!e.selection)return!0;const t=this.selection.compare(e.selection);return 2===t&&(4===e.reason||5===e.reason)||3===t}}let Pe=class extends p.jG{constructor(e,t){super(),this.scope=e,this.instantiationService=t,this.selectionsStack=this._register(this.instantiationService.createInstance(Be,0,this.scope)),this.editsStack=this._register(this.instantiationService.createInstance(Be,1,this.scope)),this.navigationsStack=this._register(this.instantiationService.createInstance(Be,2,this.scope)),this.stacks=[this.selectionsStack,this.editsStack,this.navigationsStack],this.onDidChange=m.Jh.any(this.selectionsStack.onDidChange,this.editsStack.onDidChange,this.navigationsStack.onDidChange)}canGoForward(e){return this.getStack(e).canGoForward()}goForward(e){return this.getStack(e).goForward()}canGoBack(e){return this.getStack(e).canGoBack()}goBack(e){return this.getStack(e).goBack()}goPrevious(e){return this.getStack(e).goPrevious()}canGoLast(e){return this.getStack(e).canGoLast()}goLast(e){return this.getStack(e).goLast()}getStack(e=0){switch(e){case 0:return this.selectionsStack;case 1:return this.editsStack;case 2:return this.navigationsStack}}handleActiveEditorChange(e){this.selectionsStack.notifyNavigation(e)}handleActiveEditorSelectionChange(e,t){const i=this.selectionsStack.current;this.selectionsStack.notifyNavigation(e,t),3===t.reason?this.editsStack.notifyNavigation(e,t):4!==t.reason&&5!==t.reason||this.selectionsStack.isNavigating()||(5!==t.reason||this.navigationsStack.isNavigating()||i&&this.navigationsStack.addOrReplace(i.groupId,i.editor,i.selection),this.navigationsStack.notifyNavigation(e,t))}clear(){for(const e of this.stacks)e.clear()}remove(e){for(const t of this.stacks)t.remove(e)}move(e){for(const t of this.stacks)t.move(e)}};Pe=(0,s.C)([(0,s.Q)(1,a._Y)],Pe);class Re{constructor(){this.onDidChange=m.Jh.None}canGoForward(){return!1}async goForward(){}canGoBack(){return!1}async goBack(){}async goPrevious(){}canGoLast(){return!1}async goLast(){}handleActiveEditorChange(){}handleActiveEditorSelectionChange(){}clear(){}remove(){}move(){}dispose(){}}let Be=class extends p.jG{static{pe=this}static{this.MAX_STACK_SIZE=50}get current(){return this.stack[this.index]}set current(e){e&&(this.stack[this.index]=e)}constructor(e,t,i,o,n,s){super(),this.filter=e,this.scope=t,this.instantiationService=i,this.editorService=o,this.editorGroupService=n,this.logService=s,this._onDidChange=this._register(new m.vl),this.onDidChange=this._onDidChange.event,this.mapEditorToDisposable=new Map,this.mapGroupToDisposable=new Map,this.editorHelper=this.instantiationService.createInstance(Oe),this.stack=[],this.index=-1,this.previousIndex=-1,this.navigating=!1,this.currentSelectionState=void 0,this.registerListeners()}registerListeners(){this._register(this.onDidChange((()=>this.traceStack()))),this._register(this.logService.onDidChangeLogLevel((()=>this.traceStack())))}traceStack(){if(this.logService.getLevel()!==Me.$b.Trace)return;const e=[];for(const t of this.stack)"function"==typeof t.selection?.log?e.push(`- group: ${t.groupId}, editor: ${t.editor.resource?.toString()}, selection: ${t.selection.log()}`):e.push(`- group: ${t.groupId}, editor: ${t.editor.resource?.toString()}, selection: <none>`);0===e.length?this.trace(`index: ${this.index}, navigating: ${this.isNavigating()}: <empty>`):this.trace(`index: ${this.index}, navigating: ${this.isNavigating()}\n${e.join("\n")}\n\t\t\t`)}trace(e,t=null,i){if(this.logService.getLevel()!==Me.$b.Trace)return;let o,n;switch(this.filter){case 0:o="global";break;case 1:o="edits";break;case 2:o="navigation"}switch(this.scope){case 0:n="default";break;case 1:n="editorGroup";break;case 2:n="editor"}null!==t?this.logService.trace(`[History stack ${o}-${n}]: ${e} (editor: ${t?.resource?.toString()}, event: ${this.traceEvent(i)})`):this.logService.trace(`[History stack ${o}-${n}]: ${e}`)}traceEvent(e){if(!e)return"<none>";switch(e.reason){case 3:return"edit";case 4:return"navigation";case 5:return"jump";case 1:return"programmatic";case 2:return"user"}}registerGroupListeners(e){if(!this.mapGroupToDisposable.has(e)){const t=this.editorGroupService.getGroup(e);t&&this.mapGroupToDisposable.set(e,t.onWillMoveEditor((e=>this.onWillMoveEditor(e))))}}onWillMoveEditor(e){if(this.trace("onWillMoveEditor()",e.editor),1!==this.scope)for(const t of this.stack)t.groupId===e.groupId&&this.editorHelper.matchesEditor(e.editor,t.editor)&&(t.groupId=e.target)}notifyNavigation(e,t){this.trace("notifyNavigation()",e?.input,t);const i=(0,Q.FC)(e),o=e?.input&&!e.input.isDisposed();this.navigating?(this.trace("notifyNavigation() ignoring (navigating)",e?.input,t),i&&o?(this.trace("notifyNavigation() updating current selection state",e?.input,t),this.currentSelectionState=new Le({groupId:e.group.id,editor:e.input},e.getSelection(),t?.reason)):(this.trace("notifyNavigation() dropping current selection state",e?.input,t),this.currentSelectionState=void 0)):(this.trace("notifyNavigation() not ignoring",e?.input,t),i&&o?this.onSelectionAwareEditorNavigation(e.group.id,e.input,e.getSelection(),t):(this.currentSelectionState=void 0,o&&this.onNonSelectionAwareEditorNavigation(e.group.id,e.input)))}onSelectionAwareEditorNavigation(e,t,i,o){if(this.current?.groupId===e&&!i&&this.editorHelper.matchesEditor(this.current.editor,t))return;this.trace("onSelectionAwareEditorNavigation()",t,o);const n=new Le({groupId:e,editor:t},i,o?.reason);!this.currentSelectionState||this.currentSelectionState.justifiesNewNavigationEntry(n)?this.doAdd(e,t,n.selection):this.doReplace(e,t,n.selection),this.currentSelectionState=n}onNonSelectionAwareEditorNavigation(e,t){this.current?.groupId===e&&this.editorHelper.matchesEditor(this.current.editor,t)||(this.trace("onNonSelectionAwareEditorNavigation()",t),this.doAdd(e,t))}doAdd(e,t,i){this.navigating||this.addOrReplace(e,t,i)}doReplace(e,t,i){this.navigating||this.addOrReplace(e,t,i,!0)}addOrReplace(e,t,i,o){this.registerGroupListeners(e);let n=!1;this.current&&(o||this.shouldReplaceStackEntry(this.current,{groupId:e,editor:t,selection:i}))&&(n=!0);const s=this.editorHelper.preferResourceEditorInput(t);if(!s)return;n?this.trace("replace()",s):this.trace("add()",s);const r={groupId:e,editor:s,selection:i},a=[];if(n)this.current&&a.push(this.current),this.current=r;else{if(this.stack.length>this.index+1){for(let e=this.index+1;e<this.stack.length;e++)a.push(this.stack[e]);this.stack=this.stack.slice(0,this.index+1)}this.stack.splice(this.index+1,0,r),this.stack.length>pe.MAX_STACK_SIZE?(a.push(this.stack.shift()),this.previousIndex>=0&&this.previousIndex--):this.setIndex(this.index+1,!0)}for(const e of a)this.editorHelper.clearOnEditorDispose(e.editor,this.mapEditorToDisposable);(0,Q.ct)(s)&&this.editorHelper.onEditorDispose(s,(()=>this.remove(s)),this.mapEditorToDisposable),this._onDidChange.fire()}shouldReplaceStackEntry(e,t){return e.groupId===t.groupId&&!!this.editorHelper.matchesEditor(e.editor,t.editor)&&(!e.selection||!!t.selection&&1===e.selection.compare(t.selection))}move(e){if(e.isOperation(2))for(const t of this.stack)this.editorHelper.matchesEditor(e,t.editor)&&(t.editor={resource:e.target.resource})}remove(e){const t=this.stack.length;this.stack=this.stack.filter((t=>{const i="number"==typeof e?t.groupId===e:this.editorHelper.matchesEditor(e,t.editor);return i&&this.editorHelper.clearOnEditorDispose(t.editor,this.mapEditorToDisposable),!i})),t!==this.stack.length&&(this.flatten(),this.index=this.stack.length-1,this.previousIndex=-1,"number"==typeof e&&(this.mapGroupToDisposable.get(e)?.dispose(),this.mapGroupToDisposable.delete(e)),this._onDidChange.fire())}flatten(){const e=[];let t;for(const i of this.stack)t&&this.shouldReplaceStackEntry(i,t)||(t=i,e.push(i));this.stack=e}clear(){this.index=-1,this.previousIndex=-1,this.stack.splice(0);for(const[,e]of this.mapEditorToDisposable)(0,p.AS)(e);this.mapEditorToDisposable.clear();for(const[,e]of this.mapGroupToDisposable)(0,p.AS)(e);this.mapGroupToDisposable.clear()}dispose(){super.dispose(),this.clear()}canGoForward(){return this.stack.length>this.index+1}async goForward(){if(!await this.maybeGoCurrent()&&this.canGoForward())return this.setIndex(this.index+1),this.navigate()}canGoBack(){return this.index>0}async goBack(){if(!await this.maybeGoCurrent()&&this.canGoBack())return this.setIndex(this.index-1),this.navigate()}async goPrevious(){if(!await this.maybeGoCurrent())return-1===this.previousIndex?this.goBack():(this.setIndex(this.previousIndex),this.navigate())}canGoLast(){return this.stack.length>0}async goLast(){if(this.canGoLast())return this.setIndex(this.stack.length-1),this.navigate()}async maybeGoCurrent(){return 0!==this.filter&&!this.isCurrentSelectionActive()&&(await this.navigate(),!0)}isCurrentSelectionActive(){if(!this.current?.selection)return!1;const e=this.editorService.activeEditorPane;if(!(0,Q.FC)(e))return!1;if(e.group.id!==this.current.groupId)return!1;if(!e.input||!this.editorHelper.matchesEditor(e.input,this.current.editor))return!1;const t=e.getSelection();return!!t&&1===t.compare(this.current.selection)}setIndex(e,t){this.previousIndex=this.index,this.index=e,t||this._onDidChange.fire()}async navigate(){this.navigating=!0;try{this.current&&await this.doNavigate(this.current)}finally{this.navigating=!1}}doNavigate(e){let t=Object.create(null);return e.selection&&(t=e.selection.restore(t)),(0,Q.ct)(e.editor)?this.editorService.openEditor(e.editor,t,e.groupId):this.editorService.openEditor({...e.editor,options:{...e.editor.options,...t}},e.groupId)}isNavigating(){return this.navigating}};Be=pe=(0,s.C)([(0,s.Q)(2,a._Y),(0,s.Q)(3,be.I),(0,s.Q)(4,U.m),(0,s.Q)(5,k.r)],Be);let Oe=class{constructor(e,t,i,o){this.uriIdentityService=e,this.lifecycleService=t,this.fileService=i,this.pathService=o}preferResourceEditorInput(e){const t=Q.tf.getOriginalUri(e);if(t?.scheme===$.ny.file||t?.scheme===$.ny.vscodeRemote||t?.scheme===$.ny.vscodeUserData||t?.scheme===this.pathService.defaultUriScheme){if((0,Q.ct)(e)){const t=e.toUntyped();if((0,Q.iY)(t))return t}return e}return(0,Q.ct)(e)?e:void 0}matchesEditor(e,t){return e instanceof we.Qt||e instanceof we.Oq?!(0,Q.ct)(t)&&(e instanceof we.Qt?e.contains(t.resource,2):this.matchesFile(t.resource,e)):(0,Q.ct)(e)?(0,Q.ct)(t)?e.matches(t):this.matchesFile(t.resource,e):(0,Q.ct)(t)?this.matchesFile(e.resource,t):e&&t&&this.uriIdentityService.extUri.isEqual(e.resource,t.resource)}matchesFile(e,t){if(t instanceof we.Qt)return t.contains(e,2);if(t instanceof we.Oq)return this.uriIdentityService.extUri.isEqualOrParent(e,t.resource);if((0,Q.ct)(t)){const i=t.resource;return!!i&&!(this.lifecycleService.phase>=3&&!this.fileService.hasProvider(i))&&this.uriIdentityService.extUri.isEqual(i,e)}return this.uriIdentityService.extUri.isEqual(t?.resource,e)}matchesEditorIdentifier(e,t){return!!t?.group&&e.groupId===t.group.id&&!!t.input&&e.editor.matches(t.input)}onEditorDispose(e,t,i){const o=m.Jh.once(e.onWillDispose)((()=>t()));let n=i.get(e);n||(n=new p.Cm,i.set(e,n)),n.add(o)}clearOnEditorDispose(e,t){if(!(0,Q.ct)(e))return;const i=t.get(e);i&&((0,p.AS)(i),t.delete(e))}};Oe=(0,s.C)([(0,s.Q)(0,Ie.J),(0,s.Q)(1,Ve.f),(0,s.Q)(2,ve.$),(0,s.Q)(3,De.S)],Oe);var Ne=i(62821),Fe=i(6162);(0,Fe.A)(".webview.modified{box-shadow:-6px 0 5px -5px var(--vscode-scrollbar-shadow)}",{});var Ge=i(83909),We=i(65965);const ze=new c.N1("activeCustomEditorId","",{type:"string",description:(0,I.kg)(9689,"The viewType of the currently active custom editor.")}),He=new c.N1("focusedCustomEditorIsEditable",!1);class Qe{constructor(e){this.id=e.id,this.displayName=e.displayName,this.providerDisplayName=e.providerDisplayName,this.priority=e.priority,this.selector=e.selector}matches(e){return this.selector.some((t=>t.filenamePattern&&(0,K.gP)(t.filenamePattern,e)))}}class Ue{constructor(e){this.allEditors=(0,f.dM)(e,(e=>e.id))}get length(){return this.allEditors.length}get defaultEditor(){return this.allEditors.find((e=>{switch(e.priority){case K.C8.default:case K.C8.builtin:return this.allEditors.every((t=>t===e||function(e,t){return(0,K.Y)(e.priority)<(0,K.Y)(t.priority)}(t,e)));default:return!1}}))}get bestAvailableEditor(){return Array.from(this.allEditors).sort(((e,t)=>(0,K.Y)(e.priority)-(0,K.Y)(t.priority)))[0]}}var $e=i(20404);class Ke{constructor(){this._references=new Map}async getAllModels(e){const t=`${e.toString()}@@@`,i=[];for(const[e,o]of this._references)e.startsWith(t)&&o.model&&i.push(await o.model);return i}async get(e,t){const i=this.key(e,t),o=this._references.get(i);return o?.model}tryRetain(e,t){const i=this.key(e,t),o=this._references.get(i);if(o)return o.counter++,o.model.then((e=>({object:e,dispose:(0,$e.P)((()=>{--o.counter<=0&&(o.model.then((e=>e.dispose())),this._references.delete(i))}))})))}add(e,t,i){const o=this.key(e,t);if(this._references.get(o))throw new Error("Model already exists");return this._references.set(o,{viewType:t,model:i,counter:0}),this.tryRetain(e,t)}disposeAllModelsForView(e){for(const[t,i]of this._references)i.viewType===e&&(i.model.then((e=>e.dispose())),this._references.delete(t))}key(e,t){return`${e.toString()}@@@${t}`}}var je=i(5882),Ze=i(45361),Ye=i(52808),qe=i(316);const Je=Object.freeze({viewType:"viewType",displayName:"displayName",selector:"selector",priority:"priority"}),Xe={description:(0,I.kg)(11461,"Contributed custom editors."),type:"array",defaultSnippets:[{body:[{[Je.viewType]:"$1",[Je.displayName]:"$2",[Je.selector]:[{filenamePattern:"$3"}]}]}],items:{type:"object",required:[Je.viewType,Je.displayName,Je.selector],properties:{[Je.viewType]:{type:"string",markdownDescription:(0,I.kg)(11462,"Identifier for the custom editor. This must be unique across all custom editors, so we recommend including your extension id as part of `viewType`. The `viewType` is used when registering custom editors with `vscode.registerCustomEditorProvider` and in the `onCustomEditor:${id}` [activation event](https://code.visualstudio.com/api/references/activation-events).")},[Je.displayName]:{type:"string",description:(0,I.kg)(11463,"Human readable name of the custom editor. This is displayed to users when selecting which editor to use.")},[Je.selector]:{type:"array",description:(0,I.kg)(11464,"Set of globs that the custom editor is enabled for."),items:{type:"object",defaultSnippets:[{body:{filenamePattern:"$1"}}],properties:{filenamePattern:{type:"string",description:(0,I.kg)(11465,"Glob that the custom editor is enabled for.")}}}},[Je.priority]:{type:"string",markdownDeprecationMessage:(0,I.kg)(11466,"Controls if the custom editor is enabled automatically when the user opens a file. This may be overridden by users using the `workbench.editorAssociations` setting."),enum:["default","option"],markdownEnumDescriptions:[(0,I.kg)(11467,"The editor is automatically used when the user opens a resource, provided that no other default custom editors are registered for that resource."),(0,I.kg)(11468,"The editor is not automatically used when the user opens a resource, but a user can switch to the editor using the `Reopen With` command.")],default:"default"}}}},et=Ye.g1.registerExtensionPoint({extensionPoint:"customEditors",deps:[qe.b],jsonSchema:Xe,activationEventsGenerator:(e,t)=>{for(const i of e){const e=i[Je.viewType];e&&t.push(`onCustomEditor:${e}`)}}});class tt extends p.jG{constructor(){super(...arguments),this.type="table"}shouldRender(e){return!!e.contributes?.customEditors}render(e){const t=e.contributes?.customEditors||[];return t.length?{data:{headers:[(0,I.kg)(11469,"View Type"),(0,I.kg)(11470,"Priority"),(0,I.kg)(11471,"Filename Pattern")],rows:t.map((e=>[e.viewType,e.priority??"",(0,f.Yc)(e.selector.map((e=>e.filenamePattern))).join(", ")]))},dispose:()=>{}}:{data:{headers:[],rows:[]},dispose:()=>{}}}}u.O.as(Ze.F.ExtensionFeaturesRegistry).registerExtensionFeature({id:"customEditors",label:(0,I.kg)(11472,"Custom Editors"),access:{canToggle:!1},renderer:new o.d(tt)});class it extends p.jG{static{this.CUSTOM_EDITORS_STORAGE_ID="customEditors"}static{this.CUSTOM_EDITORS_ENTRY_ID="editors"}constructor(e){super(),this._editors=new Map,this._onChange=this._register(new m.vl),this.onChange=this._onChange.event,this._memento=new je.y(it.CUSTOM_EDITORS_STORAGE_ID,e);const t=this._memento.getMemento(0,1);for(const e of t[it.CUSTOM_EDITORS_ENTRY_ID]||[])this.add(new Qe(e));et.setHandler((e=>{this.update(e)}))}update(e){this._editors.clear();for(const t of e)for(const e of t.value)this.add(new Qe({id:e.viewType,displayName:e.displayName,providerDisplayName:t.description.isBuiltin?(0,I.kg)(9690,"Built-in"):t.description.displayName||t.description.identifier.value,selector:e.selector||[],priority:ot(e,t.description)}));this._memento.getMemento(0,1)[it.CUSTOM_EDITORS_ENTRY_ID]=Array.from(this._editors.values()),this._memento.saveMemento(),this._onChange.fire()}[Symbol.iterator](){return this._editors.values()}get(e){return this._editors.get(e)}getContributedEditors(e){return Array.from(this._editors.values()).filter((t=>t.matches(e)))}add(e){this._editors.has(e.id)?console.error(`Custom editor with id '${e.id}' already registered`):this._editors.set(e.id,e)}}function ot(e,t){switch(e.priority){case K.C8.default:case K.C8.option:return e.priority;case K.C8.builtin:return t.isBuiltin?K.C8.builtin:K.C8.default;default:return K.C8.default}}var nt=i(58877);let st=class extends p.jG{constructor(e,t,i,o,n,s,r){super(),this.editorService=i,this.editorGroupService=o,this.instantiationService=n,this.uriIdentityService=s,this.editorResolverService=r,this._untitledCounter=0,this._editorResolverDisposables=this._register(new p.Cm),this._editorCapabilities=new Map,this._models=new Ke,this._onDidChangeEditorTypes=this._register(new m.vl),this.onDidChangeEditorTypes=this._onDidChangeEditorTypes.event,this._fileEditorFactory=u.O.as(Q.q5.EditorFactory).getFileEditorFactory(),this._contributedEditors=this._register(new it(t)),this.editorResolverService.bufferChangeEvents(this.registerContributionPoints.bind(this)),this._register(this._contributedEditors.onChange((()=>{this.editorResolverService.bufferChangeEvents(this.registerContributionPoints.bind(this)),this._onDidChangeEditorTypes.fire()})));const a={contextKey:ze,getGroupContextKeyValue:e=>this.getActiveCustomEditorId(e),onDidChange:this.onDidChangeEditorTypes},c={contextKey:He,getGroupContextKeyValue:e=>this.getCustomEditorIsEditable(e),onDidChange:this.onDidChangeEditorTypes};this._register(this.editorGroupService.registerContextKeyProvider(a)),this._register(this.editorGroupService.registerContextKeyProvider(c)),this._register(e.onDidRunOperation((e=>{e.isOperation(2)&&this.handleMovedFileInOpenedFileEditors(e.resource,this.uriIdentityService.asCanonicalUri(e.target.resource))}))),this._register(Ge.aU.addImplementation(105,"custom-editor",(()=>this.withActiveCustomEditor((e=>e.undo()))))),this._register(Ge.ih.addImplementation(105,"custom-editor",(()=>this.withActiveCustomEditor((e=>e.redo())))))}getEditorTypes(){return[...this._contributedEditors]}withActiveCustomEditor(e){const t=this.editorService.activeEditor;if(t instanceof nt.H){return e(t)||!0}return!1}registerContributionPoints(){this._editorResolverDisposables.clear();for(const e of this._contributedEditors)for(const t of e.selector)t.filenamePattern&&this._editorResolverDisposables.add(this.editorResolverService.registerEditor(t.filenamePattern,{id:e.id,label:e.displayName,detail:e.providerDisplayName,priority:e.priority},{singlePerResource:()=>!this.getCustomEditorCapabilities(e.id)?.supportsMultipleEditorsPerDocument},{createEditorInput:({resource:t},i)=>({editor:nt.H.create(this.instantiationService,t,e.id,i.id)}),createUntitledEditorInput:({resource:t},i)=>({editor:nt.H.create(this.instantiationService,t??v.rz.from({scheme:$.ny.untitled,authority:"Untitled-"+this._untitledCounter++}),e.id,i.id)}),createDiffEditorInput:(t,i)=>({editor:this.createDiffEditorInput(t,e.id,i)})}))}createDiffEditorInput(e,t,i){const o=nt.H.create(this.instantiationService,(0,y.eU)(e.modified.resource),t,i.id,{customClasses:"modified"}),n=nt.H.create(this.instantiationService,(0,y.eU)(e.original.resource),t,i.id,{customClasses:"original"});return this.instantiationService.createInstance(We.p,e.label,e.description,n,o,!0)}get models(){return this._models}getCustomEditor(e){return this._contributedEditors.get(e)}getContributedCustomEditors(e){return new Ue(this._contributedEditors.getContributedEditors(e))}getUserConfiguredCustomEditors(e){const t=this.editorResolverService.getAssociationsForResource(e);return new Ue((0,f.Yc)(t.map((e=>this._contributedEditors.get(e.viewType)))))}getAllCustomEditors(e){return new Ue([...this.getUserConfiguredCustomEditors(e).allEditors,...this.getContributedCustomEditors(e).allEditors])}registerCustomEditorCapabilities(e,t){if(this._editorCapabilities.has(e))throw new Error(`Capabilities for ${e} already set`);return this._editorCapabilities.set(e,t),(0,p.s)((()=>{this._editorCapabilities.delete(e)}))}getCustomEditorCapabilities(e){return this._editorCapabilities.get(e)}getActiveCustomEditorId(e){const t=e.activeEditorPane,i=t?.input?.resource;return i&&t?.input instanceof nt.H?t.input.viewType:""}getCustomEditorIsEditable(e){const t=e.activeEditorPane,i=t?.input?.resource;return!!i&&t?.input instanceof nt.H}async handleMovedFileInOpenedFileEditors(e,t){if((0,C.LC)(e).toLowerCase()===(0,C.LC)(t).toLowerCase())return;const i=this.getAllCustomEditors(t);if(!i.allEditors.some((e=>e.priority!==K.C8.option)))return;const o=new Map;for(const e of this.editorGroupService.groups)for(const i of e.editors)if(this._fileEditorFactory.isFileEditor(i)&&!(i instanceof nt.H)&&(0,C.n4)(i.resource,t)){let t=o.get(e.id);t||(t=[],o.set(e.id,t)),t.push(i)}if(o.size)for(const[e,n]of o)this.editorService.replaceEditors(n.map((o=>{let n;if(i.defaultEditor){const o=i.defaultEditor.id;n=nt.H.create(this.instantiationService,t,o,e)}else n={resource:t,options:{override:Q.Ie.id}};return{editor:o,replacement:n,options:{preserveFocus:!0}}})),e)}};st=(0,s.C)([(0,s.Q)(0,ve.$),(0,s.Q)(1,h.C),(0,s.Q)(2,be.I),(0,s.Q)(3,U.m),(0,s.Q)(4,a._Y),(0,s.Q)(5,Ie.J),(0,s.Q)(6,G.Y)],st);var rt=i(90854),at=i(71637),ct=i(86849),dt=i(55325),ht=(i(27785),i(82437)),lt=i(32802),ut=i(77692),pt=(i(16115),i(79849),i(17960),i(69416),i(10380),i(32696)),gt=i(94717);let mt=class extends p.jG{constructor(e,t){super(),this._themeService=e,this._configurationService=t,this._cachedWebViewThemeData=void 0,this._onThemeDataChanged=this._register(new m.vl),this.onThemeDataChanged=this._onThemeDataChanged.event,this._register(this._themeService.onDidColorThemeChange((()=>{this._reset()})));const i=["editor.fontFamily","editor.fontWeight","editor.fontSize","accessibility.underlineLinks"];this._register(this._configurationService.onDidChangeConfiguration((e=>{i.some((t=>e.affectsConfiguration(t)))&&this._reset()})))}getTheme(){return this._themeService.getColorTheme()}getWebviewThemeData(){if(!this._cachedWebViewThemeData){const e=this._configurationService.getValue("editor"),t=e.fontFamily||at.jU.fontFamily,i=e.fontWeight||at.jU.fontWeight,o=e.fontSize||at.jU.fontSize,n=this._configurationService.getValue("accessibility.underlineLinks"),s=this._themeService.getColorTheme(),r=(0,ct.Jc)().getColors().reduce(((e,t)=>{const i=s.getColor(t.id);return i&&(e["vscode-"+t.id.replace(".","-")]=i.toString()),e}),{}),a={"vscode-font-family":rt.z,"vscode-font-weight":"normal","vscode-font-size":"13px","vscode-editor-font-family":t,"vscode-editor-font-weight":i,"vscode-editor-font-size":o+"px","text-link-decoration":n?"underline":"none",...r},c=bt.fromTheme(s);this._cachedWebViewThemeData={styles:a,activeTheme:c,themeLabel:s.label,themeId:s.settingsId}}return this._cachedWebViewThemeData}_reset(){this._cachedWebViewThemeData=void 0,this._onThemeDataChanged.fire()}};var bt;mt=(0,s.C)([(0,s.Q)(0,gt.t),(0,s.Q)(1,z.p)],mt),function(e){e.light="vscode-light",e.dark="vscode-dark",e.highContrast="vscode-high-contrast",e.highContrastLight="vscode-high-contrast-light"}(bt||(bt={})),function(e){e.fromTheme=function(t){switch(t.type){case pt.zM.LIGHT:return e.light;case pt.zM.DARK:return e.dark;case pt.zM.HIGH_CONTRAST_DARK:return e.highContrast;case pt.zM.HIGH_CONTRAST_LIGHT:return e.highContrastLight}}}(bt||(bt={}));var wt=i(75824),vt=i(93765),ft=i(21959),yt=i(29870),Ct=i(88875),St=i(27044),kt=i(91781),_t=i(64656);class xt{constructor(e,t,i){this._getExtensionLocation=e,this._getMappings=t,this.tunnelService=i,this._tunnels=new Map}async getRedirect(e,t){const i=v.rz.parse(t),o=(0,_t.sl)(i);if(o)for(const t of this._getMappings())if(t.webviewPort===o.port){const n=this._getExtensionLocation();if(n&&n.scheme===$.ny.vscodeRemote){const o=e&&await this.getOrCreateTunnel(e,t.extensionHostPort);if(o){if(o.tunnelLocalPort===t.webviewPort)return;return encodeURI(i.with({authority:`127.0.0.1:${o.tunnelLocalPort}`}).toString(!0))}}if(t.webviewPort!==t.extensionHostPort)return encodeURI(i.with({authority:`${o.address}:${t.extensionHostPort}`}).toString(!0))}}async dispose(){for(const e of this._tunnels.values())await e.dispose();this._tunnels.clear()}async getOrCreateTunnel(e,t){const i=this._tunnels.get(t);if(i)return i;let o;return"string"==typeof await this.tunnelService.openTunnel({getAddress:async()=>e},void 0,t)&&(o=void 0),o&&this._tunnels.set(t,o),o}}var Et=i(58846),Dt=i(39385),It=i(67198),Vt=i(93913);const Mt=new Map([[".svg","image/svg+xml"],[".txt",Vt.KV.text],[".css","text/css"],[".js","application/javascript"],[".cjs","application/javascript"],[".mjs","application/javascript"],[".json","application/json"],[".html","text/html"],[".htm","text/html"],[".xhtml","application/xhtml+xml"],[".oft","font/otf"],[".xml","application/xml"],[".wasm","application/wasm"]]);function Tt(e){const t=(0,It.LC)(e.fsPath).toLowerCase();return Mt.get(t)||(0,Vt.P7)(e.fsPath)||Vt.KV.unknown}var At;function Lt(e,t){if(e.scheme!==t.scheme)return!1;let i=(0,It.S8)(t.fsPath),o=(0,It.S8)(e.fsPath+(e.fsPath.endsWith(It.Vn)?"":It.Vn));return(0,Dt.JD)(e.fsPath)&&(0,Dt.JD)(t.fsPath)&&(o=o.toLowerCase(),i=i.toLowerCase()),i.startsWith(o)}!function(e){let t;!function(e){e[e.Success=0]="Success",e[e.Failed=1]="Failed",e[e.AccessDenied=2]="AccessDenied",e[e.NotModified=3]="NotModified"}(t=e.Type||(e.Type={})),e.StreamSuccess=class{constructor(e,i,o,n){this.stream=e,this.etag=i,this.mtime=o,this.mimeType=n,this.type=t.Success}},e.Failed={type:t.Failed},e.AccessDenied={type:t.AccessDenied},e.NotModified=class{constructor(e,i){this.mimeType=e,this.mtime=i,this.type=t.NotModified}}}(At||(At={}));var Pt=i(51865),Rt=i(70348),Bt=i(76257);(0,Fe.A)(".monaco-workbench .simple-find-part-wrapper{max-width:calc(100% - 64px);overflow:hidden;padding:0 10px 10px;pointer-events:none;position:absolute;right:18px;top:0;z-index:10}.simple-find-part .monaco-inputbox>.ibwrapper>input{text-overflow:clip}.monaco-workbench .simple-find-part{align-items:center;background-color:var(--vscode-editorWidget-background)!important;border:1px solid var(--vscode-widget-border);border-bottom-left-radius:4px;border-bottom-right-radius:4px;box-shadow:0 0 8px 2px var(--vscode-widget-shadow);color:var(--vscode-editorWidget-foreground);display:flex;font-size:12px;padding:4px;pointer-events:all;position:relative;top:-45px;transition:top .2s linear;visibility:hidden;z-index:10}.monaco-workbench.reduce-motion .monaco-editor .find-widget{transition:top 0ms linear}.monaco-workbench .simple-find-part.visible{visibility:visible}.monaco-workbench .simple-find-part.suppress-transition{transition:none}.monaco-workbench .simple-find-part.visible-transition{top:0}.monaco-workbench .simple-find-part .monaco-findInput{flex:1}.monaco-workbench .simple-find-part .matchesCount{max-width:73px;min-width:73px;padding-left:5px;width:73px}.monaco-workbench .simple-find-part.reduced-find-widget .matchesCount{display:none}.monaco-workbench .simple-find-part .button{background-position:50%;background-repeat:no-repeat;cursor:pointer;display:flex;flex:initial;height:20px;justify-content:center;line-height:20px;margin-left:3px;min-width:20px;width:20px}.monaco-workbench div.simple-find-part div.button.disabled{cursor:default;opacity:.3!important}div.simple-find-part-wrapper div.button{border-radius:5px}.no-results.matchesCount{color:var(--vscode-errorForeground)}div.simple-find-part-wrapper div.button:hover:not(.disabled){background-color:var(--vscode-toolbar-hoverBackground);outline:1px dashed var(--vscode-toolbar-hoverOutline);outline-offset:-1px}.monaco-workbench .simple-find-part .monaco-sash{border-bottom-left-radius:4px;border-left:1px solid;left:0!important}.monaco-workbench .simple-find-part .monaco-sash.vertical:before{left:calc(50% - var(--vscode-sash-hover-size)/4);width:2px}",{});var Ot=i(69747),Nt=i(45222),Ft=i(47721),Gt=i(84976),Wt=i(63383),zt=i(32545),Ht=i(78699),Qt=i(62484),Ut=i(70481),$t=i(45103),Kt=i(96596);const jt=(0,I.kg)(11809,"Find"),Zt=(0,I.kg)(11810,"Find"),Yt=(0,I.kg)(11811,"Previous Match"),qt=(0,I.kg)(11812,"Next Match"),Jt=(0,I.kg)(11813,"Close");class Xt extends Ot.x{constructor(e,t,i,o,n){super(),this._keybindingService=n,this._isVisible=!1,this._foundMatch=!1,this._width=0,this.state=new Nt.l,this._matchesLimit=e.matchesLimit??Number.MAX_SAFE_INTEGER,this._findInput=this._register(new Gt.pG(null,t,{label:jt,placeholder:Zt,validation:e=>{if(0===e.length||!this._findInput.getRegex())return null;try{return new RegExp(e),null}catch(e){return this._foundMatch=!1,this.updateButtons(this._foundMatch),{content:e.message}}},showCommonFindToggles:e.showCommonFindToggles,appendCaseSensitiveLabel:e.appendCaseSensitiveActionId?this._getKeybinding(e.appendCaseSensitiveActionId):void 0,appendRegexLabel:e.appendRegexActionId?this._getKeybinding(e.appendRegexActionId):void 0,appendWholeWordsLabel:e.appendWholeWordsActionId?this._getKeybinding(e.appendWholeWordsActionId):void 0,showHistoryHint:()=>(0,Qt.z)(n),inputBoxStyles:$t.ho,toggleStyles:$t.mk},i)),this._updateHistoryDelayer=this._register(new vt.ve(500)),this._register(this._findInput.onInput((async t=>{e.checkImeCompletionState&&this._findInput.isImeSessionInProgress||(this._foundMatch=this._onInputChanged(),e.showResultCount&&await this.updateResultCount(),this.updateButtons(this._foundMatch),this.focusFindBox(),this._delayedUpdateHistory())}))),this._findInput.setRegex(!!this.state.isRegex),this._findInput.setCaseSensitive(!!this.state.matchCase),this._findInput.setWholeWords(!!this.state.wholeWord),this._register(this._findInput.onDidOptionChange((()=>{this.state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)}))),this._register(this.state.onFindReplaceStateChange((()=>{this._findInput.setRegex(this.state.isRegex),this._findInput.setWholeWords(this.state.wholeWord),this._findInput.setCaseSensitive(this.state.matchCase),this.findFirst()}))),this.prevBtn=this._register(new Ft.dF({label:Yt+(e.previousMatchActionId?this._getKeybinding(e.previousMatchActionId):""),icon:Ft.DT,onTrigger:()=>{this.find(!0)}},o)),this.nextBtn=this._register(new Ft.dF({label:qt+(e.nextMatchActionId?this._getKeybinding(e.nextMatchActionId):""),icon:Ft.Ns,onTrigger:()=>{this.find(!1)}},o));const s=this._register(new Ft.dF({label:Jt+(e.closeWidgetActionId?this._getKeybinding(e.closeWidgetActionId):""),icon:Wt.$_,onTrigger:()=>{this.hide()}},o));this._innerDomNode=document.createElement("div"),this._innerDomNode.classList.add("simple-find-part"),this._innerDomNode.appendChild(this._findInput.domNode),this._innerDomNode.appendChild(this.prevBtn.domNode),this._innerDomNode.appendChild(this.nextBtn.domNode),this._innerDomNode.appendChild(s.domNode),this._domNode=document.createElement("div"),this._domNode.classList.add("simple-find-part-wrapper"),this._domNode.appendChild(this._innerDomNode),this.onkeyup(this._innerDomNode,(e=>{if(e.equals(9))return this.hide(),void e.preventDefault()})),this._focusTracker=this._register((0,ke.w5)(this._innerDomNode)),this._register(this._focusTracker.onDidFocus(this._onFocusTrackerFocus.bind(this))),this._register(this._focusTracker.onDidBlur(this._onFocusTrackerBlur.bind(this))),this._findInputFocusTracker=this._register((0,ke.w5)(this._findInput.domNode)),this._register(this._findInputFocusTracker.onDidFocus(this._onFindInputFocusTrackerFocus.bind(this))),this._register(this._findInputFocusTracker.onDidBlur(this._onFindInputFocusTrackerBlur.bind(this))),this._register((0,ke.ko)(this._innerDomNode,"click",(e=>{e.stopPropagation()}))),e?.showResultCount&&(this._domNode.classList.add("result-count"),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._findInput.domNode.insertAdjacentElement("afterend",this._matchesCount),this._register(this._findInput.onDidChange((async()=>{await this.updateResultCount()}))),this._register(this._findInput.onDidOptionChange((async()=>{this._foundMatch=this._onInputChanged(),await this.updateResultCount(),this.focusFindBox(),this._delayedUpdateHistory()}))));let r=e?.initialWidth;if(r&&(r=r<310?310:r,this._domNode.style.width=`${r}px`),e?.enableSash){const e=r??310;let t=e;const i=this._register(new Kt.mF(this._innerDomNode,this,{orientation:0,size:1}));this._register(i.onDidStart((()=>{t=parseFloat((0,ke.L9)(this._domNode).width)}))),this._register(i.onDidChange((i=>{const o=t+i.startX-i.currentX;o<e||(this._domNode.style.width=`${o}px`)}))),this._register(i.onDidReset((t=>{const i=parseFloat((0,ke.L9)(this._domNode).width);this._domNode.style.width=i===e?"100%":`${e}px`})))}}getVerticalSashLeft(e){return 0}get inputValue(){return this._findInput.getValue()}get focusTracker(){return this._focusTracker}_getKeybinding(e){const t=this._keybindingService?.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){super.dispose(),this._domNode?.remove()}isVisible(){return this._isVisible}getDomNode(){return this._domNode}getFindInputDomNode(){return this._findInput.domNode}reveal(e,t=!0){e&&this._findInput.setValue(e),this._isVisible?this._findInput.select():(this._isVisible=!0,this.updateResultCount(),this.layout(),setTimeout((()=>{this._innerDomNode.classList.toggle("suppress-transition",!t),this._innerDomNode.classList.add("visible","visible-transition"),this._innerDomNode.setAttribute("aria-hidden","false"),this._findInput.select(),t||setTimeout((()=>{this._innerDomNode.classList.remove("suppress-transition")}),0)}),0))}show(e){e&&!this._isVisible&&this._findInput.setValue(e),this._isVisible=!0,this.layout(),setTimeout((()=>{this._innerDomNode.classList.add("visible","visible-transition"),this._innerDomNode.setAttribute("aria-hidden","false")}),0)}hide(e=!0){this._isVisible&&(this._innerDomNode.classList.toggle("suppress-transition",!e),this._innerDomNode.classList.remove("visible-transition"),this._innerDomNode.setAttribute("aria-hidden","true"),setTimeout((()=>{this._isVisible=!1,this.updateButtons(this._foundMatch),this._innerDomNode.classList.remove("visible","suppress-transition")}),e?200:0))}layout(e=this._width){if(this._width=e,this._isVisible&&this._matchesCount){let t=!1;411>=e&&(t=!0),this._innerDomNode.classList.toggle("reduced-find-widget",t)}}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this))}_updateHistory(){this._findInput.inputBox.addToHistory()}_getRegexValue(){return this._findInput.getRegex()}_getWholeWordValue(){return this._findInput.getWholeWords()}_getCaseSensitiveValue(){return this._findInput.getCaseSensitive()}updateButtons(e){const t=this.inputValue.length>0;this.prevBtn.setEnabled(this._isVisible&&t&&e),this.nextBtn.setEnabled(this._isVisible&&t&&e)}focusFindBox(){this.nextBtn.focus(),this._findInput.inputBox.focus()}async updateResultCount(){if(!this._matchesCount)return void this.updateButtons(this._foundMatch);const e=await this._getResultCount();this._matchesCount.innerText="";const t=this.inputValue.length>0&&0===e?.resultCount;this._matchesCount.classList.toggle("no-results",t);let i="";if(e?.resultCount){let t=String(e.resultCount);e.resultCount>=this._matchesLimit&&(t+="+");let o=String(e.resultIndex+1);"0"===o&&(o="?"),i=(0,Ht.GP)(Ft.kb,o,t)}else i=Ft.Ls;(0,Ut.h5)(this._announceSearchResults(i,this.inputValue)),this._matchesCount.appendChild(document.createTextNode(i)),this._foundMatch=!!e&&e.resultCount>0,this.updateButtons(this._foundMatch)}changeState(e){this.state.change(e,!1)}_announceSearchResults(e,t){return t?e===Ft.Ls?""===t?(0,I.kg)(11815,"{0} found",e):(0,I.kg)(11816,"{0} found for '{1}'",e,t):(0,I.kg)(11817,"{0} found for '{1}'",e,t):(0,I.kg)(11814,"Enter search input")}}const ei=(0,ct.x1)("simpleFindWidget.sashBorder",{dark:"#454545",light:"#C8C8C8",hcDark:"#6FC3DF",hcLight:"#0F4A85"},(0,I.kg)(11818,"Border color of the sash border."));(0,zt.zy)(((e,t)=>{const i=e.getColor(ei);t.addRule(`.monaco-workbench .simple-find-part .monaco-sash { background-color: ${i}; border-color: ${i} }`)}));let ti=class extends Xt{async _getResultCount(e){}constructor(e,t,i,o,n){super({showCommonFindToggles:!1,checkImeCompletionState:e.checkImeCompletionState,enableSash:!0},t,i,o,n),this._delegate=e,this._findWidgetFocused=Pt.iU.bindTo(i),this._register(e.hasFindResult((e=>{this.updateButtons(e),this.focusFindBox()}))),this._register(e.onDidStopFind((()=>{this.updateButtons(!1)})))}find(e){const t=this.inputValue;t&&this._delegate.find(t,e)}hide(e=!0){super.hide(e),this._delegate.stopFind(!0),this._delegate.focus()}_onInputChanged(){const e=this.inputValue;return e?this._delegate.updateFind(e):this._delegate.stopFind(!1),!1}_onFocusTrackerFocus(){this._findWidgetFocused.set(!0)}_onFocusTrackerBlur(){this._findWidgetFocused.reset()}_onFindInputFocusTrackerFocus(){}_onFindInputFocusTrackerBlur(){}findFirst(){}};ti=(0,s.C)([(0,s.Q)(1,ne.l),(0,s.Q)(2,d.f),(0,s.Q)(3,Rt.T),(0,s.Q)(4,Bt.b)],ti);var ii,oi=i(11176),ni=i(85105);!function(e){!function(e){e[e.Initializing=0]="Initializing",e[e.Ready=1]="Ready"}(e.Type||(e.Type={})),e.Initializing=class{constructor(e){this.pendingMessages=e,this.type=0}},e.Ready={type:1}}(ii||(ii={}));let si=class extends p.jG{get window(){return"number"==typeof this._windowId?(0,ke.ZF)(this._windowId)?.window:void 0}get platform(){return"browser"}get element(){return this._element}get isFocused(){return!(!this._focused||!this.window||this.window.document.activeElement&&this.window.document.activeElement!==this.element)}constructor(e,t,i,o,n,s,r,a,c,d,h,l,u){super(),this.webviewThemeDataProvider=t,this._environmentService=s,this._fileService=r,this._logService=a,this._remoteAuthorityResolverService=c,this._telemetryService=d,this._tunnelService=h,this._accessibilityService=u,this.id=(0,w.b)(),this._windowId=void 0,this._expectedServiceWorkerVersion=4,this._state=new ii.Initializing([]),this._resourceLoadingCts=this._register(new yt.Qi),this._focusDelayer=this._register(new vt.Th(50)),this._onDidHtmlChange=this._register(new m.vl),this.onDidHtmlChange=this._onDidHtmlChange.event,this._messageHandlers=new Map,this.checkImeCompletionState=!0,this._disposed=!1,this._onMissingCsp=this._register(new m.vl),this.onMissingCsp=this._onMissingCsp.event,this._onDidClickLink=this._register(new m.vl),this.onDidClickLink=this._onDidClickLink.event,this._onDidReload=this._register(new m.vl),this.onDidReload=this._onDidReload.event,this._onMessage=this._register(new m.vl),this.onMessage=this._onMessage.event,this._onDidScroll=this._register(new m.vl),this.onDidScroll=this._onDidScroll.event,this._onDidWheel=this._register(new m.vl),this.onDidWheel=this._onDidWheel.event,this._onDidUpdateState=this._register(new m.vl),this.onDidUpdateState=this._onDidUpdateState.event,this._onDidFocus=this._register(new m.vl),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new m.vl),this.onDidBlur=this._onDidBlur.event,this._onFatalError=this._register(new m.vl),this.onFatalError=this._onFatalError.event,this._onDidDispose=this._register(new m.vl),this.onDidDispose=this._onDidDispose.event,this._hasAlertedAboutMissingCsp=!1,this._hasFindResult=this._register(new m.vl),this.hasFindResult=this._hasFindResult.event,this._onDidStopFind=this._register(new m.vl),this.onDidStopFind=this._onDidStopFind.event,this.providedViewType=e.providedViewType,this.origin=e.origin??this.id,this._options=e.options,this.extension=e.extension,this._content={html:"",title:e.title,options:e.contentOptions,state:void 0},this._portMappingManager=this._register(new xt((()=>this.extension?.location),(()=>this._content.options.portMapping||[]),this._tunnelService)),this._element=this._createElement(e.options,e.contentOptions),this._register(this.on("no-csp-found",(()=>{this.handleNoCspFound()}))),this._register(this.on("did-click-link",(({uri:e})=>{this._onDidClickLink.fire(e)}))),this._register(this.on("onmessage",(({message:e,transfer:t})=>{this._onMessage.fire({message:e,transfer:t})}))),this._register(this.on("did-scroll",(({scrollYPercentage:e})=>{this._onDidScroll.fire({scrollYPercentage:e})}))),this._register(this.on("do-reload",(()=>{this.reload()}))),this._register(this.on("do-update-state",(e=>{this.state=e,this._onDidUpdateState.fire(e)}))),this._register(this.on("did-focus",(()=>{this.handleFocusChange(!0)}))),this._register(this.on("did-blur",(()=>{this.handleFocusChange(!1)}))),this._register(this.on("did-scroll-wheel",(e=>{this._onDidWheel.fire(e)}))),this._register(this.on("did-find",(({didFind:e})=>{this._hasFindResult.fire(e)}))),this._register(this.on("fatal-error",(e=>{n.error((0,I.kg)(9694,"Error loading webview: {0}",e.message)),this._onFatalError.fire({message:e.message})}))),this._register(this.on("did-keydown",(e=>{this.handleKeyEvent("keydown",e)}))),this._register(this.on("did-keyup",(e=>{this.handleKeyEvent("keyup",e)}))),this._register(this.on("did-context-menu",(e=>{if(!this.element)return;if(!this._contextKeyService)return;const t=this.element.getBoundingClientRect(),i=this._contextKeyService.createOverlay([...Object.entries(e.context),["webviewId",this.providedViewType]]);o.showContextMenu({menuId:_.D8.WebviewContext,menuActionOptions:{shouldForwardArgs:!0},contextKeyService:i,getActionsContext:()=>({...e.context,webview:this.providedViewType}),getAnchor:()=>({x:t.x+e.clientX,y:t.y+e.clientY})}),this._send("set-context-menu-visible",{visible:!0})}))),this._register(this.on("load-resource",(async e=>{try{const t=(0,oi.MD)(e.authority),i=v.rz.from({scheme:e.scheme,authority:t,path:decodeURIComponent(e.path),query:e.query?decodeURIComponent(e.query):e.query});this.loadResource(e.id,i,e.ifNoneMatch)}catch(t){this._send("did-load-resource",{id:e.id,status:404,path:e.path})}}))),this._register(this.on("load-localhost",(e=>{this.localLocalhost(e.id,e.origin)}))),this._register(m.Jh.runAndSubscribe(t.onThemeDataChanged,(()=>this.style()))),this._register(u.onDidChangeReducedMotion((()=>this.style()))),this._register(u.onDidChangeScreenReaderOptimized((()=>this.style()))),this._register(o.onDidHideContextMenu((()=>this._send("set-context-menu-visible",{visible:!1})))),this._confirmBeforeClose=i.getValue("window.confirmBeforeClose"),this._register(i.onDidChangeConfiguration((e=>{e.affectsConfiguration("window.confirmBeforeClose")&&(this._confirmBeforeClose=i.getValue("window.confirmBeforeClose"),this._send("set-confirm-before-close",this._confirmBeforeClose))}))),this._register(this.on("drag-start",(()=>{this._startBlockingIframeDragEvents()}))),this._register(this.on("drag",(e=>{this.handleDragEvent("drag",e)}))),e.options.enableFindWidget&&(this._webviewFindWidget=this._register(l.createInstance(ti,this)))}dispose(){if(this._disposed=!0,this.element?.remove(),this._element=void 0,this._messagePort=void 0,0===this._state.type){for(const e of this._state.pendingMessages)e.resolve(!1);this._state.pendingMessages=[]}this._onDidDispose.fire(),this._resourceLoadingCts.dispose(!0),super.dispose()}setContextKeyService(e){this._contextKeyService=e}postMessage(e,t){return this._send("message",{message:e,transfer:t})}async _send(e,t,i=[]){if(0===this._state.type){const{promise:o,resolve:n}=(0,vt.nJ)();return this._state.pendingMessages.push({channel:e,data:t,transferable:i,resolve:n}),o}return this.doPostMessage(e,t,i)}_createElement(e,t){const i=document.createElement("iframe");i.name=this.id,i.className=`webview ${e.customClasses||""}`,i.sandbox.add("allow-scripts","allow-same-origin","allow-forms","allow-pointer-lock","allow-downloads");const o=["cross-origin-isolated","autoplay"];return wt.gm||o.push("clipboard-read","clipboard-write"),i.setAttribute("allow",o.join("; ")),i.style.border="none",i.style.width="100%",i.style.height="100%",i.focus=()=>{this._doFocus()},i}_initElement(e,t,i,o){const n={id:this.id,origin:this.origin,swVersion:String(this._expectedServiceWorkerVersion),extensionId:t?.id.value??"",platform:this.platform,"vscode-resource-base-authority":oi.Lh,parentOrigin:o.origin};this._options.disableServiceWorker&&(n.disableServiceWorker="true"),this._environmentService.remoteAuthority&&(n.remoteAuthority=this._environmentService.remoteAuthority),i.purpose&&(n.purpose=i.purpose),n.serviceWorkerUri=$.zl.asBrowserUri("vs/workbench/contrib/webview/browser/pre/service-worker.js").toString(!0),n.fakeHtmlUri=$.zl.asBrowserUri("vs/workbench/contrib/webview/browser/pre/fake.html").toString(!0),$.SJ.addSearchParam(n,!0,!0);const s=new URLSearchParams(n).toString(),r=wt.gm?"index-no-csp.html":"index.html",a=$.zl.asBrowserUri(`vs/workbench/contrib/webview/browser/pre/${r}`);this.element.setAttribute("src",`${a.toString(!0)}?${s}`)}mountTo(e,t){if(this.element){this._windowId=t.vscodeWindowId,this._encodedWebviewOriginPromise=(0,Et.j)(t.origin,this.origin).then((e=>this._encodedWebviewOrigin=e)),this._encodedWebviewOriginPromise.then((e=>{this._disposed||this._initElement(e,this.extension,this._options,t)})),this._registerMessageHandler(t),this._webviewFindWidget&&e.appendChild(this._webviewFindWidget.getDomNode());for(const t of[ke.Bx.MOUSE_DOWN,ke.Bx.MOUSE_MOVE,ke.Bx.DROP])this._register((0,ke.ko)(e,t,(()=>{this._stopBlockingIframeDragEvents()})));for(const i of[e,t])this._register((0,ke.ko)(i,ke.Bx.DRAG_END,(()=>{this._stopBlockingIframeDragEvents()})));e.id=this.id,e.appendChild(this.element)}}_registerMessageHandler(e){const t=this._register((0,ke.ko)(e,"message",(e=>{if(this._encodedWebviewOrigin&&e?.data?.target===this.id&&"webview-ready"===e.data.channel){if(this._messagePort)return;this._logService.debug(`Webview(${this.id}): webview ready`),this._messagePort=e.ports[0],this._messagePort.onmessage=e=>{const t=this._messageHandlers.get(e.data.channel);t?t?.forEach((t=>t(e.data.data,e))):console.log(`No handlers found for '${e.data.channel}'`)},this.element?.classList.add("ready"),0===this._state.type&&this._state.pendingMessages.forEach((({channel:e,data:t,resolve:i})=>i(this.doPostMessage(e,t)))),this._state=ii.Ready,t.dispose()}})))}_startBlockingIframeDragEvents(){this.element&&(this.element.style.pointerEvents="none")}_stopBlockingIframeDragEvents(){this.element&&(this.element.style.pointerEvents="auto")}webviewContentEndpoint(e){const t=this._environmentService.webviewExternalEndpoint;if(!t)throw new Error("'webviewExternalEndpoint' has not been configured. Webviews will not work!");const i=t.replace("{{uuid}}",e);return"/"===i[i.length-1]?i.slice(0,i.length-1):i}doPostMessage(e,t,i=[]){return!(!this.element||!this._messagePort||(this._messagePort.postMessage({channel:e,args:t},i),0))}on(e,t){let i=this._messageHandlers.get(e);return i||(i=new Set,this._messageHandlers.set(e,i)),i.add(t),(0,p.s)((()=>{this._messageHandlers.get(e)?.delete(t)}))}handleNoCspFound(){if(!this._hasAlertedAboutMissingCsp&&(this._hasAlertedAboutMissingCsp=!0,this.extension?.id)){this._environmentService.isExtensionDevelopment&&this._onMissingCsp.fire(this.extension.id);const e={extension:this.extension.id.value};this._telemetryService.publicLog2("webviewMissingCsp",e)}}reload(){this.doUpdateContent(this._content);const e=this._register(this.on("did-load",(()=>{this._onDidReload.fire(),e.dispose()})))}setHtml(e){this.doUpdateContent({...this._content,html:e}),this._onDidHtmlChange.fire(e)}setTitle(e){this._content={...this._content,title:e},this._send("set-title",e)}set contentOptions(e){this._logService.debug(`Webview(${this.id}): will update content options`),(0,Pt.JH)(e,this._content.options)?this._logService.debug(`Webview(${this.id}): skipping content options update`):this.doUpdateContent({...this._content,options:e})}set localResourcesRoot(e){this._content={...this._content,options:{...this._content.options,localResourceRoots:e}}}set state(e){this._content={...this._content,state:e}}set initialScrollProgress(e){this._send("initial-scroll-position",e)}doUpdateContent(e){this._logService.debug(`Webview(${this.id}): will update content`),this._content=e;const t=!!this._content.options.allowScripts;this._send("content",{contents:this._content.html,title:this._content.title,options:{allowMultipleAPIAcquire:!!this._content.options.allowMultipleAPIAcquire,allowScripts:t,allowForms:this._content.options.allowForms??t},state:this._content.state,cspSource:oi.gN,confirmBeforeClose:this._confirmBeforeClose})}style(){let{styles:e,activeTheme:t,themeLabel:i,themeId:o}=this.webviewThemeDataProvider.getWebviewThemeData();this._options.transformCssVariables&&(e=this._options.transformCssVariables(e));const n=this._accessibilityService.isMotionReduced(),s=this._accessibilityService.isScreenReaderOptimized();this._send("styles",{styles:e,activeTheme:t,themeId:o,themeLabel:i,reduceMotion:n,screenReader:s})}handleFocusChange(e){this._focused=e,e?this._onDidFocus.fire():this._onDidBlur.fire()}handleKeyEvent(e,t){const i=new KeyboardEvent(e,t);Object.defineProperty(i,"target",{get:()=>this.element}),this.window?.dispatchEvent(i)}handleDragEvent(e,t){const i=new DragEvent(e,t);Object.defineProperty(i,"target",{get:()=>this.element}),this.window?.dispatchEvent(i)}windowDidDragStart(){this._startBlockingIframeDragEvents()}windowDidDragEnd(){this._stopBlockingIframeDragEvents()}selectAll(){this.execCommand("selectAll")}copy(){this.execCommand("copy")}paste(){this.execCommand("paste")}cut(){this.execCommand("cut")}undo(){this.execCommand("undo")}redo(){this.execCommand("redo")}execCommand(e){this.element&&this._send("execCommand",e)}async loadResource(e,t,i){try{const o=await async function(e,t,i,o,n){o.debug(`loadLocalResource - begin. requestUri=${e}`);const s=function(e,t){for(const o of t)if(Lt(o,e))return(i=e).scheme===$.ny.vscodeRemote?v.rz.from({scheme:$.ny.vscodeRemote,authority:i.authority,path:"/vscode-resource",query:JSON.stringify({requestResourcePath:i.path})}):i;var i}(e,t.roots);if(o.debug(`loadLocalResource - found resource to load. requestUri=${e}, resourceToLoad=${s}`),!s)return At.AccessDenied;const r=Tt(e);try{const e=await i.readFileStream(s,{etag:t.ifNoneMatch},n);return new At.StreamSuccess(e.value,e.etag,e.mtime,r)}catch(t){return t instanceof we.uf&&2===t.fileOperationResult?new At.NotModified(r,t.options?.mtime):(o.debug(`loadLocalResource - Error using fileReader. requestUri=${e}`),console.log(t),At.Failed)}}(t,{ifNoneMatch:i,roots:this._content.options.localResourceRoots||[]},this._fileService,this._logService,this._resourceLoadingCts.token);switch(o.type){case At.Type.Success:{const i=await this.streamToBuffer(o.stream);return this._send("did-load-resource",{id:e,status:200,path:t.path,mime:o.mimeType,data:i,etag:o.etag,mtime:o.mtime},[i])}case At.Type.NotModified:return this._send("did-load-resource",{id:e,status:304,path:t.path,mime:o.mimeType,mtime:o.mtime});case At.Type.AccessDenied:return this._send("did-load-resource",{id:e,status:401,path:t.path})}}catch{}return this._send("did-load-resource",{id:e,status:404,path:t.path})}async streamToBuffer(e){return(await(0,ft.GV)(e)).buffer.buffer}async localLocalhost(e,t){const i=this._environmentService.remoteAuthority,o=i?await this._remoteAuthorityResolverService.resolveAuthority(i):void 0,n=o?await this._portMappingManager.getRedirect(o.authority,t):void 0;return this._send("did-load-localhost",{id:e,origin:t,location:n})}focus(){this._doFocus(),this.handleFocusChange(!0)}_doFocus(){if(this.element){try{this.element.contentWindow?.focus()}catch{}this._focusDelayer.trigger((async()=>{this.isFocused&&this.element&&(this.window?.document.activeElement&&this.window.document.activeElement!==this.element&&"BODY"!==this.window.document.activeElement?.tagName||(this.window?.document.body?.focus(),this._send("focus",void 0)))}))}}find(e,t){this.element&&this._send("find",{value:e,previous:t})}updateFind(e){e&&this.element&&this._send("find",{value:e})}stopFind(e){this.element&&(this._send("find-stop",{clearSelection:!e}),this._onDidStopFind.fire())}showFind(e=!0){this._webviewFindWidget?.reveal(void 0,e)}hideFind(e=!0){this._webviewFindWidget?.hide(e)}runFindAction(e){this._webviewFindWidget?.find(e)}};si=(0,s.C)([(0,s.Q)(2,z.p),(0,s.Q)(3,ne.Z),(0,s.Q)(4,Y.O),(0,s.Q)(5,ni.P),(0,s.Q)(6,ve.$),(0,s.Q)(7,k.r),(0,s.Q)(8,St.c),(0,s.Q)(9,b.k),(0,s.Q)(10,kt.p),(0,s.Q)(11,a._Y),(0,s.Q)(12,Ct.j)],si);var ri=i(61746),ai=i(77384);let ci=class extends p.jG{get window(){return(0,ke.ZF)(this._windowId,!0).window}constructor(e,t,i,o){super(),this._layoutService=t,this._webviewService=i,this._baseContextKeyService=o,this._isFirstLoad=!0,this._firstLoadPendingMessages=new Set,this._webview=this._register(new p.HE),this._webviewEvents=this._register(new p.Cm),this._html="",this._initialScrollProgress=0,this._state=void 0,this._owner=void 0,this._windowId=void 0,this._scopedContextKeyService=this._register(new p.HE),this._shouldShowFindWidgetOnRestore=!1,this._isDisposed=!1,this._onDidDispose=this._register(new m.vl),this.onDidDispose=this._onDidDispose.event,this._onDidFocus=this._register(new m.vl),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new m.vl),this.onDidBlur=this._onDidBlur.event,this._onDidClickLink=this._register(new m.vl),this.onDidClickLink=this._onDidClickLink.event,this._onDidReload=this._register(new m.vl),this.onDidReload=this._onDidReload.event,this._onDidScroll=this._register(new m.vl),this.onDidScroll=this._onDidScroll.event,this._onDidUpdateState=this._register(new m.vl),this.onDidUpdateState=this._onDidUpdateState.event,this._onMessage=this._register(new m.vl),this.onMessage=this._onMessage.event,this._onMissingCsp=this._register(new m.vl),this.onMissingCsp=this._onMissingCsp.event,this._onDidWheel=this._register(new m.vl),this.onDidWheel=this._onDidWheel.event,this._onFatalError=this._register(new m.vl),this.onFatalError=this._onFatalError.event,this.providedViewType=e.providedViewType,this.origin=e.origin??(0,w.b)(),this._title=e.title,this._extension=e.extension,this._options=e.options,this._contentOptions=e.contentOptions}get isFocused(){return!!this._webview.value?.isFocused}dispose(){this._isDisposed=!0,this._container?.domNode.remove(),this._container=void 0;for(const e of this._firstLoadPendingMessages)e.resolve(!1);this._firstLoadPendingMessages.clear(),this._onDidDispose.fire(),super.dispose()}get container(){if(this._isDisposed)throw new Error("OverlayWebview has been disposed");if(!this._container){const e=document.createElement("div");e.style.position="absolute",e.style.overflow="hidden",this._container=new ri.D(e),this._container.setVisibility("hidden"),this._layoutService.getContainer(this.window).appendChild(e)}return this._container.domNode}claim(e,t,i){if(this._isDisposed)return;const o=this._owner;if(this._windowId!==t.vscodeWindowId&&(this.release(o),this._webview.clear(),this._webviewEvents.clear(),this._container?.domNode.remove(),this._container=void 0),this._owner=e,this._windowId=t.vscodeWindowId,this._show(t),o!==e){const e=i||this._baseContextKeyService;this._scopedContextKeyService.clear(),this._scopedContextKeyService.value=e.createScoped(this.container);const t=this._findWidgetVisible?.get();this._findWidgetVisible?.reset(),this._findWidgetVisible=Pt.fu.bindTo(e),this._findWidgetVisible.set(!!t),this._findWidgetEnabled?.reset(),this._findWidgetEnabled=Pt.yK.bindTo(e),this._findWidgetEnabled.set(!!this.options.enableFindWidget),this._webview.value?.setContextKeyService(this._scopedContextKeyService.value)}}release(e){this._owner===e&&(this._scopedContextKeyService.clear(),this._owner=void 0,this._container&&this._container.setVisibility("hidden"),this._options.retainContextWhenHidden?(this._shouldShowFindWidgetOnRestore=!!this._findWidgetVisible?.get(),this.hideFind(!1)):(this._webview.clear(),this._webviewEvents.clear()))}layoutWebviewOverElement(e,t,i){if(!this._container||!this._container.domNode.parentElement)return;const o=this._layoutService.whenContainerStylesLoaded(this.window);o?o.then((()=>this.doLayoutWebviewOverElement(e,t,i))):this.doLayoutWebviewOverElement(e,t,i)}doLayoutWebviewOverElement(e,t,i){if(!this._container||!this._container.domNode.parentElement)return;const o=e.getBoundingClientRect(),n=this._container.domNode.parentElement.getBoundingClientRect(),s=(n.height-this._container.domNode.parentElement.clientHeight)/2,r=(n.width-this._container.domNode.parentElement.clientWidth)/2;if(this._container.setTop(o.top-n.top-s),this._container.setLeft(o.left-n.left-r),this._container.setWidth(t?t.width:o.width),this._container.setHeight(t?t.height:o.height),i){const{top:e,left:t,right:n,bottom:s}=function(e,t){const i=t.getBoundingClientRect();return{top:Math.max(i.top-e.top,0),right:Math.max(e.width-(e.right-i.right),0),bottom:Math.max(e.height-(e.bottom-i.bottom),0),left:Math.max(i.left-e.left,0)}}(o,i);this._container.domNode.style.clipPath=`polygon(${t}px ${e}px, ${n}px ${e}px, ${n}px ${s}px, ${t}px ${s}px)`}}_show(e){if(this._isDisposed)throw new Error("OverlayWebview is disposed");if(!this._webview.value){const t=this._webviewService.createWebviewElement({providedViewType:this.providedViewType,origin:this.origin,title:this._title,options:this._options,contentOptions:this._contentOptions,extension:this.extension});this._webview.value=t,t.state=this._state,this._scopedContextKeyService.value&&this._webview.value.setContextKeyService(this._scopedContextKeyService.value),this._html&&t.setHtml(this._html),this._options.tryRestoreScrollPosition&&(t.initialScrollProgress=this._initialScrollProgress),this._findWidgetEnabled?.set(!!this.options.enableFindWidget),t.mountTo(this.container,e),this._webviewEvents.clear(),this._webviewEvents.add(t.onDidFocus((()=>{this._onDidFocus.fire()}))),this._webviewEvents.add(t.onDidBlur((()=>{this._onDidBlur.fire()}))),this._webviewEvents.add(t.onDidClickLink((e=>{this._onDidClickLink.fire(e)}))),this._webviewEvents.add(t.onMessage((e=>{this._onMessage.fire(e)}))),this._webviewEvents.add(t.onMissingCsp((e=>{this._onMissingCsp.fire(e)}))),this._webviewEvents.add(t.onDidWheel((e=>{this._onDidWheel.fire(e)}))),this._webviewEvents.add(t.onDidReload((()=>{this._onDidReload.fire()}))),this._webviewEvents.add(t.onFatalError((e=>{this._onFatalError.fire(e)}))),this._webviewEvents.add(t.onDidScroll((e=>{this._initialScrollProgress=e.scrollYPercentage,this._onDidScroll.fire(e)}))),this._webviewEvents.add(t.onDidUpdateState((e=>{this._state=e,this._onDidUpdateState.fire(e)}))),this._isFirstLoad&&this._firstLoadPendingMessages.forEach((async e=>{e.resolve(await t.postMessage(e.message,e.transfer))})),this._isFirstLoad=!1,this._firstLoadPendingMessages.clear()}this.options.retainContextWhenHidden&&this._shouldShowFindWidgetOnRestore&&(this.showFind(!1),this._shouldShowFindWidgetOnRestore=!1),this._container?.setVisibility("visible")}setHtml(e){this._html=e,this._withWebview((t=>t.setHtml(e)))}setTitle(e){this._title=e,this._withWebview((t=>t.setTitle(e)))}get initialScrollProgress(){return this._initialScrollProgress}set initialScrollProgress(e){this._initialScrollProgress=e,this._withWebview((t=>t.initialScrollProgress=e))}get state(){return this._state}set state(e){this._state=e,this._withWebview((t=>t.state=e))}get extension(){return this._extension}set extension(e){this._extension=e,this._withWebview((t=>t.extension=e))}get options(){return this._options}set options(e){this._options={customClasses:this._options.customClasses,...e}}get contentOptions(){return this._contentOptions}set contentOptions(e){this._contentOptions=e,this._withWebview((t=>t.contentOptions=e))}set localResourcesRoot(e){this._withWebview((t=>t.localResourcesRoot=e))}async postMessage(e,t){if(this._webview.value)return this._webview.value.postMessage(e,t);if(this._isFirstLoad){let i;const o=new Promise((e=>i=e));return this._firstLoadPendingMessages.add({message:e,transfer:t,resolve:i}),o}return!1}focus(){this._webview.value?.focus()}reload(){this._webview.value?.reload()}selectAll(){this._webview.value?.selectAll()}copy(){this._webview.value?.copy()}paste(){this._webview.value?.paste()}cut(){this._webview.value?.cut()}undo(){this._webview.value?.undo()}redo(){this._webview.value?.redo()}showFind(e=!0){this._webview.value&&(this._webview.value.showFind(e),this._findWidgetVisible?.set(!0))}hideFind(e=!0){this._findWidgetVisible?.reset(),this._webview.value?.hideFind(e)}runFindAction(e){this._webview.value?.runFindAction(e)}_withWebview(e){this._webview.value&&e(this._webview.value)}windowDidDragStart(){this._webview.value?.windowDidDragStart()}windowDidDragEnd(){this._webview.value?.windowDidDragEnd()}setContextKeyService(e){this._webview.value?.setContextKeyService(e)}};ci=(0,s.C)([(0,s.Q)(1,Ce.Y),(0,s.Q)(2,ai.a),(0,s.Q)(3,d.f)],ci);let di=class extends p.jG{constructor(e){super(),this._instantiationService=e,this._webviews=new Set,this._onDidChangeActiveWebview=this._register(new m.vl),this.onDidChangeActiveWebview=this._onDidChangeActiveWebview.event,this._webviewThemeDataProvider=this._instantiationService.createInstance(mt)}get activeWebview(){return this._activeWebview}_updateActiveWebview(e){e!==this._activeWebview&&(this._activeWebview=e,this._onDidChangeActiveWebview.fire(e))}get webviews(){return this._webviews.values()}createWebviewElement(e){const t=this._instantiationService.createInstance(si,e,this._webviewThemeDataProvider);return this.registerNewWebview(t),t}createWebviewOverlay(e){const t=this._instantiationService.createInstance(ci,e);return this.registerNewWebview(t),t}registerNewWebview(e){this._webviews.add(e);const t=new p.Cm;t.add(e.onDidFocus((()=>{this._updateActiveWebview(e)})));const i=()=>{this._activeWebview===e&&this._updateActiveWebview(void 0)};t.add(e.onDidBlur(i)),t.add(e.onDidDispose((()=>{i(),t.dispose(),this._webviews.delete(e)})))}};di=(0,s.C)([(0,s.Q)(0,a._Y)],di);var hi=i(78054),li=i(54612);class ui extends p.jG{constructor(){super(...arguments),this._resolvers=new Map,this._awaitingRevival=new Map,this._onNewResolverRegistered=this._register(new m.vl),this.onNewResolverRegistered=this._onNewResolverRegistered.event}register(e,t){if(this._resolvers.has(e))throw new Error(`View resolver already registered for ${e}`);this._resolvers.set(e,t),this._onNewResolverRegistered.fire({viewType:e});const i=this._awaitingRevival.get(e);return i&&t.resolve(i.webview,yt.XO.None).then((()=>{this._awaitingRevival.delete(e),i.resolve()})),(0,p.s)((()=>{this._resolvers.delete(e)}))}resolve(e,t,i){const o=this._resolvers.get(e);if(!o){if(this._awaitingRevival.has(e))throw new Error("View already awaiting revival");const{promise:i,resolve:o}=(0,vt.nJ)();return this._awaitingRevival.set(e,{webview:t,resolve:o}),i}return o.resolve(t,i)}}var pi=i(48415),gi=i(91193);(0,Fe.A)('.monaco-workbench .progress-badge>.badge-content:before{background-color:currentColor;background-repeat:no-repeat;bottom:0;content:"";height:14px;left:0;margin:auto;mask:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMiAyIDE0IDE0Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOSAxNmMtMy44NiAwLTctMy4xNC03LTdzMy4xNC03IDctN2MzLjg1OSAwIDcgMy4xNDEgNyA3cy0zLjE0MSA3LTcgN3pNOSAzLjRDNS45MTIgMy40IDMuNCA1LjkxMyAzLjQgOXMyLjUxMiA1LjYgNS42IDUuNiA1LjYtMi41MTIgNS42LTUuNlMxMi4wODggMy40IDkgMy40em0zLjg2IDcuMUw5LjcgOC42MDRWNC44SDguM3Y0LjU5NmwzLjg0IDIuMzA1LjcyLTEuMjAxeiIvPjwvc3ZnPg==") no-repeat;-webkit-mask:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMiAyIDE0IDE0Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOSAxNmMtMy44NiAwLTctMy4xNC03LTdzMy4xNC03IDctN2MzLjg1OSAwIDcgMy4xNDEgNyA3cy0zLjE0MSA3LTcgN3pNOSAzLjRDNS45MTIgMy40IDMuNCA1LjkxMyAzLjQgOXMyLjUxMiA1LjYgNS42IDUuNiA1LjYtMi41MTIgNS42LTUuNlMxMi4wODggMy40IDkgMy40em0zLjg2IDcuMUw5LjcgOC42MDRWNC44SDguM3Y0LjU5NmwzLjg0IDIuMzA1LjcyLTEuMjAxeiIvPjwvc3ZnPg==") no-repeat;position:absolute;right:0;top:0;width:14px}',{});var mi=i(76884),bi=i(47813),wi=i(83443),vi=i(76390),fi=i(98967),yi=i(999),Ci=i(19660),Si=i(52526),ki=i(19249),_i=i(23932),xi=i(14956),Ei=i(80222),Di=i(71478);(0,Fe.A)(".monaco-dialog-modal-block{align-items:center;display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:2600}.monaco-dialog-modal-block.dimmed{background:rgba(0,0,0,.3)}.monaco-dialog-box{border-radius:3px;display:flex;flex-direction:column-reverse;max-width:90vw;min-height:75px;min-width:500px;padding:10px;transform:translateZ(0);width:min-content}.monaco-dialog-box .dialog-toolbar-row{height:22px;padding-bottom:4px}.monaco-dialog-box .dialog-toolbar-row .actions-container{justify-content:flex-end}.monaco-dialog-box .dialog-message-row{align-items:center;display:flex;flex-grow:1;padding:0 10px}.monaco-dialog-box .dialog-message-row>.dialog-icon.codicon{align-self:baseline;flex:0 0 48px;font-size:48px;height:48px}.monaco-dialog-box .dialog-message-row .dialog-message-container{word-wrap:break-word;display:flex;flex-direction:column;overflow:hidden;padding-left:24px;text-overflow:ellipsis;user-select:text;-webkit-user-select:text;white-space:normal}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message{word-wrap:break-word;align-items:center;display:flex;flex:1;font-size:18px;line-height:22px;margin-bottom:8px;min-height:48px;white-space:normal}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-detail{flex:1;line-height:22px}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message a:focus{outline-style:solid;outline-width:1px}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row{display:flex;padding:15px 0 0}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row .dialog-checkbox-message{cursor:pointer;user-select:none;-webkit-user-select:none}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input{display:flex;padding:15px 0 0}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input .monaco-inputbox{flex:1}.monaco-dialog-box code{font-family:var(--monaco-monospace-font)}.monaco-dialog-box>.dialog-buttons-row{align-items:center;display:flex;overflow:hidden;padding-right:1px;padding:20px 10px 10px;white-space:nowrap}.monaco-dialog-box>.dialog-buttons-row>.dialog-buttons{display:flex;justify-content:flex-end;margin-left:67px;overflow:hidden;width:100%}.monaco-dialog-box>.dialog-buttons-row>.dialog-buttons>.monaco-button{margin:4px 5px;outline-offset:2px!important;overflow:hidden;padding:5px 10px;text-overflow:ellipsis;width:fit-content}",{});class Ii extends p.jG{constructor(e,t,i,o){super(),this.container=e,this.message=t,this.options=o,this.modalElement=this.container.appendChild((0,ke.$)(".monaco-dialog-modal-block.dimmed")),this.shadowElement=this.modalElement.appendChild((0,ke.$)(".dialog-shadow")),this.element=this.shadowElement.appendChild((0,ke.$)(".monaco-dialog-box")),this.element.setAttribute("role","dialog"),this.element.tabIndex=-1,(0,ke.jD)(this.element),this.buttonStyles=o.buttonStyles,Array.isArray(i)&&i.length>0?this.buttons=i:this.options.disableDefaultAction?this.buttons=[]:this.buttons=[(0,I.kg)(9696,"OK")];const n=this.element.appendChild((0,ke.$)(".dialog-buttons-row"));this.buttonsContainer=n.appendChild((0,ke.$)(".dialog-buttons"));const s=this.element.appendChild((0,ke.$)(".dialog-message-row"));if(this.iconElement=s.appendChild((0,ke.$)("#monaco-dialog-icon.dialog-icon")),this.iconElement.setAttribute("aria-label",this.getIconAriaLabel()),this.messageContainer=s.appendChild((0,ke.$)(".dialog-message-container")),(this.options.detail||this.options.renderBody)&&(this.messageContainer.appendChild((0,ke.$)(".dialog-message")).appendChild((0,ke.$)("#monaco-dialog-message-text.dialog-message-text")).innerText=this.message),this.messageDetailElement=this.messageContainer.appendChild((0,ke.$)("#monaco-dialog-message-detail.dialog-message-detail")),this.options.detail||!this.options.renderBody?this.messageDetailElement.innerText=this.options.detail?this.options.detail:t:this.messageDetailElement.style.display="none",this.options.renderBody){const e=this.messageContainer.appendChild((0,ke.$)("#monaco-dialog-message-body.dialog-message-body"));this.options.renderBody(e);for(const e of this.messageContainer.querySelectorAll("a"))e.tabIndex=0}if(this.options.inputs?this.inputs=this.options.inputs.map((e=>{const t=this.messageContainer.appendChild((0,ke.$)(".dialog-message-input")),i=this._register(new _i.cl(t,void 0,{placeholder:e.placeholder,type:e.type??"text",inputBoxStyles:o.inputBoxStyles}));return e.value&&(i.value=e.value),i})):this.inputs=[],this.options.checkboxLabel){const e=this.messageContainer.appendChild((0,ke.$)(".dialog-checkbox-row")),t=this.checkbox=this._register(new ki.Sc(this.options.checkboxLabel,!!this.options.checkboxChecked,o.checkboxStyles));e.appendChild(t.domNode);const i=e.appendChild((0,ke.$)(".dialog-checkbox-message"));i.innerText=this.options.checkboxLabel,this._register((0,ke.ko)(i,ke.Bx.CLICK,(()=>t.checked=!t.checked)))}const r=this.element.appendChild((0,ke.$)(".dialog-toolbar-row"));this.toolbarContainer=r.appendChild((0,ke.$)(".dialog-toolbar")),this.applyStyles()}getIconAriaLabel(){let e=(0,I.kg)(9697,"Info");switch(this.options.type){case"error":e=(0,I.kg)(9698,"Error");break;case"warning":e=(0,I.kg)(9699,"Warning");break;case"pending":e=(0,I.kg)(9700,"In Progress")}return e}updateMessage(e){this.messageDetailElement.innerText=e}async show(){return this.focusToReturn=this.container.ownerDocument.activeElement,new Promise((e=>{(0,ke.w_)(this.buttonsContainer);const t=this.buttonBar=this._register(new Si.WN(this.buttonsContainer)),i=this.rearrangeButtons(this.buttons,this.options.cancelId);i.forEach(((o,n)=>{const s=0===i[n].index,r=this.options.buttonDetails?this._register(t.addButtonWithDescription({secondary:!s,...this.buttonStyles})):this._register(t.addButton({secondary:!s,...this.buttonStyles}));r.label=(0,Ei.J2)(i[n].label,!0),r instanceof Si.LX&&(r.description=this.options.buttonDetails[i[n].index]),this._register(r.onDidClick((t=>{t&&ke.fs.stop(t),e({button:i[n].index,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map((e=>e.value)):void 0})})))}));const o=(0,ke.zk)(this.container);this._register((0,ke.ko)(o,"keydown",(t=>{const o=new yi.Zh(t);if(o.equals(512)&&o.preventDefault(),o.equals(3))return void(this.inputs.some((e=>e.hasFocus()))&&(ke.fs.stop(t),e({button:i.find((e=>e.index!==this.options.cancelId))?.index??0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map((e=>e.value)):void 0})));if(o.equals(10))return;let n=!1;if(o.equals(2)||o.equals(17)||o.equals(1026)||o.equals(15)){const e=[];let t=-1;if(this.messageContainer){const i=this.messageContainer.querySelectorAll("a");for(const o of i)e.push(o),(0,ke.X7)(o)&&(t=e.length-1)}for(const i of this.inputs)e.push(i),i.hasFocus()&&(t=e.length-1);if(this.checkbox&&(e.push(this.checkbox),this.checkbox.hasFocus()&&(t=e.length-1)),this.buttonBar)for(const i of this.buttonBar.buttons)e.push(i),i.hasFocus()&&(t=e.length-1);if(o.equals(2)||o.equals(17))-1===t&&(t=0),e[(t+1)%e.length].focus();else{-1===t&&(t=e.length);let i=t-1;-1===i&&(i=e.length-1),e[i].focus()}n=!0}n?ke.fs.stop(t,!0):this.options.keyEventProcessor&&this.options.keyEventProcessor(o)}),!0)),this._register((0,ke.ko)(o,"keyup",(t=>{ke.fs.stop(t,!0);const i=new yi.Zh(t);!this.options.disableCloseAction&&i.equals(9)&&e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})}),!0)),this._register((0,ke.ko)(this.element,"focusout",(e=>{e.relatedTarget&&this.element&&((0,ke.QX)(e.relatedTarget,this.element)||(this.focusToReturn=e.relatedTarget,e.target&&(e.target.focus(),ke.fs.stop(e,!0))))}),!1));const n="codicon-modifier-spin";if(this.iconElement.classList.remove(...S.L0.asClassNameArray(xi.W6.dialogError),...S.L0.asClassNameArray(xi.W6.dialogWarning),...S.L0.asClassNameArray(xi.W6.dialogInfo),...S.L0.asClassNameArray(xi.W6.loading),n),this.options.icon)this.iconElement.classList.add(...S.L0.asClassNameArray(this.options.icon));else switch(this.options.type){case"error":this.iconElement.classList.add(...S.L0.asClassNameArray(xi.W6.dialogError));break;case"warning":this.iconElement.classList.add(...S.L0.asClassNameArray(xi.W6.dialogWarning));break;case"pending":this.iconElement.classList.add(...S.L0.asClassNameArray(xi.W6.loading),n);break;case"none":this.iconElement.classList.add("no-codicon");break;default:this.iconElement.classList.add(...S.L0.asClassNameArray(xi.W6.dialogInfo))}if(!this.options.disableCloseAction){const t=this._register(new Ci.E(this.toolbarContainer,{})),i=this._register(new vi.rc("dialog.close",(0,I.kg)(9701,"Close Dialog"),S.L0.asClassName(xi.W6.dialogClose),!0,(async()=>{e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})})));t.push(i,{icon:!0,label:!1})}this.applyStyles(),this.element.setAttribute("aria-modal","true"),this.element.setAttribute("aria-labelledby","monaco-dialog-icon monaco-dialog-message-text"),this.element.setAttribute("aria-describedby","monaco-dialog-icon monaco-dialog-message-text monaco-dialog-message-detail monaco-dialog-message-body"),(0,ke.WU)(this.element),this.inputs.length>0?(this.inputs[0].focus(),this.inputs[0].select()):i.forEach(((e,i)=>{0===e.index&&t.buttons[i].focus()}))}))}applyStyles(){const e=this.options.dialogStyles,t=e.dialogForeground,i=e.dialogBackground,o=e.dialogShadow?`0 0px 8px ${e.dialogShadow}`:"",n=e.dialogBorder?`1px solid ${e.dialogBorder}`:"",s=e.textLinkForeground;if(this.shadowElement.style.boxShadow=o,this.element.style.color=t??"",this.element.style.backgroundColor=i??"",this.element.style.border=n,s)for(const e of this.messageContainer.getElementsByTagName("a"))e.style.color=s;let r;switch(this.options.type){case"error":r=e.errorIconForeground;break;case"warning":r=e.warningIconForeground;break;default:r=e.infoIconForeground}r&&(this.iconElement.style.color=r)}dispose(){super.dispose(),this.modalElement&&(this.modalElement.remove(),this.modalElement=void 0),this.focusToReturn&&(0,ke.QX)(this.focusToReturn,this.container.ownerDocument.body)&&(this.focusToReturn.focus(),this.focusToReturn=void 0)}rearrangeButtons(e,t){const i=e.map(((e,t)=>({label:e,index:t})));if(e.length<2)return i;if(Di.zx||Di.j9){if("number"==typeof t&&i[t]){const e=i.splice(t,1)[0];i.splice(1,0,e)}i.reverse()}else if(Di.uF&&"number"==typeof t&&i[t]){const e=i.splice(t,1)[0];i.push(e)}return i}}var Vi=i(28103),Mi=i(22475),Ti=i(34391),Ai=i(72361);let Li=class extends p.jG{constructor(e,t,i,o,n,s,r,a,c){super(),this.activityService=e,this.paneCompositeService=t,this.viewDescriptorService=i,this.viewsService=o,this.notificationService=n,this.statusbarService=s,this.layoutService=r,this.keybindingService=a,this.userActivityService=c,this.windowProgressStack=[],this.windowProgressStatusEntry=void 0}async withProgress(e,t,i){const{location:o}=e,n=async e=>{const i=this.userActivityService.markActive({whenHeldFor:15e3});try{return await t(e)}finally{i.dispose()}},s=t=>{const i=this.viewDescriptorService.getViewContainerById(t);if(i){const o=this.viewDescriptorService.getViewContainerLocation(i);if(null!==o)return this.withPaneCompositeProgress(t,o,n,{...e,location:t})}if(null!==this.viewDescriptorService.getViewDescriptorById(t))return this.withViewProgress(t,n,{...e,location:t});throw new Error(`Bad progress location: ${t}`)};if("string"==typeof o)return s(o);switch(o){case 15:{let t=e.priority;return t!==Z.AE.URGENT&&(this.notificationService.getFilter()===Z.Pl.ERROR||(0,Z.Xq)(e.source)&&this.notificationService.getFilter(e.source)===Z.Pl.ERROR)&&(t=Z.AE.SILENT),this.withNotificationProgress({...e,location:o,priority:t},n,i)}case 10:{const t=e.type;return e.command?this.withWindowProgress({...e,location:o,type:t},n):this.withNotificationProgress({delay:150,...e,priority:Z.AE.SILENT,location:15,type:t},n,i)}case 1:return this.withPaneCompositeProgress("workbench.view.explorer",0,n,{...e,location:o});case 3:return s("workbench.scm");case 5:return this.withPaneCompositeProgress("workbench.view.extensions",0,n,{...e,location:o});case 20:return this.withDialogProgress(e,n,i);default:throw new Error(`Bad progress location: ${o}`)}}withWindowProgress(e,t){const i=[e,new mi.ke((()=>this.updateWindowProgress()))],o=t(i[1]);let n=setTimeout((()=>{n=void 0,this.windowProgressStack.unshift(i),this.updateWindowProgress(),Promise.all([(0,vt.wR)(150),o]).finally((()=>{const e=this.windowProgressStack.indexOf(i);this.windowProgressStack.splice(e,1),this.updateWindowProgress()}))}),150);return o.finally((()=>clearTimeout(n)))}updateWindowProgress(e=0){if(e<this.windowProgressStack.length){const[t,i]=this.windowProgressStack[e],o=t.title,n=i.value&&i.value.message,s=t.command;let r,a;const c=t.source&&"string"!=typeof t.source?t.source.label:t.source;if(o&&n)r=(0,I.kg)(3965,"{0}: {1}",o,n),a=c?(0,I.kg)(3966,"[{0}] {1}: {2}",c,o,n):r;else if(o)r=o,a=c?(0,I.kg)(3967,"[{0}]: {1}",c,o):r;else{if(!n)return void this.updateWindowProgress(e+1);r=n,a=c?(0,I.kg)(3967,"[{0}]: {1}",c,n):r}const d={name:(0,I.kg)(3968,"Progress Message"),text:r,showProgress:t.type||!0,ariaLabel:r,tooltip:(0,Ti.pS)(a).trim(),command:s};this.windowProgressStatusEntry?this.windowProgressStatusEntry.update(d):this.windowProgressStatusEntry=this.statusbarService.addEntry(d,"status.progress",0)}else this.windowProgressStatusEntry?.dispose(),this.windowProgressStatusEntry=void 0}withNotificationProgress(e,t,i){const o=new class extends p.jG{get step(){return this._step}get done(){return this._done}constructor(){super(),this._onDidReport=this._register(new m.vl),this.onDidReport=this._onDidReport.event,this._onWillDispose=this._register(new m.vl),this.onWillDispose=this._onWillDispose.event,this._step=void 0,this._done=!1,this.promise=t(this),this.promise.finally((()=>{this.dispose()}))}report(e){this._step=e,this._onDidReport.fire(e)}cancel(e){i?.(e),this.dispose()}dispose(){this._done=!0,this._onWillDispose.fire(),super.dispose()}},n=()=>{const t=new vt.Zv;return this.withWindowProgress({location:10,title:e.title?(0,Vi.q)(e.title).toString():void 0,command:"notifications.showList",type:e.type},(e=>{function i(t){t.message&&e.report({message:(0,Vi.q)(t.message).toString()})}o.step&&i(o.step);const n=o.onDidReport((e=>i(e)));return t.p.finally((()=>n.dispose())),m.Jh.once(o.onWillDispose)((()=>t.complete())),t.p})),(0,p.s)((()=>t.complete()))},s=(t,i,s)=>{const r=new p.Cm,a=e.primaryActions?Array.from(e.primaryActions):[],c=e.secondaryActions?Array.from(e.secondaryActions):[];if(e.buttons&&e.buttons.forEach(((e,t)=>{const i=new class extends vi.rc{constructor(){super(`progress.button.${e}`,e,void 0,!0)}async run(){o.cancel(t)}};r.add(i),a.push(i)})),e.cancellable){const t=new class extends vi.rc{constructor(){super("progress.cancel","string"==typeof e.cancellable?e.cancellable:(0,I.kg)(3969,"Cancel"),void 0,!0)}async run(){o.cancel()}};r.add(t),a.push(t)}const d=this.notificationService.notify({severity:X.A.Info,message:(0,Ti.pS)(t),source:e.source,actions:{primary:a,secondary:c},progress:"number"==typeof s&&s>=0?{total:100,worked:s}:{infinite:!0},priority:i});let h;const l=e=>{(0,p.AS)(h),e||o.done||(h=n())};return r.add(d.onDidChangeVisibility(l)),i===Z.AE.SILENT&&l(!1),m.Jh.once(d.onDidClose)((()=>r.dispose())),d};let r,a,c;const d=t=>{var i,o;c=t?.message&&e.title?`${e.title}: ${t.message}`:e.title||t?.message,!r&&c&&("number"==typeof e.delay&&e.delay>0?"number"!=typeof a&&(a=setTimeout((()=>r=s(c,e.priority,t?.increment)),e.delay)):r=s(c,e.priority,t?.increment)),r&&(c&&r.updateMessage(c),"number"==typeof t?.increment&&(i=r,"number"==typeof(o=t.increment)&&o>=0?(i.progress.total(100),i.progress.worked(o)):i.progress.infinite()))};d(o.step);const h=o.onDidReport((e=>d(e)));return m.Jh.once(o.onWillDispose)((()=>h.dispose())),(async()=>{try{"number"==typeof e.delay&&e.delay>0?await o.promise:await Promise.all([(0,vt.wR)(800),o.promise])}finally{clearTimeout(a),r?.close()}})(),o.promise}withPaneCompositeProgress(e,t,i,o){const n=this.paneCompositeService.getProgressIndicator(e,t),s=n?this.withCompositeProgress(n,i,o):i({report:()=>{}});return 0===t&&this.showOnActivityBar(e,o,s),s}withViewProgress(e,t,i){const o=this.viewsService.getViewProgressIndicator(e),n=o?this.withCompositeProgress(o,t,i):t({report:()=>{}});if(0!==this.viewDescriptorService.getViewLocationById(e))return n;const s=this.viewDescriptorService.getViewContainerByViewId(e)?.id;return void 0===s||this.showOnActivityBar(s,i,n),n}showOnActivityBar(e,t,i){let o,n=setTimeout((()=>{n=void 0;const t=this.activityService.showViewContainerActivity(e,{badge:new wi.Vm((()=>"")),priority:100}),i=Date.now();o={dispose(){const e=Date.now()-i;e<300?setTimeout((()=>t.dispose()),300-e):t.dispose()}}}),t.delay||300);i.finally((()=>{clearTimeout(n),(0,p.AS)(o)}))}withCompositeProgress(e,t,i){let o;function n(t){let n,r;return void 0!==t&&("number"==typeof t?n=t:"number"==typeof t.increment&&(n=t.total??100,r=t.increment)),"number"==typeof n?(o||(o=e.show(n,i.delay),s.catch((()=>{})).finally((()=>o?.done()))),"number"==typeof r&&o.worked(r)):(o?.done(),e.showWhile(s,i.delay)),o}const s=t({report:e=>{n(e)}});return n(i.total),s}withDialogProgress(e,t,i){const o=new p.Cm,n=["workbench.action.quit","workbench.action.reloadWindow","copy","cut","editor.action.clipboardCopyAction","editor.action.clipboardCutAction"];let s;const r=t=>{const r=e.buttons||[];return e.sticky||r.push(e.cancellable?"boolean"==typeof e.cancellable?(0,I.kg)(3969,"Cancel"):e.cancellable:(0,I.kg)(3970,"Dismiss")),s=new Ii(this.layoutService.activeContainer,t,r,{type:"pending",detail:e.detail,cancelId:r.length-1,disableCloseAction:e.sticky,disableDefaultAction:e.sticky,keyEventProcessor:e=>{const t=this.keybindingService.softDispatch(e,this.layoutService.activeContainer);2===t.kind&&t.commandId&&(n.includes(t.commandId)||ke.fs.stop(e,!0))},buttonStyles:$t.cv,checkboxStyles:$t.$B,inputBoxStyles:$t.ho,dialogStyles:$t.Mh}),o.add(s),s.show().then((e=>{i?.(e.button),(0,p.AS)(s)})),s};let a,c=e.delay??0;const d=o.add(new vt.uC((()=>{c=0,a&&!s?s=r(a):a&&s.updateMessage(a)}),0)),h=function(e){a=e,d.isScheduled()||d.schedule(c)},l=t({report:e=>{h(e.message)}});return l.finally((()=>{(0,p.AS)(o)})),e.title&&h(e.title),l}};Li=(0,s.C)([(0,s.Q)(0,O.w),(0,s.Q)(1,F.b),(0,s.Q)(2,n.X),(0,s.Q)(3,Mi.R),(0,s.Q)(4,Y.O),(0,s.Q)(5,bi.S),(0,s.Q)(6,fi.x),(0,s.Q)(7,Bt.b),(0,s.Q)(8,Ai.H)],Li);var Pi=i(96334),Ri=i(7869),Bi=i(39371);let Oi=class extends p.jG{constructor(e){super(),this.paneCompositeParts=new Map;const t=e.createInstance(Ri.s),i=e.createInstance(Bi.E),o=e.createInstance(Pi.z);this.paneCompositeParts.set(1,t),this.paneCompositeParts.set(0,i),this.paneCompositeParts.set(2,o);const n=this._register(new p.Cm);this.onDidPaneCompositeOpen=m.Jh.any(...r.rl.map((e=>m.Jh.map(this.paneCompositeParts.get(e).onDidPaneCompositeOpen,(t=>({composite:t,viewContainerLocation:e})),n)))),this.onDidPaneCompositeClose=m.Jh.any(...r.rl.map((e=>m.Jh.map(this.paneCompositeParts.get(e).onDidPaneCompositeClose,(t=>({composite:t,viewContainerLocation:e})),n))))}openPaneComposite(e,t,i){return this.getPartByLocation(t).openPaneComposite(e,i)}getActivePaneComposite(e){return this.getPartByLocation(e).getActivePaneComposite()}getPaneComposite(e,t){return this.getPartByLocation(t).getPaneComposite(e)}getPaneComposites(e){return this.getPartByLocation(e).getPaneComposites()}getPinnedPaneCompositeIds(e){return this.getPartByLocation(e).getPinnedPaneCompositeIds()}getVisiblePaneCompositeIds(e){return this.getPartByLocation(e).getVisiblePaneCompositeIds()}getPaneCompositeIds(e){return this.getPartByLocation(e).getPaneCompositeIds()}getProgressIndicator(e,t){return this.getPartByLocation(t).getProgressIndicator(e)}hideActivePaneComposite(e){this.getPartByLocation(e).hideActivePaneComposite()}getLastActivePaneCompositeId(e){return this.getPartByLocation(e).getLastActivePaneCompositeId()}getPartByLocation(e){return(0,y.eU)(this.paneCompositeParts.get(e))}};Oi=(0,s.C)([(0,s.Q)(0,a._Y)],Oi);var Ni,Fi,Gi=i(46271),Wi=i(16093),zi=i(3560),Hi=i(47060),Qi=i(16849);!function(e){e[e.Maximized=0]="Maximized",e[e.Normal=1]="Normal",e[e.Fullscreen=2]="Fullscreen"}(Fi||(Fi={}));let Ui=class extends Hi.c{constructor(e,t,i,o,n,s){super(e,void 0,n,s),this.window=e,this.container=t,this.configurationService=o,this._onWillLayout=this._register(new m.vl),this.onWillLayout=this._onWillLayout.event,this._onDidLayout=this._register(new m.vl),this.onDidLayout=this._onDidLayout.event,this._onBeforeUnload=this._register(new m.vl),this.onBeforeUnload=this._onBeforeUnload.event,this._onUnload=this._register(new m.vl),this.onUnload=this._onUnload.event,this._onWillDispose=this._register(new m.vl),this.onWillDispose=this._onWillDispose.event,this.whenStylesHaveLoaded=i.wait().then((()=>{})),this.registerListeners()}registerListeners(){this._register((0,ke.ko)(this.window,ke.Bx.BEFORE_UNLOAD,(e=>this.handleBeforeUnload(e)))),this._register((0,ke.ko)(this.window,ke.Bx.UNLOAD,(()=>this.handleUnload()))),this._register((0,ke.ko)(this.window,"unhandledrejection",(e=>{(0,xe.dz)(e.reason),e.preventDefault()}))),this._register((0,ke.ko)(this.window,ke.Bx.RESIZE,(()=>this.layout()))),this._register((0,ke.ko)(this.container,ke.Bx.SCROLL,(()=>this.container.scrollTop=0))),Di.HZ?(this._register((0,ke.ko)(this.container,ke.Bx.DROP,(e=>ke.fs.stop(e,!0)))),this._register((0,ke.ko)(this.container,ke.Bx.WHEEL,(e=>e.preventDefault()),{passive:!1})),this._register((0,ke.ko)(this.container,ke.Bx.CONTEXT_MENU,(e=>ke.fs.stop(e,!0))))):(this._register((0,ke.ko)(this.window.document.body,ke.Bx.DRAG_OVER,(e=>ke.fs.stop(e)))),this._register((0,ke.ko)(this.window.document.body,ke.Bx.DROP,(e=>ke.fs.stop(e)))))}handleBeforeUnload(e){let t;if(this._onBeforeUnload.fire({veto(e){e&&(t=e)}}),t)return void this.handleVetoBeforeClose(e,t);const i=this.configurationService.getValue("window.confirmBeforeClose");("always"===i||"keyboardOnly"===i&&ke.Di.getInstance().isModifierPressed)&&this.confirmBeforeClose(e)}handleVetoBeforeClose(e,t){this.preventUnload(e)}preventUnload(e){e.preventDefault(),e.returnValue=(0,I.kg)(3971,"Changes that you made may not be saved. Please check press 'Cancel' and try again.")}confirmBeforeClose(e){this.preventUnload(e)}handleUnload(){this._onUnload.fire()}layout(){const e=(0,ke.tG)(this.window.document.body,this.container);this._onWillLayout.fire(e),this._onDidLayout.fire(e)}createState(){return{bounds:{x:this.window.screenX,y:this.window.screenY,width:this.window.outerWidth,height:this.window.outerHeight},zoomLevel:(0,wt.kO)(this.window)}}dispose(){this._store.isDisposed||(this._onWillDispose.fire(),super.dispose())}};Ui=(0,s.C)([(0,s.Q)(3,z.p),(0,s.Q)(4,Qi.v),(0,s.Q)(5,ni.P)],Ui);let $i=class extends p.jG{static{Ni=this}static{this.DEFAULT_SIZE={width:800,height:600}}static{this.WINDOW_IDS=(0,ke.Q2)(Te.Gs)+1}constructor(e,t,i,o,n,s){super(),this.layoutService=e,this.dialogService=t,this.configurationService=i,this.telemetryService=o,this.hostService=n,this.environmentService=s,this._onDidOpenAuxiliaryWindow=this._register(new m.vl),this.onDidOpenAuxiliaryWindow=this._onDidOpenAuxiliaryWindow.event,this.windows=new Map}async open(e){(0,Gi.G)("code/auxiliaryWindow/willOpen");const t=await this.openWindow(e);if(!t)throw new Error((0,I.kg)(3972,"Unable to open a new window."));const i=await this.resolveWindowId(t);(0,Te.yb)(t,i);const o=new p.Cm,{container:n,stylesLoaded:s}=this.createContainer(t,o,e),r=this.createAuxiliaryWindow(t,n,s),a=new p.Cm;this.windows.set(t.vscodeWindowId,r),a.add((0,p.s)((()=>this.windows.delete(t.vscodeWindowId))));const c=new p.Cm;return m.Jh.once(r.onWillDispose)((()=>{t.close(),o.dispose(),a.dispose(),c.dispose()})),a.add((0,ke.S0)(t)),this._onDidOpenAuxiliaryWindow.fire({window:r,disposables:c}),(0,Gi.G)("code/auxiliaryWindow/didOpen"),this.telemetryService.publicLog2("auxiliaryWindowOpen",{bounds:!!e?.bounds}),r}createAuxiliaryWindow(e,t,i){return new Ui(e,t,i,this.configurationService,this.hostService,this.environmentService)}async openWindow(e){const t=(0,ke.fz)(),i=t.screenX,o=t.screenY,n=t.outerWidth,s=t.outerHeight,r=Math.max(e?.bounds?.width??Ni.DEFAULT_SIZE.width,zi.qd.WIDTH),a=Math.max(e?.bounds?.height??Ni.DEFAULT_SIZE.height,zi.qd.HEIGHT);let c={x:e?.bounds?.x??Math.max(i+n/2-r/2,0),y:e?.bounds?.y??Math.max(o+s/2-a/2,0),width:r,height:a};e?.bounds||c.x!==i||c.y!==o||(c={...c,x:c.x+30,y:c.y+30});const d=(0,f.Yc)(["popup=yes",`left=${c.x}`,`top=${c.y}`,`width=${c.width}`,`height=${c.height}`,e?.nativeTitlebar?"window-native-titlebar=yes":void 0,e?.disableFullscreen?"window-disable-fullscreen=yes":void 0,e?.mode===Fi.Maximized?"window-maximized=yes":void 0,e?.mode===Fi.Fullscreen?"window-fullscreen=yes":void 0]),h=Te.Gs.open(Di.gm?"":"about:blank",void 0,d.join(","));return!h&&Di.HZ?(await this.dialogService.prompt({type:X.A.Warning,message:(0,I.kg)(3973,"The browser interrupted the opening of a new window. Press 'Retry' to try again."),detail:(0,I.kg)(3974,"To avoid this problem in the future, please ensure to allow popups for this website."),buttons:[{label:(0,I.kg)(3975,"&&Retry"),run:()=>this.openWindow(e)}],cancelButton:!0})).result:h?.window}async resolveWindowId(e){return Ni.WINDOW_IDS++}createContainer(e,t,i){this.applyMeta(e);const{stylesLoaded:o}=this.applyCSS(e,t);return{stylesLoaded:o,container:this.applyHTML(e,t)}}applyMeta(e){for(const t of['meta[charset="utf-8"]','meta[http-equiv="Content-Security-Policy"]','meta[name="viewport"]','meta[name="theme-color"]']){const i=Te.Gs.document.querySelector(t);if(i){const o=(0,ke.__)(e.document.head);if((0,ke.ts)(i,o),'meta[http-equiv="Content-Security-Policy"]'===t){const e=o.getAttribute("content");e&&o.setAttribute("content",e.replace(/(script-src[^\;]*)/,"script-src 'none'"))}}}const t=Te.Gs.document.querySelector('link[rel="icon"]');if(t){const i=(0,ke.Tk)(e.document.head);(0,ke.ts)(t,i)}}applyCSS(e,t){(0,Gi.G)("code/auxiliaryWindow/willApplyCSS");const i=new Map,o=new vt.WW;o.wait().then((()=>(0,Gi.G)("code/auxiliaryWindow/didLoadCSSStyles")));const n=t.add(new p.Cm);let s=0;function r(){0==--s&&(n.dispose(),o.open())}function a(t){if((0,ke.qt)(t))return;const o=e.document.head.appendChild(t.cloneNode(!0));"link"===t.tagName.toLowerCase()&&(s++,n.add((0,ke.ko)(o,"load",r)),n.add((0,ke.ko)(o,"error",r))),i.set(t,o)}s++;try{for(const e of Te.Gs.document.head.querySelectorAll('link[rel="stylesheet"], style'))a(e)}finally{r()}return t.add((0,ke.Ym)(e)),t.add(ke.FK.observe(Te.Gs.document.head,t,{childList:!0,subtree:!0})((e=>{for(const t of e)if("childList"===t.type&&"title"!==t.target.nodeName.toLowerCase()&&"script"!==t.target.nodeName.toLowerCase()&&"meta"!==t.target.nodeName.toLowerCase()){for(const e of t.addedNodes)if(!(0,ke.sb)(e)||"style"!==e.tagName.toLowerCase()&&"link"!==e.tagName.toLowerCase()){if(e.nodeType===Node.TEXT_NODE&&e.parentNode){const t=i.get(e.parentNode);t&&(t.textContent=e.textContent)}}else a(e);for(const e of t.removedNodes){const t=i.get(e);t&&(t.parentNode?.removeChild(t),i.delete(e))}}}))),(0,Gi.G)("code/auxiliaryWindow/didApplyCSS"),{stylesLoaded:o}}applyHTML(e,t){(0,Gi.G)("code/auxiliaryWindow/willApplyHTML");const i=document.createElement("div");return i.setAttribute("role","application"),(0,ke.nE)(i,0,0,0,0,"relative"),i.style.display="flex",i.style.height="100%",i.style.flexDirection="column",e.document.body.append(i),t.add((0,ke.L7)(Te.Gs.document.documentElement,e.document.documentElement)),t.add((0,ke.L7)(Te.Gs.document.body,e.document.body)),t.add((0,ke.L7)(this.layoutService.mainContainer,i,["class"])),(0,Gi.G)("code/auxiliaryWindow/didApplyHTML"),i}getWindow(e){return this.windows.get(e)}};$i=Ni=(0,s.C)([(0,s.Q)(0,Ce.Y),(0,s.Q)(1,Wi.X),(0,s.Q)(2,z.p),(0,s.Q)(3,b.k),(0,s.Q)(4,Qi.v),(0,s.Q)(5,ni.P)],$i);var Ki=i(45484),ji=i(47622),Zi=i(40240),Yi=i(72233);let qi=class extends g.zv{constructor(e,t,i,o,n,s,r,a,c,d,h,l){super(e,{mergeViewWithContainerWhenSingleView:!1},r,i,o,c,n,d,a,s,h,l),this.constantViewDescriptors=new Map,this.allViews=new Map,this._register(t((e=>{this.filterValue=e,this.onFilterChanged(e)}))),this._register(this.viewContainerModel.onDidChangeActiveViewDescriptors((()=>{this.updateAllViews(this.viewContainerModel.activeViewDescriptors)})))}updateAllViews(e){e.forEach((e=>{const t=this.getFilterOn(e);t&&(this.allViews.has(t)||this.allViews.set(t,new Map),this.allViews.get(t).set(e.id,e),this.filterValue&&!this.filterValue.includes(t)&&this.panes.find((t=>t.id===e.id))&&this.viewContainerModel.setVisible(e.id,!1))}))}addConstantViewDescriptors(e){e.forEach((e=>this.constantViewDescriptors.set(e.id,e)))}onFilterChanged(e){0===this.allViews.size&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),this.getViewsNotForTarget(e).forEach((e=>this.viewContainerModel.setVisible(e.id,!1))),this.getViewsForTarget(e).forEach((e=>this.viewContainerModel.setVisible(e.id,!0)))}getViewsForTarget(e){const t=[];for(let i=0;i<e.length;i++)this.allViews.has(e[i])&&t.push(...Array.from(this.allViews.get(e[i]).values()));return t}getViewsNotForTarget(e){const t=this.allViews.keys();let i=t.next(),o=[];for(;!i.done;){let n=!1;e.forEach((e=>{i.value===e&&(n=!0)})),n||(o=o.concat(this.getViewsForTarget([i.value]))),i=t.next()}return o}onDidAddViewDescriptors(e){const t=super.onDidAddViewDescriptors(e);for(let i=0;i<e.length;i++)this.constantViewDescriptors.has(e[i].viewDescriptor.id)&&t[i].setExpanded(!1);return 0===this.allViews.size&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),t}openView(e,t){const i=super.openView(e,t);if(i){const t=Array.from(this.allViews.entries()).find((t=>t[1].has(e)));t&&!this.filterValue?.includes(t[0])&&this.setFilter(t[1].get(e))}return i}};qi=(0,s.C)([(0,s.Q)(2,z.p),(0,s.Q)(3,Ce.Y),(0,s.Q)(4,b.k),(0,s.Q)(5,h.C),(0,s.Q)(6,a._Y),(0,s.Q)(7,Zi.G),(0,s.Q)(8,ne.Z),(0,s.Q)(9,l.c),(0,s.Q)(10,fe.V),(0,s.Q)(11,n.X)],qi);let Ji=class extends p.jG{constructor(e,t,i,o,n){super(),this.viewDescriptorService=e,this.paneCompositeService=t,this.contextKeyService=i,this.layoutService=o,this.editorService=n,this._onDidChangeViewVisibility=this._register(new m.vl),this.onDidChangeViewVisibility=this._onDidChangeViewVisibility.event,this._onDidChangeViewContainerVisibility=this._register(new m.vl),this.onDidChangeViewContainerVisibility=this._onDidChangeViewContainerVisibility.event,this._onDidChangeFocusedView=this._register(new m.vl),this.onDidChangeFocusedView=this._onDidChangeFocusedView.event,this.viewContainerDisposables=this._register(new p.$w),this.viewDisposable=new Map,this.enabledViewContainersContextKeys=new Map,this.visibleViewContextKeys=new Map,this.viewPaneContainers=new Map,this._register((0,p.s)((()=>{this.viewDisposable.forEach((e=>e.dispose())),this.viewDisposable.clear()}))),this.viewDescriptorService.viewContainers.forEach((e=>this.onDidRegisterViewContainer(e,this.viewDescriptorService.getViewContainerLocation(e)))),this._register(this.viewDescriptorService.onDidChangeViewContainers((({added:e,removed:t})=>this.onDidChangeContainers(e,t)))),this._register(this.viewDescriptorService.onDidChangeContainerLocation((({viewContainer:e,from:t,to:i})=>this.onDidChangeContainerLocation(e,t,i)))),this._register(this.paneCompositeService.onDidPaneCompositeOpen((e=>this._onDidChangeViewContainerVisibility.fire({id:e.composite.getId(),visible:!0,location:e.viewContainerLocation})))),this._register(this.paneCompositeService.onDidPaneCompositeClose((e=>this._onDidChangeViewContainerVisibility.fire({id:e.composite.getId(),visible:!1,location:e.viewContainerLocation})))),this.focusedViewContextKey=ji.kI.bindTo(i)}onViewsAdded(e){for(const t of e)this.onViewsVisibilityChanged(t,t.isBodyVisible())}onViewsVisibilityChanged(e,t){this.getOrCreateActiveViewContextKey(e).set(t),this._onDidChangeViewVisibility.fire({id:e.id,visible:t})}onViewsRemoved(e){for(const t of e)this.onViewsVisibilityChanged(t,!1)}getOrCreateActiveViewContextKey(e){const t=(0,ji.sQ)(e.id);let i=this.visibleViewContextKeys.get(t);return i||(i=new c.N1(t,!1).bindTo(this.contextKeyService),this.visibleViewContextKeys.set(t,i)),i}onDidChangeContainers(e,t){for(const{container:e,location:i}of t)this.onDidDeregisterViewContainer(e,i);for(const{container:t,location:i}of e)this.onDidRegisterViewContainer(t,i)}onDidRegisterViewContainer(e,t){this.registerPaneComposite(e,t);const i=new p.Cm,o=this.viewDescriptorService.getViewContainerModel(e);this.onViewDescriptorsAdded(o.allViewDescriptors,e),i.add(o.onDidChangeAllViewDescriptors((({added:t,removed:i})=>{this.onViewDescriptorsAdded(t,e),this.onViewDescriptorsRemoved(i)}))),this.updateViewContainerEnablementContextKey(e),i.add(o.onDidChangeActiveViewDescriptors((()=>this.updateViewContainerEnablementContextKey(e)))),i.add(this.registerOpenViewContainerAction(e)),this.viewContainerDisposables.set(e.id,i)}onDidDeregisterViewContainer(e,t){this.deregisterPaneComposite(e,t),this.viewContainerDisposables.deleteAndDispose(e.id)}onDidChangeContainerLocation(e,t,i){this.deregisterPaneComposite(e,t),this.registerPaneComposite(e,i),this.layoutService.isVisible(to(i))&&1===this.viewDescriptorService.getViewContainersByLocation(i).filter((e=>this.isViewContainerActive(e.id))).length&&this.openViewContainer(e.id)}onViewDescriptorsAdded(e,t){if(null!==this.viewDescriptorService.getViewContainerLocation(t))for(const i of e){const e=new p.Cm;e.add(this.registerOpenViewAction(i)),e.add(this.registerFocusViewAction(i,t.title)),e.add(this.registerResetViewLocationAction(i)),this.viewDisposable.set(i,e)}}onViewDescriptorsRemoved(e){for(const t of e){const e=this.viewDisposable.get(t);e&&(e.dispose(),this.viewDisposable.delete(t))}}updateViewContainerEnablementContextKey(e){let t=this.enabledViewContainersContextKeys.get(e.id);t||(t=this.contextKeyService.createKey(Xi(e.id),!1),this.enabledViewContainersContextKeys.set(e.id,t)),t.set(!(e.hideIfEmpty&&0===this.viewDescriptorService.getViewContainerModel(e).activeViewDescriptors.length))}async openComposite(e,t,i){return this.paneCompositeService.openPaneComposite(e,t,i)}getComposite(e,t){return this.paneCompositeService.getPaneComposite(e,t)}isViewContainerVisible(e){const t=this.viewDescriptorService.getViewContainerById(e);if(!t)return!1;const i=this.viewDescriptorService.getViewContainerLocation(t);return null!==i&&this.paneCompositeService.getActivePaneComposite(i)?.getId()===e}isViewContainerActive(e){const t=this.viewDescriptorService.getViewContainerById(e);return!!t&&(!t.hideIfEmpty||this.viewDescriptorService.getViewContainerModel(t).activeViewDescriptors.length>0)}getVisibleViewContainer(e){const t=this.paneCompositeService.getActivePaneComposite(e)?.getId();return t?this.viewDescriptorService.getViewContainerById(t):null}getActiveViewPaneContainerWithId(e){const t=this.viewDescriptorService.getViewContainerById(e);return t?this.getActiveViewPaneContainer(t):null}async openViewContainer(e,t){const i=this.viewDescriptorService.getViewContainerById(e);if(i){const o=this.viewDescriptorService.getViewContainerLocation(i);if(null!==o)return await this.paneCompositeService.openPaneComposite(e,o,t)||null}return null}async closeViewContainer(e){const t=this.viewDescriptorService.getViewContainerById(e);if(t){const e=this.viewDescriptorService.getViewContainerLocation(t),i=null!==e&&this.paneCompositeService.getActivePaneComposite(e);if(null!==e)return i?this.layoutService.setPartHidden(!0,to(e)):void 0}}isViewVisible(e){const t=this.getActiveViewWithId(e);return t?.isBodyVisible()||!1}getActiveViewWithId(e){const t=this.viewDescriptorService.getViewContainerByViewId(e);if(t){const i=this.getActiveViewPaneContainer(t);if(i)return i.getView(e)}return null}getViewWithId(e){const t=this.viewDescriptorService.getViewContainerByViewId(e);if(t){const i=this.viewPaneContainers.get(t.id);if(i)return i.getView(e)}return null}getFocusedViewName(){const e=this.contextKeyService.getContextKeyValue(ji.kI.key)??"",t=this.editorService.activeTextEditorControl?.hasTextFocus()?(0,I.kg)(3976,"Text Editor"):void 0;return this.viewDescriptorService.getViewDescriptorById(e.toString())?.name?.value??t??""}async openView(e,t){const i=this.viewDescriptorService.getViewContainerByViewId(e);if(!i)return null;if(!this.viewDescriptorService.getViewContainerModel(i).activeViewDescriptors.some((t=>t.id===e)))return null;const o=this.viewDescriptorService.getViewContainerLocation(i),n=this.getComposite(i.id,o);if(n){const i=await this.openComposite(n.id,o);if(i&&i.openView)return i.openView(e,t)||null;t&&i?.focus()}return null}closeView(e){const t=this.viewDescriptorService.getViewContainerByViewId(e);if(t){const i=this.getActiveViewPaneContainer(t);if(i){const o=i.getView(e);if(o)if(1===i.views.length){const i=this.viewDescriptorService.getViewContainerLocation(t);0===i?this.layoutService.setPartHidden(!0,"workbench.parts.sidebar"):1!==i&&2!==i||this.paneCompositeService.hideActivePaneComposite(i),this.focusedViewContextKey.get()===e&&this.focusedViewContextKey.reset()}else o.setExpanded(!1)}}}getActiveViewPaneContainer(e){const t=this.viewDescriptorService.getViewContainerLocation(e);if(null===t)return null;const i=this.paneCompositeService.getActivePaneComposite(t);return i?.getId()===e.id&&i.getViewPaneContainer()||null}getViewProgressIndicator(e){const t=this.viewDescriptorService.getViewContainerByViewId(e);if(!t)return;const i=this.viewPaneContainers.get(t.id);if(!i)return;const o=i.getView(e);return o?i.isViewMergedWithContainer()?this.getViewContainerProgressIndicator(t):o.getProgressIndicator():void 0}getViewContainerProgressIndicator(e){const t=this.viewDescriptorService.getViewContainerLocation(e);if(null!==t)return this.paneCompositeService.getProgressIndicator(e.id,t)}registerOpenViewContainerAction(e){const t=new p.Cm;if(e.openCommandActionDescriptor){const{id:i,mnemonicTitle:o,keybindings:s,order:r}=e.openCommandActionDescriptor??{id:e.id},a=e.openCommandActionDescriptor.title??e.title,d=this;if(t.add((0,_.ug)(class extends _.L{constructor(){super({id:i,get title(){const t=d.viewDescriptorService.getViewContainerLocation(e),i="string"==typeof a?a:a.value,o="string"==typeof a?a:a.original;return 0===t?{value:(0,I.kg)(3977,"Show {0}",i),original:`Show ${o}`}:{value:(0,I.kg)(3978,"Toggle {0}",i),original:`Toggle ${o}`}},category:x.L.View,precondition:c.M$.has(Xi(e.id)),keybinding:s?{...s,weight:200}:void 0,f1:!0})}async run(t){const i=t.get(U.m),o=t.get(n.X),s=t.get(Ce.Y),r=t.get(Mi.R),a=o.getViewContainerLocation(e);switch(a){case 2:case 0:{const t=0===a?"workbench.parts.sidebar":"workbench.parts.auxiliarybar";r.isViewContainerVisible(e.id)&&s.hasFocus(t)?i.activeGroup.focus():await r.openViewContainer(e.id,!0);break}case 1:r.isViewContainerVisible(e.id)&&s.hasFocus("workbench.parts.panel")?r.closeViewContainer(e.id):await r.openViewContainer(e.id,!0)}}})),o){const n=this.viewDescriptorService.getDefaultViewContainerLocation(e);t.add(_.ZG.appendMenuItem(_.D8.MenubarViewMenu,{command:{id:i,title:o},group:0===n?"3_views":"4_panels",when:c.M$.has(Xi(e.id)),order:r??Number.MAX_VALUE}))}}return t}registerOpenViewAction(e){const t=new p.Cm;if(e.openCommandActionDescriptor){const i=e.openCommandActionDescriptor.title??e.name,o=e.openCommandActionDescriptor.id,s=this;if(t.add((0,_.ug)(class extends _.L{constructor(){super({id:o,get title(){const t=s.viewDescriptorService.getViewLocationById(e.id),o="string"==typeof i?i:i.value,n="string"==typeof i?i:i.original;return 0===t?{value:(0,I.kg)(3977,"Show {0}",o),original:`Show ${n}`}:{value:(0,I.kg)(3978,"Toggle {0}",o),original:`Toggle ${n}`}},category:x.L.View,precondition:c.M$.has(`${e.id}.active`),keybinding:e.openCommandActionDescriptor.keybindings?{...e.openCommandActionDescriptor.keybindings,weight:200}:void 0,f1:!0})}async run(t){const i=t.get(U.m),o=t.get(n.X),s=t.get(Ce.Y),r=t.get(Mi.R),a=t.get(d.f);if(ji.kI.getValue(a)===e.id){const t=o.getViewLocationById(e.id);0===o.getViewLocationById(e.id)?i.activeGroup.focus():null!==t&&s.setPartHidden(!0,to(t))}else r.openView(e.id,!0)}})),e.openCommandActionDescriptor.mnemonicTitle){const i=this.viewDescriptorService.getDefaultContainerById(e.id);if(i){const n=this.viewDescriptorService.getDefaultViewContainerLocation(i);t.add(_.ZG.appendMenuItem(_.D8.MenubarViewMenu,{command:{id:o,title:e.openCommandActionDescriptor.mnemonicTitle},group:0===n?"3_views":"4_panels",when:c.M$.has(`${e.id}.active`),order:e.openCommandActionDescriptor.order??Number.MAX_VALUE}))}}}return t}registerFocusViewAction(e,t){return(0,_.ug)(class extends _.L{constructor(){const i=(0,I.aS)(3979,"Focus on {0} View",e.name.value);super({id:e.focusCommand?e.focusCommand.id:`${e.id}.focus`,title:i,category:t,menu:[{id:_.D8.CommandPalette,when:e.when}],keybinding:{when:c.M$.has(`${e.id}.active`),weight:200,primary:e.focusCommand?.keybindings?.primary,secondary:e.focusCommand?.keybindings?.secondary,linux:e.focusCommand?.keybindings?.linux,mac:e.focusCommand?.keybindings?.mac,win:e.focusCommand?.keybindings?.win},metadata:{description:i.value,args:[{name:"focusOptions",description:"Focus Options",schema:{type:"object",properties:{preserveFocus:{type:"boolean",default:!1}}}}]}})}run(t,i){t.get(Mi.R).openView(e.id,!i?.preserveFocus)}})}registerResetViewLocationAction(e){return(0,_.ug)(class extends _.L{constructor(){super({id:`${e.id}.resetViewLocation`,title:(0,I.aS)(3980,"Reset Location"),menu:[{id:_.D8.ViewTitleContext,when:c.M$.or(c.M$.and(c.M$.equals("view",e.id),c.M$.equals(`${e.id}.defaultViewLocation`,!1))),group:"1_hide",order:2}]})}run(t){const i=t.get(n.X),o=i.getDefaultContainerById(e.id),s=i.getViewContainerModel(o);if(o.hideIfEmpty&&0===s.visibleViewDescriptors.length){const e=i.getDefaultViewContainerLocation(o);i.moveViewContainerToLocation(o,e,void 0,this.desc.id)}i.moveViewsToContainer([e],i.getDefaultContainerById(e.id),void 0,this.desc.id),t.get(Mi.R).openView(e.id,!0)}})}registerPaneComposite(e,t){const i=this;let o=class extends Yi.aN{constructor(t,i,o,n,s,r,a){super(e.id,t,o,n,s,r,a,i)}createViewPaneContainer(o){const n=this._register(new p.Cm),s=i.createViewPaneContainer(o,e,t,n,this.instantiationService);return s instanceof qi||n.add(m.Jh.any(s.onDidAddViews,s.onDidRemoveViews,s.onTitleAreaUpdate)((()=>{this.updateTitleArea()}))),s}};o=(0,s.C)([(0,s.Q)(0,b.k),(0,s.Q)(1,fe.V),(0,s.Q)(2,h.C),(0,s.Q)(3,a._Y),(0,s.Q)(4,Zi.G),(0,s.Q)(5,ne.Z),(0,s.Q)(6,l.c)],o),u.O.as(eo(t)).registerPaneComposite(Yi.vM.create(o,e.id,"string"==typeof e.title?e.title:e.title.value,(0,y.Kg)(e.icon)?e.icon:void 0,e.order,e.requestedIndex,e.icon instanceof v.rz?e.icon:void 0))}deregisterPaneComposite(e,t){u.O.as(eo(t)).deregisterPaneComposite(e.id)}createViewPaneContainer(e,t,i,o,n){const s=n.createInstance(t.ctorDescriptor.ctor,...t.ctorDescriptor.staticArguments||[]);return this.viewPaneContainers.set(s.getId(),s),o.add((0,p.s)((()=>this.viewPaneContainers.delete(s.getId())))),o.add(s.onDidAddViews((e=>this.onViewsAdded(e)))),o.add(s.onDidChangeViewVisibility((e=>this.onViewsVisibilityChanged(e,e.isBodyVisible())))),o.add(s.onDidRemoveViews((e=>this.onViewsRemoved(e)))),o.add(s.onDidFocusView((e=>{this.focusedViewContextKey.get()!==e.id&&(this.focusedViewContextKey.set(e.id),this._onDidChangeFocusedView.fire())}))),o.add(s.onDidBlurView((e=>{this.focusedViewContextKey.get()===e.id&&(this.focusedViewContextKey.reset(),this._onDidChangeFocusedView.fire())}))),s}};function Xi(e){return`viewContainer.${e}.enabled`}function eo(e){switch(e){case 2:return Yi.Fd.Auxiliary;case 1:return Yi.Fd.Panels;default:return Yi.Fd.Viewlets}}function to(e){switch(e){case 2:return"workbench.parts.auxiliarybar";case 1:return"workbench.parts.panel";default:return"workbench.parts.sidebar"}}Ji=(0,s.C)([(0,s.Q)(0,n.X),(0,s.Q)(1,F.b),(0,s.Q)(2,d.f),(0,s.Q)(3,Ce.Y),(0,s.Q)(4,be.I)],Ji);var io=i(21979),oo=i(39639);class no{constructor(){this.onWillInstantiateEditorPane=oo.nQ.onWillInstantiateEditorPane}didInstantiateEditorPane(e){return oo.nQ.didInstantiateEditorPane(e)}}var so=i(88185),ro=i(59496);class ao{constructor(){this._providers=new Map,this._onDidChange=new m.vl,this.onDidChange=this._onDidChange.event}dispose(){this._onDidChange.dispose()}register(e,t,i,o){const n=this._makeKey(e,t);if(this._providers.has(n))throw new Error(`A provider for the command ${t} and menu ${e} is already registered.`);this._providers.set(n,i);const s=o?.((()=>{this._onDidChange.fire(e)}));return(0,p.s)((()=>{s?.dispose(),this._providers.delete(n)}))}lookUp(e,t){return this._providers.get(this._makeKey(e,t))}_makeKey(e,t){return`${e.id}/${t instanceof _.D8?t.id:t}`}}var co,ho=i(37868),lo=i(36326),uo=i(8828),po=i(34559),go=i(80797),mo=i(58080),bo=i(18304),wo=i(27713),vo=i(53845),fo=i(89519);class yo{constructor(){this.uris=[]}async perform(){return this}toString(){return"(noop)"}}class Co{constructor(e,t,i){this.newUri=e,this.oldUri=t,this.options=i,this.type="rename"}}let So=co=class{constructor(e,t,i,o){this._edits=e,this._undoRedoInfo=t,this._workingCopyFileService=i,this._fileService=o}get uris(){return this._edits.flatMap((e=>[e.newUri,e.oldUri]))}async perform(e){const t=[],i=[];for(const e of this._edits)void 0===e.options.overwrite&&e.options.ignoreIfExists&&await this._fileService.exists(e.newUri)||(t.push({file:{source:e.oldUri,target:e.newUri},overwrite:e.options.overwrite}),i.push(new Co(e.oldUri,e.newUri,e.options)));return 0===t.length?new yo:(await this._workingCopyFileService.move(t,e,this._undoRedoInfo),new co(i,{isUndoing:!0},this._workingCopyFileService,this._fileService))}toString(){return`(rename ${this._edits.map((e=>`${e.oldUri} to ${e.newUri}`)).join(", ")})`}};So=co=(0,s.C)([(0,s.Q)(2,wo.r),(0,s.Q)(3,ve.$)],So);class ko{constructor(e,t,i){this.newUri=e,this.oldUri=t,this.options=i,this.type="copy"}}let _o=class{constructor(e,t,i,o,n){this._edits=e,this._undoRedoInfo=t,this._workingCopyFileService=i,this._fileService=o,this._instaService=n}get uris(){return this._edits.flatMap((e=>[e.newUri,e.oldUri]))}async perform(e){const t=[];for(const e of this._edits)void 0===e.options.overwrite&&e.options.ignoreIfExists&&await this._fileService.exists(e.newUri)||t.push({file:{source:e.oldUri,target:e.newUri},overwrite:e.options.overwrite});if(0===t.length)return new yo;const i=await this._workingCopyFileService.copy(t,e,this._undoRedoInfo),o=[];for(let e=0;e<i.length;e++){const t=i[e],n=this._edits[e];o.push(new Do(t.resource,{recursive:!0,folder:this._edits[e].options.folder||t.isDirectory,...n.options},!1))}return this._instaService.createInstance(Io,o,{isUndoing:!0})}toString(){return`(copy ${this._edits.map((e=>`${e.oldUri} to ${e.newUri}`)).join(", ")})`}};_o=(0,s.C)([(0,s.Q)(2,wo.r),(0,s.Q)(3,ve.$),(0,s.Q)(4,a._Y)],_o);class xo{constructor(e,t,i){this.newUri=e,this.options=t,this.contents=i,this.type="create"}}let Eo=class{constructor(e,t,i,o,n,s){this._edits=e,this._undoRedoInfo=t,this._fileService=i,this._workingCopyFileService=o,this._instaService=n,this._textFileService=s}get uris(){return this._edits.map((e=>e.newUri))}async perform(e){const t=[],i=[],o=[];for(const e of this._edits)if(!(e.newUri.scheme===$.ny.untitled||void 0===e.options.overwrite&&e.options.ignoreIfExists&&await this._fileService.exists(e.newUri))){if(e.options.folder)t.push({resource:e.newUri});else{const t=void 0!==e.contents?e.contents:await this._textFileService.getEncodedReadable(e.newUri);i.push({resource:e.newUri,contents:t,overwrite:e.options.overwrite})}o.push(new Do(e.newUri,e.options,!e.options.folder&&!e.contents))}return 0===t.length&&0===i.length?new yo:(await this._workingCopyFileService.createFolder(t,e,this._undoRedoInfo),await this._workingCopyFileService.create(i,e,this._undoRedoInfo),this._instaService.createInstance(Io,o,{isUndoing:!0}))}toString(){return`(create ${this._edits.map((e=>e.options.folder?`folder ${e.newUri}`:`file ${e.newUri} with ${e.contents?.byteLength||0} bytes`)).join(", ")})`}};Eo=(0,s.C)([(0,s.Q)(2,ve.$),(0,s.Q)(3,wo.r),(0,s.Q)(4,a._Y),(0,s.Q)(5,fo.a)],Eo);class Do{constructor(e,t,i){this.oldUri=e,this.options=t,this.undoesCreate=i,this.type="delete"}}let Io=class{constructor(e,t,i,o,n,s,r){this._edits=e,this._undoRedoInfo=t,this._workingCopyFileService=i,this._fileService=o,this._configurationService=n,this._instaService=s,this._logService=r}get uris(){return this._edits.map((e=>e.oldUri))}async perform(e){const t=[],i=[];for(const e of this._edits){let o,n;try{o=await this._fileService.resolve(e.oldUri,{resolveMetadata:!0})}catch(t){if(!e.options.ignoreIfNotExists)throw new Error(`${e.oldUri} does not exist and can not be deleted`);continue}if(t.push({resource:e.oldUri,recursive:e.options.recursive,useTrash:!e.options.skipTrashBin&&this._fileService.hasCapability(e.oldUri,4096)&&this._configurationService.getValue("files.enableTrash")}),!(e.undoesCreate||e.options.folder||"number"==typeof e.options.maxSize&&o.size>e.options.maxSize))try{n=await this._fileService.readFile(e.oldUri)}catch(e){this._logService.error(e)}void 0!==n&&i.push(new xo(e.oldUri,e.options,n.value))}return 0===t.length?new yo:(await this._workingCopyFileService.delete(t,e,this._undoRedoInfo),0===i.length?new yo:this._instaService.createInstance(Eo,i,{isUndoing:!0}))}toString(){return`(delete ${this._edits.map((e=>e.oldUri)).join(", ")})`}};Io=(0,s.C)([(0,s.Q)(2,wo.r),(0,s.Q)(3,ve.$),(0,s.Q)(4,z.p),(0,s.Q)(5,a._Y),(0,s.Q)(6,k.r)],Io);class Vo{constructor(e,t,i,o){this.label=e,this.code=t,this.operations=i,this.confirmBeforeUndo=o,this.type=1,this.resources=i.flatMap((e=>e.uris))}async undo(){await this._reverse()}async redo(){await this._reverse()}async _reverse(){for(let e=0;e<this.operations.length;e++){const t=this.operations[e],i=await t.perform(yt.XO.None);this.operations[e]=i}}toString(){return this.operations.map((e=>String(e))).join(", ")}}let Mo=class{constructor(e,t,i,o,n,s,r,a,c,d){this._label=e,this._code=t,this._undoRedoGroup=i,this._undoRedoSource=o,this._confirmBeforeUndo=n,this._progress=s,this._token=r,this._edits=a,this._instaService=c,this._undoRedoService=d}async apply(){const e=[],t={undoRedoGroupId:this._undoRedoGroup.id},i=[];for(const e of this._edits)e.newResource&&e.oldResource&&!e.options?.copy?i.push(new Co(e.newResource,e.oldResource,e.options??{})):e.newResource&&e.oldResource&&e.options?.copy?i.push(new ko(e.newResource,e.oldResource,e.options??{})):!e.newResource&&e.oldResource?i.push(new Do(e.oldResource,e.options??{},!1)):e.newResource&&!e.oldResource&&i.push(new xo(e.newResource,e.options??{},await e.options.contents));if(0===i.length)return[];const o=[];o[0]=[i[0]];for(let e=1;e<i.length;e++){const t=i[e],n=(0,f.RT)(o);n?.[0].type===t.type?n.push(t):o.push([t])}for(const i of o){if(this._token.isCancellationRequested)break;let o;switch(i[0].type){case"rename":o=this._instaService.createInstance(So,i,t);break;case"copy":o=this._instaService.createInstance(_o,i,t);break;case"delete":o=this._instaService.createInstance(Io,i,t);break;case"create":o=this._instaService.createInstance(Eo,i,t)}if(o){const t=await o.perform(this._token);e.push(t)}this._progress.report(void 0)}const n=new Vo(this._label,this._code,e,this._confirmBeforeUndo);return this._undoRedoService.pushElement(n,this._undoRedoGroup,this._undoRedoSource),n.resources}};Mo=(0,s.C)([(0,s.Q)(8,a._Y),(0,s.Q)(9,vo.$)],Mo);var To=i(58964),Ao=i(87944),Lo=i(45259),Po=i(23183),Ro=i(56915),Bo=i(55359),Oo=i(30075),No=i(68586);class Fo{constructor(e){this._modelReference=e,this.model=this._modelReference.object.textEditorModel,this._edits=[]}dispose(){this._modelReference.dispose()}isNoOp(){return!(this._edits.length>0||void 0!==this._newEol&&this._newEol!==this.model.getEndOfLineSequence())}addEdit(e){this._expectedModelVersionId=e.versionId;const{textEdit:t}=e;if("number"==typeof t.eol&&(this._newEol=t.eol),!t.range&&!t.text)return;if(Ao.Q.isEmpty(t.range)&&!t.text)return;let i;i=t.range?Ao.Q.lift(t.range):this.model.getFullModelRange(),this._edits.push({...To.k.replaceMove(i,t.text),insertAsSnippet:t.insertAsSnippet})}validate(){return void 0===this._expectedModelVersionId||this.model.getVersionId()===this._expectedModelVersionId?{canApply:!0}:{canApply:!1,reason:this.model.uri}}getBeforeCursorState(){return null}apply(){this._edits.length>0&&(this._edits=this._edits.map(this._transformSnippetStringToInsertText,this).sort(((e,t)=>Ao.Q.compareRangesUsingStarts(e.range,t.range))),this.model.pushEditOperations(null,this._edits,(()=>null))),void 0!==this._newEol&&this.model.pushEOL(this._newEol)}_transformSnippetStringToInsertText(e){if(!e.insertAsSnippet)return e;if(!e.text)return e;const t=No.fr.asInsertText(e.text);return{...e,insertAsSnippet:!1,text:t}}}class Go extends Fo{constructor(e,t){super(e),this._editor=t}getBeforeCursorState(){return this._canUseEditor()?this._editor.getSelections():null}apply(){if(this._canUseEditor()){if(this._edits.length>0){const e=Oo.O.get(this._editor);if(e&&this._edits.some((e=>e.insertAsSnippet))){const t=[];for(const e of this._edits)e.range&&null!==e.text&&t.push({range:Ao.Q.lift(e.range),template:e.insertAsSnippet?e.text:No.fr.escape(e.text)});e.apply(t,{undoStopBefore:!1,undoStopAfter:!1})}else this._edits=this._edits.map(this._transformSnippetStringToInsertText,this).sort(((e,t)=>Ao.Q.compareRangesUsingStarts(e.range,t.range))),this._editor.executeEdits("",this._edits)}void 0!==this._newEol&&this._editor.hasModel()&&this._editor.getModel().pushEOL(this._newEol)}else super.apply()}_canUseEditor(){return this._editor?.getModel()?.uri.toString()===this.model.uri.toString()}}let Wo=class{constructor(e,t,i,o,n,s,r,a,c,d,h,l){this._label=e,this._code=t,this._editor=i,this._undoRedoGroup=o,this._undoRedoSource=n,this._progress=s,this._token=r,this._editorWorker=c,this._modelService=d,this._textModelResolverService=h,this._undoRedoService=l,this._edits=new D.fT;for(const e of a){let t=this._edits.get(e.resource);t||(t=[],this._edits.set(e.resource,t)),t.push(e)}}_validateBeforePrepare(){for(const e of this._edits.values())for(const t of e)if("number"==typeof t.versionId){const e=this._modelService.getModel(t.resource);if(e&&e.getVersionId()!==t.versionId)throw new Error(`${e.uri.toString()} has changed in the meantime`)}}async _createEditsTasks(){const e=[],t=[];for(const[i,o]of this._edits){const n=this._textModelResolverService.createModelReference(i).then((async t=>{let i,n=!1;if(this._editor?.getModel()?.uri.toString()===t.object.textEditorModel.uri.toString()?(i=new Go(t,this._editor),n=!0):i=new Fo(t),e.push(i),!n)return void o.forEach(i.addEdit,i);const s=async(e,n)=>{const s=o.slice(e,n),r=await this._editorWorker.computeMoreMinimalEdits(t.object.textEditorModel.uri,s.map((e=>e.textEdit)),!1);r?r.forEach((e=>i.addEdit(new lo.cw(t.object.textEditorModel.uri,e,void 0,void 0)))):s.forEach(i.addEdit,i)};let r=0,a=0;for(;a<o.length;a++)(o[a].textEdit.insertAsSnippet||o[a].metadata)&&(await s(r,a),i.addEdit(o[a]),r=a+1);await s(r,a)}));t.push(n)}return await Promise.all(t),e}_validateTasks(e){for(const t of e){const e=t.validate();if(!e.canApply)return e}return{canApply:!0}}async apply(){this._validateBeforePrepare();const e=await this._createEditsTasks();try{if(this._token.isCancellationRequested)return[];const t=[],i=this._validateTasks(e);if(!i.canApply)throw new Error(`${i.reason.toString()} has changed in the meantime`);if(1===e.length){const i=e[0];if(!i.isNoOp()){const e=new Ro.Ey(this._label,this._code,i.model,i.getBeforeCursorState());this._undoRedoService.pushElement(e,this._undoRedoGroup,this._undoRedoSource),i.apply(),e.close(),t.push(i.model.uri)}this._progress.report(void 0)}else{const i=new Ro.JR(this._label,this._code,e.map((e=>new Ro.Ey(this._label,this._code,e.model,e.getBeforeCursorState()))));this._undoRedoService.pushElement(i,this._undoRedoGroup,this._undoRedoSource);for(const i of e)i.apply(),this._progress.report(void 0),t.push(i.model.uri);i.close()}return t}finally{(0,p.AS)(e)}}};Wo=(0,s.C)([(0,s.Q)(8,Po.w),(0,s.Q)(9,Bo.S),(0,s.Q)(10,Lo.b),(0,s.Q)(11,vo.$)],Wo);var zo=i(71547);let Ho=class{constructor(e,t,i,o,n,s,r,a,c,d,h){this._label=e,this._code=t,this._editor=i,this._progress=o,this._token=n,this._edits=s,this._undoRedoGroup=r,this._undoRedoSource=a,this._confirmBeforeUndo=c,this._instaService=d,this._logService=h}ariaMessage(){const e=new D.fT,t=new D.fT;let i=0;for(const o of this._edits)o instanceof lo.cw?(i+=1,t.set(o.resource,!0)):o instanceof lo.fC&&e.set(o.oldResource??o.newResource,!0);return 0===this._edits.length?(0,I.kg)(1628,"Made no edits"):0===e.size?i>1&&t.size>1?(0,I.kg)(1629,"Made {0} text edits in {1} files",i,t.size):(0,I.kg)(1630,"Made {0} text edits in one file",i):(0,I.kg)(1631,"Made {0} text edits in {1} files, also created or deleted {2} files",i,t.size,e.size)}async perform(){if(0===this._edits.length)return[];const e=[1];for(let t=1;t<this._edits.length;t++)Object.getPrototypeOf(this._edits[t-1])===Object.getPrototypeOf(this._edits[t])?e[e.length-1]++:e.push(1);const t=this._edits.length>1?0:void 0;this._progress.report({increment:t,total:100});const i={report:e=>this._progress.report({increment:100/this._edits.length})},o=[];let n=0;for(const t of e){if(this._token.isCancellationRequested)break;const e=this._edits.slice(n,n+t);e[0]instanceof lo.fC?o.push(await this._performFileEdits(e,this._undoRedoGroup,this._undoRedoSource,this._confirmBeforeUndo,i)):e[0]instanceof lo.cw?o.push(await this._performTextEdits(e,this._undoRedoGroup,this._undoRedoSource,i)):e[0]instanceof bo.Y?o.push(await this._performCellEdits(e,this._undoRedoGroup,this._undoRedoSource,i)):console.log("UNKNOWN EDIT"),n+=t}return o.flat()}async _performFileEdits(e,t,i,o,n){this._logService.debug("_performFileEdits",JSON.stringify(e));const s=this._instaService.createInstance(Mo,this._label||(0,I.kg)(1632,"Workspace Edit"),this._code||"undoredo.workspaceEdit",t,i,o,n,this._token,e);return await s.apply()}async _performTextEdits(e,t,i,o){this._logService.debug("_performTextEdits",JSON.stringify(e));const n=this._instaService.createInstance(Wo,this._label||(0,I.kg)(1632,"Workspace Edit"),this._code||"undoredo.workspaceEdit",this._editor,t,i,o,this._token,e);return await n.apply()}async _performCellEdits(e,t,i,o){this._logService.debug("_performCellEdits",JSON.stringify(e));const n=this._instaService.createInstance(bo.C,t,i,o,this._token,e);return await n.apply()}};Ho=(0,s.C)([(0,s.Q)(9,a._Y),(0,s.Q)(10,k.r)],Ho);let Qo=class{constructor(e,t,i,o,n,s,r){this._instaService=e,this._logService=t,this._editorService=i,this._lifecycleService=o,this._dialogService=n,this._workingCopyService=s,this._configService=r,this._activeUndoRedoGroups=new uo.w}setPreviewHandler(e){return this._previewHandler=e,(0,p.s)((()=>{this._previewHandler===e&&(this._previewHandler=void 0)}))}hasPreviewHandler(){return Boolean(this._previewHandler)}async apply(e,t){let i=function(e){return e.map((e=>{if(lo.cw.is(e))return lo.cw.lift(e);if(lo.fC.is(e))return lo.fC.lift(e);if(bo.Y.is(e))return bo.Y.lift(e);throw new Error("Unsupported edit")}))}(Array.isArray(e)?e:e.edits);if(0===i.length)return{ariaSummary:(0,I.kg)(1633,"Made no edits"),isApplied:!1};this._previewHandler&&(t?.showPreview||i.some((e=>e.metadata?.needsConfirmation)))&&(i=await this._previewHandler(i,t));let o,n=t?.editor;if(!n){const e=this._editorService.activeTextEditorControl;(0,po.z9)(e)?n=e:(0,po.Np)(e)&&(n=e.getModifiedEditor())}n&&n.getOption(94)&&(n=void 0);let s=()=>{};if("number"==typeof t?.undoRedoGroupId)for(const e of this._activeUndoRedoGroups)if(e.id===t.undoRedoGroupId){o=e;break}o||(o=new mo.I_,s=this._activeUndoRedoGroups.push(o));const r=t?.quotableLabel||t?.label,a=this._instaService.createInstance(Ho,r,t?.code,n,t?.progress??mi.ke.None,t?.token??yt.XO.None,i,o,t?.undoRedoSource,!!t?.confirmBeforeUndo);let c;try{c=this._lifecycleService.onBeforeShutdown((e=>e.veto(this._shouldVeto(r,e.reason),"veto.blukEditService")));const e=await a.perform();return t?.respectAutoSaveConfig&&!0===this._configService.getValue(Uo)&&e.length>1&&await this._saveAll(e),{ariaSummary:a.ariaMessage(),isApplied:i.length>0}}catch(e){throw this._logService.error(e),e}finally{c?.dispose(),s()}}async _saveAll(e){const t=new D.rm(e),i=this._workingCopyService.dirtyWorkingCopies.map((async e=>{t.has(e.resource)&&await e.save()})),o=await Promise.allSettled(i);for(const e of o)"rejected"===e.status&&this._logService.warn(e.reason)}async _shouldVeto(e,t){let i,o;switch(t){case 1:i=(0,I.kg)(1634,"Are you sure you want to close the window?"),o=(0,I.kg)(1635,"&&Close Window");break;case 4:i=(0,I.kg)(1636,"Are you sure you want to change the workspace?"),o=(0,I.kg)(1637,"Change &&Workspace");break;case 3:i=(0,I.kg)(1638,"Are you sure you want to reload the window?"),o=(0,I.kg)(1639,"&&Reload Window");break;default:i=(0,I.kg)(1640,"Are you sure you want to quit?"),o=(0,I.kg)(1641,"&&Quit")}return!(await this._dialogService.confirm({message:i,detail:(0,I.kg)(1642,"'{0}' is in progress.",e||(0,I.kg)(1643,"File operation")),primaryButton:o})).confirmed}};Qo=(0,s.C)([(0,s.Q)(0,a._Y),(0,s.Q)(1,k.r),(0,s.Q)(2,be.I),(0,s.Q)(3,Ve.f),(0,s.Q)(4,Wi.X),(0,s.Q)(5,zo.v),(0,s.Q)(6,z.p)],Qo);const Uo="files.refactoring.autoSave";u.O.as(go.Fd.Configuration).registerConfiguration({id:"files",properties:{[Uo]:{description:(0,I.kg)(1644,"Controls if files that were part of a refactoring are saved automatically"),default:!0,type:"boolean"}}});var $o=i(87866),Ko=i(67619);(0,Fe.A)(".monaco-workbench .bulk-edit-panel .highlight.insert{background-color:var(--vscode-diffEditor-insertedTextBackground)}.monaco-workbench .bulk-edit-panel .highlight.remove{background-color:var(--vscode-diffEditor-removedTextBackground);text-decoration:line-through}.monaco-workbench .bulk-edit-panel .message{padding:10px 20px}.monaco-workbench .bulk-edit-panel[data-state=data] .content,.monaco-workbench .bulk-edit-panel[data-state=message] .message{display:flex}.monaco-workbench .bulk-edit-panel[data-state=data] .message,.monaco-workbench .bulk-edit-panel[data-state=message] .content{display:none}.monaco-workbench .bulk-edit-panel .content{display:flex;flex-direction:column;justify-content:space-between}.monaco-workbench .bulk-edit-panel .content .buttons{padding-left:20px;padding-top:10px}.monaco-workbench .bulk-edit-panel .content .buttons .monaco-button{display:inline-flex;margin:0 4px;padding:4px 8px;width:inherit}.monaco-workbench .bulk-edit-panel .monaco-tl-contents{display:flex}.monaco-workbench .bulk-edit-panel .monaco-tl-contents .edit-checkbox{align-self:center}.monaco-workbench .bulk-edit-panel .monaco-tl-contents .edit-checkbox.disabled{opacity:.5}.monaco-workbench .bulk-edit-panel .monaco-tl-contents .monaco-icon-label.delete .monaco-icon-label-container{text-decoration:line-through}.monaco-workbench .bulk-edit-panel .monaco-tl-contents .details{font-size:.9em;margin-left:.5em;opacity:.7;white-space:pre}.monaco-workbench .bulk-edit-panel .monaco-tl-contents.category{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .bulk-edit-panel .monaco-tl-contents.category .theme-icon,.monaco-workbench .bulk-edit-panel .monaco-tl-contents.textedit .theme-icon{margin-right:4px}.monaco-workbench .bulk-edit-panel .monaco-tl-contents.category .uri-icon,.monaco-workbench .bulk-edit-panel .monaco-tl-contents.textedit .uri-icon,.monaco-workbench.hc-light .bulk-edit-panel .monaco-tl-contents.category .uri-icon,.monaco-workbench.hc-light .bulk-edit-panel .monaco-tl-contents.textedit .uri-icon{background-image:var(--background-light);background-position:0;background-repeat:no-repeat;background-size:contain;height:100%;margin-right:4px;min-width:16px;width:16px}.monaco-workbench.hc-black .bulk-edit-panel .monaco-tl-contents.category .uri-icon,.monaco-workbench.hc-black .bulk-edit-panel .monaco-tl-contents.textedit .uri-icon,.monaco-workbench.vs-dark .bulk-edit-panel .monaco-tl-contents.category .uri-icon,.monaco-workbench.vs-dark .bulk-edit-panel .monaco-tl-contents.textedit .uri-icon{background-image:var(--background-dark)}.monaco-workbench .bulk-edit-panel .monaco-tl-contents.textedit .monaco-highlighted-label{overflow:hidden;text-overflow:ellipsis}",{});var jo=i(1935),Zo=i(12234),Yo=i(43773),qo=i(88053),Jo=i(63101),Xo=i(4239),en=i(86472);let tn=class{constructor(e,t,i,o){this._conflicts=new D.fT,this._disposables=new p.Cm,this._onDidConflict=new m.vl,this.onDidConflict=this._onDidConflict.event;const n=new D.fT;for(const t of e)if(t instanceof lo.cw){if(n.set(t.resource,!0),"number"==typeof t.versionId){const e=i.getModel(t.resource);e&&e.getVersionId()!==t.versionId&&(this._conflicts.set(t.resource,!0),this._onDidConflict.fire(this))}}else t instanceof lo.fC?t.newResource?n.set(t.newResource,!0):t.oldResource&&n.set(t.oldResource,!0):t instanceof bo.Y?n.set(t.resource,!0):o.warn("UNKNOWN edit type",t);this._disposables.add(t.onDidFilesChange((e=>{for(const t of n.keys())if(!i.getModel(t)&&e.contains(t)){this._conflicts.set(t,!0),this._onDidConflict.fire(this);break}})));const s=e=>{n.has(e.uri)&&(this._conflicts.set(e.uri,!0),this._onDidConflict.fire(this))};for(const e of i.getModels())this._disposables.add(e.onDidChangeContent((()=>s(e))))}dispose(){this._disposables.dispose(),this._onDidConflict.dispose()}list(){return[...this._conflicts.keys()]}hasConflicts(){return this._conflicts.size>0}};tn=(0,s.C)([(0,s.Q)(1,ve.$),(0,s.Q)(2,Bo.S),(0,s.Q)(3,k.r)],tn);var on,nn,sn=i(22028);class rn{constructor(){this._states=new WeakMap,this._checkedCount=0,this._onDidChange=new m.vl,this.onDidChange=this._onDidChange.event}dispose(){this._onDidChange.dispose()}get checkedCount(){return this._checkedCount}isChecked(e){return this._states.get(e)??!1}updateChecked(e,t){const i=this._states.get(e);i!==t&&(void 0===i?t&&(this._checkedCount+=1):t?this._checkedCount+=1:this._checkedCount-=1,this._states.set(e,t),this._onDidChange.fire(e))}}class an{constructor(e,t){this.parent=e,this.textEdit=t}}class cn{constructor(e,t){this.uri=e,this.parent=t,this.type=0,this.textEdits=[],this.originalEdits=new Map}addEdit(e,t,i){this.type|=t,this.originalEdits.set(e,i),i instanceof lo.cw?this.textEdits.push(new an(this,i)):8===t&&(this.newUri=i.newResource)}needsConfirmation(){for(const[,e]of this.originalEdits)if(!this.parent.checked.isChecked(e))return!0;return!1}}class dn{static{this._defaultMetadata=Object.freeze({label:(0,I.kg)(10161,"Other"),icon:xi.W6.symbolFile,needsConfirmation:!1})}static keyOf(e){return e?.label||"<default>"}constructor(e=dn._defaultMetadata){this.metadata=e,this.operationByResource=new Map}get fileOperations(){return this.operationByResource.values()}}let hn=on=class{static async create(e,t){const i=e.get(a._Y).createInstance(on,t);return await i._init()}constructor(e,t,i){this._bulkEdit=e,this._fileService=t,this.checked=new rn,this.fileOperations=[],this.categories=[],this.conflicts=i.createInstance(tn,e)}dispose(){this.checked.dispose(),this.conflicts.dispose()}async _init(){const e=new Map,t=new Map,i=new D.fT;for(let o=0;o<this._bulkEdit.length;o++){const n=this._bulkEdit[o];let s,r;if(this.checked.updateChecked(n,!n.metadata?.needsConfirmation),n instanceof lo.cw)r=1,s=n.resource;else{if(!(n instanceof lo.fC))continue;if(n.newResource&&n.oldResource){if(r=8,s=n.oldResource,void 0===n.options?.overwrite&&n.options?.ignoreIfExists&&await this._fileService.exists(s))continue;i.set(n.newResource,s)}else if(n.oldResource){if(r=4,s=n.oldResource,n.options?.ignoreIfNotExists&&!await this._fileService.exists(s))continue}else{if(!n.newResource)continue;if(r=2,s=n.newResource,void 0===n.options?.overwrite&&n.options?.ignoreIfExists&&await this._fileService.exists(s))continue}}const a=(e,t)=>{let s=C.er.getComparisonKey(e,!0),a=t.get(s);!a&&i.has(e)&&(e=i.get(e),s=C.er.getComparisonKey(e,!0),a=t.get(s)),a||(a=new cn(e,this),t.set(s,a)),a.addEdit(o,r,n)};a(s,e);const c=dn.keyOf(n.metadata);let d=t.get(c);d||(d=new dn(n.metadata),t.set(c,d)),a(s,d.operationByResource)}e.forEach((e=>this.fileOperations.push(e))),t.forEach((e=>this.categories.push(e)));for(const e of this.fileOperations)if(1!==e.type){let t=!0;for(const i of e.originalEdits.values())i instanceof lo.fC&&(t=t&&this.checked.isChecked(i));if(!t)for(const i of e.originalEdits.values())this.checked.updateChecked(i,t)}return this.categories.sort(((e,t)=>e.metadata.needsConfirmation===t.metadata.needsConfirmation?e.metadata.label.localeCompare(t.metadata.label):e.metadata.needsConfirmation?-1:1)),this}getWorkspaceEdit(){const e=[];let t=!0;for(let i=0;i<this._bulkEdit.length;i++){const o=this._bulkEdit[i];this.checked.isChecked(o)?e[i]=o:t=!1}return t?this._bulkEdit:((0,f.SK)(e),e)}async getFileEditOperation(e){const t=await e.options.contents;if(t)return To.k.replaceMove(Ao.Q.lift({startLineNumber:0,startColumn:0,endLineNumber:Number.MAX_VALUE,endColumn:0}),t.toString())}async getFileEdits(e){for(const t of this.fileOperations)if(t.uri.toString()===e.toString()){const e=[];let i=!1;for(const o of t.originalEdits.values())o instanceof lo.fC?e.push(this.getFileEditOperation(o)):o instanceof lo.cw?this.checked.isChecked(o)&&e.push(Promise.resolve(To.k.replaceMove(Ao.Q.lift(o.textEdit.range),o.textEdit.insertAsSnippet?No.fr.asInsertText(o.textEdit.text):o.textEdit.text))):this.checked.isChecked(o)||(i=!0);return i?[]:(await Promise.all(e)).filter((e=>void 0!==e)).sort(((e,t)=>Ao.Q.compareRangesUsingStarts(e.range,t.range)))}return[]}getUriOfEdit(e){for(const t of this.fileOperations)for(const i of t.originalEdits.values())if(i===e)return t.uri;throw new Error("invalid edit")}};hn=on=(0,s.C)([(0,s.Q)(1,ve.$),(0,s.Q)(2,a._Y)],hn);let ln=class{static{nn=this}static{this.Schema="vscode-bulkeditpreview-editor"}static{this.emptyPreview=v.rz.from({scheme:this.Schema,fragment:"empty"})}static fromPreviewUri(e){return v.rz.parse(e.query)}constructor(e,t,i,o){this._operations=e,this._languageService=t,this._modelService=i,this._textModelResolverService=o,this._disposables=new p.Cm,this._modelPreviewEdits=new Map,this._instanceId=(0,w.b)(),this._disposables.add(this._textModelResolverService.registerTextModelContentProvider(nn.Schema,this)),this._ready=this._init()}dispose(){this._disposables.dispose()}asPreviewUri(e){return v.rz.from({scheme:nn.Schema,authority:this._instanceId,path:e.path,query:e.toString()})}async _init(){for(const e of this._operations.fileOperations)await this._applyTextEditsToPreviewModel(e.uri);this._disposables.add(m.Jh.debounce(this._operations.checked.onDidChange,((e,t)=>t),sn.h)((e=>{const t=this._operations.getUriOfEdit(e);this._applyTextEditsToPreviewModel(t)})))}async _applyTextEditsToPreviewModel(e){const t=await this._getOrCreatePreviewModel(e),i=this._modelPreviewEdits.get(t.id);i&&t.applyEdits(i);const o=await this._operations.getFileEdits(e),n=t.applyEdits(o,!0);this._modelPreviewEdits.set(t.id,n)}async _getOrCreatePreviewModel(e){const t=this.asPreviewUri(e);let i=this._modelService.getModel(t);if(!i){try{const o=await this._textModelResolverService.createModelReference(e),n=o.object.textEditorModel;i=this._modelService.createModel((0,en.EE)(n.createSnapshot()),this._languageService.createById(n.getLanguageId()),t),o.dispose()}catch{i=this._modelService.createModel("",this._languageService.createByFilepathOrFirstLine(t),t)}queueMicrotask((async()=>{this._disposables.add(await this._textModelResolverService.createModelReference(i.uri))}))}return i}async provideTextContent(e){return e.toString()===nn.emptyPreview.toString()?this._modelService.createModel("",null,e):(await this._ready,this._modelService.getModel(e))}};ln=nn=(0,s.C)([(0,s.Q)(1,Xo.L),(0,s.Q)(2,Bo.S),(0,s.Q)(3,Lo.b)],ln);var un,pn,gn,mn=i(65698),bn=i(25164),wn=i(68879),vn=i(95742),fn=i(68158);class yn{constructor(e,t){this.parent=e,this.category=t}isChecked(){const e=this.parent;let t=!0;for(const i of this.category.fileOperations)for(const o of i.originalEdits.values())t=t&&e.checked.isChecked(o);return t}setChecked(e){const t=this.parent;for(const i of this.category.fileOperations)for(const o of i.originalEdits.values())t.checked.updateChecked(o,e)}}class Cn{constructor(e,t){this.parent=e,this.edit=t}isChecked(){const e=this.parent instanceof yn?this.parent.parent:this.parent;let t=!0;1===this.edit.type&&(t=!this.edit.textEdits.every((t=>!e.checked.isChecked(t.textEdit))));for(const i of this.edit.originalEdits.values())i instanceof lo.fC&&(t=t&&e.checked.isChecked(i));if(this.parent instanceof yn&&1===this.edit.type)for(const i of e.categories)for(const o of i.fileOperations)if(o.uri.toString()===this.edit.uri.toString())for(const i of o.originalEdits.values())i instanceof lo.fC&&(t=t&&e.checked.isChecked(i));return t}setChecked(e){const t=this.parent instanceof yn?this.parent.parent:this.parent;for(const i of this.edit.originalEdits.values())t.checked.updateChecked(i,e);if(this.parent instanceof yn&&1!==this.edit.type)for(const i of t.categories)for(const o of i.fileOperations)if(o.uri.toString()===this.edit.uri.toString())for(const i of o.originalEdits.values())t.checked.updateChecked(i,e)}isDisabled(){if(this.parent instanceof yn&&1===this.edit.type){const e=this.parent.parent;let t=!0;for(const i of e.categories)for(const o of i.fileOperations)if(o.uri.toString()===this.edit.uri.toString())for(const i of o.originalEdits.values())i instanceof lo.fC&&(t=t&&e.checked.isChecked(i));return!t}return!1}}class Sn{constructor(e,t,i,o,n,s,r){this.parent=e,this.idx=t,this.edit=i,this.prefix=o,this.selecting=n,this.inserting=s,this.suffix=r}isChecked(){let e=this.parent.parent;return e instanceof yn&&(e=e.parent),e.checked.isChecked(this.edit.textEdit)}setChecked(e){let t=this.parent.parent;if(t instanceof yn&&(t=t.parent),t.checked.updateChecked(this.edit.textEdit,e),e)for(const i of this.parent.edit.originalEdits.values())i instanceof lo.fC&&t.checked.updateChecked(i,e)}isDisabled(){return this.parent.isDisabled()}}let kn=class{constructor(e,t){this._textModelService=e,this._instantiationService=t,this.groupByFile=!0}hasChildren(e){return e instanceof Cn?e.edit.textEdits.length>0:!(e instanceof Sn)}async getChildren(e){if(e instanceof hn)return this.groupByFile?e.fileOperations.map((t=>new Cn(e,t))):e.categories.map((t=>new yn(e,t)));if(e instanceof yn)return Array.from(e.category.fileOperations,(t=>new Cn(e,t)));if(e instanceof Cn&&e.edit.textEdits.length>0){let t,i;try{const o=await this._textModelService.createModelReference(e.edit.uri);t=o.object.textEditorModel,i=o}catch{t=this._instantiationService.createInstance(en.Bz,"",vn.vH,en.Bz.DEFAULT_CREATION_OPTIONS,null),i=t}const o=e.edit.textEdits.map(((i,o)=>{const n=t.validateRange(i.textEdit.textEdit.range),s=t.tokenization.getLineTokens(n.startLineNumber);let r=23;for(let e=s.findTokenIndexAtOffset(n.startColumn-1)-1;r<50&&e>=0;e--)r=n.startColumn-s.getStartOffset(e);const a=t.tokenization.getLineTokens(n.endLineNumber);let c=0;for(let e=a.findTokenIndexAtOffset(n.endColumn-1);c<50&&e<a.getCount();e++)c+=a.getEndOffset(e)-a.getStartOffset(e);return new Sn(e,o,i,t.getValueInRange(new Ao.Q(n.startLineNumber,n.startColumn-r,n.startLineNumber,n.startColumn)),t.getValueInRange(n),i.textEdit.textEdit.insertAsSnippet?No.fr.asInsertText(i.textEdit.textEdit.text):i.textEdit.textEdit.text,t.getValueInRange(new Ao.Q(n.endLineNumber,n.endColumn,n.endLineNumber,n.endColumn+c)))}));return i.dispose(),o}return[]}};kn=(0,s.C)([(0,s.Q)(0,Lo.b),(0,s.Q)(1,a._Y)],kn);class _n{compare(e,t){return e instanceof Cn&&t instanceof Cn?xn(e.edit,t.edit):e instanceof Sn&&t instanceof Sn?Ao.Q.compareRangesUsingStarts(e.edit.textEdit.textEdit.range,t.edit.textEdit.textEdit.range):0}}function xn(e,t){return(0,Ht.UD)(e.uri.toString(),t.uri.toString())}let En=class{constructor(e){this._labelService=e}getWidgetAriaLabel(){return(0,I.kg)(10162,"Bulk Edit")}getRole(e){return"checkbox"}getAriaLabel(e){if(e instanceof Cn){if(e.edit.textEdits.length>0)return 8&e.edit.type&&e.edit.newUri?(0,I.kg)(10163,"Renaming {0} to {1}, also making text edits",this._labelService.getUriLabel(e.edit.uri,{relative:!0}),this._labelService.getUriLabel(e.edit.newUri,{relative:!0})):2&e.edit.type?(0,I.kg)(10164,"Creating {0}, also making text edits",this._labelService.getUriLabel(e.edit.uri,{relative:!0})):4&e.edit.type?(0,I.kg)(10165,"Deleting {0}, also making text edits",this._labelService.getUriLabel(e.edit.uri,{relative:!0})):(0,I.kg)(10166,"{0}, making text edits",this._labelService.getUriLabel(e.edit.uri,{relative:!0}));if(8&e.edit.type&&e.edit.newUri)return(0,I.kg)(10167,"Renaming {0} to {1}",this._labelService.getUriLabel(e.edit.uri,{relative:!0}),this._labelService.getUriLabel(e.edit.newUri,{relative:!0}));if(2&e.edit.type)return(0,I.kg)(10168,"Creating {0}",this._labelService.getUriLabel(e.edit.uri,{relative:!0}));if(4&e.edit.type)return(0,I.kg)(10169,"Deleting {0}",this._labelService.getUriLabel(e.edit.uri,{relative:!0}))}if(e instanceof Sn){if(e.selecting.length>0&&e.inserting.length>0)return(0,I.kg)(10170,"line {0}, replacing {1} with {2}",e.edit.textEdit.textEdit.range.startLineNumber,e.selecting,e.inserting);if(e.selecting.length>0&&0===e.inserting.length)return(0,I.kg)(10171,"line {0}, removing {1}",e.edit.textEdit.textEdit.range.startLineNumber,e.selecting);if(0===e.selecting.length&&e.inserting.length>0)return(0,I.kg)(10172,"line {0}, inserting {1}",e.edit.textEdit.textEdit.range.startLineNumber,e.selecting)}return null}};En=(0,s.C)([(0,s.Q)(0,jo.L)],En);class Dn{getId(e){return e instanceof Cn?e.edit.uri+(e.parent instanceof yn?JSON.stringify(e.parent.category.metadata):""):e instanceof Sn?e.parent.edit.uri.toString()+e.idx:JSON.stringify(e.category.metadata)}}class In{constructor(e){e.classList.add("category"),this.icon=document.createElement("div"),e.appendChild(this.icon),this.label=new wn.s(e)}}let Vn=class{static{un=this}static{this.id="CategoryElementRenderer"}constructor(e){this._themeService=e,this.templateId=un.id}renderTemplate(e){return new In(e)}renderElement(e,t,i){i.icon.style.setProperty("--background-dark",null),i.icon.style.setProperty("--background-light",null),i.icon.style.color="";const{metadata:o}=e.element.category;if(S.L0.isThemeIcon(o.iconPath)){const e=S.L0.asClassName(o.iconPath);i.icon.className=e?`theme-icon ${e}`:"",i.icon.style.color=o.iconPath.color?this._themeService.getColorTheme().getColor(o.iconPath.color.id)?.toString()??"":""}else v.rz.isUri(o.iconPath)?(i.icon.className="uri-icon",i.icon.style.setProperty("--background-dark",(0,fn.Tf)(o.iconPath)),i.icon.style.setProperty("--background-light",(0,fn.Tf)(o.iconPath))):o.iconPath&&(i.icon.className="uri-icon",i.icon.style.setProperty("--background-dark",(0,fn.Tf)(o.iconPath.dark)),i.icon.style.setProperty("--background-light",(0,fn.Tf)(o.iconPath.light)));i.label.setLabel(o.label,o.description,{descriptionMatches:(0,mn.WJ)(e.filterData)})}disposeTemplate(e){e.label.dispose()}};Vn=un=(0,s.C)([(0,s.Q)(0,Zi.G)],Vn);let Mn=class{constructor(e,t,i){this._labelService=i,this._disposables=new p.Cm,this._localDisposables=new p.Cm,this._checkbox=document.createElement("input"),this._checkbox.className="edit-checkbox",this._checkbox.type="checkbox",this._checkbox.setAttribute("role","checkbox"),e.appendChild(this._checkbox),this._label=t.create(e,{supportHighlights:!0}),this._details=document.createElement("span"),this._details.className="details",e.appendChild(this._details)}dispose(){this._localDisposables.dispose(),this._disposables.dispose(),this._label.dispose()}set(e,t){if(this._localDisposables.clear(),this._checkbox.checked=e.isChecked(),this._checkbox.disabled=e.isDisabled(),this._localDisposables.add((0,ke.ko)(this._checkbox,"change",(()=>{e.setChecked(this._checkbox.checked)}))),8&e.edit.type&&e.edit.newUri)this._label.setResource({resource:e.edit.uri,name:(0,I.kg)(10173,"{0} → {1}",this._labelService.getUriLabel(e.edit.uri,{relative:!0}),this._labelService.getUriLabel(e.edit.newUri,{relative:!0}))},{fileDecorations:{colors:!0,badges:!1}}),this._details.innerText=(0,I.kg)(10174,"(renaming)");else{const i={matches:(0,mn.WJ)(t),fileKind:we.pc.FILE,fileDecorations:{colors:!0,badges:!1},extraClasses:[]};2&e.edit.type?this._details.innerText=(0,I.kg)(10175,"(creating)"):4&e.edit.type?(this._details.innerText=(0,I.kg)(10176,"(deleting)"),i.extraClasses.push("delete")):this._details.innerText="",this._label.setFile(e.edit.uri,i)}}};Mn=(0,s.C)([(0,s.Q)(2,jo.L)],Mn);let Tn=class{static{pn=this}static{this.id="FileElementRenderer"}constructor(e,t){this._resourceLabels=e,this._labelService=t,this.templateId=pn.id}renderTemplate(e){return new Mn(e,this._resourceLabels,this._labelService)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}};Tn=pn=(0,s.C)([(0,s.Q)(1,jo.L)],Tn);let An=class{constructor(e,t){this._themeService=t,this._disposables=new p.Cm,this._localDisposables=new p.Cm,e.classList.add("textedit"),this._checkbox=document.createElement("input"),this._checkbox.className="edit-checkbox",this._checkbox.type="checkbox",this._checkbox.setAttribute("role","checkbox"),e.appendChild(this._checkbox),this._icon=document.createElement("div"),e.appendChild(this._icon),this._label=this._disposables.add(new bn._(e))}dispose(){this._localDisposables.dispose(),this._disposables.dispose()}set(e){this._localDisposables.clear(),this._localDisposables.add((0,ke.ko)(this._checkbox,"change",(t=>{e.setChecked(this._checkbox.checked),t.preventDefault()}))),e.parent.isChecked(),this._checkbox.checked=e.isChecked(),this._checkbox.disabled=e.isDisabled();let t="";t+=e.prefix,t+=e.selecting,t+=e.inserting,t+=e.suffix;const i={start:e.prefix.length,end:e.prefix.length+e.selecting.length,extraClasses:["remove"]},o={start:i.end,end:i.end+e.inserting.length,extraClasses:["insert"]};let n;const{metadata:s}=e.edit.textEdit;s&&s.description?n=(0,I.kg)(10177,"{0} - {1}",s.label,s.description):s&&(n=s.label);const r=s?.iconPath;if(r)if(this._icon.style.display="block",this._icon.style.setProperty("--background-dark",null),this._icon.style.setProperty("--background-light",null),S.L0.isThemeIcon(r)){const e=S.L0.asClassName(r);this._icon.className=e?`theme-icon ${e}`:"",this._icon.style.color=r.color?this._themeService.getColorTheme().getColor(r.color.id)?.toString()??"":""}else v.rz.isUri(r)?(this._icon.className="uri-icon",this._icon.style.setProperty("--background-dark",(0,fn.Tf)(r)),this._icon.style.setProperty("--background-light",(0,fn.Tf)(r))):(this._icon.className="uri-icon",this._icon.style.setProperty("--background-dark",(0,fn.Tf)(r.dark)),this._icon.style.setProperty("--background-light",(0,fn.Tf)(r.light)));else this._icon.style.display="none";this._label.set(t,[i,o],n,!0),this._icon.title=n||""}};An=(0,s.C)([(0,s.Q)(1,Zi.G)],An);let Ln=class{static{gn=this}static{this.id="TextEditElementRenderer"}constructor(e){this._themeService=e,this.templateId=gn.id}renderTemplate(e){return new An(e,this._themeService)}renderElement({element:e},t,i){i.set(e)}disposeTemplate(e){}};Ln=gn=(0,s.C)([(0,s.Q)(0,Zi.G)],Ln);class Pn{getHeight(){return 23}getTemplateId(e){return e instanceof Cn?Tn.id:e instanceof Sn?Ln.id:Vn.id}}class Rn{getKeyboardNavigationLabel(e){return e instanceof Cn?(0,C.P8)(e.edit.uri):e instanceof yn?e.category.metadata.label:void 0}}var Bn,On=i(68796);let Nn=class extends Jo.OZ{static{Bn=this}static{this.ID="refactorPreview"}static{this.Schema="vscode-bulkeditpreview-multieditor"}static{this.ctxHasCategories=new c.N1("refactorPreview.hasCategories",!1)}static{this.ctxGroupByFile=new c.N1("refactorPreview.groupByFile",!0)}static{this.ctxHasCheckedChanges=new c.N1("refactorPreview.hasCheckedChanges",!0)}static{this._memGroupByFile=`${this.ID}.groupByFile`}constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,g,m,b,w){super({...e,titleMenuId:_.D8.BulkEditTitle},h,l,u,c,d,t,g,m,b,w),this._instaService=t,this._editorService=i,this._labelService=o,this._textModelService=n,this._dialogService=s,this._contextMenuService=r,this._storageService=a,this._treeViewStates=new Map,this._disposables=new p.Cm,this._sessionDisposables=new p.Cm,this._computeResourceDiffEditorInputs=new Ko.o5((async e=>{const t=new Ko.VV((async e=>{const t=e.uri,i=this._currentProvider.asPreviewUri(t);if(4&e.type)return{original:{resource:v.rz.revive(i)},modified:{resource:void 0},goToFileResource:e.uri};{let e;try{(await this._textModelService.createModelReference(t)).dispose(),e=t}catch{e=ln.emptyPreview}return{original:{resource:v.rz.revive(e)},modified:{resource:v.rz.revive(i)},goToFileResource:e}}})),i=e.slice().sort(xn),o=[];for(const e of i)o.push(await t.get(e));return{resources:o,getResourceDiffEditorInputIdOfOperation:async e=>{const i=await t.get(e);return{original:i.original.resource,modified:i.modified.resource}}}})),this.element.classList.add("bulk-edit-panel","show-file-icons"),this._ctxHasCategories=Bn.ctxHasCategories.bindTo(c),this._ctxGroupByFile=Bn.ctxGroupByFile.bindTo(c),this._ctxHasCheckedChanges=Bn.ctxHasCheckedChanges.bindTo(c),this.telemetryService.publicLog2("views.bulkEditPane")}dispose(){this._tree.dispose(),this._disposables.dispose(),super.dispose()}renderBody(e){super.renderBody(e);const t=this._instaService.createInstance(qo.SB,{onDidChangeVisibility:this.onDidChangeBodyVisibility});this._disposables.add(t);const i=document.createElement("div");i.className="content",e.appendChild(i);const o=document.createElement("div");i.appendChild(o),this._treeDataSource=this._instaService.createInstance(kn),this._treeDataSource.groupByFile=this._storageService.getBoolean(Bn._memGroupByFile,0,!0),this._ctxGroupByFile.set(this._treeDataSource.groupByFile),this._tree=this._instaService.createInstance(Zo.er,this.id,o,new Pn,[this._instaService.createInstance(Ln),this._instaService.createInstance(Tn,t),this._instaService.createInstance(Vn)],this._treeDataSource,{accessibilityProvider:this._instaService.createInstance(En),identityProvider:new Dn,expandOnlyOnTwistieClick:!0,multipleSelectionSupport:!1,keyboardNavigationLabelProvider:new Rn,sorter:new _n,selectionNavigation:!0}),this._disposables.add(this._tree.onContextMenu(this._onContextMenu,this)),this._disposables.add(this._tree.onDidOpen((e=>this._openElementInMultiDiffEditor(e))));const n=document.createElement("div");n.className="buttons",i.appendChild(n);const s=new Si.WN(n);this._disposables.add(s);const r=s.addButton({supportIcons:!0,...$t.cv});r.label=(0,I.kg)(5244,"Apply"),r.onDidClick((()=>this.accept()),this,this._disposables);const a=s.addButton({...$t.cv,secondary:!0});a.label=(0,I.kg)(5245,"Discard"),a.onDidClick((()=>this.discard()),this,this._disposables),this._message=document.createElement("span"),this._message.className="message",this._message.innerText=(0,I.kg)(5246,"Invoke a code action, like rename, to see a preview of its changes here."),e.appendChild(this._message),this._setState("message")}layoutBody(e,t){super.layoutBody(e,t);const i=e-50;this._tree.getHTMLElement().parentElement.style.height=`${i}px`,this._tree.layout(i,t)}_setState(e){this.element.dataset.state=e}async setInput(e,t){this._setState("data"),this._sessionDisposables.clear(),this._treeViewStates.clear(),this._currentResolve&&(this._currentResolve(void 0),this._currentResolve=void 0);const i=await this._instaService.invokeFunction(hn.create,e);this._currentProvider=this._instaService.createInstance(ln,i),this._sessionDisposables.add(this._currentProvider),this._sessionDisposables.add(i);const o=i.categories.length>1;return this._ctxHasCategories.set(o),this._treeDataSource.groupByFile=!o||this._treeDataSource.groupByFile,this._ctxHasCheckedChanges.set(i.checked.checkedCount>0),this._currentInput=i,new Promise((e=>{t.onCancellationRequested((()=>e(void 0))),this._currentResolve=e,this._setTreeInput(i),this._sessionDisposables.add(i.checked.onDidChange((()=>{this._tree.updateChildren(),this._ctxHasCheckedChanges.set(i.checked.checkedCount>0)})))}))}hasInput(){return Boolean(this._currentInput)}async _setTreeInput(e){const t=this._treeViewStates.get(this._treeDataSource.groupByFile);if(await this._tree.setInput(e,t),this._tree.domFocus(),t)return;const i=[...this._tree.getNode(e).children].slice(0,10);for(;i.length>0;){const{element:e}=i.shift();e instanceof Cn&&await this._tree.expand(e,!0),e instanceof yn&&(await this._tree.expand(e,!0),i.push(...this._tree.getNode(e).children))}}accept(){const e=this._currentInput?.conflicts.list();if(!e||0===e.length)return void this._done(!0);let t;t=1===e.length?(0,I.kg)(5247,"Cannot apply refactoring because '{0}' has changed in the meantime.",this._labelService.getUriLabel(e[0],{relative:!0})):(0,I.kg)(5248,"Cannot apply refactoring because {0} other files have changed in the meantime.",e.length),this._dialogService.warn(t).finally((()=>this._done(!1)))}discard(){this._done(!1)}_done(e){this._currentResolve?.(e?this._currentInput?.getWorkspaceEdit():void 0),this._currentInput=void 0,this._setState("message"),this._sessionDisposables.clear()}toggleChecked(){const[e]=this._tree.getFocus();((e instanceof Cn||e instanceof Sn)&&!e.isDisabled()||e instanceof yn)&&e.setChecked(!e.isChecked())}groupByFile(){this._treeDataSource.groupByFile||this.toggleGrouping()}groupByType(){this._treeDataSource.groupByFile&&this.toggleGrouping()}toggleGrouping(){const e=this._tree.getInput();if(e){const t=this._tree.getViewState();this._treeViewStates.set(this._treeDataSource.groupByFile,t),this._treeDataSource.groupByFile=!this._treeDataSource.groupByFile,this._setTreeInput(e),this._storageService.store(Bn._memGroupByFile,this._treeDataSource.groupByFile,0,0),this._ctxGroupByFile.set(this._treeDataSource.groupByFile)}}async _openElementInMultiDiffEditor(e){const t=this._currentInput?.fileOperations;if(!t)return;let i,o;if(e.element instanceof Sn)o=e.element.parent,i=e.element.edit.textEdit.textEdit.range;else{if(!(e.element instanceof Cn))return;o=e.element,i=e.element.edit.textEdits[0]?.textEdit.textEdit.range}const n=await this._computeResourceDiffEditorInputs.get(t),s=await n.getResourceDiffEditorInputIdOfOperation(o.edit),r={...e.editorOptions,viewState:{revealData:{resource:s,range:i}}},a=v.rz.from({scheme:Bn.Schema}),c="Refactor Preview";this._editorService.openEditor({multiDiffSource:a,label:c,options:r,isTransient:!0,description:c,resources:n.resources},e.sideBySide?On.Sd:On.Bn)}_onContextMenu(e){this._contextMenuService.showContextMenu({menuId:_.D8.BulkEditContext,contextKeyService:this.contextKeyService,getAnchor:()=>e.anchor})}};var Fn;async function Gn(e){const t=await e.openView(Nn.ID,!0);if(t instanceof Nn)return t}Nn=Bn=(0,s.C)([(0,s.Q)(1,a._Y),(0,s.Q)(2,be.I),(0,s.Q)(3,jo.L),(0,s.Q)(4,Lo.b),(0,s.Q)(5,Wi.X),(0,s.Q)(6,ne.Z),(0,s.Q)(7,h.C),(0,s.Q)(8,d.f),(0,s.Q)(9,n.X),(0,s.Q)(10,Bt.b),(0,s.Q)(11,ne.Z),(0,s.Q)(12,z.p),(0,s.Q)(13,Yo.C),(0,s.Q)(14,Zi.G),(0,s.Q)(15,b.k),(0,s.Q)(16,Rt.T)],Nn);let Wn=class{constructor(e,t){this._paneCompositeService=e,this._editorGroupsService=t,this._activePanel=e.getActivePaneComposite(1)?.getId()}async restore(e,t){if(e&&("string"==typeof this._activePanel?await this._paneCompositeService.openPaneComposite(this._activePanel,1):this._paneCompositeService.hideActivePaneComposite(1)),t)for(const e of this._editorGroupsService.groups){const t=[];for(const i of e.editors){const e=Q.tf.getCanonicalUri(i,{supportSideBySide:Q.zX.PRIMARY});e?.scheme===Nn.Schema&&t.push(i)}t.length&&e.closeEditors(t,{preserveFocus:!0})}}};Wn=(0,s.C)([(0,s.Q)(0,F.b),(0,s.Q)(1,U.m)],Wn);class zn{constructor(e,t=new yt.Qi){this.uxState=e,this.cts=t}}let Hn=class{static{Fn=this}static{this.ID="workbench.contrib.bulkEditPreview"}static{this.ctxEnabled=new c.N1("refactorPreview.enabled",!1)}constructor(e,t,i,o,n,s){this._paneCompositeService=e,this._viewsService=t,this._editorGroupsService=i,this._dialogService=o,n.setPreviewHandler((e=>this._previewEdit(e))),this._ctxEnabled=Fn.ctxEnabled.bindTo(s)}async _previewEdit(e){this._ctxEnabled.set(!0);const t=this._activeSession?.uxState??new Wn(this._paneCompositeService,this._editorGroupsService),i=await Gn(this._viewsService);if(!i)return this._ctxEnabled.set(!1),e;if(i.hasInput()){const{confirmed:e}=await this._dialogService.confirm({type:X.A.Info,message:(0,I.kg)(1645,"Another refactoring is being previewed."),detail:(0,I.kg)(1646,"Press 'Continue' to discard the previous refactoring and continue with the current refactoring."),primaryButton:(0,I.kg)(1647,"&&Continue")});if(!e)return[]}let o;this._activeSession?(await this._activeSession.uxState.restore(!1,!0),this._activeSession.cts.dispose(!0),o=new zn(t)):o=new zn(t),this._activeSession=o;try{return await i.setInput(e,o.cts.token)??[]}finally{this._activeSession===o&&(await this._activeSession.uxState.restore(!0,!0),this._activeSession.cts.dispose(),this._ctxEnabled.set(!1),this._activeSession=void 0)}}};Hn=Fn=(0,s.C)([(0,s.Q)(0,F.b),(0,s.Q)(1,Mi.R),(0,s.Q)(2,U.m),(0,s.Q)(3,Wi.X),(0,s.Q)(4,lo.nu),(0,s.Q)(5,d.f)],Hn),(0,_.ug)(class extends _.L{constructor(){super({id:"refactorPreview.apply",title:(0,I.aS)(1648,"Apply Refactoring"),category:(0,I.aS)(1649,"Refactor Preview"),icon:xi.W6.check,precondition:c.M$.and(Hn.ctxEnabled,Nn.ctxHasCheckedChanges),menu:[{id:_.D8.BulkEditContext,order:1}],keybinding:{weight:90,when:c.M$.and(Hn.ctxEnabled,ji.kI.isEqualTo(Nn.ID)),primary:2051}})}async run(e){const t=e.get(Mi.R),i=await Gn(t);i?.accept()}}),(0,_.ug)(class extends _.L{constructor(){super({id:"refactorPreview.discard",title:(0,I.aS)(1650,"Discard Refactoring"),category:(0,I.aS)(1649,"Refactor Preview"),icon:xi.W6.clearAll,precondition:Hn.ctxEnabled,menu:[{id:_.D8.BulkEditContext,order:2}]})}async run(e){const t=e.get(Mi.R),i=await Gn(t);i?.discard()}}),(0,_.ug)(class extends _.L{constructor(){super({id:"refactorPreview.toggleCheckedState",title:(0,I.aS)(1651,"Toggle Change"),category:(0,I.aS)(1649,"Refactor Preview"),precondition:Hn.ctxEnabled,keybinding:{weight:200,when:Zo.YD,primary:10},menu:{id:_.D8.BulkEditContext,group:"navigation"}})}async run(e){const t=e.get(Mi.R),i=await Gn(t);i?.toggleChecked()}}),(0,_.ug)(class extends _.L{constructor(){super({id:"refactorPreview.groupByFile",title:(0,I.aS)(1652,"Group Changes By File"),category:(0,I.aS)(1649,"Refactor Preview"),icon:xi.W6.ungroupByRefType,precondition:c.M$.and(Nn.ctxHasCategories,Nn.ctxGroupByFile.negate(),Hn.ctxEnabled),menu:[{id:_.D8.BulkEditTitle,when:c.M$.and(Nn.ctxHasCategories,Nn.ctxGroupByFile.negate()),group:"navigation",order:3}]})}async run(e){const t=e.get(Mi.R),i=await Gn(t);i?.groupByFile()}}),(0,_.ug)(class extends _.L{constructor(){super({id:"refactorPreview.groupByType",title:(0,I.aS)(1653,"Group Changes By Type"),category:(0,I.aS)(1649,"Refactor Preview"),icon:xi.W6.groupByRefType,precondition:c.M$.and(Nn.ctxHasCategories,Nn.ctxGroupByFile,Hn.ctxEnabled),menu:[{id:_.D8.BulkEditTitle,when:c.M$.and(Nn.ctxHasCategories,Nn.ctxGroupByFile),group:"navigation",order:3}]})}async run(e){const t=e.get(Mi.R),i=await Gn(t);i?.groupByType()}}),(0,_.ug)(class extends _.L{constructor(){super({id:"refactorPreview.toggleGrouping",title:(0,I.aS)(1653,"Group Changes By Type"),category:(0,I.aS)(1649,"Refactor Preview"),icon:xi.W6.listTree,toggled:Nn.ctxGroupByFile.negate(),precondition:c.M$.and(Nn.ctxHasCategories,Hn.ctxEnabled),menu:[{id:_.D8.BulkEditContext,order:3}]})}async run(e){const t=e.get(Mi.R),i=await Gn(t);i?.toggleGrouping()}}),(0,$o.tr)(Hn.ID,Hn,2);const Qn=(0,Wt.pU)("refactor-preview-view-icon",xi.W6.lightbulb,(0,I.kg)(1654,"View icon of the refactor preview view.")),Un=u.O.as(r.Fd.ViewContainersRegistry).registerViewContainer({id:Nn.ID,title:(0,I.aS)(1655,"Refactor Preview"),hideIfEmpty:!0,ctorDescriptor:new o.d(g.zv,[Nn.ID,{mergeViewWithContainerWhenSingleView:!0}]),icon:Qn,storageId:Nn.ID},1);function $n(e,t){if(null==t)return e;const i=new URL(e,t);return i.host=new URL(t).hostname,i.toString()}u.O.as(r.Fd.ViewsRegistry).registerViews([{id:Nn.ID,name:(0,I.aS)(1655,"Refactor Preview"),when:Hn.ctxEnabled,ctorDescriptor:new o.d(Nn),containerIcon:Qn}],Un);var Kn=i(37784),jn=i(8957),Zn=i(99784);(0,Fe.A)(".monaco-workbench .call-hierarchy .message,.monaco-workbench .call-hierarchy .results{display:none}.monaco-workbench .call-hierarchy[data-state=data] .results{display:inherit;height:100%}.monaco-workbench .call-hierarchy[data-state=message] .message{align-items:center;display:flex;height:100%;justify-content:center}.monaco-workbench .call-hierarchy .editor,.monaco-workbench .call-hierarchy .tree{height:100%}.monaco-editor .call-hierarchy .tree{background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-fileForeground)}.monaco-workbench .call-hierarchy .tree .callhierarchy-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .call-hierarchy .tree .callhierarchy-element .monaco-icon-label{padding-left:4px}.monaco-editor .call-hierarchy .tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-editor .call-hierarchy .call-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .call-hierarchy .editor .monaco-editor .inputarea.ime-input,.monaco-editor .call-hierarchy .editor .monaco-editor .monaco-editor-background{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .call-hierarchy .editor .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}",{});var Yn=i(67308),qn=i(71730);class Jn{constructor(e,t,i,o){this.item=e,this.locations=t,this.model=i,this.parent=o}static compare(e,t){let i=(0,Ht.UD)(e.item.uri.toString(),t.item.uri.toString());return 0===i&&(i=Ao.Q.compareRangesUsingStarts(e.item.range,t.item.range)),i}}class Xn{constructor(e){this.getDirection=e}hasChildren(){return!0}async getChildren(e){if(e instanceof Zn.X)return e.roots.map((t=>new Jn(t,void 0,e,void 0)));const{model:t,item:i}=e;return"outgoingCalls"===this.getDirection()?(await t.resolveOutgoingCalls(i,yt.XO.None)).map((o=>new Jn(o.to,o.fromRanges.map((e=>({range:e,uri:i.uri}))),t,e))):(await t.resolveIncomingCalls(i,yt.XO.None)).map((i=>new Jn(i.from,i.fromRanges.map((e=>({range:e,uri:i.from.uri}))),t,e)))}}class es{compare(e,t){return Jn.compare(e,t)}}class ts{constructor(e){this.getDirection=e}getId(e){let t=this.getDirection()+JSON.stringify(e.item.uri)+JSON.stringify(e.item.range);return e.parent&&(t+=this.getId(e.parent)),t}}class is{constructor(e,t){this.icon=e,this.label=t}}class os{constructor(){this.templateId=os.id}static{this.id="CallRenderer"}renderTemplate(e){e.classList.add("callhierarchy-element");const t=document.createElement("div");e.appendChild(t);const i=new wn.s(e,{supportHighlights:!0});return new is(t,i)}renderElement(e,t,i){const{element:o,filterData:n}=e,s=o.item.tags?.includes(1);i.icon.className="",i.icon.classList.add("inline",...S.L0.asClassNameArray(qn.gP.toIcon(o.item.kind))),i.label.setLabel(o.item.name,o.item.detail,{labelEscapeNewLines:!0,matches:(0,mn.WJ)(n),strikethrough:s})}disposeTemplate(e){e.label.dispose()}}class ns{getHeight(e){return 22}getTemplateId(e){return os.id}}class ss{constructor(e){this.getDirection=e}getWidgetAriaLabel(){return(0,I.kg)(11473,"Call Hierarchy")}getAriaLabel(e){return"outgoingCalls"===this.getDirection()?(0,I.kg)(11474,"calls from {0}",e.item.name):(0,I.kg)(11475,"callers of {0}",e.item.name)}}var rs,as=i(13175),cs=i(35218),ds=i(10916),hs=i(10442),ls=i(79838),us=i(4141),ps=i(79268);class gs{static store(e,t){t.store("callHierarchyPeekLayout",JSON.stringify(e),0,1)}static retrieve(e){const t=e.get("callHierarchyPeekLayout",0,"{}"),i={ratio:.7,height:17};try{return{...i,...JSON.parse(t)}}catch{return i}}constructor(e,t){this.ratio=e,this.height=t}}class ms extends Zo.er{}let bs=class extends Yn.j6{static{rs=this}static{this.TitleMenu=new _.D8("callhierarchy/title")}constructor(e,t,i,o,n,s,r,a,c,d,h){super(e,{showFrame:!0,showArrow:!0,isResizeable:!0,isAccessible:!0},h),this._where=t,this._direction=i,this._peekViewService=n,this._editorService=s,this._textModelService=r,this._storageService=a,this._menuService=c,this._contextKeyService=d,this._instantiationService=h,this._treeViewStates=new Map,this._previewDisposable=new p.Cm,this.create(),this._peekViewService.addExclusiveWidget(e,this),this._applyTheme(o.getColorTheme()),this._disposables.add(o.onDidColorThemeChange(this._applyTheme,this)),this._disposables.add(this._previewDisposable)}dispose(){gs.store(this._layoutInfo,this._storageService),this._splitView.dispose(),this._tree.dispose(),this._editor.dispose(),super.dispose()}get direction(){return this._direction}_applyTheme(e){const t=e.getColor(Yn.zl)||hs.Q1.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Yn.z0)||hs.Q1.transparent,primaryHeadingColor:e.getColor(Yn._X),secondaryHeadingColor:e.getColor(Yn.e3)})}_fillHead(e){super._fillHead(e,!0);const t=this._menuService.createMenu(rs.TitleMenu,this._contextKeyService),i=()=>{const e=[];(0,ps.Ot)(t,void 0,e),this._actionbarWidget.clear(),this._actionbarWidget.push(e,{label:!1,icon:!0})};this._disposables.add(t),this._disposables.add(t.onDidChange(i)),i()}_fillBody(e){this._layoutInfo=gs.retrieve(this._storageService),this._dim=new ke.fg(0,0),this._parent=e,e.classList.add("call-hierarchy");const t=document.createElement("div");t.classList.add("message"),e.appendChild(t),this._message=t,this._message.tabIndex=0;const i=document.createElement("div");i.classList.add("results"),e.appendChild(i),this._splitView=new as.U(i,{orientation:1});const o=document.createElement("div");o.classList.add("editor"),i.appendChild(o),this._editor=this._instantiationService.createInstance(cs.t,o,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor);const n=document.createElement("div");n.classList.add("tree"),i.appendChild(n);const s={sorter:new es,accessibilityProvider:new ss((()=>this._direction)),identityProvider:new ts((()=>this._direction)),expandOnlyOnTwistieClick:!0,overrideStyles:{listBackground:Yn.n6}};this._tree=this._instantiationService.createInstance(ms,"CallHierarchyPeek",n,new ns,[this._instantiationService.createInstance(os)],this._instantiationService.createInstance(Xn,(()=>this._direction)),s),this._splitView.addView({onDidChange:m.Jh.None,element:o,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._dim.height&&this._editor.layout({height:this._dim.height,width:e})}},as.X.Distribute),this._splitView.addView({onDidChange:m.Jh.None,element:n,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._dim.height&&this._tree.layout(this._dim.height,e)}},as.X.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this._layoutInfo.ratio=this._splitView.getViewSize(0)/this._dim.width)}))),this._disposables.add(this._tree.onDidChangeFocus(this._updatePreview,this)),this._disposables.add(this._editor.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const[o]=this._tree.getFocus();o&&(this.dispose(),this._editorService.openEditor({resource:o.item.uri,options:{selection:i.range}}))}))),this._disposables.add(this._tree.onMouseDblClick((e=>{e.target!==ls.Lx.Twistie&&e.element&&(this.dispose(),this._editorService.openEditor({resource:e.element.item.uri,options:{selection:e.element.item.selectionRange,pinned:!0}}))}))),this._disposables.add(this._tree.onDidChangeSelection((e=>{const[t]=e.elements;t&&(0,ke.kx)(e.browserEvent)&&(this.dispose(),this._editorService.openEditor({resource:t.item.uri,options:{selection:t.item.selectionRange,pinned:!0}}))})))}async _updatePreview(){const[e]=this._tree.getFocus();if(!e)return;this._previewDisposable.clear();const t={description:"call-hierarchy-decoration",stickiness:1,className:"call-decoration",overviewRuler:{color:(0,zt.Yf)(Yn.R),position:ds.A5.Center}};let i;i="outgoingCalls"===this._direction?e.parent?e.parent.item.uri:e.model.root.uri:e.item.uri;const o=await this._textModelService.createModelReference(i);this._editor.setModel(o.object.textEditorModel);const n=[];let s,r=e.locations;r||(r=[{uri:e.item.uri,range:e.item.selectionRange}]);for(const e of r)e.uri.toString()===i.toString()&&(n.push({range:e.range,options:t}),s=s?Ao.Q.plusRange(e.range,s):e.range);if(s){this._editor.revealRangeInCenter(s,1);const e=this._editor.createDecorationsCollection(n);this._previewDisposable.add((0,p.s)((()=>e.clear())))}this._previewDisposable.add(o);const a="outgoingCalls"===this._direction?(0,I.kg)(9702,"Calls from '{0}'",e.model.root.name):(0,I.kg)(9703,"Callers of '{0}'",e.model.root.name);this.setTitle(a)}showLoading(){this._parent.dataset.state="loading",this.setTitle((0,I.kg)(9704,"Loading...")),this._show()}showMessage(e){this._parent.dataset.state="message",this.setTitle(""),this.setMetaTitle(""),this._message.innerText=e,this._show(),this._message.focus()}async showModel(e){this._show();const t=this._treeViewStates.get(this._direction);await this._tree.setInput(e,t);const i=this._tree.getNode(e).children[0];await this._tree.expand(i.element),0===i.children.length?this.showMessage("outgoingCalls"===this._direction?(0,I.kg)(9705,"No calls from '{0}'",e.root.name):(0,I.kg)(9706,"No callers of '{0}'",e.root.name)):(this._parent.dataset.state="data",t&&0!==this._tree.getFocus().length||this._tree.setFocus([i.children[0].element]),this._tree.domFocus(),this._updatePreview())}getModel(){return this._tree.getInput()}getFocused(){return this._tree.getFocus()[0]}async updateDirection(e){const t=this._tree.getInput();t&&e!==this._direction&&(this._treeViewStates.set(this._direction,this._tree.getViewState()),this._direction=e,await this.showModel(t))}_show(){this._isShowing||(this.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber,0),super.show(Ao.Q.fromPositions(this._where),this._layoutInfo.height))}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){this._dim.height===e&&this._dim.width===t||(super._doLayoutBody(e,t),this._dim=new ke.fg(t,e),this._layoutInfo.height=this._viewZone?this._viewZone.heightInLines:this._layoutInfo.height,this._splitView.layout(t),this._splitView.resizeView(0,t*this._layoutInfo.ratio))}};bs=rs=(0,s.C)([(0,s.Q)(3,Zi.G),(0,s.Q)(4,Yn.zn),(0,s.Q)(5,be.I),(0,s.Q)(6,Lo.b),(0,s.Q)(7,h.C),(0,s.Q)(8,us.e),(0,s.Q)(9,d.f),(0,s.Q)(10,a._Y)],bs);var ws,vs=i(28881);const fs=new c.N1("editorHasCallHierarchyProvider",!1,(0,I.kg)(3981,"Whether a call hierarchy provider is available")),ys=new c.N1("callHierarchyVisible",!1,(0,I.kg)(3982,"Whether call hierarchy peek is currently showing")),Cs=new c.N1("callHierarchyDirection",void 0,{type:"string",description:(0,I.kg)(3983,"Whether call hierarchy shows incoming or outgoing calls")});let Ss=class{static{ws=this}static{this.Id="callHierarchy"}static get(e){return e.getContribution(ws.Id)}static{this._StorageDirection="callHierarchy/defaultDirection"}constructor(e,t,i,o,n){this._editor=e,this._contextKeyService=t,this._storageService=i,this._editorService=o,this._instantiationService=n,this._dispoables=new p.Cm,this._sessionDisposables=new p.Cm,this._ctxIsVisible=ys.bindTo(this._contextKeyService),this._ctxHasProvider=fs.bindTo(this._contextKeyService),this._ctxDirection=Cs.bindTo(this._contextKeyService),this._dispoables.add(m.Jh.any(e.onDidChangeModel,e.onDidChangeModelLanguage,Zn.O.onDidChange)((()=>{this._ctxHasProvider.set(e.hasModel()&&Zn.O.has(e.getModel()))}))),this._dispoables.add(this._sessionDisposables)}dispose(){this._ctxHasProvider.reset(),this._ctxIsVisible.reset(),this._dispoables.dispose()}async startCallHierarchyFromEditor(){if(this._sessionDisposables.clear(),!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition();if(!Zn.O.has(e))return;const i=new yt.Qi,o=Zn.X.create(e,t,i.token),n="outgoingCalls"===(s=this._storageService.get(ws._StorageDirection,0,"incomingCalls"))||"incomingCalls"===s?s:"incomingCalls";var s;this._showCallHierarchyWidget(t,n,o,i)}async startCallHierarchyFromCallHierarchy(){if(!this._widget)return;const e=this._widget.getModel(),t=this._widget.getFocused();if(!t||!e)return;const i=await this._editorService.openCodeEditor({resource:t.item.uri},this._editor);if(!i)return;const o=e.fork(t.item);this._sessionDisposables.clear(),ws.get(i)?._showCallHierarchyWidget(Ao.Q.lift(o.root.selectionRange).getStartPosition(),this._widget.direction,Promise.resolve(o),new yt.Qi)}_showCallHierarchyWidget(e,t,i,o){this._ctxIsVisible.set(!0),this._ctxDirection.set(t),m.Jh.any(this._editor.onDidChangeModel,this._editor.onDidChangeModelLanguage)(this.endCallHierarchy,this,this._sessionDisposables),this._widget=this._instantiationService.createInstance(bs,this._editor,e,t),this._widget.showLoading(),this._sessionDisposables.add(this._widget.onDidClose((()=>{this.endCallHierarchy(),this._storageService.store(ws._StorageDirection,this._widget.direction,0,0)}))),this._sessionDisposables.add({dispose(){o.dispose(!0)}}),this._sessionDisposables.add(this._widget),i.then((e=>{o.token.isCancellationRequested||(e?(this._sessionDisposables.add(e),this._widget.showModel(e)):this._widget.showMessage((0,I.kg)(3984,"No results")))})).catch((e=>{(0,xe.MB)(e)?this.endCallHierarchy():this._widget.showMessage((0,I.kg)(3985,"Failed to show call hierarchy"))}))}showOutgoingCalls(){this._widget?.updateDirection("outgoingCalls"),this._ctxDirection.set("outgoingCalls")}showIncomingCalls(){this._widget?.updateDirection("incomingCalls"),this._ctxDirection.set("incomingCalls")}endCallHierarchy(){this._sessionDisposables.clear(),this._ctxIsVisible.set(!1),this._editor.focus()}};Ss=ws=(0,s.C)([(0,s.Q)(1,d.f),(0,s.Q)(2,h.C),(0,s.Q)(3,re.T),(0,s.Q)(4,a._Y)],Ss),(0,Ge.HW)(Ss.Id,Ss,0),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.showCallHierarchy",title:(0,I.aS)(3986,"Peek Call Hierarchy"),menu:{id:_.D8.EditorContextPeek,group:"navigation",order:1e3,when:c.M$.and(fs,Yn.x2.notInPeekEditor,vs.R.isInEmbeddedEditor.toNegated())},keybinding:{when:vs.R.editorTextFocus,weight:200,primary:1574},precondition:c.M$.and(fs,Yn.x2.notInPeekEditor),f1:!0})}async runEditorCommand(e,t){return Ss.get(t)?.startCallHierarchyFromEditor()}}),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.showIncomingCalls",title:(0,I.aS)(3987,"Show Incoming Calls"),icon:(0,Wt.pU)("callhierarchy-incoming",xi.W6.callIncoming,(0,I.kg)(3988,"Icon for incoming calls in the call hierarchy view.")),precondition:c.M$.and(ys,Cs.isEqualTo("outgoingCalls")),keybinding:{weight:200,primary:1574},menu:{id:bs.TitleMenu,when:Cs.isEqualTo("outgoingCalls"),order:1}})}runEditorCommand(e,t){return Ss.get(t)?.showIncomingCalls()}}),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.showOutgoingCalls",title:(0,I.aS)(3989,"Show Outgoing Calls"),icon:(0,Wt.pU)("callhierarchy-outgoing",xi.W6.callOutgoing,(0,I.kg)(3990,"Icon for outgoing calls in the call hierarchy view.")),precondition:c.M$.and(ys,Cs.isEqualTo("incomingCalls")),keybinding:{weight:200,primary:1574},menu:{id:bs.TitleMenu,when:Cs.isEqualTo("incomingCalls"),order:1}})}runEditorCommand(e,t){return Ss.get(t)?.showOutgoingCalls()}}),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.refocusCallHierarchy",title:(0,I.aS)(3991,"Refocus Call Hierarchy"),precondition:ys,keybinding:{weight:200,primary:1027}})}async runEditorCommand(e,t){return Ss.get(t)?.startCallHierarchyFromCallHierarchy()}}),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.closeCallHierarchy",title:(0,I.kg)(3992,"Close"),icon:xi.W6.close,precondition:ys,keybinding:{weight:210,primary:9,when:c.M$.not("config.editor.stablePeek")},menu:{id:bs.TitleMenu,order:1e3}})}runEditorCommand(e,t){return Ss.get(t)?.endCallHierarchy()}}),(0,Fe.A)(".monaco-workbench .type-hierarchy .message,.monaco-workbench .type-hierarchy .results{display:none}.monaco-workbench .type-hierarchy[data-state=data] .results{display:inherit;height:100%}.monaco-workbench .type-hierarchy[data-state=message] .message{align-items:center;display:flex;height:100%;justify-content:center}.monaco-workbench .type-hierarchy .editor,.monaco-workbench .type-hierarchy .tree{height:100%}.monaco-editor .type-hierarchy .tree{background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-fileForeground)}.monaco-editor .type-hierarchy .tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-workbench .type-hierarchy .tree .typehierarchy-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .type-hierarchy .tree .typehierarchy-element .monaco-icon-label{padding-left:4px}.monaco-editor .type-hierarchy .type-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .type-hierarchy .editor .monaco-editor .inputarea.ime-input,.monaco-editor .type-hierarchy .editor .monaco-editor .monaco-editor-background{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .type-hierarchy .editor .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}",{});var ks,_s=i(16748);class xs{constructor(e,t,i){this.item=e,this.model=t,this.parent=i}static compare(e,t){let i=(0,Ht.UD)(e.item.uri.toString(),t.item.uri.toString());return 0===i&&(i=Ao.Q.compareRangesUsingStarts(e.item.range,t.item.range)),i}}class Es{constructor(e){this.getDirection=e}hasChildren(){return!0}async getChildren(e){if(e instanceof _s.J)return e.roots.map((t=>new xs(t,e,void 0)));const{model:t,item:i}=e;return"supertypes"===this.getDirection()?(await t.provideSupertypes(i,yt.XO.None)).map((i=>new xs(i,t,e))):(await t.provideSubtypes(i,yt.XO.None)).map((i=>new xs(i,t,e)))}}class Ds{compare(e,t){return xs.compare(e,t)}}class Is{constructor(e){this.getDirection=e}getId(e){let t=this.getDirection()+JSON.stringify(e.item.uri)+JSON.stringify(e.item.range);return e.parent&&(t+=this.getId(e.parent)),t}}class Vs{constructor(e,t){this.icon=e,this.label=t}}class Ms{constructor(){this.templateId=Ms.id}static{this.id="TypeRenderer"}renderTemplate(e){e.classList.add("typehierarchy-element");const t=document.createElement("div");e.appendChild(t);const i=new wn.s(e,{supportHighlights:!0});return new Vs(t,i)}renderElement(e,t,i){const{element:o,filterData:n}=e,s=o.item.tags?.includes(1);i.icon.classList.add("inline",...S.L0.asClassNameArray(qn.gP.toIcon(o.item.kind))),i.label.setLabel(o.item.name,o.item.detail,{labelEscapeNewLines:!0,matches:(0,mn.WJ)(n),strikethrough:s})}disposeTemplate(e){e.label.dispose()}}class Ts{getHeight(e){return 22}getTemplateId(e){return Ms.id}}class As{constructor(e){this.getDirection=e}getWidgetAriaLabel(){return(0,I.kg)(11476,"Type Hierarchy")}getAriaLabel(e){return"supertypes"===this.getDirection()?(0,I.kg)(11477,"supertypes of {0}",e.item.name):(0,I.kg)(11478,"subtypes of {0}",e.item.name)}}class Ls{static store(e,t){t.store("typeHierarchyPeekLayout",JSON.stringify(e),0,1)}static retrieve(e){const t=e.get("typeHierarchyPeekLayout",0,"{}"),i={ratio:.7,height:17};try{return{...i,...JSON.parse(t)}}catch{return i}}constructor(e,t){this.ratio=e,this.height=t}}class Ps extends Zo.er{}let Rs=class extends Yn.j6{static{ks=this}static{this.TitleMenu=new _.D8("typehierarchy/title")}constructor(e,t,i,o,n,s,r,a,c,d,h){super(e,{showFrame:!0,showArrow:!0,isResizeable:!0,isAccessible:!0},h),this._where=t,this._direction=i,this._peekViewService=n,this._editorService=s,this._textModelService=r,this._storageService=a,this._menuService=c,this._contextKeyService=d,this._instantiationService=h,this._treeViewStates=new Map,this._previewDisposable=new p.Cm,this.create(),this._peekViewService.addExclusiveWidget(e,this),this._applyTheme(o.getColorTheme()),this._disposables.add(o.onDidColorThemeChange(this._applyTheme,this)),this._disposables.add(this._previewDisposable)}dispose(){Ls.store(this._layoutInfo,this._storageService),this._splitView.dispose(),this._tree.dispose(),this._editor.dispose(),super.dispose()}get direction(){return this._direction}_applyTheme(e){const t=e.getColor(Yn.zl)||hs.Q1.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Yn.z0)||hs.Q1.transparent,primaryHeadingColor:e.getColor(Yn._X),secondaryHeadingColor:e.getColor(Yn.e3)})}_fillHead(e){super._fillHead(e,!0);const t=this._menuService.createMenu(ks.TitleMenu,this._contextKeyService),i=()=>{const e=[];(0,ps.Ot)(t,void 0,e),this._actionbarWidget.clear(),this._actionbarWidget.push(e,{label:!1,icon:!0})};this._disposables.add(t),this._disposables.add(t.onDidChange(i)),i()}_fillBody(e){this._layoutInfo=Ls.retrieve(this._storageService),this._dim=new ke.fg(0,0),this._parent=e,e.classList.add("type-hierarchy");const t=document.createElement("div");t.classList.add("message"),e.appendChild(t),this._message=t,this._message.tabIndex=0;const i=document.createElement("div");i.classList.add("results"),e.appendChild(i),this._splitView=new as.U(i,{orientation:1});const o=document.createElement("div");o.classList.add("editor"),i.appendChild(o),this._editor=this._instantiationService.createInstance(cs.t,o,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor);const n=document.createElement("div");n.classList.add("tree"),i.appendChild(n);const s={sorter:new Ds,accessibilityProvider:new As((()=>this._direction)),identityProvider:new Is((()=>this._direction)),expandOnlyOnTwistieClick:!0,overrideStyles:{listBackground:Yn.n6}};this._tree=this._instantiationService.createInstance(Ps,"TypeHierarchyPeek",n,new Ts,[this._instantiationService.createInstance(Ms)],this._instantiationService.createInstance(Es,(()=>this._direction)),s),this._splitView.addView({onDidChange:m.Jh.None,element:o,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._dim.height&&this._editor.layout({height:this._dim.height,width:e})}},as.X.Distribute),this._splitView.addView({onDidChange:m.Jh.None,element:n,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._dim.height&&this._tree.layout(this._dim.height,e)}},as.X.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this._layoutInfo.ratio=this._splitView.getViewSize(0)/this._dim.width)}))),this._disposables.add(this._tree.onDidChangeFocus(this._updatePreview,this)),this._disposables.add(this._editor.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const[o]=this._tree.getFocus();o&&(this.dispose(),this._editorService.openEditor({resource:o.item.uri,options:{selection:i.range}}))}))),this._disposables.add(this._tree.onMouseDblClick((e=>{e.target!==ls.Lx.Twistie&&e.element&&(this.dispose(),this._editorService.openEditor({resource:e.element.item.uri,options:{selection:e.element.item.selectionRange,pinned:!0}}))}))),this._disposables.add(this._tree.onDidChangeSelection((e=>{const[t]=e.elements;t&&(0,ke.kx)(e.browserEvent)&&(this.dispose(),this._editorService.openEditor({resource:t.item.uri,options:{selection:t.item.selectionRange,pinned:!0}}))})))}async _updatePreview(){const[e]=this._tree.getFocus();if(!e)return;this._previewDisposable.clear();const t={description:"type-hierarchy-decoration",stickiness:1,className:"type-decoration",overviewRuler:{color:(0,zt.Yf)(Yn.R),position:ds.A5.Center}};let i;i="supertypes"===this._direction?e.parent?e.parent.item.uri:e.model.root.uri:e.item.uri;const o=await this._textModelService.createModelReference(i);this._editor.setModel(o.object.textEditorModel);const n=[];let s;const r={uri:e.item.uri,range:e.item.selectionRange};if(r.uri.toString()===i.toString()&&(n.push({range:r.range,options:t}),s=s?Ao.Q.plusRange(r.range,s):r.range),s){this._editor.revealRangeInCenter(s,1);const e=this._editor.createDecorationsCollection(n);this._previewDisposable.add((0,p.s)((()=>e.clear())))}this._previewDisposable.add(o);const a="supertypes"===this._direction?(0,I.kg)(9707,"Supertypes of '{0}'",e.model.root.name):(0,I.kg)(9708,"Subtypes of '{0}'",e.model.root.name);this.setTitle(a)}showLoading(){this._parent.dataset.state="loading",this.setTitle((0,I.kg)(9709,"Loading...")),this._show()}showMessage(e){this._parent.dataset.state="message",this.setTitle(""),this.setMetaTitle(""),this._message.innerText=e,this._show(),this._message.focus()}async showModel(e){this._show();const t=this._treeViewStates.get(this._direction);await this._tree.setInput(e,t);const i=this._tree.getNode(e).children[0];await this._tree.expand(i.element),0===i.children.length?this.showMessage("supertypes"===this._direction?(0,I.kg)(9710,"No supertypes of '{0}'",e.root.name):(0,I.kg)(9711,"No subtypes of '{0}'",e.root.name)):(this._parent.dataset.state="data",t&&0!==this._tree.getFocus().length||this._tree.setFocus([i.children[0].element]),this._tree.domFocus(),this._updatePreview())}getModel(){return this._tree.getInput()}getFocused(){return this._tree.getFocus()[0]}async updateDirection(e){const t=this._tree.getInput();t&&e!==this._direction&&(this._treeViewStates.set(this._direction,this._tree.getViewState()),this._direction=e,await this.showModel(t))}_show(){this._isShowing||(this.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber,0),super.show(Ao.Q.fromPositions(this._where),this._layoutInfo.height))}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){this._dim.height===e&&this._dim.width===t||(super._doLayoutBody(e,t),this._dim=new ke.fg(t,e),this._layoutInfo.height=this._viewZone?this._viewZone.heightInLines:this._layoutInfo.height,this._splitView.layout(t),this._splitView.resizeView(0,t*this._layoutInfo.ratio))}};var Bs;Rs=ks=(0,s.C)([(0,s.Q)(3,Zi.G),(0,s.Q)(4,Yn.zn),(0,s.Q)(5,be.I),(0,s.Q)(6,Lo.b),(0,s.Q)(7,h.C),(0,s.Q)(8,us.e),(0,s.Q)(9,d.f),(0,s.Q)(10,a._Y)],Rs);const Os=new c.N1("editorHasTypeHierarchyProvider",!1,(0,I.kg)(3993,"Whether a type hierarchy provider is available")),Ns=new c.N1("typeHierarchyVisible",!1,(0,I.kg)(3994,"Whether type hierarchy peek is currently showing")),Fs=new c.N1("typeHierarchyDirection",void 0,{type:"string",description:(0,I.kg)(3995,"whether type hierarchy shows super types or subtypes")});let Gs=class{static{Bs=this}static{this.Id="typeHierarchy"}static get(e){return e.getContribution(Bs.Id)}static{this._storageDirectionKey="typeHierarchy/defaultDirection"}constructor(e,t,i,o,n){this._editor=e,this._contextKeyService=t,this._storageService=i,this._editorService=o,this._instantiationService=n,this._disposables=new p.Cm,this._sessionDisposables=new p.Cm,this._ctxHasProvider=Os.bindTo(this._contextKeyService),this._ctxIsVisible=Ns.bindTo(this._contextKeyService),this._ctxDirection=Fs.bindTo(this._contextKeyService),this._disposables.add(m.Jh.any(e.onDidChangeModel,e.onDidChangeModelLanguage,_s.G.onDidChange)((()=>{this._ctxHasProvider.set(e.hasModel()&&_s.G.has(e.getModel()))}))),this._disposables.add(this._sessionDisposables)}dispose(){this._disposables.dispose()}async startTypeHierarchyFromEditor(){if(this._sessionDisposables.clear(),!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition();if(!_s.G.has(e))return;const i=new yt.Qi,o=_s.J.create(e,t,i.token),n="subtypes"===(s=this._storageService.get(Bs._storageDirectionKey,0,"subtypes"))||"supertypes"===s?s:"subtypes";var s;this._showTypeHierarchyWidget(t,n,o,i)}_showTypeHierarchyWidget(e,t,i,o){this._ctxIsVisible.set(!0),this._ctxDirection.set(t),m.Jh.any(this._editor.onDidChangeModel,this._editor.onDidChangeModelLanguage)(this.endTypeHierarchy,this,this._sessionDisposables),this._widget=this._instantiationService.createInstance(Rs,this._editor,e,t),this._widget.showLoading(),this._sessionDisposables.add(this._widget.onDidClose((()=>{this.endTypeHierarchy(),this._storageService.store(Bs._storageDirectionKey,this._widget.direction,0,0)}))),this._sessionDisposables.add({dispose(){o.dispose(!0)}}),this._sessionDisposables.add(this._widget),i.then((e=>{o.token.isCancellationRequested||(e?(this._sessionDisposables.add(e),this._widget.showModel(e)):this._widget.showMessage((0,I.kg)(3996,"No results")))})).catch((e=>{(0,xe.MB)(e)?this.endTypeHierarchy():this._widget.showMessage((0,I.kg)(3997,"Failed to show type hierarchy"))}))}async startTypeHierarchyFromTypeHierarchy(){if(!this._widget)return;const e=this._widget.getModel(),t=this._widget.getFocused();if(!t||!e)return;const i=await this._editorService.openCodeEditor({resource:t.item.uri},this._editor);if(!i)return;const o=e.fork(t.item);this._sessionDisposables.clear(),Bs.get(i)?._showTypeHierarchyWidget(Ao.Q.lift(o.root.selectionRange).getStartPosition(),this._widget.direction,Promise.resolve(o),new yt.Qi)}showSupertypes(){this._widget?.updateDirection("supertypes"),this._ctxDirection.set("supertypes")}showSubtypes(){this._widget?.updateDirection("subtypes"),this._ctxDirection.set("subtypes")}endTypeHierarchy(){this._sessionDisposables.clear(),this._ctxIsVisible.set(!1),this._editor.focus()}};Gs=Bs=(0,s.C)([(0,s.Q)(1,d.f),(0,s.Q)(2,h.C),(0,s.Q)(3,re.T),(0,s.Q)(4,a._Y)],Gs),(0,Ge.HW)(Gs.Id,Gs,0),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.showTypeHierarchy",title:(0,I.aS)(3998,"Peek Type Hierarchy"),menu:{id:_.D8.EditorContextPeek,group:"navigation",order:1e3,when:c.M$.and(Os,Yn.x2.notInPeekEditor)},precondition:c.M$.and(Os,Yn.x2.notInPeekEditor),f1:!0})}async runEditorCommand(e,t){return Gs.get(t)?.startTypeHierarchyFromEditor()}}),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.showSupertypes",title:(0,I.aS)(3999,"Show Supertypes"),icon:xi.W6.typeHierarchySuper,precondition:c.M$.and(Ns,Fs.isEqualTo("subtypes")),keybinding:{weight:200,primary:1574},menu:{id:Rs.TitleMenu,when:Fs.isEqualTo("subtypes"),order:1}})}runEditorCommand(e,t){return Gs.get(t)?.showSupertypes()}}),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.showSubtypes",title:(0,I.aS)(4e3,"Show Subtypes"),icon:xi.W6.typeHierarchySub,precondition:c.M$.and(Ns,Fs.isEqualTo("supertypes")),keybinding:{weight:200,primary:1574},menu:{id:Rs.TitleMenu,when:Fs.isEqualTo("supertypes"),order:1}})}runEditorCommand(e,t){return Gs.get(t)?.showSubtypes()}}),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.refocusTypeHierarchy",title:(0,I.aS)(4001,"Refocus Type Hierarchy"),precondition:Ns,keybinding:{weight:200,primary:1027}})}async runEditorCommand(e,t){return Gs.get(t)?.startTypeHierarchyFromTypeHierarchy()}}),(0,_.ug)(class extends Ge.qO{constructor(){super({id:"editor.closeTypeHierarchy",title:(0,I.kg)(4002,"Close"),icon:xi.W6.close,precondition:Ns,keybinding:{weight:210,primary:9,when:c.M$.not("config.editor.stablePeek")},menu:{id:Rs.TitleMenu,order:1e3}})}runEditorCommand(e,t){return Gs.get(t)?.endTypeHierarchy()}});var Ws=i(61478),zs=i(77512),Hs=i(36220),Qs=i(21747),Us=i(88902),$s=i(77120),Ks=i(13064),js=i(68942),Zs=i(50928),Ys=i(89966),qs=i(24161);function Js(e){const t=e?.getHTMLElement();t&&!(0,ke.X7)(t)&&e?.domFocus()}async function Xs(e,t){if(!e)return;await async function(e,t){if(!Zo.sm.getValue(e.contextKeyService))return t(e);const i=e.getFocus(),o=e.getSelection();await t(e);const n=e.getFocus();if(o.length>1||!(0,f.aI)(i,o)||(0,f.aI)(i,n))return;const s=new KeyboardEvent("keydown");e.setSelection(n,s)}(e,t);const i=e.getFocus();i.length&&e.reveal(i[0]),e.setAnchor(i[0]),Js(e)}function er(e,t){if(e instanceof Hs.B8||e instanceof Us.Y||e instanceof Ys.X){const i=e,o=i.getFocus()?i.getFocus()[0]:void 0,n=i.getSelection();n&&"number"==typeof o&&n.indexOf(o)>=0?i.setSelection(n.filter((e=>e!==t))):"number"==typeof o&&i.setSelection(n.concat(o))}else if(e instanceof $s.u||e instanceof js.f||e instanceof Ks.t){const i=e,o=i.getFocus()?i.getFocus()[0]:void 0;if(t===o)return;const n=i.getSelection(),s=new KeyboardEvent("keydown",{shiftKey:!0});n&&n.indexOf(o)>=0?i.setSelection(n.filter((e=>e!==t)),s):i.setSelection(n.concat(o),s)}}function tr(e,t){const i=e.getStickyScrollFocus();if(0===i.length)throw new Error("StickyScroll has no focus");if(i.length>1)throw new Error("StickyScroll can only have a single focused item");e.reveal(i[0]),e.getHTMLElement().focus(),e.setFocus(i),t?.(i[0])}function ir(e,t){const i=e.get(Qs.P).lastFocusedList,o=(0,Zo.wc)("keydown",t);if(i instanceof Hs.B8||i instanceof Us.Y||i instanceof Ys.X){const e=i;e.setAnchor(e.getFocus()[0]),e.setSelection(e.getFocus(),o)}else if(i instanceof $s.u||i instanceof js.f||i instanceof Ks.t){const e=i,t=e.getFocus();if(t.length>0){let i=!0;(!0===e.expandOnlyOnTwistieClick||"boolean"!=typeof e.expandOnlyOnTwistieClick&&e.expandOnlyOnTwistieClick(t[0]))&&(i=!1),i&&e.toggleCollapsed(t[0])}e.setAnchor(t[0]),e.setSelection(t,o)}}zs.f.registerCommandAndKeybindingRule({id:"list.focusDown",weight:200,when:Zo.YD,primary:18,mac:{primary:18,secondary:[300]},handler:(e,t)=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const i=new KeyboardEvent("keydown");await e.focusNext("number"==typeof t?t:1,!1,i)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusUp",weight:200,when:Zo.YD,primary:16,mac:{primary:16,secondary:[302]},handler:(e,t)=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const i=new KeyboardEvent("keydown");await e.focusPrevious("number"==typeof t?t:1,!1,i)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusAnyDown",weight:200,when:Zo.YD,primary:530,mac:{primary:530,secondary:[812]},handler:(e,t)=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const i=new KeyboardEvent("keydown",{altKey:!0});await e.focusNext("number"==typeof t?t:1,!1,i)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusAnyUp",weight:200,when:Zo.YD,primary:528,mac:{primary:528,secondary:[814]},handler:(e,t)=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const i=new KeyboardEvent("keydown",{altKey:!0});await e.focusPrevious("number"==typeof t?t:1,!1,i)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusPageDown",weight:200,when:Zo.YD,primary:12,handler:e=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown");await e.focusNextPage(t)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusPageUp",weight:200,when:Zo.YD,primary:11,handler:e=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown");await e.focusPreviousPage(t)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusFirst",weight:200,when:Zo.YD,primary:14,handler:e=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown");await e.focusFirst(t)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusLast",weight:200,when:Zo.YD,primary:13,handler:e=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown");await e.focusLast(t)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusAnyFirst",weight:200,when:Zo.YD,primary:526,handler:e=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown",{altKey:!0});await e.focusFirst(t)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusAnyLast",weight:200,when:Zo.YD,primary:525,handler:e=>{Xs(e.get(Qs.P).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown",{altKey:!0});await e.focusLast(t)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.expandSelectionDown",weight:200,when:c.M$.and(Zo.YD,Zo.vx),primary:1042,handler:(e,t)=>{const i=e.get(Qs.P).lastFocusedList;if(!i)return;const o=i.getFocus()?i.getFocus()[0]:void 0,n=new KeyboardEvent("keydown");i.focusNext("number"==typeof t?t:1,!1,n),er(i,o);const s=i.getFocus();s.length&&i.reveal(s[0]),Js(i)}}),zs.f.registerCommandAndKeybindingRule({id:"list.expandSelectionUp",weight:200,when:c.M$.and(Zo.YD,Zo.vx),primary:1040,handler:(e,t)=>{const i=e.get(Qs.P).lastFocusedList;if(!i)return;const o=i.getFocus()?i.getFocus()[0]:void 0,n=new KeyboardEvent("keydown");i.focusPrevious("number"==typeof t?t:1,!1,n),er(i,o);const s=i.getFocus();s.length&&i.reveal(s[0]),Js(i)}}),zs.f.registerCommandAndKeybindingRule({id:"list.collapse",weight:200,when:c.M$.and(Zo.YD,c.M$.or(Zo.Nf,Zo.Mm)),primary:15,mac:{primary:15,secondary:[2064]},handler:e=>{const t=e.get(Qs.P).lastFocusedList;if(!t||!(t instanceof $s.u||t instanceof js.f||t instanceof Ks.t))return;const i=t,o=i.getFocus();if(0===o.length)return;const n=o[0];if(!i.collapse(n)){const e=i.getParentElement(n);e&&Xs(t,(t=>{const i=new KeyboardEvent("keydown");t.setFocus([e],i)}))}}}),zs.f.registerCommandAndKeybindingRule({id:"list.stickyScroll.collapse",weight:250,when:Zo.Jy,primary:15,mac:{primary:15,secondary:[2064]},handler:e=>{const t=e.get(Qs.P).lastFocusedList;t&&(t instanceof $s.u||t instanceof js.f||t instanceof Ks.t)&&tr(t,(e=>t.collapse(e)))}}),zs.f.registerCommandAndKeybindingRule({id:"list.collapseAll",weight:200,when:Zo.YD,primary:2063,mac:{primary:2063,secondary:[3088]},handler:e=>{const t=e.get(Qs.P).lastFocusedList;t&&!(t instanceof Hs.B8||t instanceof Us.Y||t instanceof Ys.X)&&t.collapseAll()}}),zs.f.registerCommandAndKeybindingRule({id:"list.collapseAllToFocus",weight:200,when:Zo.YD,handler:e=>{const t=e.get(Qs.P).lastFocusedList,i=(0,Zo.wc)("keydown",!0);if(t instanceof $s.u||t instanceof js.f||t instanceof Ks.t){const e=t,o=e.getFocus();o.length>0&&e.collapse(o[0],!0),e.setSelection(o,i),e.setAnchor(o[0])}}}),zs.f.registerCommandAndKeybindingRule({id:"list.focusParent",weight:200,when:Zo.YD,handler:e=>{const t=e.get(Qs.P).lastFocusedList;if(!t||!(t instanceof $s.u||t instanceof js.f||t instanceof Ks.t))return;const i=t,o=i.getFocus();if(0===o.length)return;const n=o[0],s=i.getParentElement(n);s&&Xs(t,(e=>{const t=new KeyboardEvent("keydown");e.setFocus([s],t)}))}}),zs.f.registerCommandAndKeybindingRule({id:"list.expand",weight:200,when:c.M$.and(Zo.YD,c.M$.or(Zo.cH,Zo.Ck)),primary:17,handler:e=>{const t=e.get(Qs.P).lastFocusedList;if(t)if(t instanceof $s.u||t instanceof js.f){const e=t.getFocus();if(0===e.length)return;const i=e[0];if(!t.expand(i)){const e=t.getFirstElementChild(i);e&&t.getNode(e).visible&&Xs(t,(t=>{const i=new KeyboardEvent("keydown");t.setFocus([e],i)}))}}else if(t instanceof Ks.t){const e=t.getFocus();if(0===e.length)return;const i=e[0];t.expand(i).then((e=>{if(i&&!e){const e=t.getFirstElementChild(i);e&&t.getNode(e).visible&&Xs(t,(t=>{const i=new KeyboardEvent("keydown");t.setFocus([e],i)}))}}))}}}),zs.f.registerCommandAndKeybindingRule({id:"list.select",weight:200,when:Zo.YD,primary:3,mac:{primary:3,secondary:[2066]},handler:e=>{ir(e,!1)}}),zs.f.registerCommandAndKeybindingRule({id:"list.stickyScrollselect",weight:250,when:Zo.Jy,primary:3,mac:{primary:3,secondary:[2066]},handler:e=>{const t=e.get(Qs.P).lastFocusedList;t&&(t instanceof $s.u||t instanceof js.f||t instanceof Ks.t)&&tr(t,(e=>t.setSelection([e])))}}),zs.f.registerCommandAndKeybindingRule({id:"list.selectAndPreserveFocus",weight:200,when:Zo.YD,handler:e=>{ir(e,!0)}}),zs.f.registerCommandAndKeybindingRule({id:"list.selectAll",weight:200,when:c.M$.and(Zo.YD,Zo.vx),primary:2079,handler:e=>{const t=e.get(Qs.P).lastFocusedList;if(t instanceof Hs.B8||t instanceof Us.Y||t instanceof Ys.X){const e=t,i=new KeyboardEvent("keydown");e.setSelection((0,f.y1)(e.length),i)}else if(t instanceof $s.u||t instanceof js.f||t instanceof Ks.t){const e=t,i=e.getFocus(),o=e.getSelection();let n,s;i.length>0&&(0===o.length||!o.includes(i[0]))&&(n=i[0]),!n&&o.length>0&&(n=o[0]),s=n?e.getParentElement(n):void 0;const r=[],a=e=>{for(const t of e.children)t.visible&&(r.push(t.element),t.collapsed||a(t))};a(e.getNode(s)),s&&o.length===r.length&&r.unshift(s);const c=new KeyboardEvent("keydown");e.setSelection(r,c)}}}),zs.f.registerCommandAndKeybindingRule({id:"list.toggleSelection",weight:200,when:Zo.YD,primary:3075,handler:e=>{const t=e.get(Qs.P).lastFocusedList;if(!t)return;const i=t.getFocus();if(0===i.length)return;const o=t.getSelection(),n=o.indexOf(i[0]);n>-1?t.setSelection([...o.slice(0,n),...o.slice(n+1)]):t.setSelection([...o,i[0]])}}),zs.f.registerCommandAndKeybindingRule({id:"list.showHover",weight:200,primary:(0,Ws.m5)(2089,2087),when:Zo.YD,handler:async(e,...t)=>{const i=e.get(Qs.P).lastFocusedList;if(!i)return;const o=i.getFocus();if(!o||0===o.length)return;const n=i.getHTMLElement().querySelector(".monaco-scrollable-element"),s=n?.querySelector(".monaco-list-rows"),r=s?.querySelector(".focused");if(!r)return;const a=function(e){if(e.matches('[custom-hover="true"]'))return e;const t=e.querySelector('[custom-hover="true"]:not([tabindex]):not(.action-item)');return t||void 0}(r);a&&e.get(Rt.T).showManagedHover(a)}}),zs.f.registerCommandAndKeybindingRule({id:"list.toggleExpand",weight:200,when:Zo.YD,primary:10,handler:e=>{const t=e.get(Qs.P).lastFocusedList;if(t instanceof $s.u||t instanceof js.f||t instanceof Ks.t){const e=t,i=e.getFocus();if(i.length>0&&e.isCollapsible(i[0]))return void e.toggleCollapsed(i[0])}ir(e,!0)}}),zs.f.registerCommandAndKeybindingRule({id:"list.stickyScrolltoggleExpand",weight:250,when:Zo.Jy,primary:10,handler:e=>{const t=e.get(Qs.P).lastFocusedList;t&&(t instanceof $s.u||t instanceof js.f||t instanceof Ks.t)&&tr(t)}}),zs.f.registerCommandAndKeybindingRule({id:"list.clear",weight:200,when:c.M$.and(Zo.YD,Zo.$),primary:9,handler:e=>{const t=e.get(Qs.P).lastFocusedList;if(!t)return;const i=t.getSelection(),o=new KeyboardEvent("keydown");if(i.length>1)if(Zo.sm.getValue(t.contextKeyService)){const e=t.getFocus();t.setSelection([e[0]],o)}else t.setSelection([],o);else t.setSelection([],o),t.setFocus([],o);t.setAnchor(void 0)}}),Zs.w.registerCommand({id:"list.triggerTypeNavigation",handler:e=>{const t=e.get(Qs.P).lastFocusedList;t?.triggerTypeNavigation()}}),Zs.w.registerCommand({id:"list.toggleFindMode",handler:e=>{const t=e.get(Qs.P).lastFocusedList;if(t instanceof qs.DO||t instanceof Ks.t){const e=t;e.findMode=e.findMode===qs.vD.Filter?qs.vD.Highlight:qs.vD.Filter}}}),Zs.w.registerCommand({id:"list.toggleFindMatchType",handler:e=>{const t=e.get(Qs.P).lastFocusedList;if(t instanceof qs.DO||t instanceof Ks.t){const e=t;e.findMatchType=e.findMatchType===qs.RD.Contiguous?qs.RD.Fuzzy:qs.RD.Contiguous}}}),Zs.w.registerCommandAlias("list.toggleKeyboardNavigation","list.triggerTypeNavigation"),Zs.w.registerCommandAlias("list.toggleFilterOnType","list.toggleFindMode"),zs.f.registerCommandAndKeybindingRule({id:"list.find",weight:200,when:c.M$.and(Zo.ch,Zo.jR),primary:2596,secondary:[61],handler:e=>{const t=e.get(Qs.P).lastFocusedList;t instanceof Hs.B8||t instanceof Us.Y||t instanceof Ys.X||(t instanceof qs.DO||t instanceof Ks.t)&&t.openFind()}}),zs.f.registerCommandAndKeybindingRule({id:"list.closeFind",weight:200,when:c.M$.and(Zo.ch,Zo.R4),primary:9,handler:e=>{const t=e.get(Qs.P).lastFocusedList;(t instanceof qs.DO||t instanceof Ks.t)&&t.closeFind()}}),zs.f.registerCommandAndKeybindingRule({id:"list.scrollUp",weight:200,when:c.M$.and(Zo.YD,Zo.z6?.negate()),primary:2064,handler:e=>{const t=e.get(Qs.P).lastFocusedList;t&&(t.scrollTop-=10)}}),zs.f.registerCommandAndKeybindingRule({id:"list.scrollDown",weight:200,when:c.M$.and(Zo.YD,Zo.z?.negate()),primary:2066,handler:e=>{const t=e.get(Qs.P).lastFocusedList;t&&(t.scrollTop+=10)}}),zs.f.registerCommandAndKeybindingRule({id:"list.scrollLeft",weight:200,when:Zo.YD,handler:e=>{const t=e.get(Qs.P).lastFocusedList;t&&(t.scrollLeft-=10)}}),zs.f.registerCommandAndKeybindingRule({id:"list.scrollRight",weight:200,when:Zo.YD,handler:e=>{const t=e.get(Qs.P).lastFocusedList;t&&(t.scrollLeft+=10)}}),(0,_.ug)(class extends _.L{constructor(){super({id:"tree.toggleStickyScroll",title:{...(0,I.aS)(4003,"Toggle Tree Sticky Scroll"),mnemonicTitle:(0,I.kg)(4004,"&&Toggle Tree Sticky Scroll")},category:"View",metadata:{description:(0,I.kg)(4005,"Toggles Sticky Scroll widget at the top of tree structures such as the File Explorer and Debug variables View.")},f1:!0})}run(e){const t=e.get(z.p),i=!t.getValue("workbench.tree.enableStickyScroll");t.updateValue("workbench.tree.enableStickyScroll",i)}}),(0,Fe.A)('.file-icon-themable-tree .align-icon-with-twisty .monaco-tl-twistie:not(.force-twistie):not(.collapsible),.file-icon-themable-tree .monaco-tl-twistie.force-no-twistie,.file-icon-themable-tree.align-icons-and-twisties .monaco-tl-twistie:not(.force-twistie):not(.collapsible),.file-icon-themable-tree.hide-arrows .monaco-tl-twistie:not(.force-twistie){background-image:none!important;padding-right:0!important;visibility:hidden;width:0!important}.file-icon-themable-tree .monaco-list-row .content .monaco-highlighted-label .highlight,.pane-body .monaco-tl-contents .monaco-highlighted-label .highlight{background-color:var(--vscode-list-filterMatchBackground);color:unset!important;outline:1px dotted var(--vscode-list-filterMatchBorder);outline-offset:-1px}.monaco-workbench .tree-explorer-viewlet-tree-view{height:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .message{display:flex;padding:4px 12px 4px 18px;user-select:text;-webkit-user-select:text}.monaco-workbench .tree-explorer-viewlet-tree-view .message p{margin-bottom:0;margin-top:0;padding-bottom:4px}.monaco-workbench .tree-explorer-viewlet-tree-view .message ul{padding-left:24px}.monaco-workbench .tree-explorer-viewlet-tree-view .message p>a{color:var(--vscode-textLink-foreground)}.monaco-workbench .tree-explorer-viewlet-tree-view .message .rendered-message{width:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .message .button-container{margin:auto;max-width:300px;width:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .message .button-container:not(:last-child){padding-bottom:8px}.monaco-workbench .tree-explorer-viewlet-tree-view .message.hide{display:none}.monaco-workbench .tree-explorer-viewlet-tree-view .customview-tree{height:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .customview-tree.hide{display:none}.monaco-workbench .pane>.pane-body>.welcome-view{box-sizing:border-box;display:flex;flex-direction:column;height:100%;width:100%}.monaco-workbench .pane>.pane-body.welcome>:not(.welcome-view),.monaco-workbench .pane>.pane-body:not(.welcome)>.welcome-view{display:none}.monaco-workbench .pane>.pane-body .welcome-view-content{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;padding:0 20px 1em}.monaco-workbench .pane>.pane-body .welcome-view-content>.button-container{max-width:300px;width:100%}.monaco-workbench:not(.reduce-motion) .pane>.pane-body .welcome-view-content>.button-container{transition:max-width .2s ease-out}.monaco-workbench .pane>.pane-body .welcome-view-content.wide>.button-container{max-width:100%}.monaco-workbench .pane>.pane-body .welcome-view-content>.button-container>.monaco-button{max-width:300px}.monaco-workbench .pane>.pane-body .welcome-view-content>p{width:100%}.monaco-workbench .pane>.pane-body .welcome-view-content>*{margin-block-end:0;margin-block-start:1em;margin-inline-end:0;margin-inline-start:0}.monaco-workbench .pane>.pane-body .welcome-view-content>p .codicon[class*=codicon-]{font-size:13px;line-height:1.4em;vertical-align:bottom}.customview-tree .monaco-list-row .monaco-tl-contents.align-icon-with-twisty:before{display:none}.customview-tree .monaco-list-row .monaco-tl-contents:not(.align-icon-with-twisty):before{display:inline-block}.customview-tree .monaco-list .monaco-list-row{padding-left:0;padding-right:12px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item{display:flex;flex:1;flex-wrap:nowrap;height:22px;line-height:22px;overflow:hidden;padding-left:3px;text-overflow:ellipsis}.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item .custom-view-tree-node-item-checkbox{background-color:var(--vscode-checkbox-selectBackground);border:1px solid var(--vscode-checkbox-selectBorder)}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-checkbox{background-color:var(--vscode-checkbox-background);border:1px solid var(--vscode-checkbox-border);height:16px;margin:3px 6px 3px 0;opacity:1;padding:0;width:16px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-checkbox.codicon{font-size:13px;line-height:15px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .monaco-inputbox{flex:1;line-height:normal}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel{flex:1;overflow:hidden;text-overflow:ellipsis}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .monaco-icon-label-container:after{content:"";display:block}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon,.timeline-tree-view .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-icon{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;align-items:center;background-position:0;background-repeat:no-repeat;background-size:16px;display:flex;height:22px;justify-content:center;padding-right:6px;width:16px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.disabled{opacity:.6}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.codicon.codicon-modifier-spin{margin-left:-6px;padding-left:6px}.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.codicon{color:currentColor!important}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel:after{margin-right:4px;padding-right:0}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .actions{display:none}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .actions .action-label{padding:2px}.customview-tree .monaco-list .monaco-list-row.focused .custom-view-tree-node-item .actions,.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item .actions,.customview-tree .monaco-list .monaco-list-row:hover .custom-view-tree-node-item .actions{display:block}.monaco-workbench .auxiliarybar.pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item.viewpane-filter-container{max-width:inherit}.viewpane-filter-container{cursor:default;display:flex}.viewpane-filter-container.grow{flex:1}.viewpane-filter-container>.viewpane-filter{align-items:center;display:flex;flex:1;position:relative}.viewpane-filter-container>.viewpane-filter .monaco-inputbox{flex:1;font-size:12px;height:24px}.pane-header .viewpane-filter-container>.viewpane-filter .monaco-inputbox .monaco-inputbox{height:20px;line-height:18px}.monaco-workbench.vs .viewpane-filter-container>.viewpane-filter .monaco-inputbox{height:25px}.viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls{align-items:center;bottom:0;display:flex;position:absolute;right:0;top:0}.viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls>.viewpane-filter-badge{border-radius:2px;margin:4px 2px 4px 0;padding:0 8px}.viewpane-filter.small>.viewpane-filter-controls>.viewpane-filter-badge,.viewpane-filter>.viewpane-filter-controls>.viewpane-filter-badge.hidden{display:none}.panel>.title .monaco-action-bar .action-item.viewpane-filter-container{margin-right:10px;max-width:400px;min-width:150px}.pane-body .viewpane-filter-container:not(:empty){flex:1;height:auto;margin:10px 20px}.pane-body .viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls .monaco-action-bar .action-item{margin-right:4px}.viewpane-filter>.viewpane-filter-controls .monaco-action-bar .action-label.codicon.codicon-filter.checked{background-color:var(--vscode-inputOption-activeBackground);border-color:var(--vscode-inputOption-activeBorder);color:var(--vscode-inputOption-activeForeground)}',{});var or=i(8272),nr=i(19638),sr=i(31220),rr=i(7016);class ar extends vi.rc{constructor(e,t){super("vs.tree.collapse",(0,I.kg)(11479,"Collapse All"),"collapse-all",t),this.viewer=e}async run(){this.viewer.collapseAll(),this.viewer.setSelection([]),this.viewer.setFocus([])}}var cr=i(33435),dr=i(27126),hr=i(84261),lr=i(26658),ur=i(36612),pr=i(99453),gr=i(9117),mr=i(64258);class br extends p.jG{constructor(){super(...arguments),this._onDidChangeCheckboxState=this._register(new m.vl),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event}setCheckboxState(e){this._onDidChangeCheckboxState.fire([e])}}class wr extends p.jG{static{this.checkboxClass="custom-view-tree-node-item-checkbox"}constructor(e,t,i,o){super(),this.checkboxStateHandler=t,this.hoverDelegate=i,this.hoverService=o,this.checkboxContainer=e}render(e){e.checkbox&&(this.toggle?(this.toggle.checked=e.checkbox.isChecked,this.toggle.setIcon(this.toggle.checked?xi.W6.check:void 0)):this.createCheckbox(e))}createCheckbox(e){e.checkbox&&(this.toggle=new ki.lM({isChecked:e.checkbox.isChecked,title:"",icon:e.checkbox.isChecked?xi.W6.check:void 0,...$t.mk}),this.setHover(e.checkbox),this.setAccessibilityInformation(e.checkbox),this.toggle.domNode.classList.add(wr.checkboxClass),this.toggle.domNode.tabIndex=1,(0,ke.BC)(this.checkboxContainer,this.toggle.domNode),this.registerListener(e))}registerListener(e){this.toggle&&(this._register({dispose:()=>this.removeCheckbox()}),this._register(this.toggle),this._register(this.toggle.onChange((()=>{this.setCheckbox(e)}))))}setHover(e){this.toggle&&(this.hover?this.hover.update(e.tooltip):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.toggle.domNode,this.checkboxHoverContent(e))))}setCheckbox(e){this.toggle&&e.checkbox&&(e.checkbox.isChecked=this.toggle.checked,this.toggle.setIcon(this.toggle.checked?xi.W6.check:void 0),this.setHover(e.checkbox),this.setAccessibilityInformation(e.checkbox),this.checkboxStateHandler.setCheckboxState(e))}checkboxHoverContent(e){return e.tooltip?e.tooltip:e.isChecked?(0,I.kg)(11480,"Checked"):(0,I.kg)(11481,"Unchecked")}setAccessibilityInformation(e){this.toggle&&e.accessibilityInformation&&(this.toggle.domNode.ariaLabel=e.accessibilityInformation.label,e.accessibilityInformation.role&&(this.toggle.domNode.role=e.accessibilityInformation.role))}removeCheckbox(){const e=this.checkboxContainer.children;for(const t of e)t.remove()}}var vr,fr=i(11199),yr=i(75125),Cr=i(55260),Sr=i(6104),kr=i(55974);let _r=class extends Jo.OZ{constructor(e,t,i,o,n,s,a,c,d,h,l,g,m){super({...e,titleMenuId:_.D8.ViewTitle,donotForwardArgs:!1},t,i,o,n,s,a,c,d,h,g,m);const{treeView:b}=u.O.as(r.Fd.ViewsRegistry).getView(e.id);this.treeView=b,this._register(this.treeView.onDidChangeActions((()=>this.updateActions()),this)),this._register(this.treeView.onDidChangeTitle((e=>this.updateTitle(e)))),this._register(this.treeView.onDidChangeDescription((e=>this.updateTitleDescription(e)))),this._register((0,p.s)((()=>{this._container&&this.treeView.container&&this._container===this.treeView.container&&this.treeView.setVisibility(!1)}))),this._register(this.onDidChangeBodyVisibility((()=>this.updateTreeVisibility()))),this._register(this.treeView.onDidChangeWelcomeState((()=>this._onDidChangeViewWelcomeState.fire()))),e.title!==this.treeView.title&&this.updateTitle(this.treeView.title),e.titleDescription!==this.treeView.description&&this.updateTitleDescription(this.treeView.description),this._actionRunner=new Nr(l,(()=>this.treeView.getSelection())),this.updateTreeVisibility()}focus(){super.focus(),this.treeView.focus()}renderBody(e){this._container=e,super.renderBody(e),this.renderTreeView(e)}shouldShowWelcome(){return!(void 0!==this.treeView.dataProvider&&!this.treeView.dataProvider.isTreeEmpty||void 0!==this.treeView.message&&""!==this.treeView.message)}layoutBody(e,t){super.layoutBody(e,t),this.layoutTreeView(e,t)}getOptimalWidth(){return this.treeView.getOptimalWidth()}renderTreeView(e){this.treeView.show(e)}layoutTreeView(e,t){this.treeView.layout(e,t)}updateTreeVisibility(){this.treeView.setVisibility(this.isBodyVisible())}getActionRunner(){return this._actionRunner}getActionsContext(){return{$treeViewId:this.id,$focusedTreeItem:!0,$selectedTreeItems:!0}}};_r=(0,s.C)([(0,s.Q)(1,Bt.b),(0,s.Q)(2,ne.Z),(0,s.Q)(3,z.p),(0,s.Q)(4,d.f),(0,s.Q)(5,n.X),(0,s.Q)(6,a._Y),(0,s.Q)(7,Yo.C),(0,s.Q)(8,Zi.G),(0,s.Q)(9,b.k),(0,s.Q)(10,Y.O),(0,s.Q)(11,Rt.T),(0,s.Q)(12,kr.I)],_r);class xr{constructor(){this.label={label:"root"},this.handle="0",this.parentHandle=void 0,this.collapsibleState=r.lF.Expanded,this.children=void 0}}function Er(e){const t=Zs.w.getCommand(e);if(t){const e=_.ZG.getCommand(t.id);return e&&e.precondition}}function Dr(e,t){const i=Er(e.originalId?e.originalId:e.id);return!i||t.contextMatchesRules(i)}function Ir(e){return!!e&&"string"!=typeof e&&"element"in e&&"disposables"in e}const Vr=(0,I.kg)(9712,"There is no data provider registered that can provide view data."),Mr=new c.N1("customTreeView",!1);class Tr extends Zo.er{}let Ar=class extends p.jG{constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,g,b,w){super(),this.id=e,this._title=t,this.themeService=i,this.instantiationService=o,this.commandService=n,this.configurationService=s,this.progressService=r,this.contextMenuService=a,this.keybindingService=c,this.notificationService=d,this.viewDescriptorService=h,this.hoverService=l,this.contextKeyService=u,this.activityService=g,this.logService=b,this.openerService=w,this.isVisible=!1,this._hasIconForParentNode=!1,this._hasIconForLeafNode=!1,this.focused=!1,this._canSelectMany=!1,this._manuallyManageCheckboxes=!1,this.elementsToRefresh=[],this.lastSelection=[],this._onDidExpandItem=this._register(new m.vl),this.onDidExpandItem=this._onDidExpandItem.event,this._onDidCollapseItem=this._register(new m.vl),this.onDidCollapseItem=this._onDidCollapseItem.event,this._onDidChangeSelectionAndFocus=this._register(new m.vl),this.onDidChangeSelectionAndFocus=this._onDidChangeSelectionAndFocus.event,this._onDidChangeVisibility=this._register(new m.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._onDidChangeActions=this._register(new m.vl),this.onDidChangeActions=this._onDidChangeActions.event,this._onDidChangeWelcomeState=this._register(new m.vl),this.onDidChangeWelcomeState=this._onDidChangeWelcomeState.event,this._onDidChangeTitle=this._register(new m.vl),this.onDidChangeTitle=this._onDidChangeTitle.event,this._onDidChangeDescription=this._register(new m.vl),this.onDidChangeDescription=this._onDidChangeDescription.event,this._onDidChangeCheckboxState=this._register(new m.vl),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidCompleteRefresh=this._register(new m.vl),this._isInitialized=!1,this._activity=this._register(new p.HE),this.activated=!1,this.treeDisposables=this._register(new p.Cm),this._height=0,this._width=0,this.refreshing=!1,this.root=new xr,this.lastActive=this.root}initialize(){this._isInitialized||(this._isInitialized=!0,this.contextKeyService.bufferChangeEvents((()=>{this.initializeShowCollapseAllAction(),this.initializeCollapseAllToggle(),this.initializeShowRefreshAction()})),this.treeViewDnd=this.instantiationService.createInstance(Wr,this.id),this._dragAndDropController&&(this.treeViewDnd.controller=this._dragAndDropController),this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("explorer.decorations")&&this.doRefresh([this.root])}))),this._register(this.viewDescriptorService.onDidChangeLocation((({views:e,from:t,to:i})=>{e.some((e=>e.id===this.id))&&this.tree?.updateOptions({overrideStyles:(0,Jo.gw)(this.viewLocation).listOverrideStyles})}))),this.registerActions(),this.create())}get viewContainer(){return this.viewDescriptorService.getViewContainerByViewId(this.id)}get viewLocation(){return this.viewDescriptorService.getViewLocationById(this.id)}get dragAndDropController(){return this._dragAndDropController}set dragAndDropController(e){this._dragAndDropController=e,this.treeViewDnd&&(this.treeViewDnd.controller=e)}get dataProvider(){return this._dataProvider}set dataProvider(e){if(e){this.visible&&this.activate();const t=this;this._dataProvider=new class{constructor(){this._isEmpty=!0,this._onDidChangeEmpty=new m.vl,this.onDidChangeEmpty=this._onDidChangeEmpty.event}get isTreeEmpty(){return this._isEmpty}async getChildren(i){let o;const n=[];if(i&&i.children?o=i.children:((i=i??t.root).children=await(i instanceof xr?e.getChildren():e.getChildren(i)),o=i.children??[],o.forEach((e=>{e.parent=i,t.manuallyManageCheckboxes||!0!==i?.checkbox?.isChecked||!1!==e.checkbox?.isChecked||(e.checkbox.isChecked=!0,n.push(e))}))),i instanceof xr){const e=this._isEmpty;this._isEmpty=0===o.length,e!==this._isEmpty&&this._onDidChangeEmpty.fire()}return n.length>0&&t._onDidChangeCheckboxState.fire(n),o}},this._dataProvider.onDidChangeEmpty&&this._register(this._dataProvider.onDidChangeEmpty((()=>{this.updateCollapseAllToggle(),this._onDidChangeWelcomeState.fire()}))),this.updateMessage(),this.refresh()}else this._dataProvider=void 0,this.treeDisposables.clear(),this.activated=!1,this.updateMessage();this._onDidChangeWelcomeState.fire()}get message(){return this._message}set message(e){this._message=e,this.updateMessage(),this._onDidChangeWelcomeState.fire()}get title(){return this._title}set title(e){this._title=e,this._onDidChangeTitle.fire(this._title)}get description(){return this._description}set description(e){this._description=e,this._onDidChangeDescription.fire(this._description)}get badge(){return this._badge}set badge(e){if(this._badge?.value!==e?.value||this._badge?.tooltip!==e?.tooltip)if(this._badge=e,e){const t={badge:new wi.hV(e.value,(()=>e.tooltip)),priority:50};this._activity.value=this.activityService.showViewActivity(this.id,t)}else this._activity.clear()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){const t=this._canSelectMany;this._canSelectMany=e,this._canSelectMany!==t&&this.tree?.updateOptions({multipleSelectionSupport:this.canSelectMany})}get manuallyManageCheckboxes(){return this._manuallyManageCheckboxes}set manuallyManageCheckboxes(e){this._manuallyManageCheckboxes=e}get hasIconForParentNode(){return this._hasIconForParentNode}get hasIconForLeafNode(){return this._hasIconForLeafNode}get visible(){return this.isVisible}initializeShowCollapseAllAction(e=!1){return this.collapseAllContext||(this.collapseAllContextKey=new c.N1(`treeView.${this.id}.enableCollapseAll`,e,(0,I.kg)(9713,"Whether the the tree view with id {0} enables collapse all.",this.id)),this.collapseAllContext=this.collapseAllContextKey.bindTo(this.contextKeyService)),!0}get showCollapseAllAction(){return this.initializeShowCollapseAllAction(),!!this.collapseAllContext?.get()}set showCollapseAllAction(e){this.initializeShowCollapseAllAction(e),this.collapseAllContext?.set(e)}initializeShowRefreshAction(e=!1){this.refreshContext||(this.refreshContextKey=new c.N1(`treeView.${this.id}.enableRefresh`,e,(0,I.kg)(9714,"Whether the tree view with id {0} enables refresh.",this.id)),this.refreshContext=this.refreshContextKey.bindTo(this.contextKeyService))}get showRefreshAction(){return this.initializeShowRefreshAction(),!!this.refreshContext?.get()}set showRefreshAction(e){this.initializeShowRefreshAction(e),this.refreshContext?.set(e)}registerActions(){const e=this;this._register((0,_.ug)(class extends _.L{constructor(){super({id:`workbench.actions.treeView.${e.id}.refresh`,title:(0,I.kg)(9715,"Refresh"),menu:{id:_.D8.ViewTitle,when:c.M$.and(c.M$.equals("view",e.id),e.refreshContextKey),group:"navigation",order:Number.MAX_SAFE_INTEGER-1},icon:xi.W6.refresh})}async run(){return e.refresh()}})),this._register((0,_.ug)(class extends _.L{constructor(){super({id:`workbench.actions.treeView.${e.id}.collapseAll`,title:(0,I.kg)(9716,"Collapse All"),menu:{id:_.D8.ViewTitle,when:c.M$.and(c.M$.equals("view",e.id),e.collapseAllContextKey),group:"navigation",order:Number.MAX_SAFE_INTEGER},precondition:e.collapseAllToggleContextKey,icon:xi.W6.collapseAll})}async run(){if(e.tree)return new ar(e.tree,!0).run()}}))}setVisibility(e){this.initialize(),e=!!e,this.isVisible!==e&&(this.isVisible=e,this.tree&&(this.isVisible?(0,ke.WU)(this.tree.getHTMLElement()):(0,ke.jD)(this.tree.getHTMLElement()),this.isVisible&&this.elementsToRefresh.length&&this.dataProvider&&(this.doRefresh(this.elementsToRefresh),this.elementsToRefresh=[])),(0,Di._p)((()=>{this.dataProvider&&this._onDidChangeVisibility.fire(this.isVisible)})),this.visible&&this.activate())}focus(e=!0,t){if(this.tree&&this.root.children&&this.root.children.length>0){const i=t??this.tree.getSelection()[0];i&&e&&this.tree.reveal(i,.5),this.tree.domFocus()}else this.tree&&this.treeContainer&&!this.treeContainer.classList.contains("hide")?this.tree.domFocus():this.domNode.focus()}show(e){this._container=e,(0,ke.BC)(e,this.domNode)}create(){this.domNode=(0,ke.$)(".tree-explorer-viewlet-tree-view"),this.messageElement=(0,ke.BC)(this.domNode,(0,ke.$)(".message")),this.updateMessage(),this.treeContainer=(0,ke.BC)(this.domNode,(0,ke.$)(".customview-tree")),this.treeContainer.classList.add("file-icon-themable-tree","show-file-icons");const e=this._register((0,ke.w5)(this.domNode));this._register(e.onDidFocus((()=>this.focused=!0))),this._register(e.onDidBlur((()=>this.focused=!1)))}createTree(){this.treeDisposables.clear();const e=ps.rN.bind(void 0,this.instantiationService),t=this.treeDisposables.add(this.instantiationService.createInstance(Fr,this.id));this.treeLabels=this.treeDisposables.add(this.instantiationService.createInstance(qo.SB,this));const i=this.instantiationService.createInstance(Rr,this,(e=>this.progressService.withProgress({location:this.id},(()=>e)))),o=new Or(this.themeService),n=this.treeDisposables.add(new br),s=this.instantiationService.createInstance(Br,this.id,t,this.treeLabels,e,o,n,(()=>this.manuallyManageCheckboxes));this.treeDisposables.add(s.onDidChangeCheckboxState((e=>this._onDidChangeCheckboxState.fire(e))));const a=this._title;this.tree=this.treeDisposables.add(this.instantiationService.createInstance(Tr,this.id,this.treeContainer,new Pr,[s],i,{identityProvider:new Lr,accessibilityProvider:{getAriaLabel(e){if(e.accessibilityInformation)return e.accessibilityInformation.label;if((0,y.Kg)(e.tooltip))return e.tooltip;{if(e.resourceUri&&!e.label)return null;let t="";return e.label&&(t+=e.label.label+" "),e.description&&(t+=e.description),t}},getRole:e=>e.accessibilityInformation?.role??"treeitem",getWidgetAriaLabel:()=>a},keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:e=>e.label?e.label.label:e.resourceUri?(0,C.P8)(v.rz.revive(e.resourceUri)):void 0},expandOnlyOnTwistieClick:e=>!!e.command||!!e.checkbox||"doubleClick"===this.configurationService.getValue("workbench.tree.expandMode"),collapseByDefault:e=>e.collapsibleState!==r.lF.Expanded,multipleSelectionSupport:this.canSelectMany,dnd:this.treeViewDnd,overrideStyles:(0,Jo.gw)(this.viewLocation).listOverrideStyles})),this.treeDisposables.add(s.onDidChangeMenuContext((e=>e.forEach((e=>this.tree?.rerender(e)))))),this.treeDisposables.add(this.tree),t.setContextKeyService(this.tree.contextKeyService),o.tree=this.tree;const c=new Nr(this.notificationService,(()=>this.tree.getSelection()));s.actionRunner=c,this.tree.contextKeyService.createKey(this.id,!0),Mr.bindTo(this.tree.contextKeyService).set(!0),this.treeDisposables.add(this.tree.onContextMenu((e=>this.onContextMenu(t,e,c)))),this.treeDisposables.add(this.tree.onDidChangeSelection((e=>{this.lastSelection=e.elements,this.lastActive=this.tree?.getFocus()[0]??this.lastActive,this._onDidChangeSelectionAndFocus.fire({selection:this.lastSelection,focus:this.lastActive})}))),this.treeDisposables.add(this.tree.onDidChangeFocus((e=>{e.elements.length&&e.elements[0]!==this.lastActive&&(this.lastActive=e.elements[0],this.lastSelection=this.tree?.getSelection()??this.lastSelection,this._onDidChangeSelectionAndFocus.fire({selection:this.lastSelection,focus:this.lastActive}))}))),this.treeDisposables.add(this.tree.onDidChangeCollapseState((e=>{if(!e.node.element)return;const t=Array.isArray(e.node.element.element)?e.node.element.element[0]:e.node.element.element;e.node.collapsed?this._onDidCollapseItem.fire(t):this._onDidExpandItem.fire(t)}))),this.tree.setInput(this.root).then((()=>this.updateContentAreas())),this.treeDisposables.add(this.tree.onDidOpen((async e=>{if(!e.browserEvent)return;if(e.browserEvent.target&&e.browserEvent.target.classList.contains(wr.checkboxClass))return;const t=this.tree.getSelection(),i=await this.resolveCommand(1===t.length?t[0]:void 0);if(i&&Dr(i,this.contextKeyService)){let t=i.arguments||[];i.id!==ur.QA&&i.id!==ur.W_||(t=[...t,e]);try{await this.commandService.executeCommand(i.id,...t)}catch(e){this.notificationService.error(e)}}}))),this.treeDisposables.add(t.onDidChange((e=>{this.tree?.hasNode(e)&&this.tree?.rerender(e)})))}async resolveCommand(e){let t=e?.command;return e&&!t&&e instanceof r.ns&&e.hasResolve&&(await e.resolve(yt.XO.None),t=e.command),t}onContextMenu(e,t,i){this.hoverService.hideHover();const o=t.element;if(null===o)return;const n=t.browserEvent;n.preventDefault(),n.stopPropagation(),this.tree.setFocus([o]);let s=this.canSelectMany?this.getSelection():[];s.find((e=>e.handle===o.handle))||(s=[o]);const r=e.getResourceContextActions(s);r.length&&this.contextMenuService.showContextMenu({getAnchor:()=>t.anchor,getActions:()=>r,getActionViewItem:e=>{const t=this.keybindingService.lookupKeybinding(e.id);if(t)return new rr.Z4(e,e,{label:!0,keybinding:t.getLabel()})},onHide:e=>{e&&this.tree.domFocus()},getActionsContext:()=>({$treeViewId:this.id,$treeItemHandle:o.handle}),actionRunner:i})}updateMessage(){this._message?this.showMessage(this._message):this.dataProvider?this.hideMessage():this.showMessage(Vr),this.updateContentAreas()}processMessage(e,t){const i=e.value.split("\n"),o=[];let n=!1;for(const s of i){const i=(0,Vi.q)(s);if(1===i.nodes.length&&"string"!=typeof i.nodes[0]){const e=i.nodes[0],s=document.createElement("div");s.classList.add("button-container");const r=new Si.$n(s,{title:e.title,secondary:n,supportIcons:!0,...$t.cv});r.label=e.label,r.onDidClick((t=>{this.openerService.open(e.href,{allowCommands:!0})}),null,t);const a=v.rz.parse(e.href);if(a.scheme===$.ny.command){const e=Er(a.path);e&&(r.enabled=this.contextKeyService.contextMatchesRules(e),t.add(this.contextKeyService.onDidChangeContext((t=>{t.affectsSome(new Set(e.keys()))&&(r.enabled=this.contextKeyService.contextMatchesRules(e))}))))}t.add(r),n=!0,o.push(s)}else{n=!1;const i=this.markdownRenderer.render(new cr.Bc(s,{isTrusted:e.isTrusted,supportThemeIcons:e.supportThemeIcons,supportHtml:e.supportHtml}));o.push(i.element),t.add(i)}}const s=document.createElement("div");s.classList.add("rendered-message");for(const e of o)(0,ke.sb)(e)?s.appendChild(e):s.appendChild(e.element);return s}showMessage(e){if(Ir(this._messageValue)&&this._messageValue.disposables.dispose(),(0,cr.VS)(e)&&!this.markdownRenderer&&(this.markdownRenderer=this.instantiationService.createInstance(Sr.T,{})),(0,cr.VS)(e)){const t=new p.Cm,i=this.processMessage(e,t);this._messageValue={element:i,disposables:t}}else this._messageValue=e;this.messageElement&&(this.messageElement.classList.remove("hide"),this.resetMessageElement(),"string"!=typeof this._messageValue||(0,Ht.AV)(this._messageValue)?Ir(this._messageValue)&&this.messageElement.appendChild(this._messageValue.element):this.messageElement.textContent=this._messageValue,this.layout(this._height,this._width))}hideMessage(){this.resetMessageElement(),this.messageElement?.classList.add("hide"),this.layout(this._height,this._width)}resetMessageElement(){this.messageElement&&(0,ke.w_)(this.messageElement)}layout(e,t){if(e&&t&&this.messageElement&&this.treeContainer){this._height=e,this._width=t;const i=e-(0,ke.OK)(this.messageElement);this.treeContainer.style.height=i+"px",this.tree?.layout(i,t)}}getOptimalWidth(){if(this.tree){const e=this.tree.getHTMLElement(),t=[].slice.call(e.querySelectorAll(".outline-item-label > a"));return(0,ke.tt)(e,t)}return 0}updateCheckboxes(e){return zr(e)}async refresh(e,t){if(this.dataProvider&&this.tree){this.refreshing&&await m.Jh.toPromise(this._onDidCompleteRefresh.event),e||(e=[this.root],this.elementsToRefresh=[]);for(const t of e)t.children=void 0;if(this.isVisible){const i=this.updateCheckboxes(t??[]);return this.doRefresh(e.concat(i))}if(this.elementsToRefresh.length){const t=new Set;this.elementsToRefresh.forEach((e=>t.add(e.handle)));for(const i of e)t.has(i.handle)||this.elementsToRefresh.push(i)}else this.elementsToRefresh.push(...e)}}async expand(e){const t=this.tree;if(t)try{e=Array.isArray(e)?e:[e];for(const i of e)await t.expand(i,!1)}catch(e){}}isCollapsed(e){return!!this.tree?.isCollapsed(e)}setSelection(e){this.tree?.setSelection(e)}getSelection(){return this.tree?.getSelection()??[]}setFocus(e){this.tree&&(e?(this.focus(!0,e),this.tree.setFocus([e])):0===this.tree.getFocus().length&&this.tree.setFocus([]))}async reveal(e){if(this.tree)return this.tree.reveal(e)}async doRefresh(e){const t=this.tree;if(t&&this.visible){this.refreshing=!0;const i=t.getSelection();try{await Promise.all(e.map((e=>t.updateChildren(e,!0,!0))))}catch(e){this.logService.error(e)}const o=t.getSelection();(i.length!==o.length||i.some(((e,t)=>e.handle!==o[t].handle)))&&(this.lastSelection=o,this._onDidChangeSelectionAndFocus.fire({selection:this.lastSelection,focus:this.lastActive})),this.refreshing=!1,this._onDidCompleteRefresh.fire(),this.updateContentAreas(),this.focused&&this.focus(!1),this.updateCollapseAllToggle()}}initializeCollapseAllToggle(){this.collapseAllToggleContext||(this.collapseAllToggleContextKey=new c.N1(`treeView.${this.id}.toggleCollapseAll`,!1,(0,I.kg)(9717,"Whether collapse all is toggled for the tree view with id {0}.",this.id)),this.collapseAllToggleContext=this.collapseAllToggleContextKey.bindTo(this.contextKeyService))}updateCollapseAllToggle(){this.showCollapseAllAction&&(this.initializeCollapseAllToggle(),this.collapseAllToggleContext?.set(!!this.root.children&&this.root.children.length>0&&this.root.children.some((e=>e.collapsibleState!==r.lF.None))))}updateContentAreas(){const e=!this.root.children||0===this.root.children.length;this._messageValue&&e&&!this.refreshing&&this.treeContainer?(this.dragAndDropController||this.treeContainer.classList.add("hide"),this.domNode.setAttribute("tabindex","0")):this.treeContainer&&(this.treeContainer.classList.remove("hide"),this.domNode===(0,ke.bq)()&&this.focus(),this.domNode.removeAttribute("tabindex"))}get container(){return this._container}};Ar=(0,s.C)([(0,s.Q)(2,Zi.G),(0,s.Q)(3,a._Y),(0,s.Q)(4,hr.w),(0,s.Q)(5,z.p),(0,s.Q)(6,gi.G),(0,s.Q)(7,ne.Z),(0,s.Q)(8,Bt.b),(0,s.Q)(9,Y.O),(0,s.Q)(10,n.X),(0,s.Q)(11,Rt.T),(0,s.Q)(12,d.f),(0,s.Q)(13,O.w),(0,s.Q)(14,k.r),(0,s.Q)(15,Yo.C)],Ar);class Lr{getId(e){return e.handle}}class Pr{getHeight(e){return Br.ITEM_HEIGHT}getTemplateId(e){return Br.TREE_TEMPLATE_ID}}class Rr{constructor(e,t){this.treeView=e,this.withProgress=t}hasChildren(e){return!!this.treeView.dataProvider&&e.collapsibleState!==r.lF.None}async getChildren(e){let t=[];if(this.treeView.dataProvider)try{t=await this.withProgress(this.treeView.dataProvider.getChildren(e))??[]}catch(e){if(!e.message.startsWith("Bad progress location:"))throw e}return t}}let Br=class extends p.jG{static{vr=this}static{this.ITEM_HEIGHT=22}static{this.TREE_TEMPLATE_ID="treeExplorer"}constructor(e,t,i,o,n,s,r,a,c,d,h,l,u){super(),this.treeViewId=e,this.menus=t,this.labels=i,this.actionViewItemProvider=o,this.aligner=n,this.checkboxStateHandler=s,this.manuallyManageCheckboxes=r,this.themeService=a,this.configurationService=c,this.labelService=d,this.contextKeyService=h,this.hoverService=l,this._onDidChangeCheckboxState=this._register(new m.vl),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidChangeMenuContext=this._register(new m.vl),this.onDidChangeMenuContext=this._onDidChangeMenuContext.event,this._hasCheckbox=!1,this._renderedElements=new Map,this._hoverDelegate=this._register(u.createInstance(pr.f,"mouse",!1,{})),this._register(this.themeService.onDidFileIconThemeChange((()=>this.rerender()))),this._register(this.themeService.onDidColorThemeChange((()=>this.rerender()))),this._register(s.onDidChangeCheckboxState((e=>{this.updateCheckboxes(e)}))),this._register(this.contextKeyService.onDidChangeContext((e=>this.onDidChangeContext(e))))}get templateId(){return vr.TREE_TEMPLATE_ID}set actionRunner(e){this._actionRunner=e}renderTemplate(e){e.classList.add("custom-view-tree-node-item");const t=(0,ke.BC)(e,(0,ke.$)("")),i=this.labels.create(e,{supportHighlights:!0,hoverDelegate:this._hoverDelegate}),o=(0,ke.Hs)(i.element,(0,ke.$)(".custom-view-tree-node-item-icon")),n=(0,ke.BC)(i.element,(0,ke.$)(".actions"));return{resourceLabel:i,icon:o,checkboxContainer:t,actionBar:new Ci.E(n,{actionViewItemProvider:this.actionViewItemProvider}),container:e}}getHover(e,t,i){return i instanceof r.ns&&i.hasResolve?{markdown:"string"==typeof i.tooltip?i.tooltip:e=>new Promise((t=>{i.resolve(e).then((()=>t(i.tooltip)))})),markdownNotSupportedFallback:t?void 0:e??""}:t&&!i.tooltip?void 0:void 0===i.tooltip?e:(0,y.Kg)(i.tooltip)?""!==i.tooltip?i.tooltip:void 0:{markdown:i.tooltip,markdownNotSupportedFallback:t?void 0:(0,sr.dJ)(i.tooltip)}}renderElement(e,t,i){const o=e.element,n=o.resourceUri?v.rz.revive(o.resourceUri):null,s=o.label?o.label:n?{label:(0,C.P8)(n)}:void 0,r=(0,y.Kg)(o.description)?o.description:n&&!0===o.description?this.labelService.getUriLabel((0,C.pD)(n),{relative:!0}):void 0,a=s?s.label:void 0,c=s&&s.highlights&&a?s.highlights.map((([e,t])=>{if(e<0&&(e=a.length+e),t<0&&(t=a.length+t),e>=a.length||t>a.length)return{start:0,end:0};if(e>t){const i=e;e=t,t=i}return{start:e,end:t}})):void 0,d=this.themeService.getColorTheme().type===pt.zM.LIGHT?o.icon:o.iconDark,h=d?v.rz.revive(d):void 0,l=this.getHover(a,n,o);i.actionBar.clear(),i.icon.style.color="";let u=!0;if(o.command&&(u=Dr(o.command,this.contextKeyService)),this.renderCheckbox(o,i),n){const t=this.configurationService.getValue("explorer.decorations"),d=n||v.rz.parse("missing:_icon_resource");i.resourceLabel.setResource({name:a,description:r,resource:d},{fileKind:this.getFileKind(o),title:l,hideIcon:this.shouldHideResourceLabelIcon(h,o.themeIcon),fileDecorations:t,extraClasses:["custom-view-tree-node-item-resourceLabel"],matches:c||(0,mn.WJ)(e.filterData),strikethrough:s?.strikethrough,disabledCommand:!u,labelEscapeNewLines:!0,forceLabel:!!o.label})}else i.resourceLabel.setResource({name:a,description:r},{title:l,hideIcon:!0,extraClasses:["custom-view-tree-node-item-resourceLabel"],matches:c||(0,mn.WJ)(e.filterData),strikethrough:s?.strikethrough,disabledCommand:!u,labelEscapeNewLines:!0});if(h)i.icon.className="custom-view-tree-node-item-icon",i.icon.style.backgroundImage=(0,fn.Tf)(h);else{let e;this.shouldShowThemeIcon(!!n,o.themeIcon)&&(e=S.L0.asClassName(o.themeIcon),o.themeIcon.color&&(i.icon.style.color=this.themeService.getColorTheme().getColor(o.themeIcon.color.id)?.toString()??"")),i.icon.className=e?`custom-view-tree-node-item-icon ${e}`:"",i.icon.style.backgroundImage=""}u||(i.icon.className=i.icon.className+" disabled",i.container.parentElement&&(i.container.parentElement.className=i.container.parentElement.className+" disabled")),i.actionBar.context={$treeViewId:this.treeViewId,$treeItemHandle:o.handle};const p=this.menus.getResourceActions([o]);i.actionBar.push(p,{icon:!0,label:!1}),this._actionRunner&&(i.actionBar.actionRunner=this._actionRunner),this.setAlignment(i.container,o);const g=this._renderedElements.get(e.element.handle)??[];this._renderedElements.set(e.element.handle,[...g,{original:e,rendered:i}])}rerender(){const e=new Set(this._renderedElements.keys());for(const t of e){const e=this._renderedElements.get(t)??[];for(const t of e)this.disposeElement(t.original,0,t.rendered),this.renderElement(t.original,0,t.rendered)}}renderCheckbox(e,t){if(e.checkbox){if(this._hasCheckbox||(this._hasCheckbox=!0,this.rerender()),!t.checkbox){const e=new wr(t.checkboxContainer,this.checkboxStateHandler,this._hoverDelegate,this.hoverService);t.checkbox=e}t.checkbox.render(e)}else t.checkbox&&(t.checkbox.dispose(),t.checkbox=void 0)}setAlignment(e,t){e.parentElement.classList.toggle("align-icon-with-twisty",!this._hasCheckbox&&this.aligner.alignIconWithTwisty(t))}shouldHideResourceLabelIcon(e,t){return!!e||!!t&&!this.isFileKindThemeIcon(t)}shouldShowThemeIcon(e,t){return!(!t||e&&this.isFileKindThemeIcon(t))}isFolderThemeIcon(e){return e?.id===zt.Dm.id}isFileKindThemeIcon(e){return!!e&&(e.id===zt.Lt.id||this.isFolderThemeIcon(e))}getFileKind(e){if(e.themeIcon)switch(e.themeIcon.id){case zt.Lt.id:return we.pc.FILE;case zt.Dm.id:return we.pc.FOLDER}return e.collapsibleState===r.lF.Collapsed||e.collapsibleState===r.lF.Expanded?we.pc.FOLDER:we.pc.FILE}onDidChangeContext(e){const t=[];for(const[i,o]of this._renderedElements)for(const i of o)(e.affectsSome(this.menus.getElementOverlayContexts(i.original.element))||e.affectsSome(this.menus.getEntireMenuContexts()))&&t.push(i.original.element);t.length&&this._onDidChangeMenuContext.fire(t)}updateCheckboxes(e){let t=[];this.manuallyManageCheckboxes()||(t=zr(e)),t.forEach((e=>{const t=this._renderedElements.get(e.handle);t&&t.forEach((t=>t.rendered.checkbox?.render(e)))})),this._onDidChangeCheckboxState.fire(t)}disposeElement(e,t,i){const o=this._renderedElements.get(e.element.handle)??[],n=o.findIndex((e=>i===e.rendered));1===o.length?this._renderedElements.delete(e.element.handle):o.length>0&&o.splice(n,1),i.checkbox?.dispose(),i.checkbox=void 0}disposeTemplate(e){e.resourceLabel.dispose(),e.actionBar.dispose()}};Br=vr=(0,s.C)([(0,s.Q)(7,Zi.G),(0,s.Q)(8,z.p),(0,s.Q)(9,jo.L),(0,s.Q)(10,d.f),(0,s.Q)(11,Rt.T),(0,s.Q)(12,a._Y)],Br);class Or extends p.jG{constructor(e){super(),this.themeService=e}set tree(e){this._tree=e}alignIconWithTwisty(e){if(e.collapsibleState!==r.lF.None)return!1;if(!this.hasIcon(e))return!1;if(this._tree){const t=this._tree.getParentElement(e)||this._tree.getInput();return this.hasIcon(t)?!!t.children&&t.children.some((e=>e.collapsibleState!==r.lF.None&&!this.hasIcon(e))):!!t.children&&t.children.every((e=>e.collapsibleState===r.lF.None||!this.hasIcon(e)))}return!1}hasIcon(e){if(this.themeService.getColorTheme().type===pt.zM.LIGHT?e.icon:e.iconDark)return!0;if(e.resourceUri||e.themeIcon){const t=this.themeService.getFileIconTheme();return(e.themeIcon?e.themeIcon.id===zt.Dm.id:e.collapsibleState!==r.lF.None)?t.hasFileIcons&&t.hasFolderIcons:t.hasFileIcons}return!1}}class Nr extends vi.LN{constructor(e,t){super(),this.getSelectedResources=t,this._register(this.onDidRun((t=>{t.error&&!(0,xe.MB)(t.error)&&e.error((0,I.kg)(9718,"Error running command {1}: {0}. This is likely caused by the extension that contributes {1}.",t.error.message,t.action.id))})))}async runAction(e,t){const i=this.getSelectedResources();let o,n=!1;i.length>1&&(o=i.map((e=>((e.handle===t.$treeItemHandle||t.$selectedTreeItems)&&(n=!0),{$treeViewId:t.$treeViewId,$treeItemHandle:e.handle})))),!n&&o&&(o=void 0),await e.run(t,o)}}let Fr=class{constructor(e,t){this.id=e,this.menuService=t,this._onDidChange=new m.vl,this.onDidChange=this._onDidChange.event}getResourceActions(e){return this.getActions(this.getMenuId(),e).primary}getResourceContextActions(e){return this.getActions(this.getMenuId(),e).secondary}setContextKeyService(e){this.contextKeyService=e}filterNonUniversalActions(e,t){const i=new Set(t.map((e=>e.id)));for(const t of e){const e=t.keys();for(const o of e)i.has(o)||t.delete(o)}}buildMenu(e){const t=[];for(const i of e)i.size>0&&(t.length&&t.push(new vi.wv),t.push(...i.values()));return t}createGroups(e){const t=[];let i=new Map;for(const o of e)o instanceof vi.wv?(t.push(i),i=new Map):i.set(o.id,o);return t.push(i),t}getElementOverlayContexts(e){return new Map([["view",this.id],["viewItem",e.contextValue]])}getEntireMenuContexts(){return this.menuService.getMenuContexts(this.getMenuId())}getMenuId(){return _.D8.ViewItemContext}getActions(e,t){if(!this.contextKeyService)return{primary:[],secondary:[]};let i=[],o=[];for(let n=0;n<t.length;n++){const s=t[n],r=this.contextKeyService.createOverlay(this.getElementOverlayContexts(s)),a=this.menuService.getMenuActions(e,r,{shouldForwardArgs:!0}),c={primary:[],secondary:[]};(0,ps.$u)(a,c,"inline"),0===n?(i=this.createGroups(c.primary),o=this.createGroups(c.secondary)):(this.filterNonUniversalActions(i,c.primary),this.filterNonUniversalActions(o,c.secondary))}return{primary:this.buildMenu(i),secondary:this.buildMenu(o)}}dispose(){this.contextKeyService=void 0}};Fr=(0,s.C)([(0,s.Q)(1,us.e)],Fr);let Gr=class extends Ar{constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,p,g,m,b,w,v){super(e,t,o,n,s,r,a,c,d,h,l,p,u,m,w,v),this.extensionId=i,this.extensionService=g,this.telemetryService=b}activate(){this.activated||(this.telemetryService.publicLog2("Extension:ViewActivate",{extensionId:new fr.Yj(this.extensionId),id:this.id}),this.createTree(),this.progressService.withProgress({location:this.id},(()=>this.extensionService.activateByEvent(`onView:${this.id}`))).then((()=>(0,vt.wR)(2e3))).then((()=>{this.updateMessage()})),this.activated=!0)}};Gr=(0,s.C)([(0,s.Q)(3,Zi.G),(0,s.Q)(4,a._Y),(0,s.Q)(5,hr.w),(0,s.Q)(6,z.p),(0,s.Q)(7,gi.G),(0,s.Q)(8,ne.Z),(0,s.Q)(9,Bt.b),(0,s.Q)(10,Y.O),(0,s.Q)(11,n.X),(0,s.Q)(12,d.f),(0,s.Q)(13,Rt.T),(0,s.Q)(14,l.c),(0,s.Q)(15,O.w),(0,s.Q)(16,b.k),(0,s.Q)(17,k.r),(0,s.Q)(18,Yo.C)],Gr);let Wr=class{constructor(e,t,i,o,n){this.treeId=e,this.labelService=t,this.instantiationService=i,this.treeViewsDragAndDropService=o,this.logService=n,this.treeItemsTransfer=gr.PD.getInstance(),this.treeMimeType=`application/vnd.code.tree.${e.toLowerCase()}`}set controller(e){this.dndController=e}handleDragAndLog(e,t,i,o){return e.handleDrag(t,i,o).then((t=>{if(t){const i=[];for(const o of t)o[0]!==this.treeMimeType&&e.dragMimeTypes.findIndex((e=>e===o[0]))<0&&i.push(o[0]);i.length&&this.logService.warn(`Drag and drop controller for tree ${this.treeId} adds the following data transfer types but does not declare them in dragMimeTypes: ${i.join(", ")}`)}return t}))}addExtensionProvidedTransferTypes(e,t){if(!e.dataTransfer||!this.dndController)return;const i=(0,w.b)();this.dragCancellationToken=new yt.Qi,this.treeViewsDragAndDropService.addDragOperationTransfer(i,this.handleDragAndLog(this.dndController,t,i,this.dragCancellationToken.token)),this.treeItemsTransfer.setData([new Cr.u(i)],Cr.u.prototype),e.dataTransfer.clearData(Vt.KV.text),this.dndController.dragMimeTypes.find((e=>e===Vt.KV.uriList))&&e.dataTransfer?.setData(nr.tx.RESOURCES,""),this.dndController.dragMimeTypes.forEach((t=>{e.dataTransfer?.setData(t,"")}))}addResourceInfoToTransfer(e,t){if(t.length&&e.dataTransfer){this.instantiationService.invokeFunction((i=>(0,lr.SI)(i,t,e)));const i=t.filter((e=>e.scheme===$.ny.file)).map((e=>e.fsPath));i.length&&e.dataTransfer.setData(gr.sV.FILES,JSON.stringify(i))}}onDragStart(e,t){if(t.dataTransfer){const i=e.getData(),o=[],n={id:this.treeId,itemHandles:[]};i.forEach((e=>{n.itemHandles.push(e.handle),e.resourceUri&&o.push(v.rz.revive(e.resourceUri))})),this.addResourceInfoToTransfer(t,o),this.addExtensionProvidedTransferTypes(t,n.itemHandles),t.dataTransfer.setData(this.treeMimeType,JSON.stringify(n))}}debugLog(e){e.size?this.logService.debug(`TreeView dragged mime types: ${Array.from(e).join(", ")}`):this.logService.debug("TreeView dragged with no supported mime types.")}onDragOver(e,t,i,o,n){const s=(0,mr.l)(n.dataTransfer),r=new Set(Array.from(s,(e=>e[0])));if(n.dataTransfer)for(const e of n.dataTransfer.items)if("file"===e.kind||e.type===nr.tx.RESOURCES.toLowerCase()){r.add(Vt.KV.uriList);break}this.debugLog(r);const a=this.dndController;return!(!a||!n.dataTransfer||0===a.dropMimeTypes.length)&&(!!Array.from(r).some(((e,t)=>e===this.treeMimeType||a.dropMimeTypes.indexOf(e)>=0))&&{accept:!0,bubble:0,autoExpand:!0})}getDragURI(e){return this.dndController?e.resourceUri?v.rz.revive(e.resourceUri).toString():e.handle:null}getDragLabel(e){if(!this.dndController)return;if(e.length>1)return String(e.length);const t=e[0];return t.label?t.label.label:t.resourceUri?this.labelService.getUriLabel(v.rz.revive(t.resourceUri)):void 0}async drop(e,t,i,o,n){const s=this.dndController;if(!n.dataTransfer||!s)return;let r,a;this.treeItemsTransfer.hasData(Cr.u.prototype)&&(a=this.treeItemsTransfer.getData(Cr.u.prototype)[0].identifier);const c=(0,mr.l)(n.dataTransfer,!0),d=new dr.Vq;for(const[e,t]of c)if((e===this.treeMimeType||s.dropMimeTypes.includes(e)||t.asFile()&&s.dropMimeTypes.includes(nr.tx.FILES.toLowerCase()))&&(d.append(e,t),e===this.treeMimeType))try{r=JSON.parse(await t.asString())}catch{}const h=await this.treeViewsDragAndDropService.removeDragOperationTransfer(a);if(h)for(const[e,t]of h)d.append(e,t);return s.handleDrop(d,t,yt.XO.None,a,r?.id,r?.itemHandles)}onDragEnd(e){"none"===e.dataTransfer?.dropEffect&&this.dragCancellationToken?.cancel()}dispose(){}};function zr(e){const t=[];for(const i of e)if(void 0!==i.checkbox){const e=i=>{for(const o of i.children??[])void 0!==o.checkbox&&void 0!==i.checkbox&&o.checkbox.isChecked!==i.checkbox.isChecked&&(o.checkbox.isChecked=i.checkbox.isChecked,t.push(o),e(o))};e(i);const o=new Set,n=e=>{if(e.parent&&void 0!==e.parent.checkbox&&e.parent.children){if(o.has(e.parent))return;o.add(e.parent);let i=!1,s=!1;for(const t of e.parent.children){if(i&&s)break;void 0!==t.checkbox&&(t.checkbox.isChecked?s=!0:i=!0)}s&&!i&&!0!==e.parent.checkbox.isChecked?(e.parent.checkbox.isChecked=!0,t.push(e.parent),n(e.parent)):i&&!1!==e.parent.checkbox.isChecked&&(e.parent.checkbox.isChecked=!1,t.push(e.parent),n(e.parent))}};n(i)}return e.concat(t)}Wr=(0,s.C)([(0,s.Q)(1,jo.L),(0,s.Q)(2,a._Y),(0,s.Q)(3,yr.p),(0,s.Q)(4,k.r)],Wr);var Hr=i(2128),Qr=i(39320),Ur=i(68937),$r=i(41400),Kr=i(28902);(0,Fe.A)('.ports-view .monaco-icon-label,.ports-view .monaco-list .monaco-list-row.focused .monaco-icon-label,.ports-view .monaco-list .monaco-list-row:hover:not(.highlighted) .monaco-icon-label{flex:1}.ports-view .monaco-list .monaco-list-row .actionBarContainer{flex:1 0 auto;flex:0 0 auto;text-align:right}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell{display:flex;flex:1;flex-wrap:nowrap;height:22px;overflow:hidden;text-overflow:ellipsis}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .monaco-inputbox{flex:1;height:22px;line-height:19px}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .monaco-inputbox input{margin-top:-40px}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .ports-view-actionbar-cell-localaddress{color:var(--vscode-textLink-foreground);text-decoration:var(--text-link-decoration)}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .ports-view-actionbar-cell-localaddress:hover{text-decoration:underline}.ports-view .monaco-table-td[data-col-index="0"],.ports-view .monaco-table-th,.ports-view .monaco-table-th[data-col-index="0"]{padding-left:10px}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .monaco-button{line-height:1.4em;margin-bottom:3px;margin-left:3px;margin-top:4px;padding:2px 14px;width:auto}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell>.ports-view-actionbar-cell-icon.codicon{margin-top:3px;padding-right:3px}.ports-view .monaco-list .monaco-list-row.selected .ports-view-actionbar-cell>.ports-view-actionbar-cell-icon.codicon{color:currentColor!important}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .ports-view-actionbar-cell-resourceLabel .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .ports-view-actionbar-cell-resourceLabel:after{padding-right:0}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .actions{display:none}.ports-view .monaco-list .monaco-list-row.focused .ports-view-actionbar-cell .actions,.ports-view .monaco-list .monaco-list-row.selected .ports-view-actionbar-cell .actions,.ports-view .monaco-list .monaco-list-row:hover .ports-view-actionbar-cell .actions{display:block}.ports-view .monaco-list .ports-view-actionbar-cell .actions .action-label{background-position:50% 50%;background-repeat:no-repeat;background-size:16px;height:100%;padding:2px;width:16px}.monaco-workbench .codicon.codicon-ports-forwarded-with-process-icon{color:var(--vscode-ports-iconRunningProcessForeground)}',{});var jr=i(70950);(0,Wt.pU)("remote-explorer-get-started",xi.W6.star,(0,I.kg)(11102,"Getting started icon in the remote explorer view.")),(0,Wt.pU)("remote-explorer-documentation",xi.W6.book,(0,I.kg)(11103,"Documentation icon in the remote explorer view.")),(0,Wt.pU)("remote-explorer-feedback",xi.W6.twitter,(0,I.kg)(11104,"Feedback icon in the remote explorer view.")),(0,Wt.pU)("remote-explorer-review-issues",xi.W6.issues,(0,I.kg)(11105,"Review issue icon in the remote explorer view.")),(0,Wt.pU)("remote-explorer-report-issues",xi.W6.comment,(0,I.kg)(11106,"Report issue icon in the remote explorer view.")),(0,Wt.pU)("remote-explorer-view-icon",xi.W6.remoteExplorer,(0,I.kg)(11107,"View icon of the remote explorer view."));const Zr=(0,Wt.pU)("ports-view-icon",xi.W6.plug,(0,I.kg)(11108,"View icon of the remote ports view."));(0,Wt.pU)("ports-view-icon",xi.W6.plug,(0,I.kg)(11109,"Icon representing a remote port."));const Yr=(0,Wt.pU)("private-ports-view-icon",xi.W6.lock,(0,I.kg)(11110,"Icon representing a private remote port.")),qr=(0,Wt.pU)("ports-forward-icon",xi.W6.plus,(0,I.kg)(11111,"Icon for the forward action.")),Jr=(0,Wt.pU)("ports-stop-forward-icon",xi.W6.x,(0,I.kg)(11112,"Icon for the stop forwarding action.")),Xr=(0,Wt.pU)("ports-open-browser-icon",xi.W6.globe,(0,I.kg)(11113,"Icon for the open browser action.")),ea=(0,Wt.pU)("ports-open-preview-icon",xi.W6.openPreview,(0,I.kg)(11114,"Icon for the open preview action.")),ta=(0,Wt.pU)("ports-copy-address-icon",xi.W6.clippy,(0,I.kg)(11115,"Icon for the copy local address action.")),ia=(0,Wt.pU)("ports-label-icon",xi.W6.tag,(0,I.kg)(11116,"Icon for the label port action.")),oa=(0,Wt.pU)("ports-forwarded-without-process-icon",xi.W6.circleOutline,(0,I.kg)(11117,"Icon for forwarded ports that don't have a running process.")),na=(0,Wt.pU)("ports-forwarded-with-process-icon",xi.W6.circleFilled,(0,I.kg)(11118,"Icon for forwarded ports that do have a running process."));var sa,ra=i(96326),aa=i(5336),ca=i(69993);const da=new c.N1("openPreviewEnabled",!1);class ha{constructor(e){this.remoteExplorerService=e,this.headerRowHeight=22}getHeight(e){return e.tunnelType!==Ur.t3.Add||this.remoteExplorerService.getEditableData(void 0)?22:30}}let la=class{constructor(e,t){this.remoteExplorerService=e,this.tunnelService=t,this._candidates=new Map,this.input={label:(0,I.kg)(11119,"Add Port"),icon:void 0,tunnelType:Ur.t3.Add,hasRunningProcess:!1,remoteHost:"",remotePort:0,processDescription:"",tooltipPostfix:"",iconTooltip:"",portTooltip:"",processTooltip:"",originTooltip:"",privacyTooltip:"",source:{source:Kr.V3.User,description:""},protocol:_t.H0.Http,privacy:{id:_t.uS.Private,themeIcon:Yr.id,label:(0,I.kg)(11120,"Private")},strip:()=>{}},this.model=e.tunnelModel,this.onForwardedPortsChanged=m.Jh.any(this.model.onForwardPort,this.model.onClosePort,this.model.onPortName,this.model.onCandidatesChanged)}get all(){const e=[];return this._candidates=new Map,this.model.candidates.forEach((e=>{this._candidates.set((0,Kr.ZE)(e.host,e.port),e)})),(this.model.forwarded.size>0||this.remoteExplorerService.getEditableData(void 0))&&e.push(...this.forwarded),this.model.detected.size>0&&e.push(...this.detected),e.push(this.input),e}addProcessInfoFromCandidate(e){const t=(0,Kr.ZE)(e.remoteHost,e.remotePort);this._candidates.has(t)&&(e.processDescription=this._candidates.get(t).detail)}get forwarded(){return Array.from(this.model.forwarded.values()).map((e=>{const t=ya.createFromTunnel(this.remoteExplorerService,this.tunnelService,e);return this.addProcessInfoFromCandidate(t),t})).sort(((e,t)=>e.remotePort===t.remotePort?e.remoteHost<t.remoteHost?-1:1:e.remotePort<t.remotePort?-1:1))}get detected(){return Array.from(this.model.detected.values()).map((e=>{const t=ya.createFromTunnel(this.remoteExplorerService,this.tunnelService,e,Ur.t3.Detected,!1);return this.addProcessInfoFromCandidate(t),t}))}isEmpty(){return 0===this.detected.length&&(0===this.forwarded.length||1===this.forwarded.length&&this.forwarded[0].tunnelType===Ur.t3.Add&&!this.remoteExplorerService.getEditableData(void 0))}};function ua(e){return{label:"",tunnel:e,editId:Ur.O$.None,tooltip:""}}la=(0,s.C)([(0,s.Q)(0,$r.c),(0,s.Q)(1,kt.p)],la);class pa{constructor(){this.label="",this.tooltip="",this.weight=1,this.minimumWidth=40,this.maximumWidth=40,this.templateId="actionbar"}project(e){if(e.tunnelType===Ur.t3.Add)return ua(e);const t=e.processDescription?na:oa;let i="";return e instanceof ya&&(i=`${e.iconTooltip} ${e.tooltipPostfix}`),{label:"",icon:t,tunnel:e,editId:Ur.O$.None,tooltip:i}}}class ga{constructor(){this.label=(0,I.kg)(11121,"Port"),this.tooltip=(0,I.kg)(11122,"The label and remote port number of the forwarded port."),this.weight=1,this.templateId="actionbar"}project(e){const t=e.tunnelType===Ur.t3.Add,i=e.label;let o="";return o=e instanceof ya&&!t?`${e.portTooltip} ${e.tooltipPostfix}`:i,{label:i,tunnel:e,menuId:_.D8.TunnelPortInline,editId:e.tunnelType===Ur.t3.Add?Ur.O$.New:Ur.O$.Label,tooltip:o}}}class ma{constructor(){this.label=(0,I.kg)(11123,"Forwarded Address"),this.tooltip=(0,I.kg)(11124,"The address that the forwarded port is available at."),this.weight=1,this.templateId="actionbar"}project(e){if(e.tunnelType===Ur.t3.Add)return ua(e);const t=e.localAddress??"";let i=t;return e instanceof ya&&(i=e.tooltipPostfix),{label:t,menuId:_.D8.TunnelLocalAddressInline,tunnel:e,editId:Ur.O$.LocalPort,tooltip:i,markdownTooltip:t?ma.getHoverText(t):void 0}}static getHoverText(e){return function(t){let i="";i="ctrlCmd"===t.getValue("editor").multiCursorModifier?Di.zx?(0,I.kg)(11125,"option + click"):(0,I.kg)(11126,"alt + click"):Di.zx?(0,I.kg)(11127,"cmd + click"):(0,I.kg)(11128,"ctrl + click");const o=new cr.Bc("",!0),n=e.startsWith("http")?e:`http://${e}`;return o.appendLink(n,"Follow link").appendMarkdown(` (${i})`)}}}class ba{constructor(){this.label=(0,I.kg)(11129,"Running Process"),this.tooltip=(0,I.kg)(11130,"The command line of the process that is using the port."),this.weight=2,this.templateId="actionbar"}project(e){return e.tunnelType===Ur.t3.Add?ua(e):{label:e.processDescription??"",tunnel:e,editId:Ur.O$.None,tooltip:e instanceof ya?e.processTooltip:""}}}class wa{constructor(){this.label=(0,I.kg)(11131,"Origin"),this.tooltip=(0,I.kg)(11132,"The source that a forwarded port originates from. Can be an extension, user forwarded, statically forwarded, or automatically forwarded."),this.weight=1,this.templateId="actionbar"}project(e){if(e.tunnelType===Ur.t3.Add)return ua(e);const t=e.source.description,i=`${e instanceof ya?e.originTooltip:""}. ${e instanceof ya?e.tooltipPostfix:""}`;return{label:t,menuId:_.D8.TunnelOriginInline,tunnel:e,editId:Ur.O$.None,tooltip:i}}}class va{constructor(){this.label=(0,I.kg)(11133,"Visibility"),this.tooltip=(0,I.kg)(11134,"The availability of the forwarded port."),this.weight=1,this.templateId="actionbar"}project(e){if(e.tunnelType===Ur.t3.Add)return ua(e);const t=e.privacy?.label;let i="";return e instanceof ya&&(i=`${e.privacy.label} ${e.tooltipPostfix}`),{label:t,tunnel:e,icon:{id:e.privacy.themeIcon},editId:Ur.O$.None,tooltip:i}}}let fa=class extends p.jG{constructor(e,t,i,o,n,s,r){super(),this.instantiationService=e,this.contextKeyService=t,this.menuService=i,this.contextViewService=o,this.remoteExplorerService=n,this.commandService=s,this.configurationService=r,this.templateId="actionbar",this._hoverDelegate=(0,ca.nZ)("mouse")}set actionRunner(e){this._actionRunner=e}renderTemplate(e){const t=(0,ke.BC)(e,(0,ke.$)(".ports-view-actionbar-cell")),i=(0,ke.BC)(t,(0,ke.$)(".ports-view-actionbar-cell-icon")),o=new wn.s(t,{supportHighlights:!0,hoverDelegate:this._hoverDelegate}),n=(0,ke.BC)(t,(0,ke.$)(".actions"));return{label:o,icon:i,actionBar:new Ci.E(n,{actionViewItemProvider:ps.rN.bind(void 0,this.instantiationService),hoverDelegate:this._hoverDelegate}),container:t,elementDisposable:p.jG.None}}renderElement(e,t,i){let o;i.actionBar.clear(),i.icon.className="ports-view-actionbar-cell-icon",i.icon.style.display="none",i.label.setLabel(""),i.label.element.style.display="none",i.container.style.height="22px",i.button&&(i.button.element.style.display="none",i.button.dispose()),i.container.style.paddingLeft="0px",i.elementDisposable.dispose(),e.editId===Ur.O$.New&&(o=this.remoteExplorerService.getEditableData(void 0))?this.renderInputBox(i.container,o):(o=this.remoteExplorerService.getEditableData(e.tunnel,e.editId),o?this.renderInputBox(i.container,o):e.tunnel.tunnelType===Ur.t3.Add&&e.menuId===_.D8.TunnelPortInline?this.renderButton(e,i):this.renderActionBarItem(e,i))}renderButton(e,t){t.container.style.paddingLeft="7px",t.container.style.height="28px",t.button=this._register(new Si.$n(t.container,$t.cv)),t.button.label=e.label,t.button.element.title=e.tooltip,this._register(t.button.onDidClick((()=>{this.commandService.executeCommand(za.INLINE_ID)})))}tunnelContext(e){let t;return e instanceof ya&&(t=e.strip()),t||(t={tunnelType:e.tunnelType,remoteHost:e.remoteHost,remotePort:e.remotePort,localAddress:e.localAddress,protocol:e.protocol,localUri:e.localUri,localPort:e.localPort,name:e.name,closeable:e.closeable,source:e.source,privacy:e.privacy,processDescription:e.processDescription,label:e.label}),t}renderActionBarItem(e,t){t.label.element.style.display="flex",t.label.setLabel(e.label,void 0,{title:e.markdownTooltip?{markdown:e.markdownTooltip(this.configurationService),markdownNotSupportedFallback:e.tooltip}:e.tooltip,extraClasses:e.menuId===_.D8.TunnelLocalAddressInline?["ports-view-actionbar-cell-localaddress"]:void 0}),t.actionBar.context=this.tunnelContext(e.tunnel),t.container.style.paddingLeft="10px";const i=[["view",Ur.bk],[Ca.key,e.tunnel.tunnelType],[Sa.key,e.tunnel.closeable],[ka.key,e.tunnel.privacy.id],[xa.key,e.tunnel.protocol]],o=this.contextKeyService.createOverlay(i),n=new p.Cm;if(t.elementDisposable=n,e.menuId){const i=n.add(this.menuService.createMenu(e.menuId,o));let s=[];if((0,ps.Ot)(i,{shouldForwardArgs:!0},s),s){const e=s.filter((e=>e.id.toLowerCase().indexOf("label")>=0));e.length>1&&(e.sort(((e,t)=>e.label.length-t.label.length)),e.pop(),s=s.filter((t=>e.indexOf(t)<0))),t.actionBar.push(s,{icon:!0,label:!1}),this._actionRunner&&(t.actionBar.actionRunner=this._actionRunner)}}e.icon&&(t.icon.className=`ports-view-actionbar-cell-icon ${S.L0.asClassName(e.icon)}`,t.icon.title=e.tooltip,t.icon.style.display="inline")}renderInputBox(e,t){this.inputDone&&(this.inputDone(!1,!1),this.inputDone=void 0),e.style.paddingLeft="5px";const i=t.startingValue||"",o=new _i.cl(e,this.contextViewService,{ariaLabel:(0,I.kg)(11135,"Press Enter to confirm or Escape to cancel."),validationOptions:{validation:e=>{const i=t.validationMessage(e);return i?{content:i.content,formatContent:!0,type:i.severity===X.A.Error?3:1}:null}},placeholder:t.placeholder||"",inputBoxStyles:$t.ho});o.value=i,o.focus(),o.select({start:0,end:t.startingValue?t.startingValue.length:0});const n=(0,$e.P)((async(e,i)=>{(0,p.AS)(s),this.inputDone&&(this.inputDone=void 0),o.element.style.display="none";const n=o.value;if(i)return t.onFinish(n,e)}));this.inputDone=n;const s=[o,(0,ke.b2)(o.inputElement,ke.Bx.KEY_DOWN,(async e=>e.equals(3)?(e.stopPropagation(),3!==o.validate()?n(!0,!0):n(!1,!0)):e.equals(9)?(e.preventDefault(),e.stopPropagation(),n(!1,!0)):void 0)),(0,ke.ko)(o.inputElement,ke.Bx.BLUR,(()=>n(3!==o.validate(),!0)))];return(0,p.s)((()=>{n(!1,!1)}))}disposeElement(e,t,i,o){i.elementDisposable.dispose()}disposeTemplate(e){e.label.dispose(),e.actionBar.dispose(),e.elementDisposable.dispose(),e.button?.dispose()}};fa=(0,s.C)([(0,s.Q)(0,a._Y),(0,s.Q)(1,d.f),(0,s.Q)(2,us.e),(0,s.Q)(3,ne.l),(0,s.Q)(4,$r.c),(0,s.Q)(5,hr.w),(0,s.Q)(6,z.p)],fa);class ya{static createFromTunnel(e,t,i,o=Ur.t3.Forwarded,n){return new ya(o,i.remoteHost,i.remotePort,i.source,!!i.hasRunningProcess,i.protocol,i.localUri,i.localAddress,i.localPort,void 0===n?i.closeable:n,i.name,i.runningProcess,i.pid,i.privacy,e,t)}strip(){return new ya(this.tunnelType,this.remoteHost,this.remotePort,this.source,this.hasRunningProcess,this.protocol,this.localUri,this.localAddress,this.localPort,this.closeable,this.name,this.runningProcess,this.pid,this._privacy)}constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,p,g,m){this.tunnelType=e,this.remoteHost=t,this.remotePort=i,this.source=o,this.hasRunningProcess=n,this.protocol=s,this.localUri=r,this.localAddress=a,this.localPort=c,this.closeable=d,this.name=h,this.runningProcess=l,this.pid=u,this._privacy=p,this.remoteExplorerService=g,this.tunnelService=m}get label(){if(this.tunnelType===Ur.t3.Add&&this.name)return this.name;const e=(0,_t.M8)(this.remoteHost)||(0,_t.eW)(this.remoteHost)?`${this.remotePort}`:`${this.remoteHost}:${this.remotePort}`;return this.name?`${this.name} (${e})`:e}set processDescription(e){this.runningProcess=e}get processDescription(){let e="";return this.runningProcess?(e=this.pid&&this.remoteExplorerService?.namedProcesses.has(this.pid)?this.remoteExplorerService.namedProcesses.get(this.pid):this.runningProcess.replace(/\0/g," ").trim(),this.pid&&(e+=` (${this.pid})`)):this.hasRunningProcess&&(e=(0,I.kg)(11136,"Process information unavailable")),e}get tooltipPostfix(){let e;return e=this.localAddress?(0,I.kg)(11137,"Remote port {0}:{1} forwarded to local address {2}. ",this.remoteHost,this.remotePort,this.localAddress):(0,I.kg)(11138,"Remote port {0}:{1} not forwarded. ",this.remoteHost,this.remotePort),e}get iconTooltip(){return this.tunnelType===Ur.t3.Add?this.label:`${this.processDescription?(0,I.kg)(11139,"Port has running process."):(0,I.kg)(11140,"No running process.")}`}get portTooltip(){return this.tunnelType===Ur.t3.Add?"":`${this.name?(0,I.kg)(11141,"Port labeled {0}. ",this.name):""}`}get processTooltip(){return this.processDescription??""}get originTooltip(){return this.source.description}get privacy(){return this.tunnelService?.privacyOptions?this.tunnelService?.privacyOptions.find((e=>e.id===this._privacy))??{id:"",themeIcon:xi.W6.question.id,label:(0,I.kg)(11142,"Unknown")}:{id:_t.uS.Private,themeIcon:Yr.id,label:(0,I.kg)(11120,"Private")}}}const Ca=new c.N1("tunnelType",Ur.t3.Add,!0),Sa=new c.N1("tunnelCloseable",!1,!0),ka=new c.N1("tunnelPrivacy",void 0,!0),_a=new c.N1("tunnelPrivacyEnabled",!1,!0),xa=new c.N1("tunnelProtocol",_t.H0.Http,!0),Ea=new c.N1("tunnelViewFocus",!1,(0,I.kg)(11143,"Whether the Ports view has focus.")),Da="tunnelViewSelection",Ia=new c.N1(Da,void 0,!0),Va="tunnelViewMultiSelection",Ma=new c.N1(Va,void 0,!0),Ta=new c.N1("portChangable",!1,!0),Aa=new c.N1("protocolChangable",!0,!0);let La=class extends Jo.OZ{static{sa=this}static{this.ID=Ur.bk}static{this.TITLE=(0,I.aS)(11144,"Ports")}constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,g,b,w,v,f){super(t,i,o,s,n,a,r,c,u,b,w),this.viewModel=e,this.quickInputService=d,this.commandService=h,this.menuService=l,this.remoteExplorerService=g,this.tunnelService=v,this.contextViewService=f,this.tableDisposables=this._register(new p.Cm),this.isEditing=!1,this.titleActions=[],this.lastFocus=[],this.height=0,this.width=0,this.tunnelTypeContext=Ca.bindTo(n),this.tunnelCloseableContext=Sa.bindTo(n),this.tunnelPrivacyContext=ka.bindTo(n),this.tunnelPrivacyEnabledContext=_a.bindTo(n),this.tunnelPrivacyEnabledContext.set(v.canChangePrivacy),this.protocolChangableContextKey=Aa.bindTo(n),this.protocolChangableContextKey.set(v.canChangeProtocol),this.tunnelProtocolContext=xa.bindTo(n),this.tunnelViewFocusContext=Ea.bindTo(n),this.tunnelViewSelectionContext=Ia.bindTo(n),this.tunnelViewMultiSelectionContext=Ma.bindTo(n),this.portChangableContextKey=Ta.bindTo(n);const y=this.contextKeyService.createOverlay([["view",sa.ID]]),C=this._register(this.menuService.createMenu(_.D8.TunnelTitle,y)),S=()=>{this.titleActions=[],(0,ps.Ot)(C,void 0,this.titleActions),this.updateActions()};this._register(C.onDidChange(S)),S(),this._register((0,p.s)((()=>{this.titleActions=[]}))),this.registerPrivacyActions(),this._register(m.Jh.once(this.tunnelService.onAddedTunnelProvider)((()=>{let e=!1;!1===this.tunnelPrivacyEnabledContext.get()&&(this.tunnelPrivacyEnabledContext.set(v.canChangePrivacy),e=!0),!0===this.protocolChangableContextKey.get()&&(this.protocolChangableContextKey.set(v.canChangeProtocol),e=!0),e&&(S(),this.registerPrivacyActions(),this.createTable(),this.table?.layout(this.height,this.width))})))}registerPrivacyActions(){for(const e of this.tunnelService.privacyOptions){const t=`remote.tunnel.privacy${e.id}`;Zs.w.registerCommand(t,Za.handler(e.id)),_.ZG.appendMenuItem(_.D8.TunnelPrivacy,{order:0,command:{id:t,title:e.label,toggled:ka.isEqualTo(e.id)}})}}get portCount(){return this.remoteExplorerService.tunnelModel.forwarded.size+this.remoteExplorerService.tunnelModel.detected.size}createTable(){if(!this.panelContainer)return;this.tableDisposables.clear(),(0,ke.w_)(this.panelContainer);const e=(0,ke.BC)(this.panelContainer,(0,ke.$)(".customview-tree"));e.classList.add("ports-view"),e.classList.add("file-icon-themable-tree","show-file-icons");const t=new fa(this.instantiationService,this.contextKeyService,this.menuService,this.contextViewService,this.remoteExplorerService,this.commandService,this.configurationService),i=[new pa,new ga,new ma,new ba];this.tunnelService.canChangePrivacy&&i.push(new va),i.push(new wa),this.table=this.instantiationService.createInstance(Zo.qH,"RemoteTunnels",e,new ha(this.remoteExplorerService),i,[t],{keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:e=>e.label},multipleSelectionSupport:!0,accessibilityProvider:{getAriaLabel:e=>e instanceof ya?`${e.tooltipPostfix} ${e.portTooltip} ${e.iconTooltip} ${e.processTooltip} ${e.originTooltip} ${this.tunnelService.canChangePrivacy?e.privacy.label:""}`:e.label,getWidgetAriaLabel:()=>(0,I.kg)(11145,"Tunnel View")},openOnSingleClick:!0});const o=new vi.LN;t.actionRunner=o,this.tableDisposables.add(this.table),this.tableDisposables.add(this.table.onContextMenu((e=>this.onContextMenu(e,o)))),this.tableDisposables.add(this.table.onMouseDblClick((e=>this.onMouseDblClick(e)))),this.tableDisposables.add(this.table.onDidChangeFocus((e=>this.onFocusChanged(e)))),this.tableDisposables.add(this.table.onDidChangeSelection((e=>this.onSelectionChanged(e)))),this.tableDisposables.add(this.table.onDidFocus((()=>this.tunnelViewFocusContext.set(!0)))),this.tableDisposables.add(this.table.onDidBlur((()=>this.tunnelViewFocusContext.set(!1))));const n=()=>this.table?.splice(0,Number.POSITIVE_INFINITY,this.viewModel.all);n();let s=this.portCount;this.tableDisposables.add(m.Jh.debounce(this.viewModel.onForwardedPortsChanged,((e,t)=>t),50)((()=>{const e=this.portCount;0!==s&&0!==e||s===e||this._onDidChangeViewWelcomeState.fire(),s=e,n()}))),this.tableDisposables.add(this.table.onMouseClick((e=>{if(this.hasOpenLinkModifier(e.browserEvent)&&this.table){const t=this.table.getSelectedElements();(0===t.length||1===t.length&&t[0]===e.element)&&this.commandService.executeCommand(Qa.ID,e.element)}}))),this.tableDisposables.add(this.table.onDidOpen((e=>{e.element&&e.element.tunnelType===Ur.t3.Forwarded&&"dblclick"===e.browserEvent?.type&&this.commandService.executeCommand(Ba.ID)}))),this.tableDisposables.add(this.remoteExplorerService.onDidChangeEditable((t=>{this.isEditing=!!this.remoteExplorerService.getEditableData(t?.tunnel,t?.editId),this._onDidChangeViewWelcomeState.fire(),this.isEditing||e.classList.remove("highlight"),n(),this.isEditing?(e.classList.add("highlight"),t||this.table?.reveal(this.table.indexOf(this.viewModel.input))):(t&&t.tunnel.tunnelType!==Ur.t3.Add&&this.table?.setFocus(this.lastFocus),this.focus())})))}renderBody(e){super.renderBody(e),this.panelContainer=(0,ke.BC)(e,(0,ke.$)(".tree-explorer-viewlet-tree-view")),this.createTable()}shouldShowWelcome(){return this.viewModel.isEmpty()&&!this.isEditing}focus(){super.focus(),this.table?.domFocus()}onFocusChanged(e){e.indexes.length>0&&e.elements.length>0&&(this.lastFocus=[...e.indexes]);const t=e.elements,i=t&&t.length?t[0]:void 0;i?(this.tunnelViewSelectionContext.set((0,Kr.ZE)(i.remoteHost,i.remotePort)),this.tunnelTypeContext.set(i.tunnelType),this.tunnelCloseableContext.set(!!i.closeable),this.tunnelPrivacyContext.set(i.privacy.id),this.tunnelProtocolContext.set((i.protocol,_t.H0.Https,_t.H0.Https)),this.portChangableContextKey.set(!!i.localPort)):(this.tunnelTypeContext.reset(),this.tunnelViewSelectionContext.reset(),this.tunnelCloseableContext.reset(),this.tunnelPrivacyContext.reset(),this.tunnelProtocolContext.reset(),this.portChangableContextKey.reset())}hasOpenLinkModifier(e){let t=!1;return t="ctrlCmd"===this.configurationService.getValue("editor").multiCursorModifier?e.altKey:Di.zx?e.metaKey:e.ctrlKey,t}onSelectionChanged(e){const t=e.elements;t.length>1?this.tunnelViewMultiSelectionContext.set(t.map((e=>(0,Kr.ZE)(e.remoteHost,e.remotePort)))):this.tunnelViewMultiSelectionContext.set(void 0)}onContextMenu(e,t){if(void 0!==e.element&&!(e.element instanceof ya))return;e.browserEvent.preventDefault(),e.browserEvent.stopPropagation();const i=e.element;i?(this.table?.setFocus([this.table.indexOf(i)]),this.tunnelTypeContext.set(i.tunnelType),this.tunnelCloseableContext.set(!!i.closeable),this.tunnelPrivacyContext.set(i.privacy.id),this.tunnelProtocolContext.set(i.protocol),this.portChangableContextKey.set(!!i.localPort)):(this.tunnelTypeContext.set(Ur.t3.Add),this.tunnelCloseableContext.set(!1),this.tunnelPrivacyContext.set(void 0),this.tunnelProtocolContext.set(void 0),this.portChangableContextKey.set(!1)),this.contextMenuService.showContextMenu({menuId:_.D8.TunnelContext,menuActionOptions:{shouldForwardArgs:!0},contextKeyService:this.table?.contextKeyService,getAnchor:()=>e.anchor,getActionViewItem:e=>{const t=this.keybindingService.lookupKeybinding(e.id);if(t)return new rr.Z4(e,e,{label:!0,keybinding:t.getLabel()})},onHide:e=>{e&&this.table?.domFocus()},getActionsContext:()=>i?.strip(),actionRunner:t})}onMouseDblClick(e){e.element||this.commandService.executeCommand(za.INLINE_ID)}layoutBody(e,t){this.height=e,this.width=t,super.layoutBody(e,t),this.table?.layout(e,t)}};La=sa=(0,s.C)([(0,s.Q)(2,Bt.b),(0,s.Q)(3,ne.Z),(0,s.Q)(4,d.f),(0,s.Q)(5,z.p),(0,s.Q)(6,a._Y),(0,s.Q)(7,n.X),(0,s.Q)(8,Yo.C),(0,s.Q)(9,j.G),(0,s.Q)(10,hr.w),(0,s.Q)(11,us.e),(0,s.Q)(12,Zi.G),(0,s.Q)(13,$r.c),(0,s.Q)(14,b.k),(0,s.Q)(15,Rt.T),(0,s.Q)(16,kt.p),(0,s.Q)(17,ne.l)],La);class Pa{constructor(e,t){this.id=La.ID,this.name=La.TITLE,this.canToggleVisibility=!0,this.hideByDefault=!1,this.group="details@0",this.order=-500,this.canMoveView=!0,this.containerIcon=Zr,this.ctorDescriptor=new o.d(La,[e]),this.remoteAuthority=t.remoteAuthority?t.remoteAuthority.split("+")[0]:void 0}}function Ra(e){return e&&e.tunnelType&&e.remoteHost&&e.source}var Ba;!function(e){e.ID="remote.tunnel.label",e.LABEL=(0,I.kg)(11146,"Set Port Label"),e.COMMAND_ID_KEYWORD="label",e.handler=function(){return async(e,t)=>{const i=e.get($r.c);let o;if(Ra(t))o=t;else{const t=e.get(d.f).getContextKeyValue(Da),n=t?i.tunnelModel.forwarded.get(t):void 0;if(n){const t=e.get(kt.p);o=ya.createFromTunnel(i,t,n)}}if(o){const e=o;return new Promise((t=>{const o=e.name?e.name:`${e.remotePort}`;i.setEditable(e,Ur.O$.Label,{onFinish:async(n,s)=>{n=n.trim(),i.setEditable(e,Ur.O$.Label,null);const r=s&&n!==o;r&&await i.tunnelModel.name(e.remoteHost,e.remotePort,n),t(r?{port:e.remotePort,label:n}:void 0)},validationMessage:()=>null,placeholder:(0,I.kg)(11147,"Port label"),startingValue:o})}))}}}}(Ba||(Ba={}));const Oa=(0,I.kg)(11148,"Forwarded port should be a number or a host:port."),Na=65536,Fa=(0,I.kg)(11149,"Port number must be ≥ 0 and < {0}.",Na),Ga=(0,I.kg)(11150,"May Require Sudo"),Wa=(0,I.kg)(11151,"Port is already forwarded");var za,Ha,Qa,Ua,$a,Ka,ja,Za,Ya;function qa(e,t,i){const o=e.map((e=>{const o=ya.createFromTunnel(t,i,e);return{label:o.label,description:o.processDescription,tunnel:o}}));return 0===o.length&&o.push({label:(0,I.kg)(11157,"No ports currently forwarded. Try running the {0} command",za.LABEL.value)}),o}!function(e){e.INLINE_ID="remote.tunnel.forwardInline",e.COMMANDPALETTE_ID="remote.tunnel.forwardCommandPalette",e.LABEL=(0,I.aS)(11152,"Forward a Port"),e.TREEITEM_LABEL=(0,I.kg)(11153,"Forward Port");const t=(0,I.kg)(11154,"Port number or address (eg. 3000 or 10.10.10.10:2000).");function i(e,t,i,o){const n=(0,Kr.or)(i);return n?n.port>=Na?{content:Fa,severity:X.A.Error}:o&&t.isPortPrivileged(n.port)?{content:Ga,severity:X.A.Info}:(0,Kr.WV)(e.tunnelModel.forwarded,n.host,n.port)?{content:Wa,severity:X.A.Error}:null:{content:Oa,severity:X.A.Error}}function o(e,t,i,o){t?"string"==typeof t&&e.warn((0,I.kg)(11156,"Unable to forward {0}:{1}. {2}",i,o,t)):e.warn((0,I.kg)(11155,"Unable to forward {0}:{1}. The host may not be available or that remote port may already be forwarded",i,o))}e.inlineHandler=function(){return async(e,n)=>{const s=e.get($r.c),r=e.get(Y.O),a=e.get(kt.p);s.setEditable(void 0,Ur.O$.New,{onFinish:async(e,t)=>{let i;s.setEditable(void 0,Ur.O$.New,null),t&&(i=(0,Kr.or)(e))&&s.forward({remote:{host:i.host,port:i.port},elevateIfNeeded:!0}).then((e=>o(r,e,i.host,i.port)))},validationMessage:e=>i(s,a,e,a.canElevate),placeholder:t})}},e.commandPaletteHandler=function(){return async(e,n)=>{const s=e.get($r.c),r=e.get(Y.O),a=e.get(Mi.R),c=e.get(j.G),d=e.get(kt.p);await a.openView(La.ID,!0);const h=await c.input({prompt:t,validateInput:e=>Promise.resolve(i(s,d,e,d.canElevate))});let l;h&&(l=(0,Kr.or)(h))&&s.forward({remote:{host:l.host,port:l.port},elevateIfNeeded:!0}).then((e=>o(r,e,l.host,l.port)))}}}(za||(za={})),function(e){e.INLINE_ID="remote.tunnel.closeInline",e.COMMANDPALETTE_ID="remote.tunnel.closeCommandPalette",e.LABEL=(0,I.aS)(11158,"Stop Forwarding Port"),e.inlineHandler=function(){return async(e,t)=>{const i=e.get(d.f),o=e.get($r.c);let n=[];const s=i.getContextKeyValue(Va);if(s)s.forEach((e=>{const t=o.tunnelModel.forwarded.get(e);t&&n?.push(t)}));else if(Ra(t))n=[t];else{const e=i.getContextKeyValue(Da),t=e?o.tunnelModel.forwarded.get(e):void 0;t&&(n=[t])}if(n&&0!==n.length)return Promise.all(n.map((e=>o.close({host:e.remoteHost,port:e.remotePort},Kr.Ht.User))))}},e.commandPaletteHandler=function(){return async e=>{const t=e.get(j.G),i=e.get($r.c),o=e.get(kt.p),n=e.get(hr.w),s=qa(Array.from(i.tunnelModel.forwarded.values()).filter((e=>e.closeable)),i,o),r=await t.pick(s,{placeHolder:(0,I.kg)(11159,"Choose a port to stop forwarding")});r&&r.tunnel?await i.close({host:r.tunnel.remoteHost,port:r.tunnel.remotePort},Kr.Ht.User):r&&await n.executeCommand(za.COMMANDPALETTE_ID)}}}(Ha||(Ha={})),function(e){function t(e,t,i){const o=e.forwarded.get(i)||e.detected.get(i);return o?t.open(o.localUri,{allowContributedOpeners:!1}):Promise.resolve()}e.ID="remote.tunnel.open",e.LABEL=(0,I.kg)(11160,"Open in Browser"),e.handler=function(){return async(e,i)=>{let o;if(Ra(i)?o=(0,Kr.ZE)(i.remoteHost,i.remotePort):i.tunnelRemoteHost&&i.tunnelRemotePort&&(o=(0,Kr.ZE)(i.tunnelRemoteHost,i.tunnelRemotePort)),o)return t(e.get($r.c).tunnelModel,e.get(Yo.C),o)}},e.run=t}(Qa||(Qa={})),function(e){async function t(e,t,i,o){const n=e.forwarded.get(o)||e.detected.get(o);if(n){const e=n.remoteHost.includes(":")?`[${n.remoteHost}]`:n.remoteHost,o=v.rz.parse(`http://${e}:${n.remotePort}`),s=await i.getOpener(n.localUri,{sourceUri:o},yt.XO.None);return s?s.openExternalUri(n.localUri,{sourceUri:o},yt.XO.None):t.open(n.localUri)}return Promise.resolve()}e.ID="remote.tunnel.openPreview",e.LABEL=(0,I.kg)(11161,"Preview in Editor"),e.handler=function(){return async(e,i)=>{let o;if(Ra(i)?o=(0,Kr.ZE)(i.remoteHost,i.remotePort):i.tunnelRemoteHost&&i.tunnelRemotePort&&(o=(0,Kr.ZE)(i.tunnelRemoteHost,i.tunnelRemotePort)),o)return t(e.get($r.c).tunnelModel,e.get(Yo.C),e.get(ra.z),o)}},e.run=t}(Ua||(Ua={})),function(e){e.ID="remote.tunnel.openCommandPalette",e.LABEL=(0,I.kg)(11162,"Open Port in Browser"),e.handler=function(){return async(e,t)=>{const i=e.get($r.c),o=e.get(kt.p),n=i.tunnelModel,s=e.get(j.G),r=e.get(Yo.C),a=e.get(hr.w),c=[...n.forwarded,...n.detected].map((e=>{const t=ya.createFromTunnel(i,o,e[1]);return{label:t.label,description:t.processDescription,tunnel:t}}));0===c.length?c.push({label:(0,I.kg)(11163,"No ports currently forwarded. Open the Ports view to get started.")}):c.push({label:(0,I.kg)(11164,"Open the Ports view...")});const d=await s.pick(c,{placeHolder:(0,I.kg)(11165,"Choose the port to open")});return d&&d.tunnel?Qa.run(n,r,(0,Kr.ZE)(d.tunnel.remoteHost,d.tunnel.remotePort)):d?a.executeCommand(`${Ur.bk}.focus`):void 0}}}($a||($a={})),function(e){async function t(e,t,i){const o=e.tunnelModel.address(i.remoteHost,i.remotePort);o&&await t.writeText(o.toString())}e.INLINE_ID="remote.tunnel.copyAddressInline",e.COMMANDPALETTE_ID="remote.tunnel.copyAddressCommandPalette",e.INLINE_LABEL=(0,I.kg)(11166,"Copy Local Address"),e.COMMANDPALETTE_LABEL=(0,I.kg)(11167,"Copy Forwarded Port Address"),e.inlineHandler=function(){return async(e,i)=>{const o=e.get($r.c);let n;if(Ra(i))n=i;else{const t=e.get(d.f).getContextKeyValue(Da);n=t?o.tunnelModel.forwarded.get(t):void 0}if(n)return t(o,e.get(jr.h),n)}},e.commandPaletteHandler=function(){return async(e,i)=>{const o=e.get(j.G),n=e.get($r.c),s=e.get(kt.p),r=e.get(hr.w),a=e.get(jr.h),c=Array.from(n.tunnelModel.forwarded.values()).concat(Array.from(n.tunnelModel.detected.values())),d=await o.pick(qa(c,n,s),{placeHolder:(0,I.kg)(11168,"Choose a forwarded port")});d&&d.tunnel?await t(n,a,d.tunnel):d&&await r.executeCommand(za.COMMANDPALETTE_ID)}}}(Ka||(Ka={})),function(e){e.ID="remote.tunnel.changeLocalPort",e.LABEL=(0,I.kg)(11169,"Change Local Address Port"),e.handler=function(){return async(e,t)=>{const i=e.get($r.c),o=e.get(Y.O),n=e.get(kt.p);let s;if(Ra(t))s=t;else{const t=e.get(d.f).getContextKeyValue(Da),o=t?i.tunnelModel.forwarded.get(t):void 0;if(o){const t=e.get(kt.p);s=ya.createFromTunnel(i,t,o)}}if(s){const e=s;i.setEditable(e,Ur.O$.LocalPort,{onFinish:async(t,n)=>{if(i.setEditable(e,Ur.O$.LocalPort,null),n){await i.close({host:e.remoteHost,port:e.remotePort},Kr.Ht.Other);const n=Number(t),s=await i.forward({remote:{host:e.remoteHost,port:e.remotePort},local:n,name:e.name,elevateIfNeeded:!0,source:e.source});s&&"string"!=typeof s&&s.tunnelLocalPort!==n&&o.warn((0,I.kg)(11171,"The local port {0} is not available. Port number {1} has been used instead",t,s.tunnelLocalPort??s.localAddress))}},validationMessage:e=>function(e,t,i){return t.match(/^[0-9]+$/)?Number(t)>=Na?{content:Fa,severity:X.A.Error}:i&&e.isPortPrivileged(Number(t))?{content:Ga,severity:X.A.Info}:null:{content:(0,I.kg)(11170,"Local port should be a number."),severity:X.A.Error}}(n,e,n.canElevate),placeholder:(0,I.kg)(11172,"New local port")})}}}}(ja||(ja={})),function(e){e.handler=function(e){return async(t,i)=>{if(Ra(i)){const o=t.get($r.c);return await o.close({host:i.remoteHost,port:i.remotePort},Kr.Ht.Other),o.forward({remote:{host:i.remoteHost,port:i.remotePort},local:i.localPort,name:i.name,elevateIfNeeded:!0,privacy:e,source:i.source})}}}}(Za||(Za={})),function(e){async function t(e,t,i,o){if(Ra(e)){const n={protocol:t},s=o.remoteAuthority?4:3;return i.tunnelModel.configPortsAttributes.addAttributes(e.remotePort,n,s)}}e.ID_HTTP="remote.tunnel.setProtocolHttp",e.ID_HTTPS="remote.tunnel.setProtocolHttps",e.LABEL_HTTP=(0,I.kg)(11173,"HTTP"),e.LABEL_HTTPS=(0,I.kg)(11174,"HTTPS"),e.handlerHttp=function(){return async(e,i)=>t(i,_t.H0.Http,e.get($r.c),e.get(ni.P))},e.handlerHttps=function(){return async(e,i)=>t(i,_t.H0.Https,e.get($r.c),e.get(ni.P))}}(Ya||(Ya={}));const Ja=Ca.isEqualTo(Ur.t3.Forwarded),Xa=c.M$.or(Ja,Ca.isEqualTo(Ur.t3.Detected)),ec=Ma.isEqualTo(void 0);zs.f.registerCommandAndKeybindingRule({id:Ba.ID,weight:210,when:c.M$.and(Ea,Ja,ec),primary:60,mac:{primary:3},handler:Ba.handler()}),Zs.w.registerCommand(za.INLINE_ID,za.inlineHandler()),Zs.w.registerCommand(za.COMMANDPALETTE_ID,za.commandPaletteHandler()),zs.f.registerCommandAndKeybindingRule({id:Ha.INLINE_ID,weight:210,when:c.M$.and(Sa,Ea),primary:20,mac:{primary:2049,secondary:[20]},handler:Ha.inlineHandler()}),Zs.w.registerCommand(Ha.COMMANDPALETTE_ID,Ha.commandPaletteHandler()),Zs.w.registerCommand(Qa.ID,Qa.handler()),Zs.w.registerCommand(Ua.ID,Ua.handler()),Zs.w.registerCommand($a.ID,$a.handler()),zs.f.registerCommandAndKeybindingRule({id:Ka.INLINE_ID,weight:210,when:c.M$.and(Ea,Xa,ec),primary:2081,handler:Ka.inlineHandler()}),Zs.w.registerCommand(Ka.COMMANDPALETTE_ID,Ka.commandPaletteHandler()),Zs.w.registerCommand(ja.ID,ja.handler()),Zs.w.registerCommand(Ya.ID_HTTP,Ya.handlerHttp()),Zs.w.registerCommand(Ya.ID_HTTPS,Ya.handlerHttps()),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:Ha.COMMANDPALETTE_ID,title:Ha.LABEL},when:Kr.XF}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:za.COMMANDPALETTE_ID,title:za.LABEL},when:Kr.XF}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:Ka.COMMANDPALETTE_ID,title:Ka.COMMANDPALETTE_LABEL},when:Kr.XF}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:$a.ID,title:$a.LABEL},when:Kr.XF}),_.ZG.appendMenuItem(_.D8.TunnelContext,{group:"._open",order:0,command:{id:Qa.ID,title:Qa.LABEL},when:c.M$.and(Xa,ec)}),_.ZG.appendMenuItem(_.D8.TunnelContext,{group:"._open",order:1,command:{id:Ua.ID,title:Ua.LABEL},when:c.M$.and(Xa,ec)}),_.ZG.appendMenuItem(_.D8.TunnelContext,{group:"0_manage",order:1,command:{id:Ba.ID,title:Ba.LABEL,icon:ia},when:c.M$.and(Ja,ec)}),_.ZG.appendMenuItem(_.D8.TunnelContext,{group:"2_localaddress",order:0,command:{id:Ka.INLINE_ID,title:Ka.INLINE_LABEL},when:c.M$.and(Xa,ec)}),_.ZG.appendMenuItem(_.D8.TunnelContext,{group:"2_localaddress",order:1,command:{id:ja.ID,title:ja.LABEL},when:c.M$.and(Ja,Ta,ec)}),_.ZG.appendMenuItem(_.D8.TunnelContext,{group:"2_localaddress",order:2,submenu:_.D8.TunnelPrivacy,title:(0,I.kg)(11175,"Port Visibility"),when:c.M$.and(Ja,_a)}),_.ZG.appendMenuItem(_.D8.TunnelContext,{group:"2_localaddress",order:3,submenu:_.D8.TunnelProtocol,title:(0,I.kg)(11176,"Change Port Protocol"),when:c.M$.and(Ja,ec,Aa)}),_.ZG.appendMenuItem(_.D8.TunnelContext,{group:"3_forward",order:0,command:{id:Ha.INLINE_ID,title:Ha.LABEL},when:Sa}),_.ZG.appendMenuItem(_.D8.TunnelContext,{group:"3_forward",order:1,command:{id:za.INLINE_ID,title:za.LABEL}}),_.ZG.appendMenuItem(_.D8.TunnelProtocol,{order:0,command:{id:Ya.ID_HTTP,title:Ya.LABEL_HTTP,toggled:xa.isEqualTo(_t.H0.Http)}}),_.ZG.appendMenuItem(_.D8.TunnelProtocol,{order:1,command:{id:Ya.ID_HTTPS,title:Ya.LABEL_HTTPS,toggled:xa.isEqualTo(_t.H0.Https)}}),_.ZG.appendMenuItem(_.D8.TunnelPortInline,{group:"0_manage",order:0,command:{id:za.INLINE_ID,title:za.TREEITEM_LABEL,icon:qr},when:Ca.isEqualTo(Ur.t3.Candidate)}),_.ZG.appendMenuItem(_.D8.TunnelPortInline,{group:"0_manage",order:4,command:{id:Ba.ID,title:Ba.LABEL,icon:ia},when:Ja}),_.ZG.appendMenuItem(_.D8.TunnelPortInline,{group:"0_manage",order:5,command:{id:Ha.INLINE_ID,title:Ha.LABEL,icon:Jr},when:Sa}),_.ZG.appendMenuItem(_.D8.TunnelLocalAddressInline,{order:-1,command:{id:Ka.INLINE_ID,title:Ka.INLINE_LABEL,icon:ta},when:Xa}),_.ZG.appendMenuItem(_.D8.TunnelLocalAddressInline,{order:0,command:{id:Qa.ID,title:Qa.LABEL,icon:Xr},when:Xa}),_.ZG.appendMenuItem(_.D8.TunnelLocalAddressInline,{order:1,command:{id:Ua.ID,title:Ua.LABEL,icon:ea},when:Xa}),(0,ct.x1)("ports.iconRunningProcessForeground",aa.tn,(0,I.kg)(11177,"The color of the icon for a port that has an associated running process."));class tc extends p.jG{static{this.localUrlRegex=/\b\w{0,20}(?::\/\/)?(?:localhost|127\.0\.0\.1|0\.0\.0\.0|:\d{2,5})[\w\-\.\~:\/\?\#[\]\@!\$&\(\)\*\+\,\;\=]*/gim}static{this.extractPortRegex=/(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d{1,5})/}static{this.localPythonServerRegex=/HTTP\son\s(127\.0\.0\.1|0\.0\.0\.0)\sport\s(\d+)/}static{this.excludeTerminals=["Dev Containers"]}constructor(e,t){super(),this._onDidMatchLocalUrl=new m.vl,this.onDidMatchLocalUrl=this._onDidMatchLocalUrl.event,this.listeners=new Map,this.replPositions=new Map,e.instances.forEach((e=>{this.registerTerminalInstance(e)})),this._register(e.onDidCreateInstance((e=>{this.registerTerminalInstance(e)}))),this._register(e.onDidDisposeInstance((e=>{this.listeners.get(e)?.dispose(),this.listeners.delete(e)}))),this._register(t.onDidNewSession((e=>{(!e.parentSession||e.parentSession&&e.hasSeparateRepl())&&this.listeners.set(e.getId(),e.onDidChangeReplElements((()=>{this.processNewReplElements(e)})))}))),this._register(t.onDidEndSession((({session:e})=>{this.listeners.has(e.getId())&&(this.listeners.get(e.getId())?.dispose(),this.listeners.delete(e.getId()))})))}registerTerminalInstance(e){tc.excludeTerminals.includes(e.title)||this.listeners.set(e,e.onData((e=>{this.processData(e)})))}processNewReplElements(e){const t=this.replPositions.get(e.getId()),i=e.getReplElements();if(this.replPositions.set(e.getId(),{position:i.length-1,tail:i[i.length-1]}),!t&&i.length>0)i.forEach((e=>this.processData(e.toString())));else if(t&&i.length-1!==t.position)for(let e=i.length-1;e>=0;e--){const o=i[e];if(o===t.tail)break;this.processData(o.toString())}}dispose(){super.dispose();const e=this.listeners.values();for(const t of e)t.dispose()}processData(e){const t=(e=(0,Ht.t2)(e)).match(tc.localUrlRegex)||[];if(t&&t.length>0)t.forEach((t=>{let i;try{i=new URL(t)}catch(e){}if(i){const o=t.match(tc.extractPortRegex),n=parseFloat(i.port?i.port:o?o[2]:"NaN");if(!isNaN(n)&&Number.isInteger(n)&&n>0&&n<=65535){let t=i.hostname;if("0.0.0.0"!==t&&"127.0.0.1"!==t&&(t="localhost"),9229!==n&&e.startsWith("Debugger listening on"))return;this._onDidMatchLocalUrl.fire({port:n,host:t})}}}));else{const t=e.match(tc.localPythonServerRegex);t&&3===t.length&&this._onDidMatchLocalUrl.fire({host:t[1],port:Number(t[2])})}}}var ic=i(19300),oc=i(90149),nc=i(94326),sc=i(31736),rc=i(55196);const ac="workbench.view.remote";let cc=class extends p.jG{constructor(e,t,i,o,n,s){super(),this.contextKeyService=e,this.environmentService=t,this.remoteExplorerService=i,this.tunnelService=o,this.activityService=n,this.statusbarService=s,this.contextKeyListener=this._register(new p.HE),this.activityBadge=this._register(new p.HE),this._register(u.O.as(r.Fd.ViewsRegistry).registerViewWelcomeContent(Ur.bk,{content:this.environmentService.remoteAuthority?(0,I.kg)(8891,"No forwarded ports. Forward a port to access your running services locally.\n[Forward a Port]({0})",`command:${za.INLINE_ID}`):(0,I.kg)(8892,"No forwarded ports. Forward a port to access your locally running services over the internet.\n[Forward a Port]({0})",`command:${za.INLINE_ID}`)})),this.enableBadgeAndStatusBar(),this.enableForwardedPortsFeatures()}async getViewContainer(){return u.O.as(r.Fd.ViewContainersRegistry).registerViewContainer({id:Ur.nS,title:(0,I.aS)(8893,"Ports"),icon:Zr,ctorDescriptor:new o.d(g.zv,[Ur.nS,{mergeViewWithContainerWhenSingleView:!0}]),storageId:Ur.nS,hideIfEmpty:!0,order:5},1)}async enableForwardedPortsFeatures(){this.contextKeyListener.clear();const e=!!Kr.Vz.getValue(this.contextKeyService),t=!!Kr.XF.getValue(this.contextKeyService);if(e||t){t||this.contextKeyService.createKey(Kr.XF.key,!0);const i=await this.getViewContainer(),o=new Pa(new la(this.remoteExplorerService,this.tunnelService),this.environmentService),n=u.O.as(r.Fd.ViewsRegistry);i&&(this.remoteExplorerService.enablePortsFeatures(!e),n.registerViews([o],i))}else this.contextKeyListener.value=this.contextKeyService.onDidChangeContext((e=>{e.affectsSome(new Set([...Kr.Vz.keys(),...Kr.XF.keys()]))&&this.enableForwardedPortsFeatures()}))}enableBadgeAndStatusBar(){const e=u.O.as(r.Fd.ViewsRegistry).onViewsRegistered((t=>{t.find((e=>e.views.find((e=>e.id===Ur.bk))))&&(this._register(m.Jh.debounce(this.remoteExplorerService.tunnelModel.onForwardPort,((e,t)=>t),50)((()=>{this.updateActivityBadge(),this.updateStatusBar()}))),this._register(m.Jh.debounce(this.remoteExplorerService.tunnelModel.onClosePort,((e,t)=>t),50)((()=>{this.updateActivityBadge(),this.updateStatusBar()}))),this.updateActivityBadge(),this.updateStatusBar(),e.dispose())}))}async updateActivityBadge(){this.remoteExplorerService.tunnelModel.forwarded.size>0&&(this.activityBadge.value=this.activityService.showViewActivity(Ur.bk,{badge:new wi.hV(this.remoteExplorerService.tunnelModel.forwarded.size,(e=>1===e?(0,I.kg)(8894,"1 forwarded port"):(0,I.kg)(8895,"{0} forwarded ports",e)))}))}updateStatusBar(){this.entryAccessor?this.entryAccessor.update(this.entry):this._register(this.entryAccessor=this.statusbarService.addEntry(this.entry,"status.forwardedPorts",0,40))}get entry(){let e;const t=this.remoteExplorerService.tunnelModel.forwarded.size+this.remoteExplorerService.tunnelModel.detected.size,i=`${t}`;if(0===t)e=(0,I.kg)(8896,"No Ports Forwarded");else{const t=Array.from(this.remoteExplorerService.tunnelModel.forwarded.values());t.push(...Array.from(this.remoteExplorerService.tunnelModel.detected.values())),e=(0,I.kg)(8897,"Forwarded Ports: {0}",t.map((e=>e.remotePort)).join(", "))}return{name:(0,I.kg)(8898,"Forwarded Ports"),text:`$(radio-tower) ${i}`,ariaLabel:e,tooltip:e,command:`${Ur.bk}.focus`}}};cc=(0,s.C)([(0,s.Q)(0,d.f),(0,s.Q)(1,ni.P),(0,s.Q)(2,$r.c),(0,s.Q)(3,kt.p),(0,s.Q)(4,O.w),(0,s.Q)(5,bi.S)],cc);let dc=class{constructor(e,t){this.remoteExplorerService=e,this.logService=t,this.remoteExplorerService.tunnelModel.environmentTunnelsSet?this.restore():m.Jh.once(this.remoteExplorerService.tunnelModel.onEnvironmentTunnelsSet)((async()=>{await this.restore()}))}async restore(){return this.logService.trace("ForwardedPorts: Doing first restore."),this.remoteExplorerService.restore()}};dc=(0,s.C)([(0,s.Q)(0,$r.c),(0,s.Q)(1,k.r)],dc);let hc=class extends p.jG{constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,p,g){super(),this.terminalService=e,this.notificationService=t,this.openerService=i,this.externalOpenerService=o,this.remoteExplorerService=n,this.contextKeyService=r,this.configurationService=a,this.debugService=c,this.tunnelService=h,this.hostService=l,this.logService=u,this.storageService=p,this.preferencesService=g,s.remoteAuthority&&(a.whenRemoteConfigurationLoaded().then((()=>d.getEnvironment())).then((e=>{this.setup(e),this._register(a.onDidChangeConfiguration((t=>{t.affectsConfiguration(Ur.Zj)?this.setup(e):t.affectsConfiguration(Ur.wN)&&!this.portListener&&this.listenForPorts()})))})),this.storageService.getBoolean("processPortForwardingFallback",1,!0)||this.configurationService.updateValue(Ur.wN,0,5))}getPortAutoFallbackNumber(){const e=this.configurationService.inspect(Ur.wN);if(void 0!==e.value&&(0===e.value||e.value!==e.defaultValue))return e.value;const t=this.configurationService.inspect(Ur.Zj);return t.applicationValue===Ur.xo||t.userValue===Ur.xo||t.userLocalValue===Ur.xo||t.userRemoteValue===Ur.xo||t.workspaceFolderValue===Ur.xo||t.workspaceValue===Ur.xo?0:e.value??20}listenForPorts(){let e=this.getPortAutoFallbackNumber();0!==e?this.procForwarder&&!this.portListener&&this.configurationService.getValue(Ur.Zj)===Ur.xo?this.portListener=this._register(this.remoteExplorerService.tunnelModel.onForwardPort((async()=>{e=this.getPortAutoFallbackNumber(),0!==e?Array.from(this.remoteExplorerService.tunnelModel.forwarded.values()).filter((e=>e.source.source===Kr.V3.Auto)).length>e&&(await this.configurationService.updateValue(Ur.Zj,Ur.uF),this.notificationService.notify({message:(0,I.kg)(8899,"Over 20 ports have been automatically forwarded. The `process` based automatic port forwarding has been switched to `hybrid` in settings. Some ports may no longer be detected."),severity:X.A.Warning,actions:{primary:[new vi.rc("switchBack",(0,I.kg)(8900,"Undo"),void 0,!0,(async()=>{await this.configurationService.updateValue(Ur.Zj,Ur.xo),await this.configurationService.updateValue(Ur.wN,0,5),this.portListener?.dispose(),this.portListener=void 0})),new vi.rc("showPortSourceSetting",(0,I.kg)(8901,"Show Setting"),void 0,!0,(async()=>{await this.preferencesService.openSettings({query:"remote.autoForwardPortsSource"})}))]}})):this.portListener?.dispose()}))):(this.portListener?.dispose(),this.portListener=void 0):this.portListener?.dispose()}setup(e){const t=this.procForwarder?.forwarded,i=this.outputForwarder||this.procForwarder;if(this.procForwarder?.dispose(),this.procForwarder=void 0,this.outputForwarder?.dispose(),this.outputForwarder=void 0,3!==e?.os)this.configurationService.inspect(Ur.Zj).default?.value!==Ur.DT&&u.O.as(go.Fd.Configuration).registerDefaultConfigurations([{overrides:{"remote.autoForwardPortsSource":Ur.DT}}]),this.outputForwarder=this._register(new uc(this.terminalService,this.notificationService,this.openerService,this.externalOpenerService,this.remoteExplorerService,this.configurationService,this.debugService,this.tunnelService,this.hostService,this.logService,this.contextKeyService,(()=>!1)));else{const e=()=>this.configurationService.getValue(Ur.Zj)===Ur.xo;e()?this.procForwarder=this._register(new pc(!1,t,!i,this.configurationService,this.remoteExplorerService,this.notificationService,this.openerService,this.externalOpenerService,this.tunnelService,this.hostService,this.logService,this.contextKeyService)):this.configurationService.getValue(Ur.Zj)===Ur.uF&&(this.procForwarder=this._register(new pc(!0,t,!i,this.configurationService,this.remoteExplorerService,this.notificationService,this.openerService,this.externalOpenerService,this.tunnelService,this.hostService,this.logService,this.contextKeyService))),this.outputForwarder=this._register(new uc(this.terminalService,this.notificationService,this.openerService,this.externalOpenerService,this.remoteExplorerService,this.configurationService,this.debugService,this.tunnelService,this.hostService,this.logService,this.contextKeyService,e))}this.listenForPorts()}};hc=(0,s.C)([(0,s.Q)(0,ic.Xo),(0,s.Q)(1,Y.O),(0,s.Q)(2,Yo.C),(0,s.Q)(3,ra.z),(0,s.Q)(4,$r.c),(0,s.Q)(5,ni.P),(0,s.Q)(6,d.f),(0,s.Q)(7,sc.q),(0,s.Q)(8,oc.A),(0,s.Q)(9,nc.w),(0,s.Q)(10,kt.p),(0,s.Q)(11,Qi.v),(0,s.Q)(12,k.r),(0,s.Q)(13,h.C),(0,s.Q)(14,rc.v)],hc);class lc extends p.jG{static{this.NOTIFY_COOL_DOWN=5e3}constructor(e,t,i,o,n,s,r,a){super(),this.notificationService=e,this.remoteExplorerService=t,this.openerService=i,this.externalOpenerService=o,this.tunnelService=n,this.hostService=s,this.logService=r,this.contextKeyService=a,this.alreadyOpenedOnce=new Set,this.lastNotifyTime=new Date,this.lastNotifyTime.setFullYear(this.lastNotifyTime.getFullYear()-1)}async doAction(e){this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Starting action for ${e[0]?.tunnelRemotePort}`),this.doActionTunnels=e;const t=await this.portNumberHeuristicDelay();if(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose ${t?.tunnelRemotePort}`),t){const e=await this.remoteExplorerService.tunnelModel.getAttributes([{port:t.tunnelRemotePort,host:t.tunnelRemoteHost}]),i=e?.get(t.tunnelRemotePort)?.onAutoForward;switch(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) onAutoForward action is ${i}`),i){case Kr.ID.OpenBrowserOnce:if(this.alreadyOpenedOnce.has(t.localAddress))break;this.alreadyOpenedOnce.add(t.localAddress);case Kr.ID.OpenBrowser:{const e=(0,Kr.ZE)(t.tunnelRemoteHost,t.tunnelRemotePort);await Qa.run(this.remoteExplorerService.tunnelModel,this.openerService,e);break}case Kr.ID.OpenPreview:{const e=(0,Kr.ZE)(t.tunnelRemoteHost,t.tunnelRemotePort);await Ua.run(this.remoteExplorerService.tunnelModel,this.openerService,this.externalOpenerService,e);break}case Kr.ID.Silent:break;default:{const e=(new Date).getTime()-this.lastNotifyTime.getTime();this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) time elapsed since last notification ${e} ms`),e>lc.NOTIFY_COOL_DOWN&&await this.showNotification(t)}}}}hide(e){this.doActionTunnels&&(this.doActionTunnels=this.doActionTunnels.filter((t=>!e.includes(t.tunnelRemotePort)))),this.lastShownPort&&e.indexOf(this.lastShownPort)>=0&&this.lastNotification?.close()}async portNumberHeuristicDelay(){if(this.logService.trace("ForwardedPorts: (OnAutoForwardedAction) Starting heuristic delay"),!this.doActionTunnels||0===this.doActionTunnels.length)return;this.doActionTunnels=this.doActionTunnels.sort(((e,t)=>e.tunnelRemotePort-t.tunnelRemotePort));const e=this.doActionTunnels.shift();return e.tunnelRemotePort%1e3==0?(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because % 1000: ${e.tunnelRemotePort}`),this.newerTunnel=e,e):e.tunnelRemotePort<1e4&&9229!==e.tunnelRemotePort?(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because < 10000: ${e.tunnelRemotePort}`),this.newerTunnel=e,e):(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Waiting for "better" tunnel than ${e.tunnelRemotePort}`),this.newerTunnel=void 0,new Promise((t=>{setTimeout((()=>{this.newerTunnel?t(void 0):this.doActionTunnels?.includes(e)?t(e):t(void 0)}),3e3)})))}async basicMessage(e){const t=await this.remoteExplorerService.tunnelModel.getAttributes([{host:e.tunnelRemoteHost,port:e.tunnelRemotePort}],!1),i=t?.get(e.tunnelRemotePort)?.label;return(0,I.kg)(8902,"Your application{0} running on port {1} is available.  ",i?` (${i})`:"",e.tunnelRemotePort)}linkMessage(){return(0,I.kg)(8903,"[See all forwarded ports]({0})",`command:${La.ID}.focus`)}async showNotification(e){if(!await this.hostService.hadLastFocus())return;this.lastNotification?.close();let t=await this.basicMessage(e);const i=[this.openBrowserChoice(e)];Di.HZ&&!da.getValue(this.contextKeyService)||i.push(this.openPreviewChoice(e)),e.tunnelLocalPort!==e.tunnelRemotePort&&this.tunnelService.canElevate&&this.tunnelService.isPortPrivileged(e.tunnelRemotePort)&&(t+=(0,I.kg)(8904,"You'll need to run as superuser to use port {0} locally.  ",e.tunnelRemotePort),i.unshift(this.elevateChoice(e))),e.privacy===_t.uS.Private&&Di.HZ&&this.tunnelService.canChangePrivacy&&i.push(this.makePublicChoice(e)),t+=this.linkMessage(),this.lastNotification=this.notificationService.prompt(X.A.Info,t,i,{neverShowAgain:{id:"remote.tunnelsView.autoForwardNeverShow",isSecondary:!0}}),this.lastShownPort=e.tunnelRemotePort,this.lastNotifyTime=new Date,this.lastNotification.onDidClose((()=>{this.lastNotification=void 0,this.lastShownPort=void 0}))}makePublicChoice(e){return{label:(0,I.kg)(8905,"Make Public"),run:async()=>{const t=(0,Kr.WV)(this.remoteExplorerService.tunnelModel.forwarded,e.tunnelRemoteHost,e.tunnelRemotePort);return await this.remoteExplorerService.close({host:e.tunnelRemoteHost,port:e.tunnelRemotePort},Kr.Ht.Other),this.remoteExplorerService.forward({remote:{host:e.tunnelRemoteHost,port:e.tunnelRemotePort},local:e.tunnelLocalPort,name:t?.name,elevateIfNeeded:!0,privacy:_t.uS.Public,source:t?.source})}}}openBrowserChoice(e){const t=(0,Kr.ZE)(e.tunnelRemoteHost,e.tunnelRemotePort);return{label:Qa.LABEL,run:()=>Qa.run(this.remoteExplorerService.tunnelModel,this.openerService,t)}}openPreviewChoice(e){const t=(0,Kr.ZE)(e.tunnelRemoteHost,e.tunnelRemotePort);return{label:Ua.LABEL,run:()=>Ua.run(this.remoteExplorerService.tunnelModel,this.openerService,this.externalOpenerService,t)}}elevateChoice(e){return{label:(0,I.kg)(8906,"Use Port {0} as Sudo...",e.tunnelRemotePort),run:async()=>{await this.remoteExplorerService.close({host:e.tunnelRemoteHost,port:e.tunnelRemotePort},Kr.Ht.Other);const t=await this.remoteExplorerService.forward({remote:{host:e.tunnelRemoteHost,port:e.tunnelRemotePort},local:e.tunnelRemotePort,elevateIfNeeded:!0,source:Kr.zj});t&&"string"!=typeof t&&(this.lastNotification?.close(),this.lastShownPort=t.tunnelRemotePort,this.lastNotification=this.notificationService.prompt(X.A.Info,await this.basicMessage(t)+this.linkMessage(),[this.openBrowserChoice(t),this.openPreviewChoice(e)],{neverShowAgain:{id:"remote.tunnelsView.autoForwardNeverShow",isSecondary:!0}}),this.lastNotification.onDidClose((()=>{this.lastNotification=void 0,this.lastShownPort=void 0})))}}}}class uc extends p.jG{constructor(e,t,i,o,n,s,r,a,c,d,h,l){super(),this.terminalService=e,this.notificationService=t,this.openerService=i,this.externalOpenerService=o,this.remoteExplorerService=n,this.configurationService=s,this.debugService=r,this.tunnelService=a,this.hostService=c,this.logService=d,this.contextKeyService=h,this.privilegedOnly=l,this.notifier=new lc(t,n,i,o,a,c,d,h),this._register(s.onDidChangeConfiguration((e=>{e.affectsConfiguration(Ur.D$)&&this.tryStartStopUrlFinder()}))),this.portsFeatures=this._register(this.remoteExplorerService.onEnabledPortsFeatures((()=>{this.tryStartStopUrlFinder()}))),this.tryStartStopUrlFinder(),s.getValue(Ur.Zj)===Ur.uF&&this._register(this.tunnelService.onTunnelClosed((e=>this.notifier.hide([e.port]))))}tryStartStopUrlFinder(){this.configurationService.getValue(Ur.D$)?this.startUrlFinder():this.stopUrlFinder()}startUrlFinder(){(this.urlFinder||this.remoteExplorerService.portsFeaturesEnabled===Ur.Er.AdditionalFeatures)&&(this.portsFeatures?.dispose(),this.urlFinder=this._register(new tc(this.terminalService,this.debugService)),this._register(this.urlFinder.onDidMatchLocalUrl((async e=>{if((0,Kr.WV)(this.remoteExplorerService.tunnelModel.detected,e.host,e.port))return;const t=(await this.remoteExplorerService.tunnelModel.getAttributes([e]))?.get(e.port);if(t?.onAutoForward===Kr.ID.Ignore)return;if(this.privilegedOnly()&&!this.tunnelService.isPortPrivileged(e.port))return;const i=await this.remoteExplorerService.forward({remote:e,source:Kr.zj},t??null);i&&"string"!=typeof i&&this.notifier.doAction([i])}))))}stopUrlFinder(){this.urlFinder&&(this.urlFinder.dispose(),this.urlFinder=void 0)}}class pc extends p.jG{constructor(e,t,i,o,n,s,r,a,c,d,h,l){super(),this.unforwardOnly=e,this.alreadyAutoForwarded=t,this.needsInitialCandidates=i,this.configurationService=o,this.remoteExplorerService=n,this.notificationService=s,this.openerService=r,this.externalOpenerService=a,this.tunnelService=c,this.hostService=d,this.logService=h,this.contextKeyService=l,this.autoForwarded=new Set,this.notifiedOnly=new Set,this.initialCandidates=new Set,this.notifier=new lc(s,n,r,a,c,d,h,l),t?.forEach((e=>this.autoForwarded.add(e))),this.initialize()}get forwarded(){return this.autoForwarded}async initialize(){this.remoteExplorerService.tunnelModel.environmentTunnelsSet||await new Promise((e=>this.remoteExplorerService.tunnelModel.onEnvironmentTunnelsSet((()=>e())))),this._register(this.configurationService.onDidChangeConfiguration((async e=>{e.affectsConfiguration(Ur.D$)&&await this.startStopCandidateListener()}))),this.portsFeatures=this._register(this.remoteExplorerService.onEnabledPortsFeatures((async()=>{await this.startStopCandidateListener()}))),this.startStopCandidateListener()}async startStopCandidateListener(){this.configurationService.getValue(Ur.D$)?await this.startCandidateListener():this.stopCandidateListener()}stopCandidateListener(){this.candidateListener&&(this.candidateListener.dispose(),this.candidateListener=void 0)}async startCandidateListener(){this.candidateListener||this.remoteExplorerService.portsFeaturesEnabled!==Ur.Er.AdditionalFeatures||(this.portsFeatures?.dispose(),await this.setInitialCandidates(),this.configurationService.getValue(Ur.D$)&&(this.candidateListener=this._register(this.remoteExplorerService.tunnelModel.onCandidatesChanged(this.handleCandidateUpdate,this))))}async setInitialCandidates(){if(!this.needsInitialCandidates)return void this.logService.debug("ForwardedPorts: (ProcForwarding) Not setting initial candidates");let e=this.remoteExplorerService.tunnelModel.candidatesOrUndefined;e||(await new Promise((e=>this.remoteExplorerService.tunnelModel.onCandidatesChanged((()=>e())))),e=this.remoteExplorerService.tunnelModel.candidates);for(const t of e)this.initialCandidates.add((0,Kr.ZE)(t.host,t.port));this.logService.debug(`ForwardedPorts: (ProcForwarding) Initial candidates set to ${e.map((e=>e.port)).join(", ")}`)}async forwardCandidates(){let e;const t=[];this.logService.trace(`ForwardedPorts: (ProcForwarding) Attempting to forward ${this.remoteExplorerService.tunnelModel.candidates.length} candidates`);for(const i of this.remoteExplorerService.tunnelModel.candidates){if(!i.detail){this.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${i.port} missing detail`);continue}e||(e=await this.remoteExplorerService.tunnelModel.getAttributes(this.remoteExplorerService.tunnelModel.candidates));const o=e?.get(i.port),n=(0,Kr.ZE)(i.host,i.port);if(this.initialCandidates.has(n)&&void 0===o?.onAutoForward)continue;if(this.notifiedOnly.has(n)||this.autoForwarded.has(n))continue;const s=(0,Kr.WV)(this.remoteExplorerService.tunnelModel.forwarded,i.host,i.port);if((0,Kr.WV)(this.remoteExplorerService.tunnelModel.detected,i.host,i.port))continue;if(o?.onAutoForward===Kr.ID.Ignore){this.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${i.port} is ignored`);continue}const r=await this.remoteExplorerService.forward({remote:i,source:Kr.zj},o??null);!s&&r?(this.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${i.port} has been forwarded`),this.autoForwarded.add(n)):r&&(this.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${i.port} has been notified`),this.notifiedOnly.add(n)),r&&"string"!=typeof r&&t.push(r)}if(this.logService.trace(`ForwardedPorts: (ProcForwarding) Forwarded ${t.length} candidates`),0!==t.length)return t}async handleCandidateUpdate(e){const t=[];let i;if(this.unforwardOnly){i=new Map;for(const e of this.remoteExplorerService.tunnelModel.forwarded.entries())e[1].source.source===Kr.V3.Auto&&i.set(e[0],e[1])}else i=new Map(this.autoForwarded.entries());for(const o of e){const e=o[0];let n=o[1];const s=(0,Kr.WV)(i,n.host,n.port);s?("string"==typeof s?this.autoForwarded.delete(e):n={host:s.remoteHost,port:s.remotePort},await this.remoteExplorerService.close(n,Kr.Ht.AutoForwardEnd),t.push(n.port)):this.notifiedOnly.has(e)?(this.notifiedOnly.delete(e),t.push(n.port)):this.initialCandidates.has(e)&&this.initialCandidates.delete(e)}if(this.unforwardOnly)return;t.length>0&&await this.notifier.hide(t);const o=await this.forwardCandidates();o&&await this.notifier.doAction(o)}}const gc="workbench.view.scm";var mc;!function(e){e[e.HistoryPrevious=0]="HistoryPrevious",e[e.HistoryNext=1]="HistoryNext"}(mc||(mc={}));var bc,wc=i(20077);const vc="webviewState";let fc=class extends Jo.OZ{static{bc=this}static getOriginStore(e){return this._originStore??=new Pt._$("webviewViews.origins",e),this._originStore}constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,g,b,w,v,f){super({...e,titleMenuId:_.D8.ViewTitle,showActions:Jo.gk.WhenExpanded},s,o,t,i,h,n,r,d,a,c),this.activityService=l,this.extensionService=u,this.progressService=g,this.storageService=b,this.viewService=w,this.webviewService=v,this.webviewViewService=f,this._webview=this._register(new p.HE),this._webviewDisposables=this._register(new p.Cm),this._activated=!1,this.activity=this._register(new p.HE),this._onDidChangeVisibility=this._register(new m.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._onDispose=this._register(new m.vl),this.onDispose=this._onDispose.event,this.extensionId=e.fromExtensionId,this.defaultTitle=this.title,this.memento=new je.y(`webviewView.${this.id}`,b),this.viewState=this.memento.getMemento(1,1),this._register(this.onDidChangeBodyVisibility((()=>this.updateTreeVisibility()))),this._register(this.webviewViewService.onNewResolverRegistered((e=>{e.viewType===this.id&&this.updateTreeVisibility()}))),this.updateTreeVisibility()}dispose(){this._onDispose.fire(),clearTimeout(this._repositionTimeout),super.dispose()}focus(){super.focus(),this._webview.value?.focus()}renderBody(e){super.renderBody(e),this._container=e,this._rootContainer=void 0,this._resizeObserver||(this._resizeObserver=new ResizeObserver((()=>{setTimeout((()=>{this.layoutWebview()}),0)})),this._register((0,p.s)((()=>{this._resizeObserver.disconnect()}))),this._resizeObserver.observe(e))}saveState(){this._webview.value&&(this.viewState[vc]=this._webview.value.state),this.memento.saveMemento(),super.saveState()}layoutBody(e,t){super.layoutBody(e,t),this.layoutWebview(new ke.fg(t,e))}updateTreeVisibility(){this.isBodyVisible()?(this.activate(),this._webview.value?.claim(this,(0,ke.zk)(this.element),void 0)):this._webview.value?.release(this)}activate(){if(this._activated)return;this._activated=!0;const e=this.extensionId?bc.getOriginStore(this.storageService).getOrigin(this.id,this.extensionId):void 0,t=this.webviewService.createWebviewOverlay({origin:e,providedViewType:this.id,title:this.title,options:{purpose:"webviewView"},contentOptions:{},extension:this.extensionId?{id:this.extensionId}:void 0});t.state=this.viewState[vc],this._webview.value=t,this._container&&this.layoutWebview(),this._webviewDisposables.add((0,p.s)((()=>{this._webview.value?.release(this)}))),this._webviewDisposables.add(t.onDidUpdateState((()=>{this.viewState[vc]=t.state})));for(const e of[ke.Bx.DRAG,ke.Bx.DRAG_END,ke.Bx.DRAG_ENTER,ke.Bx.DRAG_LEAVE,ke.Bx.DRAG_START])this._webviewDisposables.add((0,ke.ko)(this._webview.value.container,e,(e=>{e.preventDefault(),e.stopImmediatePropagation(),this.dropTargetElement.dispatchEvent(new DragEvent(e.type,e))})));this._webviewDisposables.add(new wc.O((0,ke.zk)(this.element),(()=>this._webview.value)));const i=this._webviewDisposables.add(new yt.Qi);this.withProgress((async()=>{await this.extensionService.activateByEvent(`onView:${this.id}`);const e=this,o={webview:t,onDidChangeVisibility:this.onDidChangeBodyVisibility,onDispose:this.onDispose,get title(){return e.setTitle},set title(t){e.updateTitle(t)},get description(){return e.titleDescription},set description(t){e.updateTitleDescription(t)},get badge(){return e.badge},set badge(t){e.updateBadge(t)},dispose:()=>{this._activated=!1,this._webview.clear(),this._webviewDisposables.clear()},show:e=>{this.viewService.openView(this.id,!e)}};await this.webviewViewService.resolve(this.id,o,i.token)}))}updateTitle(e){this.setTitle=e,super.updateTitle("string"==typeof e?e:this.defaultTitle)}updateBadge(e){if((this.badge?.value!==e?.value||this.badge?.tooltip!==e?.tooltip)&&(this.badge=e,e)){const t={badge:new wi.hV(e.value,(()=>e.tooltip)),priority:150};this.activity.value=this.activityService.showViewActivity(this.id,t)}}async withProgress(e){return this.progressService.withProgress({location:this.id,delay:500},e)}onDidScrollRoot(){this.layoutWebview()}doLayoutWebview(e){const t=this._webview.value;this._container&&t&&(this._rootContainer&&this._rootContainer.isConnected||(this._rootContainer=this.findRootContainer(this._container)),t.layoutWebviewOverElement(this._container,e,this._rootContainer))}layoutWebview(e){this.doLayoutWebview(e),clearTimeout(this._repositionTimeout),this._repositionTimeout=setTimeout((()=>this.doLayoutWebview(e)),200)}findRootContainer(e){return(0,ke.m1)(e,"monaco-scrollable-element")??void 0}};fc=bc=(0,s.C)([(0,s.Q)(1,z.p),(0,s.Q)(2,d.f),(0,s.Q)(3,ne.Z),(0,s.Q)(4,a._Y),(0,s.Q)(5,Bt.b),(0,s.Q)(6,Yo.C),(0,s.Q)(7,b.k),(0,s.Q)(8,Rt.T),(0,s.Q)(9,Zi.G),(0,s.Q)(10,n.X),(0,s.Q)(11,O.w),(0,s.Q)(12,l.c),(0,s.Q)(13,gi.G),(0,s.Q)(14,h.C),(0,s.Q)(15,Mi.R),(0,s.Q)(16,ai.a),(0,s.Q)(17,pi.d)],fc);var yc=i(90099);const Cc={type:"object",properties:{id:{description:(0,I.kg)(4006,"Unique id used to identify the container in which views can be contributed using 'views' contribution point"),type:"string",pattern:"^[a-zA-Z0-9_-]+$"},title:{description:(0,I.kg)(4007,"Human readable string used to render the container"),type:"string"},icon:{description:(0,I.kg)(4008,"Path to the container icon. Icons are 24x24 centered on a 50x40 block and have a fill color of 'rgb(215, 218, 224)' or '#d7dae0'. It is recommended that icons be in SVG, though any image file type is accepted."),type:"string"}},required:["id","title","icon"]},Sc={description:(0,I.kg)(4009,"Contributes views containers to the editor"),type:"object",properties:{activitybar:{description:(0,I.kg)(4010,"Contribute views containers to Activity Bar"),type:"array",items:Cc},panel:{description:(0,I.kg)(4011,"Contribute views containers to Panel"),type:"array",items:Cc}}};var kc,_c;!function(e){e.Tree="tree",e.Webview="webview"}(kc||(kc={})),function(e){e.Visible="visible",e.Hidden="hidden",e.Collapsed="collapsed"}(_c||(_c={}));const xc={type:"object",required:["id","name"],defaultSnippets:[{body:{id:"${1:id}",name:"${2:name}"}}],properties:{type:{markdownDescription:(0,I.kg)(4012,"Type of the view. This can either be `tree` for a tree view based view or `webview` for a webview based view. The default is `tree`."),type:"string",enum:["tree","webview"],markdownEnumDescriptions:[(0,I.kg)(4013,"The view is backed by a `TreeView` created by `createTreeView`."),(0,I.kg)(4014,"The view is backed by a `WebviewView` registered by `registerWebviewViewProvider`.")]},id:{markdownDescription:(0,I.kg)(4015,"Identifier of the view. This should be unique across all views. It is recommended to include your extension id as part of the view id. Use this to register a data provider through `vscode.window.registerTreeDataProviderForView` API. Also to trigger activating your extension by registering `onView:${id}` event to `activationEvents`."),type:"string"},name:{description:(0,I.kg)(4016,"The human-readable name of the view. Will be shown"),type:"string"},when:{description:(0,I.kg)(4017,"Condition which must be true to show this view"),type:"string"},icon:{description:(0,I.kg)(4018,"Path to the view icon. View icons are displayed when the name of the view cannot be shown. It is recommended that icons be in SVG, though any image file type is accepted."),type:"string"},contextualTitle:{description:(0,I.kg)(4019,"Human-readable context for when the view is moved out of its original location. By default, the view's container name will be used."),type:"string"},visibility:{description:(0,I.kg)(4020,"Initial state of the view when the extension is first installed. Once the user has changed the view state by collapsing, moving, or hiding the view, the initial state will not be used again."),type:"string",enum:["visible","hidden","collapsed"],default:"visible",enumDescriptions:[(0,I.kg)(4021,"The default initial state for the view. In most containers the view will be expanded, however; some built-in containers (explorer, scm, and debug) show all contributed views collapsed regardless of the `visibility`."),(0,I.kg)(4022,"The view will not be shown in the view container, but will be discoverable through the views menu and other view entry points and can be un-hidden by the user."),(0,I.kg)(4023,"The view will show in the view container, but will be collapsed.")]},initialSize:{type:"number",description:(0,I.kg)(4024,"The initial size of the view. The size will behave like the css 'flex' property, and will set the initial size when the view is first shown. In the side bar, this is the height of the view. This value is only respected when the same extension owns both the view and the view container.")},accessibilityHelpContent:{type:"string",markdownDescription:(0,I.kg)(4025,"When the accessibility help dialog is invoked in this view, this content will be presented to the user as a markdown string. Keybindings will be resolved when provided in the format of <keybinding:commandId>. If there is no keybinding, that will be indicated and this command will be included in a quickpick for easy configuration.")}}},Ec={type:"object",required:["id","name"],properties:{id:{description:(0,I.kg)(4015,"Identifier of the view. This should be unique across all views. It is recommended to include your extension id as part of the view id. Use this to register a data provider through `vscode.window.registerTreeDataProviderForView` API. Also to trigger activating your extension by registering `onView:${id}` event to `activationEvents`."),type:"string"},name:{description:(0,I.kg)(4016,"The human-readable name of the view. Will be shown"),type:"string"},when:{description:(0,I.kg)(4017,"Condition which must be true to show this view"),type:"string"},group:{description:(0,I.kg)(4026,"Nested group in the viewlet"),type:"string"},remoteName:{description:(0,I.kg)(4027,"The name of the remote type associated with this view"),type:["string","array"],items:{type:"string"}}}},Dc={description:(0,I.kg)(4028,"Contributes views to the editor"),type:"object",properties:{explorer:{description:(0,I.kg)(4029,"Contributes views to Explorer container in the Activity bar"),type:"array",items:xc,default:[]},debug:{description:(0,I.kg)(4030,"Contributes views to Debug container in the Activity bar"),type:"array",items:xc,default:[]},scm:{description:(0,I.kg)(4031,"Contributes views to SCM container in the Activity bar"),type:"array",items:xc,default:[]},test:{description:(0,I.kg)(4032,"Contributes views to Test container in the Activity bar"),type:"array",items:xc,default:[]},remote:{description:(0,I.kg)(4033,"Contributes views to Remote container in the Activity bar. To contribute to this container, enableProposedApi needs to be turned on"),type:"array",items:Ec,default:[]}},additionalProperties:{description:(0,I.kg)(4034,"Contributes views to contributed views container"),type:"array",items:xc,default:[]}},Ic=Ye.g1.registerExtensionPoint({extensionPoint:"viewsContainers",jsonSchema:Sc}),Vc=Ye.g1.registerExtensionPoint({extensionPoint:"views",deps:[Ic],jsonSchema:Dc,activationEventsGenerator:(e,t)=>{for(const i of e)for(const e of Object.values(i))for(const i of e)i.id&&t.push(`onView:${i.id}`)}});let Mc=class{static{this.ID="workbench.contrib.viewsExtensionHandler"}constructor(e,t){this.instantiationService=e,this.logService=t,this.viewContainersRegistry=u.O.as(r.Fd.ViewContainersRegistry),this.viewsRegistry=u.O.as(r.Fd.ViewsRegistry),this.handleAndRegisterCustomViewContainers(),this.handleAndRegisterCustomViews()}handleAndRegisterCustomViewContainers(){Ic.setHandler(((e,{added:t,removed:i})=>{i.length&&this.removeCustomViewContainers(i),t.length&&this.addCustomViewContainers(t,this.viewContainersRegistry.all)}))}addCustomViewContainers(e,t){const i=u.O.as(r.Fd.ViewContainersRegistry);let o=7+i.all.filter((e=>!!e.extensionId&&0===i.getViewContainerLocation(e))).length,n=5+i.all.filter((e=>!!e.extensionId&&1===i.getViewContainerLocation(e))).length+1;for(const{value:i,collector:s,description:r}of e)Object.entries(i).forEach((([e,i])=>{if(this.isValidViewsContainer(i,s))switch(e){case"activitybar":o=this.registerCustomViewContainers(i,r,o,t,0);break;case"panel":n=this.registerCustomViewContainers(i,r,n,t,1)}}))}removeCustomViewContainers(e){const t=u.O.as(r.Fd.ViewContainersRegistry),i=e.reduce(((e,t)=>(e.add(t.description.identifier),e)),new or.ZN);for(const e of t.all)if(e.extensionId&&i.has(e.extensionId)){const t=this.viewsRegistry.getViews(e);t.length&&this.viewsRegistry.moveViews(t,this.getDefaultViewContainer()),this.deregisterCustomViewContainer(e)}}isValidViewsContainer(e,t){if(!Array.isArray(e))return t.error((0,I.kg)(4035,"views containers must be an array")),!1;for(const i of e){if("string"!=typeof i.id&&(0,Ht.AV)(i.id))return t.error((0,I.kg)(4036,"property `{0}` is mandatory and must be of type `string` with non-empty value. Only alphanumeric characters, '_', and '-' are allowed.","id")),!1;if(!/^[a-z0-9_-]+$/i.test(i.id))return t.error((0,I.kg)(4036,"property `{0}` is mandatory and must be of type `string` with non-empty value. Only alphanumeric characters, '_', and '-' are allowed.","id")),!1;if("string"!=typeof i.title)return t.error((0,I.kg)(4037,"property `{0}` is mandatory and must be of type `string`","title")),!1;if("string"!=typeof i.icon)return t.error((0,I.kg)(4037,"property `{0}` is mandatory and must be of type `string`","icon")),!1;if((0,Ht.AV)(i.title))return t.warn((0,I.kg)(4038,"property `{0}` is mandatory and must be of type `string` with non-empty value","title")),!0}return!0}registerCustomViewContainers(e,t,i,o,n){return e.forEach((e=>{const s=S.L0.fromString(e.icon)||(0,C.uJ)(t.extensionLocation,e.icon),r=`workbench.view.extension.${e.id}`,a=e.title||r,c=this.registerCustomViewContainer(r,a,s,i++,t.identifier,n);if(o.length){const t=[];for(const i of o)c!==i&&t.push(...this.viewsRegistry.getViews(i).filter((t=>t.originalContainerId===e.id)));t.length&&this.viewsRegistry.moveViews(t,c)}})),i}registerCustomViewContainer(e,t,i,n,s,r){let a=this.viewContainersRegistry.get(e);return a||(a=this.viewContainersRegistry.registerViewContainer({id:e,title:{value:t,original:t},extensionId:s,ctorDescriptor:new o.d(g.zv,[e,{mergeViewWithContainerWhenSingleView:!0}]),hideIfEmpty:!0,order:n,icon:i},r)),a}deregisterCustomViewContainer(e){this.viewContainersRegistry.deregisterViewContainer(e),u.O.as(Yi.Fd.Viewlets).deregisterPaneComposite(e.id)}handleAndRegisterCustomViews(){Vc.setHandler(((e,{added:t,removed:i})=>{i.length&&this.removeViews(i),t.length&&this.addViews(t)}))}addViews(e){const t=new Set,i=[];for(const n of e){const{value:e,collector:s}=n;Object.entries(e).forEach((([e,r])=>{if(!this.isValidViewDescriptors(r,s))return;if("remote"===e&&!(0,yc.o)(n.description,"contribViewsRemote"))return void s.warn((0,I.kg)(4039,"View container '{0}' requires 'enabledApiProposals: [\"contribViewsRemote\"]' to be added to 'Remote'.",e));const a=this.getViewContainer(e);a||s.warn((0,I.kg)(4040,"View container '{0}' does not exist and all views registered to it will be added to 'Explorer'.",e));const d=a||this.getDefaultViewContainer(),h=[];for(let i=0;i<r.length;i++){const l=r[i];if(t.has(l.id)){s.error((0,I.kg)(4041,"Cannot register multiple views with same id `{0}`",l.id));continue}if(null!==this.viewsRegistry.getView(l.id)){s.error((0,I.kg)(4042,"A view with id `{0}` is already registered.",l.id));continue}const u=or.H$.equals(n.description.identifier,d.extensionId)?i+1:d.viewOrderDelegate?d.viewOrderDelegate.getOrder(l.group):void 0;let p;"string"==typeof l.icon&&(p=S.L0.fromString(l.icon)||(0,C.uJ)(n.description.extensionLocation,l.icon));const g=this.convertInitialVisibility(l.visibility),m=this.getViewType(l.type);if(!m){s.error((0,I.kg)(4043,"Unknown view type `{0}`.",l.type));continue}let b,w;"number"==typeof l.initialSize&&(d.extensionId?.value===n.description.identifier.value?b=l.initialSize:this.logService.warn(`${n.description.identifier.value} tried to set the view size of ${l.id} but it was ignored because the view container does not belong to it.`)),(0,yc.o)(n.description,"contribAccessibilityHelpContent")&&l.accessibilityHelpContent&&(w=new cr.Bc(l.accessibilityHelpContent));const v={type:m,ctorDescriptor:m===kc.Tree?new o.d(_r):new o.d(fc),id:l.id,name:{value:l.name,original:l.name},when:c.M$.deserialize(l.when),containerIcon:p||a?.icon,containerTitle:l.contextualTitle||a&&("string"==typeof a.title?a.title:a.title.value),canToggleVisibility:!0,canMoveView:a?.id!==ac,treeView:m===kc.Tree?this.instantiationService.createInstance(Gr,l.id,l.name,n.description.identifier.value):void 0,collapsed:this.showCollapsed(d)||g===_c.Collapsed,order:u,extensionId:n.description.identifier,originalContainerId:e,group:l.group,remoteAuthority:l.remoteName||l.remoteAuthority,virtualWorkspace:l.virtualWorkspace,hideByDefault:g===_c.Hidden,workspace:a?.id===ac||void 0,weight:b,accessibilityHelpContent:w};t.add(v.id),h.push(v)}i.push({viewContainer:d,views:h})}))}this.viewsRegistry.registerViews2(i)}getViewType(e){return e===kc.Webview?kc.Webview:e&&e!==kc.Tree?void 0:kc.Tree}getDefaultViewContainer(){return this.viewContainersRegistry.get(Qr.xh)}removeViews(e){const t=e.reduce(((e,t)=>(e.add(t.description.identifier),e)),new or.ZN);for(const e of this.viewContainersRegistry.all){const i=this.viewsRegistry.getViews(e).filter((e=>e.extensionId&&t.has(e.extensionId)));if(i.length){this.viewsRegistry.deregisterViews(i,e);for(const e of i){const t=e;t.treeView&&t.treeView.dispose()}}}}convertInitialVisibility(e){if(Object.values(_c).includes(e))return e}isValidViewDescriptors(e,t){if(!Array.isArray(e))return t.error((0,I.kg)(4044,"views must be an array")),!1;for(const i of e){if("string"!=typeof i.id)return t.error((0,I.kg)(4037,"property `{0}` is mandatory and must be of type `string`","id")),!1;if("string"!=typeof i.name)return t.error((0,I.kg)(4037,"property `{0}` is mandatory and must be of type `string`","name")),!1;if(i.when&&"string"!=typeof i.when)return t.error((0,I.kg)(4045,"property `{0}` can be omitted or must be of type `string`","when")),!1;if(i.icon&&"string"!=typeof i.icon)return t.error((0,I.kg)(4045,"property `{0}` can be omitted or must be of type `string`","icon")),!1;if(i.contextualTitle&&"string"!=typeof i.contextualTitle)return t.error((0,I.kg)(4045,"property `{0}` can be omitted or must be of type `string`","contextualTitle")),!1;if(i.visibility&&!this.convertInitialVisibility(i.visibility))return t.error((0,I.kg)(4046,"property `{0}` can be omitted or must be one of {1}","visibility",Object.values(_c).join(", "))),!1}return!0}getViewContainer(e){switch(e){case"explorer":return this.viewContainersRegistry.get(Qr.xh);case"debug":return this.viewContainersRegistry.get(Hr.xh);case"scm":return this.viewContainersRegistry.get(gc);case"remote":return this.viewContainersRegistry.get(ac);default:return this.viewContainersRegistry.get(`workbench.view.extension.${e}`)}}showCollapsed(e){switch(e.id){case Qr.xh:case gc:case Hr.xh:return!0}return!1}};Mc=(0,s.C)([(0,s.Q)(0,a._Y),(0,s.Q)(1,k.r)],Mc);class Tc extends p.jG{constructor(){super(...arguments),this.type="table"}shouldRender(e){return!!e.contributes?.viewsContainers}render(e){const t=e.contributes?.viewsContainers||{},i=Object.keys(t).reduce(((e,i)=>{const o=t[i];return e.push(...o.map((e=>({...e,location:i})))),e}),[]);return i.length?{data:{headers:[(0,I.kg)(4047,"ID"),(0,I.kg)(4048,"Title"),(0,I.kg)(4049,"Where")],rows:i.sort(((e,t)=>e.id.localeCompare(t.id))).map((e=>[e.id,e.title,e.location]))},dispose:()=>{}}:{data:{headers:[],rows:[]},dispose:()=>{}}}}class Ac extends p.jG{constructor(){super(...arguments),this.type="table"}shouldRender(e){return!!e.contributes?.views}render(e){const t=e.contributes?.views||{},i=Object.keys(t).reduce(((e,i)=>{const o=t[i];return e.push(...o.map((e=>({...e,location:i})))),e}),[]);return i.length?{data:{headers:[(0,I.kg)(4050,"ID"),(0,I.kg)(4051,"Name"),(0,I.kg)(4049,"Where")],rows:i.sort(((e,t)=>e.id.localeCompare(t.id))).map((e=>[e.id,e.name,e.location]))},dispose:()=>{}}:{data:{headers:[],rows:[]},dispose:()=>{}}}}u.O.as(Ze.F.ExtensionFeaturesRegistry).registerExtensionFeature({id:"viewsContainers",label:(0,I.kg)(4052,"View Containers"),access:{canToggle:!1},renderer:new o.d(Tc)}),u.O.as(Ze.F.ExtensionFeaturesRegistry).registerExtensionFeature({id:"views",label:(0,I.kg)(4053,"Views"),access:{canToggle:!1},renderer:new o.d(Ac)}),(0,$o.tr)(Mc.ID,Mc,1);var Lc=i(5310),Pc=i(865),Rc=i(31688),Bc=i(4405),Oc=i(51730),Nc=(i(59064),i(79861));class Fc extends Nc.z{constructor(){super(...arguments),this.editorControl=void 0}get scopedContextKeyService(){return this.editorControl?.invokeWithinContext((e=>e.get(d.f)))}getTitle(){return this.input?this.input.getName():(0,I.kg)(11058,"Text Editor")}createEditorControl(e,t){this.editorControl=this._register(this.instantiationService.createInstance(Oc.x,e,t,this.getCodeEditorWidgetOptions()))}getCodeEditorWidgetOptions(){return Object.create(null)}updateEditorControlOptions(e){this.editorControl?.updateOptions(e)}getMainControl(){return this.editorControl}getControl(){return this.editorControl}computeEditorViewState(e){if(!this.editorControl)return;const t=this.editorControl.getModel();if(!t)return;const i=t.uri;return i&&(0,C.n4)(i,e)?this.editorControl.saveViewState()??void 0:void 0}setOptions(e){super.setOptions(e),e&&(0,Lc.r)(e,(0,y.eU)(this.editorControl),0)}focus(){super.focus(),this.editorControl?.focus()}hasFocus(){return this.editorControl?.hasTextFocus()||super.hasFocus()}setEditorVisible(e){super.setEditorVisible(e),e?this.editorControl?.onVisible():this.editorControl?.onHide()}layout(e){this.editorControl?.layout(e)}}var Gc,Wc=i(13901);let zc=class extends Fc{constructor(e,t,i,o,n,s,r,a,c,d){super(e,t,i,o,n,s,r,c,a,d)}async setInput(e,t,i,o){await super.setInput(e,t,i,o);const n=await e.resolve();if(o.isCancellationRequested)return;if(!(n instanceof Rc.n))throw new Error("Unable to open file as text");const s=(0,y.eU)(this.editorControl),r=n.textEditorModel;if(s.setModel(r),!(0,Q.jw)(t?.viewState)){const o=this.loadEditorViewState(e,i);o&&(t?.selection&&(o.cursorState=[]),s.restoreViewState(o))}t&&(0,Lc.r)(t,s,1),s.updateOptions(this.getReadonlyConfiguration(n.isReadonly()))}revealLastLine(){const e=this.editorControl;if(!e)return;const t=e.getModel();if(t){const i=t.getLineCount();e.revealPosition({lineNumber:i,column:t.getLineMaxColumn(i)},0)}}clearInput(){super.clearInput(),this.editorControl?.setModel(null)}tracksEditorViewState(e){return e instanceof Bc.m||e instanceof Pc.r}};zc=(0,s.C)([(0,s.Q)(2,b.k),(0,s.Q)(3,a._Y),(0,s.Q)(4,h.C),(0,s.Q)(5,Wc.U),(0,s.Q)(6,Zi.G),(0,s.Q)(7,U.m),(0,s.Q)(8,be.I),(0,s.Q)(9,ve.$)],zc);let Hc=class extends zc{static{Gc=this}static{this.ID="workbench.editors.textResourceEditor"}constructor(e,t,i,o,n,s,r,a,c,d,h){super(Gc.ID,e,t,i,o,n,s,a,r,h),this.modelService=c,this.languageService=d}createEditorControl(e,t){super.createEditorControl(e,t);const i=this.editorControl;i&&this._register(i.onDidPaste((e=>this.onDidEditorPaste(e,i))))}onDidEditorPaste(e,t){if(this.input instanceof Bc.m&&this.input.hasLanguageSetExplicitly)return;if(1!==e.range.startLineNumber||1!==e.range.startColumn)return;if(t.getOption(94))return;const i=t.getModel();if(!i)return;if(i.getLineCount()!==e.range.endLineNumber||i.getLineMaxColumn(e.range.endLineNumber)!==e.range.endColumn)return;if(i.getLanguageId()!==vn.vH)return;let o;if(e.languageId)o={id:e.languageId,source:"event"};else{const e=this.languageService.guessLanguageIdByFilepathOrFirstLine(i.uri,i.getLineContent(1).substr(0,1e3))??void 0;e&&(o={id:e,source:"guess"})}if(o&&o.id!==vn.vH){this.input instanceof Bc.m&&"event"===o.source?this.input.setLanguageId(o.id):i.setLanguage(this.languageService.createById(o.id));const e=this.modelService.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(e.insertSpaces,e.tabSize)}}};Hc=Gc=(0,s.C)([(0,s.Q)(1,b.k),(0,s.Q)(2,a._Y),(0,s.Q)(3,h.C),(0,s.Q)(4,Wc.U),(0,s.Q)(5,Zi.G),(0,s.Q)(6,be.I),(0,s.Q)(7,U.m),(0,s.Q)(8,Bo.S),(0,s.Q)(9,Xo.L),(0,s.Q)(10,ve.$)],Hc);var Qc=i(15778),Uc=i(11590),$c=i(55722),Kc=i(9981);let jc=class extends Kc.pC{constructor(e,t,i,o,n,s){super(e,t,o,n,s),this.callbacks=i,this._onDidChangeMetadata=this._register(new m.vl),this.onDidChangeMetadata=this._onDidChangeMetadata.event,this._onDidOpenInPlace=this._register(new m.vl),this.onDidOpenInPlace=this._onDidOpenInPlace.event}getTitle(){return this.input?this.input.getName():(0,I.kg)(11482,"Binary Viewer")}async getContents(e,t){const i=await e.resolve();if(!(i instanceof $c.k))throw new Error("Unable to open file as binary");const o=i.getSize();return this.handleMetadataChanged("number"==typeof o?we.sW.formatSize(o):""),{icon:"$(warning)",label:(0,I.kg)(11483,"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."),actions:[{label:(0,I.kg)(11484,"Open Anyway"),run:async()=>{await this.callbacks.openInternal(e,t),this._onDidOpenInPlace.fire()}}]}}handleMetadataChanged(e){this.metadata=e,this._onDidChangeMetadata.fire()}getMetadata(){return this.metadata}};jc=(0,s.C)([(0,s.Q)(5,h.C)],jc);let Zc=class extends Qc.z{static{this.ID=Q.kW}constructor(e,t,i,o,n,s,r,a,c){super(e,t,i,o,n,s,r,a,c)}getMetadata(){const e=this.getPrimaryEditorPane(),t=this.getSecondaryEditorPane();if(e instanceof jc&&t instanceof jc)return(0,I.kg)(9722,"{0} ↔ {1}",t.getMetadata(),e.getMetadata())}};Zc=(0,s.C)([(0,s.Q)(1,b.k),(0,s.Q)(2,a._Y),(0,s.Q)(3,Zi.G),(0,s.Q)(4,h.C),(0,s.Q)(5,z.p),(0,s.Q)(6,Wc.U),(0,s.Q)(7,be.I),(0,s.Q)(8,U.m)],Zc),(0,Fe.A)(".monaco-workbench .screen-reader-detected-explanation{cursor:default;padding:1em;right:6px;top:30px;width:420px}.monaco-workbench .screen-reader-detected-explanation .cancel{border:none;cursor:pointer;height:22px;padding:.5em;position:absolute;right:0;top:0;width:22px}.monaco-workbench .screen-reader-detected-explanation h2{font-size:1.8em;font-weight:400;margin:0;padding:0}.monaco-workbench .screen-reader-detected-explanation p{font-size:1.2em}.monaco-workbench .screen-reader-detected-explanation hr{border:0;height:2px}.monaco-workbench .screen-reader-detected-explanation .buttons{display:flex}.monaco-workbench .screen-reader-detected-explanation .buttons a{font-size:13px;margin-right:5px;max-width:fit-content;padding-left:12px;padding-right:12px}",{});var Yc,qc=i(18046),Jc=i(17815),Xc=i(51063),ed=i(5795),td=i(48315),id=i(42317),od=i(82563),nd=i(39960),sd=i(96845),rd=i(96330),ad=i(94131),cd=i(57906);class dd{constructor(e,t){this.primary=e,this.secondary=t}getEncoding(){return this.primary.getEncoding()}async setEncoding(e,t){await vt.HC.settled([this.primary,this.secondary].map((i=>i.setEncoding(e,t))))}}class hd{constructor(e,t){this.primary=e,this.secondary=t}setLanguageId(e,t){[this.primary,this.secondary].forEach((i=>i.setLanguageId(e,t)))}}function ld(e){if(e instanceof Bc.m)return e;if(e instanceof J.JL){const t=ld(e.primary),i=ld(e.secondary);return t&&i?new dd(t,i):t}const t=e;return(0,y.iN)(t.setEncoding,t.getEncoding)?t:null}function ud(e){if(e instanceof Bc.m)return e;if(e instanceof J.JL){const t=ud(e.primary),i=ud(e.secondary);return t&&i?new hd(t,i):t}const t=e;return"function"==typeof t.setLanguageId?t:null}class pd{constructor(){this.indentation=!1,this.selectionStatus=!1,this.languageId=!1,this.languageStatus=!1,this.encoding=!1,this.EOL=!1,this.tabFocusMode=!1,this.columnSelectionMode=!1,this.metadata=!1}combine(e){this.indentation=this.indentation||e.indentation,this.selectionStatus=this.selectionStatus||e.selectionStatus,this.languageId=this.languageId||e.languageId,this.languageStatus=this.languageStatus||e.languageStatus,this.encoding=this.encoding||e.encoding,this.EOL=this.EOL||e.EOL,this.tabFocusMode=this.tabFocusMode||e.tabFocusMode,this.columnSelectionMode=this.columnSelectionMode||e.columnSelectionMode,this.metadata=this.metadata||e.metadata}hasChanges(){return this.indentation||this.selectionStatus||this.languageId||this.languageStatus||this.encoding||this.EOL||this.tabFocusMode||this.columnSelectionMode||this.metadata}}class gd{get selectionStatus(){return this._selectionStatus}get languageId(){return this._languageId}get encoding(){return this._encoding}get EOL(){return this._EOL}get indentation(){return this._indentation}get tabFocusMode(){return this._tabFocusMode}get columnSelectionMode(){return this._columnSelectionMode}get metadata(){return this._metadata}update(e){const t=new pd;switch(e.type){case"selectionStatus":this._selectionStatus!==e.selectionStatus&&(this._selectionStatus=e.selectionStatus,t.selectionStatus=!0);break;case"indentation":this._indentation!==e.indentation&&(this._indentation=e.indentation,t.indentation=!0);break;case"languageId":this._languageId!==e.languageId&&(this._languageId=e.languageId,t.languageId=!0);break;case"encoding":this._encoding!==e.encoding&&(this._encoding=e.encoding,t.encoding=!0);break;case"EOL":this._EOL!==e.EOL&&(this._EOL=e.EOL,t.EOL=!0);break;case"tabFocusMode":this._tabFocusMode!==e.tabFocusMode&&(this._tabFocusMode=e.tabFocusMode,t.tabFocusMode=!0);break;case"columnSelectionMode":this._columnSelectionMode!==e.columnSelectionMode&&(this._columnSelectionMode=e.columnSelectionMode,t.columnSelectionMode=!0);break;case"metadata":this._metadata!==e.metadata&&(this._metadata=e.metadata,t.metadata=!0)}return t}}let md=class extends p.jG{constructor(e){super(),this.configurationService=e,this._onDidChange=this._register(new m.vl),this.onDidChange=this._onDidChange.event,this.registerListeners();const t=!0===e.getValue("editor.tabFocusMode");cd.M.setTabFocusMode(t)}registerListeners(){this._register(cd.M.onDidChangeTabFocus((e=>this._onDidChange.fire(e)))),this._register(this.configurationService.onDidChangeConfiguration((e=>{if(e.affectsConfiguration("editor.tabFocusMode")){const e=!0===this.configurationService.getValue("editor.tabFocusMode");cd.M.setTabFocusMode(e),this._onDidChange.fire(e)}})))}};md=(0,s.C)([(0,s.Q)(0,z.p)],md);const bd=(0,I.kg)(9723,"Ln {0}, Col {1} ({2} selected)"),wd=(0,I.kg)(9724,"Ln {0}, Col {1}"),vd=(0,I.kg)(9725,"{0} selections ({1} characters selected)"),fd=(0,I.kg)(9726,"{0} selections"),yd=(0,I.kg)(9727,"LF"),Cd=(0,I.kg)(9728,"CRLF");let Sd=class extends p.jG{constructor(e,t,i,o,n,s,r,a){super(),this.targetWindowId=e,this.editorService=t,this.quickInputService=i,this.languageService=o,this.textFileService=n,this.statusbarService=s,this.instantiationService=r,this.configurationService=a,this.tabFocusModeElement=this._register(new p.HE),this.columnSelectionModeElement=this._register(new p.HE),this.indentationElement=this._register(new p.HE),this.selectionElement=this._register(new p.HE),this.encodingElement=this._register(new p.HE),this.eolElement=this._register(new p.HE),this.languageElement=this._register(new p.HE),this.metadataElement=this._register(new p.HE),this.currentMarkerStatus=this._register(this.instantiationService.createInstance(_d)),this.tabFocusMode=this._register(this.instantiationService.createInstance(md)),this.state=new gd,this.toRender=void 0,this.activeEditorListeners=this._register(new p.Cm),this.delayedRender=this._register(new p.HE),this.registerCommands(),this.registerListeners()}registerListeners(){this._register(this.editorService.onDidActiveEditorChange((()=>this.updateStatusBar()))),this._register(this.textFileService.untitled.onDidChangeEncoding((e=>this.onResourceEncodingChange(e.resource)))),this._register(this.textFileService.files.onDidChangeEncoding((e=>this.onResourceEncodingChange(e.resource)))),this._register(m.Jh.runAndSubscribe(this.tabFocusMode.onDidChange,(e=>{void 0!==e?this.onTabFocusModeChange(e):this.onTabFocusModeChange(this.configurationService.getValue("editor.tabFocusMode"))})))}registerCommands(){this._register(Zs.w.registerCommand({id:`changeEditorIndentation${this.targetWindowId}`,handler:()=>this.showIndentationPicker()}))}async showIndentationPicker(){const e=(0,po.jA)(this.editorService.activeTextEditorControl);if(!e)return this.quickInputService.pick([{label:(0,I.kg)(9729,"No text editor active at this time")}]);if(this.editorService.activeEditor?.isReadonly())return this.quickInputService.pick([{label:(0,I.kg)(9730,"The active code editor is read-only.")}]);const t=[(0,y.eU)(e.getAction(Jc.k_.ID)),(0,y.eU)(e.getAction(Jc.j5.ID)),(0,y.eU)(e.getAction(Jc.bC.ID)),(0,y.eU)(e.getAction(Jc.Vq.ID)),(0,y.eU)(e.getAction(Jc._C.ID)),(0,y.eU)(e.getAction(Jc.f6.ID)),(0,y.eU)(e.getAction(qc.Qm.ID))].map((t=>({id:t.id,label:t.label,detail:Di.TM.isDefaultVariant()||t.label===t.alias?void 0:t.alias,run:()=>{e.focus(),t.run()}})));t.splice(3,0,{type:"separator",label:(0,I.kg)(9731,"convert file")}),t.unshift({type:"separator",label:(0,I.kg)(9732,"change view")});const i=await this.quickInputService.pick(t,{placeHolder:(0,I.kg)(9733,"Select Action"),matchOnDetail:!0});return i?.run()}updateTabFocusModeElement(e){if(e){if(!this.tabFocusModeElement.value){const e=(0,I.kg)(9734,"Tab Moves Focus");this.tabFocusModeElement.value=this.statusbarService.addEntry({name:(0,I.kg)(9735,"Accessibility Mode"),text:e,ariaLabel:e,tooltip:(0,I.kg)(9736,"Disable Accessibility Mode"),command:"editor.action.toggleTabFocusMode",kind:"prominent"},"status.editor.tabFocusMode",1,100.7)}}else this.tabFocusModeElement.clear()}updateColumnSelectionModeElement(e){if(e){if(!this.columnSelectionModeElement.value){const e=(0,I.kg)(9737,"Column Selection");this.columnSelectionModeElement.value=this.statusbarService.addEntry({name:(0,I.kg)(9738,"Column Selection Mode"),text:e,ariaLabel:e,tooltip:(0,I.kg)(9739,"Disable Column Selection Mode"),command:"editor.action.toggleColumnSelection",kind:"prominent"},"status.editor.columnSelectionMode",1,100.8)}}else this.columnSelectionModeElement.clear()}updateSelectionElement(e){if(!e)return void this.selectionElement.clear();const t=(0,po.jA)(this.editorService.activeTextEditorControl)?.getModel()?.uri;if(t?.scheme===$.ny.vscodeNotebookCell)return void this.selectionElement.clear();const i={name:(0,I.kg)(9740,"Editor Selection"),text:e,ariaLabel:e,tooltip:(0,I.kg)(9741,"Go to Line/Column"),command:"workbench.action.gotoLine"};this.updateElement(this.selectionElement,i,"status.editor.selection",1,100.5)}updateIndentationElement(e){if(!e)return void this.indentationElement.clear();const t=(0,po.jA)(this.editorService.activeTextEditorControl)?.getModel()?.uri;if(t?.scheme===$.ny.vscodeNotebookCell)return void this.indentationElement.clear();const i={name:(0,I.kg)(9742,"Editor Indentation"),text:e,ariaLabel:e,tooltip:(0,I.kg)(9743,"Select Indentation"),command:`changeEditorIndentation${this.targetWindowId}`};this.updateElement(this.indentationElement,i,"status.editor.indentation",1,100.4)}updateEncodingElement(e){if(!e)return void this.encodingElement.clear();const t={name:(0,I.kg)(9744,"Editor Encoding"),text:e,ariaLabel:e,tooltip:(0,I.kg)(9745,"Select Encoding"),command:"workbench.action.editor.changeEncoding"};this.updateElement(this.encodingElement,t,"status.editor.encoding",1,100.3)}updateEOLElement(e){if(!e)return void this.eolElement.clear();const t={name:(0,I.kg)(9746,"Editor End of Line"),text:e,ariaLabel:e,tooltip:(0,I.kg)(9747,"Select End of Line Sequence"),command:"workbench.action.editor.changeEOL"};this.updateElement(this.eolElement,t,"status.editor.eol",1,100.2)}updateLanguageIdElement(e){if(!e)return void this.languageElement.clear();const t={name:(0,I.kg)(9748,"Editor Language"),text:e,ariaLabel:e,tooltip:(0,I.kg)(9749,"Select Language Mode"),command:"workbench.action.editor.changeLanguageMode"};this.updateElement(this.languageElement,t,"status.editor.mode",1,100.1)}updateMetadataElement(e){if(!e)return void this.metadataElement.clear();const t={name:(0,I.kg)(9750,"File Information"),text:e,ariaLabel:e,tooltip:(0,I.kg)(9751,"File Information")};this.updateElement(this.metadataElement,t,"status.editor.info",1,100)}updateElement(e,t,i,o,n){e.value?e.value.update(t):e.value=this.statusbarService.addEntry(t,i,o,n)}updateState(e){const t=this.state.update(e);t.hasChanges()&&(this.toRender?this.toRender.combine(t):(this.toRender=t,this.delayedRender.value=(0,ke.Oq)((0,ke.ZF)(this.targetWindowId,!0).window,(()=>{this.delayedRender.clear();const e=this.toRender;this.toRender=void 0,e&&this.doRenderNow()}))))}doRenderNow(){this.updateTabFocusModeElement(!!this.state.tabFocusMode),this.updateColumnSelectionModeElement(!!this.state.columnSelectionMode),this.updateIndentationElement(this.state.indentation),this.updateSelectionElement(this.state.selectionStatus),this.updateEncodingElement(this.state.encoding),this.updateEOLElement(this.state.EOL?"\r\n"===this.state.EOL?Cd:yd:void 0),this.updateLanguageIdElement(this.state.languageId),this.updateMetadataElement(this.state.metadata)}getSelectionLabel(e){if(e&&e.selections)return 1===e.selections.length?e.charactersSelected?(0,Ht.GP)(bd,e.selections[0].positionLineNumber,e.selections[0].positionColumn,e.charactersSelected):(0,Ht.GP)(wd,e.selections[0].positionLineNumber,e.selections[0].positionColumn):e.charactersSelected?(0,Ht.GP)(vd,e.selections.length,e.charactersSelected):e.selections.length>0?(0,Ht.GP)(fd,e.selections.length):void 0}updateStatusBar(){const e=this.editorService.activeEditor,t=this.editorService.activeEditorPane,i=t?(0,po.jA)(t.getControl())??void 0:void 0;if(this.onColumnSelectionModeChange(i),this.onSelectionChange(i),this.onLanguageChange(i,e),this.onEOLChange(i),this.onEncodingChange(t,i),this.onIndentationChange(i),this.onMetadataChange(t),this.currentMarkerStatus.update(i),this.activeEditorListeners.clear(),t&&this.activeEditorListeners.add(t.onDidChangeControl((()=>{this.updateStatusBar()}))),i)this.activeEditorListeners.add(i.onDidChangeConfiguration((e=>{e.hasChanged(22)&&this.onColumnSelectionModeChange(i)}))),this.activeEditorListeners.add(m.Jh.defer(i.onDidChangeCursorPosition)((()=>{this.onSelectionChange(i),this.currentMarkerStatus.update(i)}))),this.activeEditorListeners.add(i.onDidChangeModelLanguage((()=>{this.onLanguageChange(i,e)}))),this.activeEditorListeners.add(m.Jh.accumulate(i.onDidChangeModelContent)((e=>{this.onEOLChange(i),this.currentMarkerStatus.update(i);const t=i.getSelections();if(t)for(const o of e)for(const e of o.changes)if(t.some((t=>Ao.Q.areIntersecting(t,e.range)))){this.onSelectionChange(i);break}}))),this.activeEditorListeners.add(i.onDidChangeModelOptions((()=>{this.onIndentationChange(i)})));else if(t instanceof jc||t instanceof Zc){const e=[];if(t instanceof Zc){const i=t.getPrimaryEditorPane();i instanceof jc&&e.push(i);const o=t.getSecondaryEditorPane();o instanceof jc&&e.push(o)}else e.push(t);for(const i of e)this.activeEditorListeners.add(i.onDidChangeMetadata((()=>{this.onMetadataChange(t)}))),this.activeEditorListeners.add(i.onDidOpenInPlace((()=>{this.updateStatusBar()})))}}onLanguageChange(e,t){const i={type:"languageId",languageId:void 0};if(e&&t&&ud(t)){const t=e.getModel();if(t){const e=t.getLanguageId();i.languageId=this.languageService.getLanguageName(e)??void 0}}this.updateState(i)}onIndentationChange(e){const t={type:"indentation",indentation:void 0};if(e){const i=e.getModel();if(i){const e=i.getOptions();t.indentation=e.insertSpaces?e.tabSize===e.indentSize?(0,I.kg)(9752,"Spaces: {0}",e.indentSize):(0,I.kg)(9753,"Spaces: {0} (Tab Size: {1})",e.indentSize,e.tabSize):(0,I.kg)(9754,"Tab Size: {0}",e.tabSize)}}this.updateState(t)}onMetadataChange(e){const t={type:"metadata",metadata:void 0};(e instanceof jc||e instanceof Zc)&&(t.metadata=e.getMetadata()),this.updateState(t)}onColumnSelectionModeChange(e){const t={type:"columnSelectionMode",columnSelectionMode:!1};e?.getOption(22)&&(t.columnSelectionMode=!0),this.updateState(t)}onSelectionChange(e){const t=Object.create(null);if(e){t.selections=e.getSelections()||[],t.charactersSelected=0;const i=e.getModel();if(i)for(const e of t.selections)"number"!=typeof t.charactersSelected&&(t.charactersSelected=0),t.charactersSelected+=i.getCharacterCountInRange(e);if(1===t.selections.length){const i=e.getPosition(),o=new Xc.L(t.selections[0].selectionStartLineNumber,t.selections[0].selectionStartColumn,t.selections[0].positionLineNumber,i?e.getStatusbarColumn(i):t.selections[0].positionColumn);t.selections[0]=o}}this.updateState({type:"selectionStatus",selectionStatus:this.getSelectionLabel(t)})}onEOLChange(e){const t={type:"EOL",EOL:void 0};if(e&&!e.getOption(94)){const i=e.getModel();i&&(t.EOL=i.getEOL())}this.updateState(t)}onEncodingChange(e,t){if(e&&!this.isActiveEditor(e))return;const i={type:"encoding",encoding:void 0};if(e&&t?.hasModel()){const t=e.input?ld(e.input):null;if(t){const e=t.getEncoding(),o="string"==typeof e?td.mg[e]:void 0;i.encoding=o?o.labelShort:e}}this.updateState(i)}onResourceEncodingChange(e){const t=this.editorService.activeEditorPane;if(t){const i=Q.tf.getCanonicalUri(t.input,{supportSideBySide:Q.zX.PRIMARY});if(i&&(0,C.n4)(i,e)){const e=(0,po.jA)(t.getControl())??void 0;return this.onEncodingChange(t,e)}}}onTabFocusModeChange(e){const t={type:"tabFocusMode",tabFocusMode:e};this.updateState(t)}isActiveEditor(e){const t=this.editorService.activeEditorPane;return!!t&&t===e}};Sd=(0,s.C)([(0,s.Q)(1,be.I),(0,s.Q)(2,j.G),(0,s.Q)(3,Xo.L),(0,s.Q)(4,fo.a),(0,s.Q)(5,bi.S),(0,s.Q)(6,a._Y),(0,s.Q)(7,z.p)],Sd);let kd=class extends p.jG{static{this.ID="workbench.contrib.editorStatus"}constructor(e){super(),this.editorGroupService=e;for(const t of e.parts)this.createEditorStatus(t);this._register(e.onDidCreateAuxiliaryEditorPart((e=>this.createEditorStatus(e))))}createEditorStatus(e){const t=new p.Cm;m.Jh.once(e.onWillDispose)((()=>t.dispose()));const i=this.editorGroupService.getScopedInstantiationService(e);t.add(i.createInstance(Sd,e.windowId))}};kd=(0,s.C)([(0,s.Q)(0,U.m)],kd);let _d=class extends p.jG{constructor(e,t,i){super(),this.statusbarService=e,this.markerService=t,this.configurationService=i,this.editor=void 0,this.markers=[],this.currentMarker=null,this.statusBarEntryAccessor=this._register(new p.HE),this._register(t.onMarkerChanged((e=>this.onMarkerChanged(e)))),this._register(m.Jh.filter(i.onDidChangeConfiguration,(e=>e.affectsConfiguration("problems.showCurrentInStatus")))((()=>this.updateStatus())))}update(e){this.editor=e,this.updateMarkers(),this.updateStatus()}updateStatus(){const e=this.currentMarker;if(this.currentMarker=this.getMarker(),this.hasToUpdateStatus(e,this.currentMarker))if(this.currentMarker){const e=(0,Ht.uz)(this.currentMarker.message)[0],t=`${this.getType(this.currentMarker)} ${e}`;this.statusBarEntryAccessor.value||(this.statusBarEntryAccessor.value=this.statusbarService.addEntry({name:(0,I.kg)(9755,"Current Problem"),text:"",ariaLabel:""},"statusbar.currentProblem",0)),this.statusBarEntryAccessor.value.update({name:(0,I.kg)(9755,"Current Problem"),text:t,ariaLabel:t})}else this.statusBarEntryAccessor.clear()}hasToUpdateStatus(e,t){return!t||!e||nd.o.makeKey(e)!==nd.o.makeKey(t)}getType(e){switch(e.severity){case nd.c.Error:return"$(error)";case nd.c.Warning:return"$(warning)";case nd.c.Info:return"$(info)"}return""}getMarker(){if(!this.configurationService.getValue("problems.showCurrentInStatus"))return null;if(!this.editor)return null;if(!this.editor.getModel())return null;const e=this.editor.getPosition();return e&&this.markers.find((t=>Ao.Q.containsPosition(t,e)))||null}onMarkerChanged(e){if(!this.editor)return;const t=this.editor.getModel();t&&(t&&!e.some((e=>(0,C.n4)(t.uri,e)))||this.updateMarkers())}updateMarkers(){if(!this.editor)return;const e=this.editor.getModel();e&&(e?(this.markers=this.markerService.read({resource:e.uri,severities:nd.c.Error|nd.c.Warning|nd.c.Info}),this.markers.sort(this.compareMarker)):this.markers=[],this.updateStatus())}compareMarker(e,t){let i=(0,Ht.UD)(e.resource.toString(),t.resource.toString());return 0===i&&(i=nd.c.compare(e.severity,t.severity)),0===i&&(i=Ao.Q.compareRangesUsingStarts(e,t)),i}};_d=(0,s.C)([(0,s.Q)(0,bi.S),(0,s.Q)(1,sd.D),(0,s.Q)(2,z.p)],_d);let xd=class extends vi.rc{static{Yc=this}static{this.ID="workbench.action.showLanguageExtensions"}constructor(e,t,i){super(Yc.ID,(0,I.kg)(9756,"Search Marketplace Extensions for '{0}'...",e)),this.fileExtension=e,this.commandService=t,this.enabled=i.isEnabled()}async run(){await this.commandService.executeCommand("workbench.extensions.action.showExtensionsForLanguage",this.fileExtension)}};xd=Yc=(0,s.C)([(0,s.Q)(1,hr.w),(0,s.Q)(2,ed.Ss)],xd);class Ed extends _.L{static{this.ID="workbench.action.editor.changeLanguageMode"}constructor(){super({id:Ed.ID,title:(0,I.aS)(9757,"Change Language Mode"),f1:!0,keybinding:{weight:200,primary:(0,Ws.m5)(2089,43)},precondition:c.M$.not("notebookEditorFocused"),metadata:{description:(0,I.kg)(9758,"Change the language mode of the active text editor."),args:[{name:(0,I.kg)(9759,"The name of the language mode to change to."),constraint:e=>"string"==typeof e}]}})}async run(e,t){const i=e.get(j.G),o=e.get(be.I),n=e.get(Xo.L),s=e.get(ad.u),r=e.get(fo.a),c=e.get(rc.v),d=e.get(a._Y),h=e.get(z.p),l=e.get(b.k),u=(0,po.jA)(o.activeTextEditorControl);if(!u)return void await i.pick([{label:(0,I.kg)(9729,"No text editor active at this time")}]);const p=u.getModel(),g=Q.tf.getOriginalUri(o.activeEditor,{supportSideBySide:Q.zX.PRIMARY});let m,w;p&&(w=p.getLanguageId(),m=n.getLanguageName(w)??void 0);let v=!!g;g?.scheme!==$.ny.untitled||r.untitled.get(g)?.hasAssociatedFilePath||(v=!1);const f=n.getSortedRegisteredLanguageNames().map((({languageName:e,languageId:t})=>{const i=n.getExtensions(t).join(" ");let o;return o=m===e?(0,I.kg)(9760,"({0}) - Configured Language",t):(0,I.kg)(9761,"({0})",t),{label:e,meta:i,iconClasses:(0,od.S)(t),description:o}}));let y,S,k;if(f.unshift({type:"separator",label:(0,I.kg)(9762,"languages (identifier)")}),v&&g){const e=(0,C.LC)(g)||(0,C.P8)(g);k=d.createInstance(xd,e),k.enabled&&f.unshift(k),S={label:(0,I.kg)(9763,"Configure '{0}' language based settings...",m)},f.unshift(S),y={label:(0,I.kg)(9764,"Configure File Association for '{0}'...",e)},f.unshift(y)}const _={label:(0,I.kg)(9765,"Auto Detect")};f.unshift(_);const x="string"==typeof t?{label:t}:await i.pick(f,{placeHolder:(0,I.kg)(9766,"Select Language Mode"),matchOnDescription:!0});if(!x)return;if(x===k)return void k.run();if(x===y)return void(g&&this.configureFileAssociation(g,n,i,h));if(x===S)return void c.openUserSettings({jsonEditor:!0,revealSetting:{key:`[${w??null}]`,edit:!0}});const E=o.activeEditor;if(E){const e=ud(E);if(e){let t,i;if(x===_){if(p){const e=Q.tf.getOriginalUri(E,{supportSideBySide:Q.zX.PRIMARY});if(e){let o=n.guessLanguageIdByFilepathOrFirstLine(e,p.getLineContent(1))??void 0;o&&"unknown"!==o||(i=await s.detectLanguage(e),o=i),o&&(t=n.createById(o))}}}else{const e=n.getLanguageIdByLanguageName(x.label);t=n.createById(e),g&&s.detectLanguage(g).then((e=>{const t=n.getLanguageIdByLanguageName(x.label)||"unknown";if(e===w&&w!==t){const e=h.getValue("workbench.editor.preferHistoryBasedLanguageDetection")?"history":"classic";l.publicLog2(rd.xn,{currentLanguageId:m??"unknown",nextLanguageId:x.label,lineCount:p?.getLineCount()??-1,modelPreference:e})}}))}if(void 0!==t&&(e.setLanguageId(t.languageId,Ed.ID),g?.scheme===$.ny.untitled)){const e=h.getValue("workbench.editor.preferHistoryBasedLanguageDetection")?"history":"classic";l.publicLog2("setUntitledDocumentLanguage",{to:t.languageId,from:w??"none",modelPreference:e})}}u.focus()}}configureFileAssociation(e,t,i,o){const n=(0,C.LC)(e),s=(0,C.P8)(e),r=t.guessLanguageIdByFilepathOrFirstLine(v.rz.file(s)),a=t.getSortedRegisteredLanguageNames().map((({languageName:e,languageId:t})=>({id:t,label:e,iconClasses:(0,od.S)(t),description:t===r?(0,I.kg)(9767,"Current Association"):void 0})));setTimeout((async()=>{const e=await i.pick(a,{placeHolder:(0,I.kg)(9768,"Select Language Mode to Associate with '{0}'",n||s)});if(e){const t=o.inspect(we.M7);let i;i=n&&"."!==s[0]?`*${n}`:s;let r=2;t.workspaceValue&&t.workspaceValue[i]&&(r=5);const a=(0,id.Go)(5===r?t.workspaceValue:t.userValue)||Object.create(null);a[i]=e.id,o.updateValue(we.M7,a,r)}}),50)}}class Dd extends _.L{constructor(){super({id:"workbench.action.editor.changeEOL",title:(0,I.aS)(9769,"Change End of Line Sequence"),f1:!0})}async run(e){const t=e.get(be.I),i=e.get(j.G),o=(0,po.jA)(t.activeTextEditorControl);if(!o)return void await i.pick([{label:(0,I.kg)(9729,"No text editor active at this time")}]);if(t.activeEditor?.isReadonly())return void await i.pick([{label:(0,I.kg)(9730,"The active code editor is read-only.")}]);let n=o.getModel();const s=[{label:yd,eol:0},{label:Cd,eol:1}],r="\n"===n?.getEOL()?0:1,a=await i.pick(s,{placeHolder:(0,I.kg)(9770,"Select End of Line Sequence"),activeItem:s[r]});if(a){const e=(0,po.jA)(t.activeTextEditorControl);e?.hasModel()&&!t.activeEditor?.isReadonly()&&(n=e.getModel(),n.pushStackElement(),n.pushEOL(a.eol),n.pushStackElement())}o.focus()}}class Id extends _.L{constructor(){super({id:"workbench.action.editor.changeEncoding",title:(0,I.aS)(9771,"Change File Encoding"),f1:!0})}async run(e){const t=e.get(be.I),i=e.get(j.G),o=e.get(ve.$),n=e.get(fo.a),s=e.get(Wc.U),r=(0,po.jA)(t.activeTextEditorControl);if(!r)return void await i.pick([{label:(0,I.kg)(9729,"No text editor active at this time")}]);const a=t.activeEditorPane;if(!a)return void await i.pick([{label:(0,I.kg)(9729,"No text editor active at this time")}]);const c=ld(a.input);if(!c)return void await i.pick([{label:(0,I.kg)(9772,"No file active at this time")}]);const d={label:(0,I.kg)(9773,"Save with Encoding")},h={label:(0,I.kg)(9774,"Reopen with Encoding")};if(!Di.TM.isDefaultVariant()){const e="Save with Encoding";e!==d.label&&(d.detail=e);const t="Reopen with Encoding";t!==h.label&&(h.detail=t)}let l;if(l=c instanceof Bc.m?d:a.input.isReadonly()?h:await i.pick([h,d],{placeHolder:(0,I.kg)(9733,"Select Action"),matchOnDetail:!0}),!l)return;await(0,vt.wR)(50);const u=Q.tf.getOriginalUri(a.input,{supportSideBySide:Q.zX.PRIMARY});if(!u||!o.hasProvider(u)&&u.scheme!==$.ny.untitled)return;let p;if(o.hasProvider(u)){const e=await n.readStream(u,{autoGuessEncoding:!0,candidateGuessEncodings:s.getValue(u,"files.candidateGuessEncodings")});p=e.encoding}const g=l===h,m=s.getValue(u,"files.encoding");let b,w;const v=Object.keys(td.mg).sort(((e,t)=>e===m?-1:t===m?1:td.mg[e].order-td.mg[t].order)).filter((e=>!(e===p&&p!==m||g&&td.mg[e].encodeOnly))).map(((e,t)=>(e===c.getEncoding()?b=t:td.mg[e].alias===c.getEncoding()&&(w=t),{id:e,label:td.mg[e].labelLong,description:e}))),f=v.slice();p&&m!==p&&td.mg[p]&&(v.unshift({type:"separator"}),v.unshift({id:p,label:td.mg[p].labelLong,description:(0,I.kg)(9775,"Guessed from content")}));const y=await i.pick(v,{placeHolder:g?(0,I.kg)(9776,"Select File Encoding to Reopen File"):(0,I.kg)(9777,"Select File Encoding to Save with"),activeItem:f["number"==typeof b?b:"number"==typeof w?w:-1]});if(!y)return;if(!t.activeEditorPane)return;const C=ld(t.activeEditorPane.input);void 0!==y.id&&C&&await C.setEncoding(y.id,g?1:0),r.focus()}}var Vd=i(86434),Md=i(23799),Td=i(20729),Ad=i(62700),Ld=i(46152),Pd=i(27091),Rd=i(53725),Bd=i(36229),Od=i(87760);let Nd=class{constructor(e,t,i){this.filesConfigurationService=e,this.environmentService=t,this.pathService=i}canSerialize(e){return this.filesConfigurationService.isHotExitEnabled&&!e.isDisposed()}serialize(e){if(!this.canSerialize(e))return;const t=e;let i,o=t.resource;t.hasAssociatedFilePath&&(o=(0,C.hN)(o,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme));const n=t.getLanguageId();(n!==vn.vH||t.hasLanguageSetExplicitly)&&(i=n);const s={resourceJSON:o.toJSON(),modeId:i,encoding:t.getEncoding()};return JSON.stringify(s)}deserialize(e,t){return e.invokeFunction((e=>{const i=JSON.parse(t),o=v.rz.revive(i.resourceJSON),n=i.modeId,s=i.encoding;return e.get(ce.P).createTextEditor({resource:o,languageId:n,encoding:s,forceUntitled:!0})}))}};Nd=(0,s.C)([(0,s.Q)(0,Rd.U),(0,s.Q)(1,ni.P),(0,s.Q)(2,De.S)],Nd);let Fd=class extends p.jG{static{this.ID="workbench.contrib.untitledTextEditorWorkingCopyEditorHandler"}constructor(e,t,i,o,n){super(),this.environmentService=t,this.pathService=i,this.textEditorService=o,this.untitledTextEditorService=n,this._register(e.registerHandler(this))}handles(e){return e.resource.scheme===$.ny.untitled&&e.typeId===Bd.R}isOpen(e,t){return!!this.handles(e)&&t instanceof Bc.m&&(0,C.n4)(e.resource,t.resource)}createEditor(e){let t;return t=this.untitledTextEditorService.isUntitledWithAssociatedResource(e.resource)?(0,C.hN)(e.resource,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme):e.resource,this.textEditorService.createTextEditor({resource:t,forceUntitled:!0})}};Fd=(0,s.C)([(0,s.Q)(0,Od.U),(0,s.Q)(1,ni.P),(0,s.Q)(2,De.S),(0,s.Q)(3,ce.P),(0,s.Q)(4,ge.g)],Fd);var Gd,Wd=i(42607);let zd=class extends p.jG{static{Gd=this}static{this.ID="workbench.contrib.dynamicEditorConfigurations"}static{this.AUTO_LOCK_DEFAULT_ENABLED=new Set(["terminalEditor","mainThreadWebview-simpleBrowser.view","mainThreadWebview-browserPreview"])}static{this.AUTO_LOCK_EXTRA_EDITORS=[{id:"workbench.input.interactive",label:(0,I.kg)(9912,"Interactive Window"),priority:K.C8.builtin},{id:"mainThreadWebview-markdown.preview",label:(0,I.kg)(9913,"Markdown Preview"),priority:K.C8.builtin},{id:"mainThreadWebview-simpleBrowser.view",label:(0,I.kg)(9914,"Simple Browser"),priority:K.C8.builtin},{id:"mainThreadWebview-browserPreview",label:(0,I.kg)(9915,"Live Preview"),priority:K.C8.builtin}]}static{this.AUTO_LOCK_REMOVE_EDITORS=new Set(["vscode-interactive-input","interactive","vscode.markdown.preview.editor"])}constructor(e,t,i){super(),this.editorResolverService=e,this.environmentService=i,this.configurationRegistry=u.O.as(go.Fd.Configuration),(async()=>{await t.whenInstalledExtensionsRegistered(),this.updateDynamicEditorConfigurations(),this.registerListeners()})()}registerListeners(){this._register(m.Jh.debounce(this.editorResolverService.onDidChangeEditorRegistrations,((e,t)=>t))((()=>this.updateDynamicEditorConfigurations())))}updateDynamicEditorConfigurations(){const e=[...this.editorResolverService.getEditors(),...Gd.AUTO_LOCK_EXTRA_EDITORS].filter((e=>!Gd.AUTO_LOCK_REMOVE_EDITORS.has(e.id))),t=this.editorResolverService.getEditors().filter((e=>e.priority!==K.C8.exclusive)).map((e=>e.id)),i=Object.create(null);for(const t of e)i[t.id]={type:"boolean",default:Gd.AUTO_LOCK_DEFAULT_ENABLED.has(t.id),description:t.label};const o=Object.create(null);for(const t of e)o[t.id]=Gd.AUTO_LOCK_DEFAULT_ENABLED.has(t.id);const n=this.autoLockConfigurationNode;this.autoLockConfigurationNode={...Wd.nR,properties:{"workbench.editor.autoLockGroups":{type:"object",description:(0,I.kg)(9916,"If an editor matching one of the listed types is opened as the first in an editor group and more than one group is open, the group is automatically locked. Locked groups will only be used for opening editors when explicitly chosen by a user gesture (for example drag and drop), but not by default. Consequently, the active editor in a locked group is less likely to be replaced accidentally with a different editor."),properties:i,default:o,additionalProperties:!1}}};const s=this.defaultBinaryEditorConfigurationNode;this.defaultBinaryEditorConfigurationNode={...Wd.nR,properties:{"workbench.editor.defaultBinaryEditor":{type:"string",default:"",enum:[...t,""],description:(0,I.kg)(9917,"The default editor for files detected as binary. If undefined, the user will be presented with a picker.")}}};const r=this.editorAssociationsConfigurationNode;this.editorAssociationsConfigurationNode={...Wd.nR,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:(0,I.kg)(9918,'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),patternProperties:{".*":{type:"string",enum:t}}}}};const a=this.editorLargeFileConfirmationConfigurationNode;this.editorLargeFileConfirmationConfigurationNode={...Wd.nR,properties:{"workbench.editorLargeFileConfirmation":{type:"number",default:(0,we.qK)(this.environmentService.remoteAuthority)/we.sW.MB,minimum:1,scope:4,markdownDescription:(0,I.kg)(9919,"Controls the minimum size of a file in MB before asking for confirmation when opening in the editor. Note that this setting may not apply to all editor types and environments.")}}},this.configurationRegistry.updateConfigurations({add:[this.autoLockConfigurationNode,this.defaultBinaryEditorConfigurationNode,this.editorAssociationsConfigurationNode,this.editorLargeFileConfirmationConfigurationNode],remove:(0,f.Yc)([n,s,r,a])})}};zd=Gd=(0,s.C)([(0,s.Q)(0,G.Y),(0,s.Q)(1,l.c),(0,s.Q)(2,ni.P)],zd);var Hd=i(71849);i(1392),u.O.as(Q.q5.EditorPane).registerEditorPane(oo.nQ.create(Hc,Hc.ID,(0,I.kg)(4054,"Text Editor")),[new o.d(Bc.m),new o.d(Pc.r)]),u.O.as(Q.q5.EditorPane).registerEditorPane(oo.nQ.create(Uc.g,Uc.g.ID,(0,I.kg)(4055,"Text Diff Editor")),[new o.d(We.p)]),u.O.as(Q.q5.EditorPane).registerEditorPane(oo.nQ.create(Zc,Zc.ID,(0,I.kg)(4056,"Binary Diff Editor")),[new o.d(We.p)]),u.O.as(Q.q5.EditorPane).registerEditorPane(oo.nQ.create(Qc.z,Qc.z.ID,(0,I.kg)(4057,"Side by Side Editor")),[new o.d(J.JL)]),u.O.as(Q.q5.EditorFactory).registerEditorSerializer(Bc.m.ID,Nd),u.O.as(Q.q5.EditorFactory).registerEditorSerializer(J.JL.ID,J.Vf),u.O.as(Q.q5.EditorFactory).registerEditorSerializer(We.p.ID,We.J),(0,$o.tr)(kd.ID,kd,2),(0,$o.tr)(Fd.ID,Fd,2),(0,$o.tr)(zd.ID,zd,2),(0,Ge.HW)(Ad.pU.ID,Ad.pU,1);const Qd=u.O.as(Ld.Fd.Quickaccess),Ud="inEditorsPicker",$d=c.M$.and(Td.b2,c.M$.has(Ud));Qd.registerQuickAccessProvider({ctor:Pd.sp,prefix:Pd.sp.PREFIX,contextKey:Ud,placeholder:(0,I.kg)(4058,"Type the name of an editor to open it."),helpEntries:[{description:(0,I.kg)(4059,"Show Editors in Active Group by Most Recently Used"),commandId:Vd.$O.ID}]}),Qd.registerQuickAccessProvider({ctor:Pd.qv,prefix:Pd.qv.PREFIX,contextKey:Ud,placeholder:(0,I.kg)(4058,"Type the name of an editor to open it."),helpEntries:[{description:(0,I.kg)(4060,"Show All Opened Editors By Appearance"),commandId:Vd._D.ID}]}),Qd.registerQuickAccessProvider({ctor:Pd.ib,prefix:Pd.ib.PREFIX,contextKey:Ud,placeholder:(0,I.kg)(4058,"Type the name of an editor to open it."),helpEntries:[{description:(0,I.kg)(4061,"Show All Opened Editors By Most Recently Used"),commandId:Vd.YQ.ID}]}),(0,_.ug)(Ed),(0,_.ug)(Dd),(0,_.ug)(Id),(0,_.ug)(Vd.ho),(0,_.ug)(Vd.Is),(0,_.ug)(Vd.XH),(0,_.ug)(Vd.nt),(0,_.ug)(Vd.lG),(0,_.ug)(Vd.rt),(0,_.ug)(Vd.Sz),(0,_.ug)(Vd.Qu),(0,_.ug)(Vd.As),(0,_.ug)(Vd.Ic),(0,_.ug)(Vd._8),(0,_.ug)(Vd.aw),(0,_.ug)(Vd.H8),(0,_.ug)(Vd.Ae),(0,_.ug)(Vd._D),(0,_.ug)(Vd.YQ),(0,_.ug)(Vd.$O),(0,_.ug)(Vd._r),(0,_.ug)(Vd.xy),(0,_.ug)(Vd.YF),(0,_.ug)(Vd.E9),(0,_.ug)(Vd.ck),(0,_.ug)(Vd.xJ),(0,_.ug)(Vd.WM),(0,_.ug)(Vd.d7),(0,_.ug)(Vd.B0),(0,_.ug)(Vd.aV),(0,_.ug)(Vd.bV),(0,_.ug)(Vd.iE),(0,_.ug)(Vd.xr),(0,_.ug)(Vd.qT),(0,_.ug)(Vd.y2),(0,_.ug)(Vd.pM),(0,_.ug)(Vd.O0),(0,_.ug)(Vd.wR),(0,_.ug)(Vd.TG),(0,_.ug)(Vd.N5),(0,_.ug)(Vd.JY),(0,_.ug)(Vd.my),(0,_.ug)(Vd.HG),(0,_.ug)(Vd.IN),(0,_.ug)(Vd.hc),(0,_.ug)(Vd.OS),(0,_.ug)(Vd.dq),(0,_.ug)(Vd.uf),(0,_.ug)(Vd.BL),(0,_.ug)(Vd.kG),(0,_.ug)(Vd.VJ),(0,_.ug)(Vd.Uu),(0,_.ug)(Vd.Ol),(0,_.ug)(Vd.BJ),(0,_.ug)(Vd.Tt),(0,_.ug)(Vd.WZ),(0,_.ug)(Vd.z0),(0,_.ug)(Vd.I0),(0,_.ug)(Vd.eV),(0,_.ug)(Vd.Zr),(0,_.ug)(Vd.b6),(0,_.ug)(Vd.yY),(0,_.ug)(Vd.I9),(0,_.ug)(Vd.zE),(0,_.ug)(Vd.aM),(0,_.ug)(Vd.dO),(0,_.ug)(Vd.vn),(0,_.ug)(Vd.g6),(0,_.ug)(Vd.m4),(0,_.ug)(Vd.ox),(0,_.ug)(Vd.Ri),(0,_.ug)(Vd.zD),(0,_.ug)(Vd.J_),(0,_.ug)(Vd.Ot),(0,_.ug)(Vd.FB),(0,_.ug)(Vd.Pe),(0,_.ug)(Vd.on),(0,_.ug)(Vd.LT),(0,_.ug)(Vd.ki),(0,_.ug)(Vd.wY),(0,_.ug)(Vd.f5),(0,_.ug)(Vd.h9),(0,_.ug)(Vd.yX),(0,_.ug)(Vd.l$),(0,_.ug)(Vd.g0),(0,_.ug)(Vd.XN),(0,_.ug)(Vd.G_),(0,_.ug)(Vd.BW),(0,_.ug)(Vd.qs),(0,_.ug)(Vd.f),(0,_.ug)(Vd.Yd),(0,_.ug)(Vd.jv),(0,_.ug)(Vd.JV),(0,_.ug)(Vd.F$),(0,_.ug)(Vd.NI),(0,_.ug)(Vd.XW),(0,_.ug)(Vd.Zv),(0,_.ug)(Vd.ar),(0,_.ug)(Vd.Q2),(0,_.ug)(Vd.LA),(0,_.ug)(Vd.fd),(0,_.ug)(Vd.ty),(0,_.ug)(Vd.Zc),(0,_.ug)(Vd.Vg),(0,_.ug)(Vd.iO),(0,_.ug)(Vd.mu),(0,_.ug)(Vd.r4),(0,_.ug)(Vd.by),(0,_.ug)(Vd.no),(0,_.ug)(Vd.v_),(0,_.ug)(Vd.bd);const Kd="workbench.action.quickOpenNavigateNextInEditorPicker";zs.f.registerCommandAndKeybindingRule({id:Kd,weight:250,handler:(0,Td.JB)(Kd,!0),when:$d,primary:2050,mac:{primary:258}});const jd="workbench.action.quickOpenNavigatePreviousInEditorPicker";function Zd(e,t,i,o,n){const s={command:{id:e.id,title:e.title,icon:e.icon,toggled:e.toggled,precondition:n},group:"navigation",when:t,order:i};o&&(s.alt={id:o.id,title:o.title,icon:o.icon}),_.ZG.appendMenuItem(_.D8.EditorTitle,s)}zs.f.registerCommandAndKeybindingRule({id:jd,weight:250,handler:(0,Td.JB)(jd,!1),when:$d,primary:3074,mac:{primary:1282}}),(0,ur.mj)(),Di.zx&&(_.ZG.appendMenuItem(_.D8.TouchBarContext,{command:{id:Vd.Is.ID,title:Vd.Is.LABEL,icon:{dark:$.zl.asFileUri("vs/workbench/browser/parts/editor/media/back-tb.png")}},group:"navigation",order:0}),_.ZG.appendMenuItem(_.D8.TouchBarContext,{command:{id:Vd.ho.ID,title:Vd.ho.LABEL,icon:{dark:$.zl.asFileUri("vs/workbench/browser/parts/editor/media/forward-tb.png")}},group:"navigation",order:1})),_.ZG.appendMenuItem(_.D8.EmptyEditorGroup,{command:{id:ur.eg,title:(0,I.kg)(4062,"Lock Group"),icon:xi.W6.unlock},group:"navigation",order:10,when:c.M$.and(ji.EA,ji.cY.toNegated())}),_.ZG.appendMenuItem(_.D8.EmptyEditorGroup,{command:{id:ur.BS,title:(0,I.kg)(4063,"Unlock Group"),icon:xi.W6.lock,toggled:c.M$.true()},group:"navigation",order:10,when:ji.cY}),_.ZG.appendMenuItem(_.D8.EmptyEditorGroup,{command:{id:ur.Lj,title:(0,I.kg)(4064,"Close Group"),icon:xi.W6.close},group:"navigation",order:20,when:c.M$.or(ji.EA,ji.TK)}),_.ZG.appendMenuItem(_.D8.EmptyEditorGroupContext,{command:{id:ur.vY,title:(0,I.kg)(4065,"Split Up")},group:"2_split",order:10}),_.ZG.appendMenuItem(_.D8.EmptyEditorGroupContext,{command:{id:ur.kq,title:(0,I.kg)(4066,"Split Down")},group:"2_split",order:20}),_.ZG.appendMenuItem(_.D8.EmptyEditorGroupContext,{command:{id:ur.PO,title:(0,I.kg)(4067,"Split Left")},group:"2_split",order:30}),_.ZG.appendMenuItem(_.D8.EmptyEditorGroupContext,{command:{id:ur.ys,title:(0,I.kg)(4068,"Split Right")},group:"2_split",order:40}),_.ZG.appendMenuItem(_.D8.EmptyEditorGroupContext,{command:{id:ur.gR,title:(0,I.kg)(4069,"New Window")},group:"3_window",order:10}),_.ZG.appendMenuItem(_.D8.EmptyEditorGroupContext,{command:{id:ur.Nq,title:(0,I.kg)(4070,"Lock Group"),toggled:ji.cY},group:"4_lock",order:10,when:ji.EA.toNegated()}),_.ZG.appendMenuItem(_.D8.EmptyEditorGroupContext,{command:{id:ur.Lj,title:(0,I.kg)(4071,"Close")},group:"5_close",order:10,when:ji.RR}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{command:{id:ur.vY,title:(0,I.kg)(4065,"Split Up")},group:"2_split",order:10}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{command:{id:ur.kq,title:(0,I.kg)(4066,"Split Down")},group:"2_split",order:20}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{command:{id:ur.PO,title:(0,I.kg)(4067,"Split Left")},group:"2_split",order:30}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{command:{id:ur.ys,title:(0,I.kg)(4068,"Split Right")},group:"2_split",order:40}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{command:{id:ur.B$,title:(0,I.kg)(4072,"Move into New Window")},group:"3_window",order:10}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{command:{id:ur.pz,title:(0,I.kg)(4073,"Copy into New Window")},group:"3_window",order:20}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{submenu:_.D8.EditorTabsBarShowTabsSubmenu,title:(0,I.kg)(4074,"Tab Bar"),group:"4_config",order:10,when:ji.qv.negate()}),_.ZG.appendMenuItem(_.D8.EditorTabsBarShowTabsSubmenu,{command:{id:Hd.ZT.ID,title:(0,I.kg)(4075,"Multiple Tabs"),toggled:c.M$.equals("config.workbench.editor.showTabs","multiple")},group:"1_config",order:10}),_.ZG.appendMenuItem(_.D8.EditorTabsBarShowTabsSubmenu,{command:{id:Hd.uJ.ID,title:(0,I.kg)(4076,"Single Tab"),toggled:c.M$.equals("config.workbench.editor.showTabs","single")},group:"1_config",order:20}),_.ZG.appendMenuItem(_.D8.EditorTabsBarShowTabsSubmenu,{command:{id:Hd.Qu.ID,title:(0,I.kg)(4077,"Hidden"),toggled:c.M$.equals("config.workbench.editor.showTabs","none")},group:"1_config",order:30}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{submenu:_.D8.EditorTabsBarShowTabsZenModeSubmenu,title:(0,I.kg)(4074,"Tab Bar"),group:"4_config",order:10,when:ji.qv}),_.ZG.appendMenuItem(_.D8.EditorTabsBarShowTabsZenModeSubmenu,{command:{id:Hd.So.ID,title:(0,I.kg)(4075,"Multiple Tabs"),toggled:c.M$.equals("config.zenMode.showTabs","multiple")},group:"1_config",order:10}),_.ZG.appendMenuItem(_.D8.EditorTabsBarShowTabsZenModeSubmenu,{command:{id:Hd.FV.ID,title:(0,I.kg)(4076,"Single Tab"),toggled:c.M$.equals("config.zenMode.showTabs","single")},group:"1_config",order:20}),_.ZG.appendMenuItem(_.D8.EditorTabsBarShowTabsZenModeSubmenu,{command:{id:Hd.Xp.ID,title:(0,I.kg)(4077,"Hidden"),toggled:c.M$.equals("config.zenMode.showTabs","none")},group:"1_config",order:30}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{submenu:_.D8.EditorActionsPositionSubmenu,title:(0,I.kg)(4078,"Editor Actions Position"),group:"4_config",order:20}),_.ZG.appendMenuItem(_.D8.EditorActionsPositionSubmenu,{command:{id:Hd.ef.ID,title:(0,I.kg)(4074,"Tab Bar"),toggled:c.M$.equals("config.workbench.editor.editorActionsLocation","default")},group:"1_config",order:10,when:c.M$.equals("config.workbench.editor.showTabs","none").negate()}),_.ZG.appendMenuItem(_.D8.EditorActionsPositionSubmenu,{command:{id:Hd.EQ.ID,title:(0,I.kg)(4079,"Title Bar"),toggled:c.M$.or(c.M$.equals("config.workbench.editor.editorActionsLocation","titleBar"),c.M$.and(c.M$.equals("config.workbench.editor.showTabs","none"),c.M$.equals("config.workbench.editor.editorActionsLocation","default")))},group:"1_config",order:20}),_.ZG.appendMenuItem(_.D8.EditorActionsPositionSubmenu,{command:{id:Hd.b3.ID,title:(0,I.kg)(4080,"Hidden"),toggled:c.M$.equals("config.workbench.editor.editorActionsLocation","hidden")},group:"1_config",order:30}),_.ZG.appendMenuItem(_.D8.EditorTabsBarContext,{command:{id:Hd.cX.ID,title:(0,I.kg)(4081,"Configure Tabs")},group:"9_configure",order:10}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.l2,title:(0,I.kg)(4071,"Close")},group:"1_close",order:10}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.PG,title:(0,I.kg)(4082,"Close Others"),precondition:ji.Ml.notEqualsTo("1")},group:"1_close",order:20}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.JP,title:(0,I.kg)(4083,"Close to the Right"),precondition:c.M$.and(ji.bS.toNegated(),ji.h.negate())},group:"1_close",order:30,when:ji.D9}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.Kw,title:(0,I.kg)(4084,"Close Saved")},group:"1_close",order:40}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.m7,title:(0,I.kg)(4085,"Close All")},group:"1_close",order:50}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.Xh,title:(0,I.kg)(4086,"Reopen Editor With...")},group:"1_open",order:10,when:ji.t0}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.A_,title:(0,I.kg)(4087,"Keep Open"),precondition:ji.F9.toNegated()},group:"3_preview",order:10,when:c.M$.has("config.workbench.editor.enablePreview")}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.g_,title:(0,I.kg)(4088,"Pin")},group:"3_preview",order:20,when:ji.im.toNegated()}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.f2,title:(0,I.kg)(4089,"Unpin")},group:"3_preview",order:20,when:ji.im}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.vY,title:(0,I.kg)(4065,"Split Up")},group:"5_split",order:10}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.kq,title:(0,I.kg)(4066,"Split Down")},group:"5_split",order:20}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.PO,title:(0,I.kg)(4067,"Split Left")},group:"5_split",order:30}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.ys,title:(0,I.kg)(4068,"Split Right")},group:"5_split",order:40}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.jP,title:(0,I.kg)(4090,"Split in Group"),precondition:ji.h.negate()},group:"6_split_in_group",order:10,when:ji.j7}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.VT,title:(0,I.kg)(4091,"Join in Group"),precondition:ji.h.negate()},group:"6_split_in_group",order:10,when:ji.Ms}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.dn,title:(0,I.kg)(4092,"Move into New Window")},group:"7_new_window",order:10}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{command:{id:ur.n2,title:(0,I.kg)(4093,"Copy into New Window")},group:"7_new_window",order:20}),_.ZG.appendMenuItem(_.D8.EditorTitleContext,{submenu:_.D8.EditorTitleContextShare,title:(0,I.kg)(4094,"Share"),group:"11_share",order:-1,when:ji.h.negate()}),_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:Md.Nd,title:(0,I.kg)(4095,"Inline View"),toggled:c.M$.equals("config.diffEditor.renderSideBySide",!1)},group:"1_diff",order:10,when:c.M$.has("isInDiffEditor")}),_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:ur.t6,title:(0,I.kg)(4096,"Show Opened Editors")},group:"3_open",order:10}),_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:ur.m7,title:(0,I.kg)(4085,"Close All")},group:"5_close",order:10}),_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:ur.Kw,title:(0,I.kg)(4084,"Close Saved")},group:"5_close",order:20}),_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:ur.a_,title:(0,I.kg)(4097,"Enable Preview Editors"),toggled:c.M$.has("config.workbench.editor.enablePreview")},group:"7_settings",order:10}),_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:ur._A,title:(0,I.kg)(4098,"Maximize Group")},group:"8_group_operations",order:5,when:c.M$.and(ji.sW.negate(),ji.TK)}),_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:ur._A,title:(0,I.kg)(4099,"Unmaximize Group")},group:"8_group_operations",order:5,when:ji.sW}),_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:ur.Nq,title:(0,I.kg)(4100,"Lock Group"),toggled:ji.cY},group:"8_group_operations",order:10,when:ji.EA.toNegated()}),_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:Hd.En.ID,title:(0,I.kg)(4101,"Configure Editors")},group:"9_configure",order:10});const Yd=1e5,qd=1e6;Zd({id:ur.Ld,title:(0,I.kg)(4102,"Split Editor Right"),icon:xi.W6.splitHorizontal},c.M$.not("splitEditorsVertically"),Yd,{id:ur.kq,title:(0,I.kg)(4103,"Split Editor Down"),icon:xi.W6.splitVertical}),Zd({id:ur.Ld,title:(0,I.kg)(4103,"Split Editor Down"),icon:xi.W6.splitVertical},c.M$.has("splitEditorsVertically"),Yd,{id:ur.ys,title:(0,I.kg)(4102,"Split Editor Right"),icon:xi.W6.splitHorizontal}),Zd({id:ur.B5,title:(0,I.kg)(4104,"Toggle Layout"),icon:xi.W6.editorLayout},ji.Ms,99999),Zd({id:ur.l2,title:(0,I.kg)(4071,"Close"),icon:xi.W6.close},c.M$.and(ji.D9.toNegated(),ji.Fy.toNegated(),ji.im.toNegated()),qd,{id:ur.m7,title:(0,I.kg)(4085,"Close All"),icon:xi.W6.closeAll}),Zd({id:ur.l2,title:(0,I.kg)(4071,"Close"),icon:xi.W6.closeDirty},c.M$.and(ji.D9.toNegated(),ji.Fy,ji.im.toNegated()),qd,{id:ur.m7,title:(0,I.kg)(4085,"Close All"),icon:xi.W6.closeAll}),Zd({id:ur.f2,title:(0,I.kg)(4089,"Unpin"),icon:xi.W6.pinned},c.M$.and(ji.D9.toNegated(),ji.Fy.toNegated(),ji.im),qd,{id:ur.l2,title:(0,I.kg)(4071,"Close"),icon:xi.W6.close}),Zd({id:ur.f2,title:(0,I.kg)(4089,"Unpin"),icon:xi.W6.pinnedDirty},c.M$.and(ji.D9.toNegated(),ji.Fy,ji.im),qd,{id:ur.l2,title:(0,I.kg)(4071,"Close"),icon:xi.W6.close}),Zd({id:ur.eg,title:(0,I.kg)(4105,"Lock Group"),icon:xi.W6.unlock},c.M$.and(ji.EA,ji.cY.toNegated()),999999),Zd({id:ur.BS,title:(0,I.kg)(4106,"Unlock Group"),icon:xi.W6.lock,toggled:c.M$.true()},ji.cY,999999);const Jd=(0,Wt.pU)("diff-editor-previous-change",xi.W6.arrowUp,(0,I.kg)(4107,"Icon for the previous change action in the diff editor."));Zd({id:Md.Hg,title:(0,I.kg)(4108,"Previous Change"),icon:Jd},ji.$Z,10,void 0,vs.R.hasChanges);const Xd=(0,Wt.pU)("diff-editor-next-change",xi.W6.arrowDown,(0,I.kg)(4109,"Icon for the next change action in the diff editor."));Zd({id:Md.D6,title:(0,I.kg)(4110,"Next Change"),icon:Xd},ji.$Z,11,void 0,vs.R.hasChanges),Zd({id:Md.rU,title:(0,I.kg)(4111,"Swap Left and Right Side"),icon:xi.W6.arrowSwap},c.M$.and(ji.$Z,ji.Te),15,void 0,void 0);const eh=(0,Wt.pU)("diff-editor-toggle-whitespace",xi.W6.whitespace,(0,I.kg)(4112,"Icon for the toggle whitespace action in the diff editor."));_.ZG.appendMenuItem(_.D8.EditorTitle,{command:{id:Md.Hq,title:(0,I.kg)(4113,"Show Leading/Trailing Whitespace Differences"),icon:eh,precondition:ji.$Z,toggled:c.M$.equals("config.diffEditor.ignoreTrimWhitespace",!1)},group:"navigation",when:ji.$Z,order:20}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.A_,title:(0,I.aS)(4114,"Keep Editor"),category:x.L.View},when:c.M$.has("config.workbench.editor.enablePreview")}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.g_,title:(0,I.aS)(4115,"Pin Editor"),category:x.L.View}}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.f2,title:(0,I.aS)(4116,"Unpin Editor"),category:x.L.View}}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.l2,title:(0,I.aS)(4117,"Close Editor"),category:x.L.View}}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.mk,title:(0,I.aS)(4118,"Close Pinned Editor"),category:x.L.View}}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.m7,title:(0,I.aS)(4119,"Close All Editors in Group"),category:x.L.View}}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.Kw,title:(0,I.aS)(4120,"Close Saved Editors in Group"),category:x.L.View}}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.PG,title:(0,I.aS)(4121,"Close Other Editors in Group"),category:x.L.View}}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.JP,title:(0,I.aS)(4122,"Close Editors to the Right in Group"),category:x.L.View},when:ji.bS.toNegated()}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.Cz,title:(0,I.aS)(4123,"Close Editor Group"),category:x.L.View},when:ji.RR}),_.ZG.appendMenuItem(_.D8.CommandPalette,{command:{id:ur.Xh,title:(0,I.aS)(4086,"Reopen Editor With..."),category:x.L.View},when:ji.t0}),_.ZG.appendMenuItem(_.D8.MenubarRecentMenu,{group:"1_editor",command:{id:Vd.H8.ID,title:(0,I.kg)(4124,"&&Reopen Closed Editor"),precondition:c.M$.has("canReopenClosedEditor")},order:1}),_.ZG.appendMenuItem(_.D8.MenubarRecentMenu,{group:"z_clear",command:{id:Vd.Ae.ID,title:(0,I.kg)(4125,"&&Clear Recently Opened...")},order:1}),_.ZG.appendMenuItem(_.D8.MenubarFileMenu,{title:(0,I.kg)(4126,"Share"),submenu:_.D8.MenubarShare,group:"45_share",order:1}),_.ZG.appendMenuItem(_.D8.MenubarViewMenu,{group:"2_appearance",title:(0,I.kg)(4127,"Editor &&Layout"),submenu:_.D8.MenubarLayoutMenu,order:2}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"1_split",command:{id:ur.vY,title:{...(0,I.aS)(4128,"Split Up"),mnemonicTitle:(0,I.kg)(4129,"Split &&Up")}},order:1}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"1_split",command:{id:ur.kq,title:{...(0,I.aS)(4130,"Split Down"),mnemonicTitle:(0,I.kg)(4131,"Split &&Down")}},order:2}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"1_split",command:{id:ur.PO,title:{...(0,I.aS)(4132,"Split Left"),mnemonicTitle:(0,I.kg)(4133,"Split &&Left")}},order:3}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"1_split",command:{id:ur.ys,title:{...(0,I.aS)(4134,"Split Right"),mnemonicTitle:(0,I.kg)(4135,"Split &&Right")}},order:4}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"2_split_in_group",command:{id:ur.jP,title:{...(0,I.aS)(4136,"Split in Group"),mnemonicTitle:(0,I.kg)(4137,"Split in &&Group")}},when:ji.j7,order:1}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"2_split_in_group",command:{id:ur.VT,title:{...(0,I.aS)(4138,"Join in Group"),mnemonicTitle:(0,I.kg)(4139,"Join in &&Group")}},when:ji.Ms,order:1}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"3_new_window",command:{id:ur.dn,title:{...(0,I.aS)(4140,"Move Editor into New Window"),mnemonicTitle:(0,I.kg)(4141,"&&Move Editor into New Window")}},order:1}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"3_new_window",command:{id:ur.n2,title:{...(0,I.aS)(4142,"Copy Editor into New Window"),mnemonicTitle:(0,I.kg)(4143,"&&Copy Editor into New Window")}},order:2}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"4_layouts",command:{id:Vd.Yd.ID,title:{...(0,I.aS)(4144,"Single"),mnemonicTitle:(0,I.kg)(4145,"&&Single")}},order:1}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"4_layouts",command:{id:Vd.jv.ID,title:{...(0,I.aS)(4146,"Two Columns"),mnemonicTitle:(0,I.kg)(4147,"&&Two Columns")}},order:3}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"4_layouts",command:{id:Vd.JV.ID,title:{...(0,I.aS)(4148,"Three Columns"),mnemonicTitle:(0,I.kg)(4149,"T&&hree Columns")}},order:4}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"4_layouts",command:{id:Vd.F$.ID,title:{...(0,I.aS)(4150,"Two Rows"),mnemonicTitle:(0,I.kg)(4151,"T&&wo Rows")}},order:5}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"4_layouts",command:{id:Vd.NI.ID,title:{...(0,I.aS)(4152,"Three Rows"),mnemonicTitle:(0,I.kg)(4153,"Three &&Rows")}},order:6}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"4_layouts",command:{id:Vd.XW.ID,title:{...(0,I.aS)(4154,"Grid (2x2)"),mnemonicTitle:(0,I.kg)(4155,"&&Grid (2x2)")}},order:7}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"4_layouts",command:{id:Vd.Zv.ID,title:{...(0,I.aS)(4156,"Two Rows Right"),mnemonicTitle:(0,I.kg)(4157,"Two R&&ows Right")}},order:8}),_.ZG.appendMenuItem(_.D8.MenubarLayoutMenu,{group:"4_layouts",command:{id:Vd.ar.ID,title:{...(0,I.aS)(4158,"Two Columns Bottom"),mnemonicTitle:(0,I.kg)(4159,"Two &&Columns Bottom")}},order:9}),_.ZG.appendMenuItem(_.D8.MenubarGoMenu,{group:"1_history_nav",command:{id:"workbench.action.navigateToLastEditLocation",title:(0,I.kg)(4160,"&&Last Edit Location"),precondition:c.M$.has("canNavigateToLastEditLocation")},order:3}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"1_sideBySide",command:{id:ur.WA,title:(0,I.kg)(4161,"&&First Side in Editor")},when:c.M$.or(ji.Ms,ji.$Z),order:1}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"1_sideBySide",command:{id:ur.uH,title:(0,I.kg)(4162,"&&Second Side in Editor")},when:c.M$.or(ji.Ms,ji.$Z),order:2}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"2_any",command:{id:"workbench.action.nextEditor",title:(0,I.kg)(4163,"&&Next Editor")},order:1}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"2_any",command:{id:"workbench.action.previousEditor",title:(0,I.kg)(4164,"&&Previous Editor")},order:2}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"3_any_used",command:{id:"workbench.action.openNextRecentlyUsedEditor",title:(0,I.kg)(4165,"&&Next Used Editor")},order:1}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"3_any_used",command:{id:"workbench.action.openPreviousRecentlyUsedEditor",title:(0,I.kg)(4166,"&&Previous Used Editor")},order:2}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"4_group",command:{id:"workbench.action.nextEditorInGroup",title:(0,I.kg)(4167,"&&Next Editor in Group")},order:1}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"4_group",command:{id:"workbench.action.previousEditorInGroup",title:(0,I.kg)(4168,"&&Previous Editor in Group")},order:2}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"5_group_used",command:{id:"workbench.action.openNextRecentlyUsedEditorInGroup",title:(0,I.kg)(4169,"&&Next Used Editor in Group")},order:1}),_.ZG.appendMenuItem(_.D8.MenubarSwitchEditorMenu,{group:"5_group_used",command:{id:"workbench.action.openPreviousRecentlyUsedEditorInGroup",title:(0,I.kg)(4170,"&&Previous Used Editor in Group")},order:2}),_.ZG.appendMenuItem(_.D8.MenubarGoMenu,{group:"2_editor_nav",title:(0,I.kg)(4171,"Switch &&Editor"),submenu:_.D8.MenubarSwitchEditorMenu,order:1}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusFirstEditorGroup",title:(0,I.kg)(4172,"Group &&1")},order:1}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusSecondEditorGroup",title:(0,I.kg)(4173,"Group &&2")},order:2}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusThirdEditorGroup",title:(0,I.kg)(4174,"Group &&3"),precondition:ji.RR},order:3}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusFourthEditorGroup",title:(0,I.kg)(4175,"Group &&4"),precondition:ji.RR},order:4}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusFifthEditorGroup",title:(0,I.kg)(4176,"Group &&5"),precondition:ji.RR},order:5}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"2_next_prev",command:{id:"workbench.action.focusNextGroup",title:(0,I.kg)(4177,"&&Next Group"),precondition:ji.RR},order:1}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"2_next_prev",command:{id:"workbench.action.focusPreviousGroup",title:(0,I.kg)(4178,"&&Previous Group"),precondition:ji.RR},order:2}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"3_directional",command:{id:"workbench.action.focusLeftGroup",title:(0,I.kg)(4179,"Group &&Left"),precondition:ji.RR},order:1}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"3_directional",command:{id:"workbench.action.focusRightGroup",title:(0,I.kg)(4180,"Group &&Right"),precondition:ji.RR},order:2}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"3_directional",command:{id:"workbench.action.focusAboveGroup",title:(0,I.kg)(4181,"Group &&Above"),precondition:ji.RR},order:3}),_.ZG.appendMenuItem(_.D8.MenubarSwitchGroupMenu,{group:"3_directional",command:{id:"workbench.action.focusBelowGroup",title:(0,I.kg)(4182,"Group &&Below"),precondition:ji.RR},order:4}),_.ZG.appendMenuItem(_.D8.MenubarGoMenu,{group:"2_editor_nav",title:(0,I.kg)(4183,"Switch &&Group"),submenu:_.D8.MenubarSwitchGroupMenu,order:2}),i(60197);var th=i(8477),ih=i(3230);let oh=class{static{this.ID=ih.w.typeId}constructor(e){this._webviewWorkbenchService=e}canSerialize(e){return this._webviewWorkbenchService.shouldPersist(e)}serialize(e){if(!this.canSerialize(e))return;const t=this.toJson(e);try{return JSON.stringify(t)}catch{return}}deserialize(e,t){const i=this.fromJson(JSON.parse(t));return this._webviewWorkbenchService.openRevivedWebview({webviewInitInfo:{providedViewType:i.providedId,origin:i.origin,title:i.title,options:i.webviewOptions,contentOptions:i.contentOptions,extension:i.extension},viewType:i.viewType,title:i.title,iconPath:i.iconPath,state:i.state,group:i.group})}fromJson(e){return{...e,extension:nh(e.extensionId,e.extensionLocation),iconPath:sh(e.iconPath),state:(t=e.state,"string"==typeof t?t:void 0),webviewOptions:e.options,contentOptions:ah(e.options)};var t}toJson(e){return{origin:e.webview.origin,viewType:e.viewType,providedId:e.providedId,title:e.getName(),options:{...e.webview.options,...e.webview.contentOptions},extensionLocation:e.extension?.location,extensionId:e.extension?.id.value,state:e.webview.state,iconPath:e.iconPath?{light:e.iconPath.light,dark:e.iconPath.dark}:void 0,group:e.group}}};function nh(e,t){if(!e)return;const i=rh(t);return i?{id:new or.H$(e),location:i}:void 0}function sh(e){if(!e)return;const t=rh(e.light),i=rh(e.dark);return t&&i?{light:t,dark:i}:void 0}function rh(e){if(e)try{return"string"==typeof e?v.rz.parse(e):v.rz.from(e)}catch{return}}function ah(e){return{...e,localResourceRoots:e.localResourceRoots?.map((e=>rh(e)))}}oh=(0,s.C)([(0,s.Q)(0,li.Z)],oh);var ch=i(96670);let dh=class extends oh{static{this.ID=nt.H.typeId}constructor(e,t,i){super(e),this._instantiationService=t,this._webviewService=i}serialize(e){const t=e.isDirty(),i={...this.toJson(e),editorResource:e.resource.toJSON(),dirty:t,backupId:t?e.backupId:void 0};try{return JSON.stringify(i)}catch{return}}fromJson(e){return{...super.fromJson(e),editorResource:v.rz.from(e.editorResource),dirty:e.dirty}}deserialize(e,t){const i=this.fromJson(JSON.parse(t)),o=hh(this._webviewService,i),n=this._instantiationService.createInstance(nt.H,{resource:i.editorResource,viewType:i.viewType},o,{startsDirty:i.dirty,backupId:i.backupId});return"number"==typeof i.group&&n.updateGroup(i.group),n}};function hh(e,t){const i=e.createWebviewOverlay({providedViewType:t.viewType,origin:t.origin,title:void 0,options:{purpose:"customEditor",enableFindWidget:t.webviewOptions.enableFindWidget,retainContextWhenHidden:t.webviewOptions.retainContextWhenHidden},contentOptions:t.contentOptions,extension:t.extension});return i.state=t.state,i}dh=(0,s.C)([(0,s.Q)(0,li.Z),(0,s.Q)(1,a._Y),(0,s.Q)(2,ai.a)],dh);let lh=class extends p.jG{static{this.ID="workbench.contrib.complexCustomWorkingCopyEditorHandler"}constructor(e,t,i,o,n){super(),this._instantiationService=e,this._workingCopyBackupService=i,this._webviewService=o,this._register(t.registerHandler(this))}handles(e){return e.resource.scheme===$.ny.vscodeCustomEditor}isOpen(e,t){if(!this.handles(e))return!1;if("jupyter-notebook-ipynb"===e.resource.authority&&t instanceof th.xj)try{const i=JSON.parse(e.resource.query),o=v.rz.from(i);return(0,C.n4)(o,t.resource)}catch{return!1}if(!(t instanceof nt.H))return!1;if(e.resource.authority!==t.viewType.replace(/[^a-z0-9\-_]/gi,"-").toLowerCase())return!1;try{const i=JSON.parse(e.resource.query),o=v.rz.from(i);return(0,C.n4)(o,t.resource)}catch{return!1}}async createEditor(e){const t=await this._workingCopyBackupService.resolve(e);if(!t?.meta)throw new Error(`No backup found for custom editor: ${e.resource}`);const i=t.meta,o=nh(i.extension?.id,i.extension?.location),n=hh(this._webviewService,{viewType:i.viewType,origin:i.webview.origin,webviewOptions:i.webview.options,contentOptions:ah(i.webview.options),state:i.webview.state,extension:o}),s=this._instantiationService.createInstance(nt.H,{resource:v.rz.revive(i.editorResource),viewType:i.viewType},n,{backupId:i.backupId});return s.updateGroup(0),s}};lh=(0,s.C)([(0,s.Q)(0,a._Y),(0,s.Q)(1,Od.U),(0,s.Q)(2,ch.L),(0,s.Q)(3,ai.a),(0,s.Q)(4,Ne.t)],lh);var uh=i(43756);u.O.as(Q.q5.EditorPane).registerEditorPane(oo.nQ.create(uh.h,uh.h.ID,"Webview Editor"),[new o.d(nt.H)]),u.O.as(Q.q5.EditorFactory).registerEditorSerializer(dh.ID,dh),(0,$o.tr)(lh.ID,lh,1);const ph=c.M$.and(c.M$.equals("activeEditor",uh.h.ID),vs.R.focus.toNegated());class gh extends _.L{static{this.ID="editor.action.webvieweditor.showFind"}static{this.LABEL=(0,I.kg)(9920,"Show find")}constructor(){super({id:gh.ID,title:gh.LABEL,keybinding:{when:c.M$.and(ph,Pt.yK),primary:2084,weight:100}})}run(e){fh(e)?.showFind()}}class mh extends _.L{static{this.ID="editor.action.webvieweditor.hideFind"}static{this.LABEL=(0,I.kg)(9921,"Stop find")}constructor(){super({id:mh.ID,title:mh.LABEL,keybinding:{when:c.M$.and(ph,Pt.fu),primary:9,weight:100}})}run(e){fh(e)?.hideFind()}}class bh extends _.L{static{this.ID="editor.action.webvieweditor.findNext"}static{this.LABEL=(0,I.kg)(9922,"Find next")}constructor(){super({id:bh.ID,title:bh.LABEL,keybinding:{when:c.M$.and(ph,Pt.iU),primary:3,weight:100}})}run(e){fh(e)?.runFindAction(!1)}}class wh extends _.L{static{this.ID="editor.action.webvieweditor.findPrevious"}static{this.LABEL=(0,I.kg)(9923,"Find previous")}constructor(){super({id:wh.ID,title:wh.LABEL,keybinding:{when:c.M$.and(ph,Pt.iU),primary:1027,weight:100}})}run(e){fh(e)?.runFindAction(!0)}}class vh extends _.L{static{this.ID="workbench.action.webview.reloadWebviewAction"}static{this.LABEL=(0,I.aS)(9924,"Reload Webviews")}constructor(){super({id:vh.ID,title:vh.LABEL,category:x.L.Developer,menu:[{id:_.D8.CommandPalette}]})}async run(e){const t=e.get(ai.a);for(const e of t.webviews)e.reload()}}function fh(e){const t=e.get(be.I).activeEditor;return t instanceof ih.w?t.webview:void 0}u.O.as(Q.q5.EditorPane).registerEditorPane(oo.nQ.create(uh.h,uh.h.ID,(0,I.kg)(4184,"webview editor")),[new o.d(ih.w)]);let yh=class extends p.jG{static{this.ID="workbench.contrib.webviewPanel"}constructor(e,t){super(),this.editorGroupService=t,this._register(e.onWillOpenEditor((e=>{const i=t.getGroup(e.groupId);i&&this.onEditorOpening(e.editor,i)})))}onEditorOpening(e,t){if(!(e instanceof ih.w)||e.typeId!==ih.w.typeId)return;if(t.contains(e))return;let i;const o=this.editorGroupService.groups;for(const t of o)if(t.contains(e)){i=t;break}i&&i.closeEditor(e)}};yh=(0,s.C)([(0,s.Q)(0,be.I),(0,s.Q)(1,U.m)],yh),(0,$o.tr)(yh.ID,yh,1),u.O.as(Q.q5.EditorFactory).registerEditorSerializer(oh.ID,oh),(0,_.ug)(gh),(0,_.ug)(mh),(0,_.ug)(bh),(0,_.ug)(wh),(0,_.ug)(vh);var Ch=i(29568),Sh=i(73643),kh=i(42542);let _h=class extends p.jG{constructor(e,t,i,o,n){super(),this.configurationService=t,this.logService=i,this.preferencesService=o,this.quickInputService=n,this._providers=new uo.w,this._register(e.registerExternalOpener(this))}registerExternalOpenerProvider(e){return{dispose:this._providers.push(e)}}async getOpeners(e,t,i,o){const n=await this.getAllOpenersForUri(e);if(0===n.size)return[];if(i.preferredOpenerId){if(i.preferredOpenerId===Ch.fm)return[];const e=n.get(i.preferredOpenerId);if(e)return[e]}const s=this.getConfiguredOpenerForUri(n,e);if(s)return s===Ch.fm?[]:[s];const r=[];if(await Promise.all(Array.from(n.values()).map((async e=>{let t;try{t=await e.canOpen(i.sourceUri,o)}catch(e){return void this.logService.error(e)}switch(t){case qn.nA.Option:case qn.nA.Default:case qn.nA.Preferred:r.push({opener:e,priority:t})}}))),0===r.length)return[];const a=r.filter((e=>e.priority===qn.nA.Preferred)).at(0);return a?[a.opener]:!t&&r.every((e=>e.priority===qn.nA.Option))?[]:r.map((e=>e.opener))}async openExternal(e,t,i){const o="string"==typeof e?v.rz.parse(e):e,n=await this.getOpeners(o,!1,t,i);return 0!==n.length&&(1===n.length?n[0].openExternalUri(o,t,i):this.showOpenerPrompt(n,o,t,i))}async getOpener(e,t,i){const o=await this.getOpeners(e,!0,t,i);if(o.length>=1)return o[0]}async getAllOpenersForUri(e){const t=new Map;return await Promise.all(Sh.f.map(this._providers,(async i=>{for await(const o of i.getOpeners(e))t.set(o.id,o)}))),t}getConfiguredOpenerForUri(e,t){const i=this.configurationService.getValue(Ch.bp)||{};for(const[o,n]of Object.entries(i))if((0,kh.V)(t,o)){if(n===Ch.fm)return"default";const t=e.get(n);if(t)return t}}async showOpenerPrompt(e,t,i,o){const n=e.map((e=>({label:e.label,opener:e})));n.push({label:Di.HZ?(0,I.kg)(3107,"Open in new browser window"):(0,I.kg)(3108,"Open in default browser"),opener:void 0},{type:"separator"},{label:(0,I.kg)(3109,"Configure default opener..."),opener:"configureDefault"});const s=await this.quickInputService.pick(n,{placeHolder:(0,I.kg)(3110,"How would you like to open: {0}",t.toString())});return!s||void 0!==s.opener&&("configureDefault"===s.opener?(await this.preferencesService.openUserSettings({jsonEditor:!0,revealSetting:{key:Ch.bp,edit:!0}}),!0):s.opener.openExternalUri(t,i,o))}};_h=(0,s.C)([(0,s.Q)(0,Yo.C),(0,s.Q)(1,z.p),(0,s.Q)(2,k.r),(0,s.Q)(3,rc.v),(0,s.Q)(4,j.G)],_h),u.O.as(go.Fd.Configuration).registerConfiguration(Ch.UM),(0,Fe.A)('@keyframes wiggle{0%{transform:rotate(0) scale(1)}15%,45%{transform:rotate(.04turn) scale(1.1)}30%,60%{transform:rotate(-.04turn) scale(1.2)}to{transform:rotate(0) scale(1)}}.monaco-workbench .statusbar DIV#status\\.languageStatus A>SPAN.codicon.wiggle{animation-duration:.8s;animation-iteration-count:1;animation-name:wiggle}@keyframes flash{0%{background-color:initial}50%{background-color:var(--vscode-statusBarItem-prominentBackground)}to{background-color:initial}}.monaco-workbench .statusbar DIV#status\\.languageStatus.flash A{animation-duration:.8s;animation-iteration-count:1;animation-name:flash}.monaco-workbench .hover-language-status{display:flex}.monaco-workbench .hover-language-status:not(:last-child){border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench .hover-language-status>.severity{display:none;flex:1;margin:auto;padding-right:8px}.monaco-workbench .hover-language-status>.severity.sev3{color:var(--vscode-notificationsErrorIcon-foreground)}.monaco-workbench .hover-language-status>.severity.sev2{color:var(--vscode-notificationsInfoIcon-foreground)}.monaco-workbench .hover-language-status>.severity.show{display:inherit}.monaco-workbench .hover-language-status>.element{display:flex;flex-grow:100;justify-content:space-between;vertical-align:middle}.monaco-workbench .hover-language-status>.element>.left>.detail:not(:empty):before{content:"\\2013";opacity:.6;padding:0 4px}.monaco-workbench .hover-language-status>.element>.left>.label:empty{display:none}.monaco-workbench .hover-language-status>.element .left{margin:auto 0}.monaco-workbench .hover-language-status>.element .right{display:flex;margin:auto 0}.monaco-workbench .hover-language-status>.element .right:not(:empty){padding-left:16px}.monaco-workbench .hover-language-status>.element .right .monaco-link{margin:auto 0;text-decoration:var(--text-link-decoration);white-space:nowrap}.monaco-workbench .hover-language-status>.element .right .monaco-action-bar:not(:first-child){padding-left:8px}',{});var xh,Eh=i(12707),Dh=i(41977),Ih=i(66512),Vh=i(9126);class Mh{constructor(e,t){this.combined=e,this.dedicated=t}isEqual(e){return(0,f.aI)(this.combined,e.combined)&&(0,f.aI)(this.dedicated,e.dedicated)}}let Th=class{constructor(e,t){this._storageService=e,this._key=t}get value(){return this._storageService.getNumber(this._key,0,0)}increment(){const e=this.value+1;return this._storageService.store(this._key,e,0,1),e}};Th=(0,s.C)([(0,s.Q)(0,h.C)],Th);let Ah=class extends p.jG{constructor(e){super(),this.editorGroupService=e;for(const t of e.parts)this.createLanguageStatus(t);this._register(e.onDidCreateAuxiliaryEditorPart((e=>this.createLanguageStatus(e))))}createLanguageStatus(e){const t=new p.Cm;m.Jh.once(e.onWillDispose)((()=>t.dispose()));const i=this.editorGroupService.getScopedInstantiationService(e);t.add(i.createInstance(Lh))}};Ah=(0,s.C)([(0,s.Q)(0,U.m)],Ah);let Lh=class{static{xh=this}static{this._id="status.languageStatus"}static{this._keyDedicatedItems="languageStatus.dedicated"}constructor(e,t,i,o,n,s){this._languageStatusService=e,this._statusBarService=t,this._editorService=i,this._hoverService=o,this._openerService=n,this._storageService=s,this._disposables=new p.Cm,this._dedicated=new Set,this._dedicatedEntries=new Map,this._renderDisposables=new p.Cm,s.onDidChangeValue(0,xh._keyDedicatedItems,this._disposables)(this._handleStorageChange,this,this._disposables),this._restoreState(),this._interactionCounter=new Th(s,"languageStatus.interactCount"),e.onDidChange(this._update,this,this._disposables),i.onDidActiveEditorChange(this._update,this,this._disposables),this._update(),t.onDidChangeEntryVisibility((e=>{!e.visible&&this._dedicated.has(e.id)&&(this._dedicated.delete(e.id),this._update(),this._storeState())}),void 0,this._disposables)}dispose(){this._disposables.dispose(),this._combinedEntry?.dispose(),(0,p.AS)(this._dedicatedEntries.values()),this._renderDisposables.dispose()}_handleStorageChange(){this._restoreState(),this._update()}_restoreState(){const e=this._storageService.get(xh._keyDedicatedItems,0,"[]");try{const t=JSON.parse(e);this._dedicated=new Set(t)}catch{this._dedicated.clear()}}_storeState(){if(0===this._dedicated.size)this._storageService.remove(xh._keyDedicatedItems,0);else{const e=JSON.stringify(Array.from(this._dedicated.keys()));this._storageService.store(xh._keyDedicatedItems,e,0,0)}}_createViewModel(e){if(!e?.hasModel())return new Mh([],[]);const t=this._languageStatusService.getLanguageStatus(e.getModel()),i=[],o=[];for(const e of t)this._dedicated.has(e.id)&&o.push(e),i.push(e);return new Mh(i,o)}_update(){const e=(0,po.jA)(this._editorService.activeTextEditorControl),t=this._createViewModel(e);if(this._model?.isEqual(t))return;if(this._renderDisposables.clear(),this._model=t,e?.onDidChangeModelLanguage(this._update,this,this._renderDisposables),0===t.combined.length)this._combinedEntry?.dispose(),this._combinedEntry=void 0;else{const[i]=t.combined,o=i.severity>=X.A.Warning,n=xh._severityToComboCodicon(i.severity);let s=!1;const r=[],a=document.createElement("div");for(const e of t.combined){const i=t.dedicated.includes(e);a.appendChild(this._renderStatus(e,o,i,this._renderDisposables)),r.push(xh._accessibilityInformation(e).label),s=s||!i&&e.busy}const c={name:(0,I.kg)(4185,"Editor Language Status"),ariaLabel:(0,I.kg)(4186,"Editor Language Status: {0}",r.join(", next: ")),tooltip:a,command:Ih.q6,text:Ph(n,s)};this._combinedEntry?this._combinedEntry.update(c):this._combinedEntry=this._statusBarService.addEntry(c,xh._id,1,{id:"status.editor.mode",alignment:0,compact:!0});const d=this._interactionCounter.value>=3,h=(0,ke.zk)(e?.getContainerDomNode()),l=h.document.querySelector(".monaco-workbench .statusbar DIV#status\\.languageStatus A>SPAN.codicon"),u=h.document.querySelector(".monaco-workbench .statusbar DIV#status\\.languageStatus");if((0,ke.sb)(l)&&u){const e="wiggle",t="flash";s?(l.classList.remove(e),u.classList.remove(t)):(l.classList.toggle(e,o||!d),this._renderDisposables.add((0,ke.ko)(l,"animationend",(t=>l.classList.remove(e)))),u.classList.toggle(t,o),this._renderDisposables.add((0,ke.ko)(u,"animationend",(e=>u.classList.remove(t)))))}if(!d){const e=h.document.querySelector(".monaco-workbench .context-view");if((0,ke.sb)(e)){const t=new MutationObserver((()=>{h.document.contains(a)&&(this._interactionCounter.increment(),t.disconnect())}));t.observe(e,{childList:!0,subtree:!0}),this._renderDisposables.add((0,p.s)((()=>t.disconnect())))}}}const i=new Map;for(const e of t.dedicated){const t=xh._asStatusbarEntry(e);let o=this._dedicatedEntries.get(e.id);o?(o.update(t),this._dedicatedEntries.delete(e.id)):o=this._statusBarService.addEntry(t,e.id,1,{id:"status.editor.mode",alignment:1}),i.set(e.id,o)}(0,p.AS)(this._dedicatedEntries.values()),this._dedicatedEntries=i}_renderStatus(e,t,i,o){const n=document.createElement("div");n.classList.add("hover-language-status");const s=document.createElement("div");s.classList.add("severity",`sev${e.severity}`),s.classList.toggle("show",t);const r=xh._severityToSingleCodicon(e.severity);(0,ke.BC)(s,...(0,Eh.n)(r)),n.appendChild(s);const a=document.createElement("div");a.classList.add("element"),n.appendChild(a);const c=document.createElement("div");c.classList.add("left"),a.appendChild(c);const d=document.createElement("span");d.classList.add("label");const h="string"==typeof e.label?e.label:e.label.value;(0,ke.BC)(d,...(0,Eh.n)(Ph(h,e.busy))),c.appendChild(d);const l=document.createElement("span");l.classList.add("detail"),this._renderTextPlus(l,e.detail,o),c.appendChild(l);const u=document.createElement("div");u.classList.add("right"),a.appendChild(u);const{command:p}=e;p&&o.add(new Vh.N(u,{label:p.title,title:p.tooltip,href:v.rz.from({scheme:"command",path:p.id,query:p.arguments&&JSON.stringify(p.arguments)}).toString()},{hoverDelegate:pr.H},this._hoverService,this._openerService));const g=new Ci.E(u,{hoverDelegate:pr.H}),m=i?(0,I.kg)(4187,"Remove from Status Bar"):(0,I.kg)(4188,"Add to Status Bar");let b;return g.setAriaLabel(m),o.add(g),b=i?new vi.rc("unpin",m,S.L0.asClassName(xi.W6.pinned),!0,(()=>{this._dedicated.delete(e.id),this._statusBarService.updateEntryVisibility(e.id,!1),this._update(),this._storeState()})):new vi.rc("pin",m,S.L0.asClassName(xi.W6.pin),!0,(()=>{this._dedicated.add(e.id),this._statusBarService.updateEntryVisibility(e.id,!0),this._update(),this._storeState()})),g.push(b,{icon:!0,label:!1}),o.add(b),n}static _severityToComboCodicon(e){switch(e){case X.A.Error:return"$(bracket-error)";case X.A.Warning:return"$(bracket-dot)";default:return"$(bracket)"}}static _severityToSingleCodicon(e){switch(e){case X.A.Error:return"$(error)";case X.A.Warning:return"$(info)";default:return"$(check)"}}_renderTextPlus(e,t,i){for(const o of(0,Vi.q)(t).nodes)if("string"==typeof o){const t=(0,Eh.n)(o);(0,ke.BC)(e,...t)}else i.add(new Vh.N(e,o,void 0,this._hoverService,this._openerService))}static _accessibilityInformation(e){if(e.accessibilityInfo)return e.accessibilityInfo;const t="string"==typeof e.label?e.label:e.label.value;return e.detail?{label:(0,I.kg)(4189,"{0}, {1}",t,e.detail)}:{label:(0,I.kg)(4190,"{0}",t)}}static _asStatusbarEntry(e){let t;e.severity===X.A.Warning?t="warning":e.severity===X.A.Error&&(t="error");const i="string"==typeof e.label?e.label:e.label.shortValue;return{name:(0,I.kg)(4191,"{0} (Language Status)",e.name),text:Ph(i,e.busy),ariaLabel:xh._accessibilityInformation(e).label,role:e.accessibilityInfo?.role,tooltip:e.command?.tooltip||new cr.Bc(e.detail,{isTrusted:!0,supportThemeIcons:!0}),kind:t,command:e.command}}};function Ph(e,t){return(0,Ht.VW)([""!==e&&e,t&&"$(loading~spin)"],"  ")}Lh=xh=(0,s.C)([(0,s.Q)(0,Dh.L),(0,s.Q)(1,bi.S),(0,s.Q)(2,be.I),(0,s.Q)(3,Rt.T),(0,s.Q)(4,Yo.C),(0,s.Q)(5,h.C)],Lh),u.O.as($o.Fd.Workbench).registerWorkbenchContribution(Ah,3),(0,_.ug)(class extends _.L{constructor(){super({id:"editor.inlayHints.Reset",title:(0,I.aS)(4192,"Reset Language Status Interaction Counter"),category:x.L.View,f1:!0})}run(e){e.get(h.C).remove("languageStatus.interactCount",0)}});var Rh=i(23286),Bh=i(27064),Oh=i(5209),Nh=i(19430),Fh=i(76815),Gh=i(35147);(0,Fe.A)('.monaco-workbench .merge-editor .code-view>.header{align-content:center;display:flex;height:30px;overflow:hidden;padding:0 10px}.monaco-workbench .merge-editor .code-view>.header>span{align-self:center;overflow:hidden;padding-right:6px;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .merge-editor .code-view>.header>span.title{flex-shrink:0}.monaco-workbench .merge-editor .code-view>.header>span.description{align-items:center;color:var(--vscode-descriptionForeground);display:flex;flex-shrink:0;font-size:12px}.monaco-workbench .merge-editor .code-view.result>.header>.description{display:inline;flex-shrink:1}.monaco-workbench .merge-editor .code-view.result>.header>.detail,.monaco-workbench .merge-editor .code-view.result>.header>.toolbar{flex-shrink:0}.monaco-workbench .merge-editor .code-view>.header>span.description .codicon{color:var(--vscode-descriptionForeground);font-size:14px}.monaco-workbench .merge-editor .code-view>.header>span.detail{color:var(--vscode-descriptionForeground);font-size:12px;margin-left:auto}.monaco-workbench .merge-editor .code-view>.header>span.detail .codicon{font-size:13px}.monaco-workbench .merge-editor .code-view.input>.header>span.detail:before{content:"•";opacity:.5;padding-right:3px}.monaco-workbench .merge-editor .code-view.input>.header>span.detail{margin-left:0}.monaco-workbench .merge-editor .code-view.input>.header>span.toolbar{flex-shrink:0;margin-left:auto}.monaco-workbench .merge-editor .code-view>.container{display:flex;flex-direction:row}.monaco-workbench .merge-editor .code-view>.container>.gutter{flex-grow:0;flex-shrink:0;overflow:hidden;position:relative;width:24px}.monaco-workbench .merge-editor .merge-editor-diff{background-color:var(--vscode-mergeEditor-change-background)}.monaco-workbench .merge-editor .merge-editor-diff-word{background-color:var(--vscode-mergeEditor-change-word-background)}.monaco-workbench .merge-editor .merge-editor-block:not(.handled):not(.focused){border:1px solid var(--vscode-mergeEditor-conflict-unhandledUnfocused-border)}.monaco-workbench .merge-editor .merge-editor-block:not(.handled).focused{border:2px solid var(--vscode-mergeEditor-conflict-unhandledFocused-border)}.monaco-workbench .merge-editor .merge-editor-block.handled:not(.focused){border:1px solid var(--vscode-mergeEditor-conflict-handledUnfocused-border)}.monaco-workbench .merge-editor .merge-editor-block.handled.focused{border:1px solid var(--vscode-mergeEditor-conflict-handledFocused-border)}.merge-editor-block.use-simplified-decorations.input.i1,.monaco-workbench .merge-editor .merge-editor-simplified.input.i1{background-color:var(--vscode-mergeEditor-conflict-input1-background)}.merge-editor-block.use-simplified-decorations.input.i2,.monaco-workbench .merge-editor .merge-editor-simplified.input.i2{background-color:var(--vscode-mergeEditor-conflict-input2-background)}.gutter.monaco-editor>div{position:absolute}.merge-accept-gutter-marker{margin-left:4px;width:28px}.merge-accept-gutter-marker .background{height:100%;position:absolute;width:50%}.merge-accept-gutter-marker.multi-line.focused .background{border:2px solid var(--vscode-mergeEditor-conflict-unhandledFocused-border);border-right:0}.merge-accept-gutter-marker.multi-line .background{border:2px solid var(--vscode-mergeEditor-conflict-unhandledUnfocused-border);border-bottom-left-radius:3px;border-right:0;border-top-left-radius:3px}.merge-accept-gutter-marker.multi-line.handled.focused .background{border:2px solid var(--vscode-mergeEditor-conflict-handledFocused-border);border-right:0}.merge-accept-gutter-marker.multi-line.handled .background{border:2px solid var(--vscode-checkbox-border);border-right:0}.focused .accept-conflict-group.monaco-custom-toggle{border:1px solid var(--vscode-mergeEditor-conflict-unhandledFocused-border)}.accept-conflict-group.monaco-custom-toggle{border:1px solid var(--vscode-mergeEditor-conflict-unhandledUnfocused-border)}.handled.focused .accept-conflict-group.monaco-custom-toggle{border:1px solid var(--vscode-mergeEditor-conflict-handledFocused-border)}.handled .accept-conflict-group.monaco-custom-toggle{border:1px solid var(--vscode-checkbox-border)}.merge-accept-gutter-marker.multi-line .background{left:8px;width:10px}.merge-accept-gutter-marker .checkbox{position:absolute;width:100%}.accept-conflict-group.monaco-custom-toggle{background-color:var(--vscode-checkbox-border);background-size:16px!important;border-radius:3px;height:18px;margin-left:0;margin-right:0;opacity:1;padding:0;width:18px}.merge-accept-gutter-marker .checkbox-background{background:var(--vscode-editor-background);display:flex}.conflict-zone-root{align-content:center;align-items:center;background-color:var(--vscode-mergeEditor-change-background);border:1px solid var(--vscode-mergeEditor-conflict-unhandledUnfocused-border);display:flex;height:90%}.conflict-zone-root .dots{margin:0 10px}.conflict-zone-root pre{display:"inline";font-family:var(--monaco-monospace-font)}.conflict-zone-root .text{align-items:center;background:var(--vscode-mergeEditor-conflictingLines-background);display:flex;height:100%;margin-left:auto;overflow:hidden;padding:0 8px;white-space:nowrap}.focused.conflict-zone .conflict-zone-root{border:1px solid var(--vscode-mergeEditor-conflict-unhandledFocused-border)}.merge-editor-conflict-actions{color:var(--vscode-editorCodeLens-foreground);display:inline-block;margin:0 3px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.merge-editor-conflict-actions>a,.merge-editor-conflict-actions>span{user-select:none;-webkit-user-select:none;white-space:nowrap}.merge-editor-conflict-actions>a{text-decoration:none}.merge-editor-conflict-actions>a:hover{cursor:pointer}.merge-editor-conflict-actions>a:hover,.merge-editor-conflict-actions>a:hover .codicon{color:var(--vscode-editorLink-activeForeground)!important}.merge-editor-conflict-actions .codicon{color:currentColor!important;color:var(--vscode-editorCodeLens-foreground);vertical-align:middle}.merge-editor-conflict-actions>a:hover .codicon:before{cursor:pointer}.fixed-zone-widget{width:100%}.merge-editor-diff-empty-word.base{border-left:3px solid var(--vscode-mergeEditor-changeBase-word-background);margin-left:3px}.merge-editor-diff-empty-word.input{border-left:3px solid var(--vscode-mergeEditor-change-word-background);margin-left:3px}.merge-editor-diff-word.base{background-color:var(--vscode-mergeEditor-changeBase-word-background)}.merge-editor-diff.base{background-color:var(--vscode-mergeEditor-changeBase-background)}',{});let Wh=class{};Symbol.hasInstance,Wh=Nc.z;var zh=i(49125),Hh=i(78169),Qh=i(14970);(0,ct.x1)("mergeEditor.change.background","#9bb95533",(0,I.kg)(11489,"The background color for changes.")),(0,ct.x1)("mergeEditor.change.word.background",{dark:"#9ccc2c33",light:"#9ccc2c66",hcDark:"#9ccc2c33",hcLight:"#9ccc2c66"},(0,I.kg)(11490,"The background color for word changes.")),(0,ct.x1)("mergeEditor.changeBase.background",{dark:"#4B1818FF",light:"#FFCCCCFF",hcDark:"#4B1818FF",hcLight:"#FFCCCCFF"},(0,I.kg)(11491,"The background color for changes in base.")),(0,ct.x1)("mergeEditor.changeBase.word.background",{dark:"#6F1313FF",light:"#FFA3A3FF",hcDark:"#6F1313FF",hcLight:"#FFA3A3FF"},(0,I.kg)(11492,"The background color for word changes in base.")),(0,ct.x1)("mergeEditor.conflict.unhandledUnfocused.border",{dark:"#ffa6007a",light:"#ffa600FF",hcDark:"#ffa6007a",hcLight:"#ffa6007a"},(0,I.kg)(11493,"The border color of unhandled unfocused conflicts.")),(0,ct.x1)("mergeEditor.conflict.unhandledFocused.border","#ffa600",(0,I.kg)(11494,"The border color of unhandled focused conflicts.")),(0,ct.x1)("mergeEditor.conflict.handledUnfocused.border","#86868649",(0,I.kg)(11495,"The border color of handled unfocused conflicts.")),(0,ct.x1)("mergeEditor.conflict.handledFocused.border","#c1c1c1cc",(0,I.kg)(11496,"The border color of handled focused conflicts."));const Uh=(0,ct.x1)("mergeEditor.conflict.handled.minimapOverViewRuler","#adaca8ee",(0,I.kg)(11497,"The foreground color for changes in input 1.")),$h=(0,ct.x1)("mergeEditor.conflict.unhandled.minimapOverViewRuler","#fcba03FF",(0,I.kg)(11498,"The foreground color for changes in input 1."));(0,ct.x1)("mergeEditor.conflictingLines.background","#ffea0047",(0,I.kg)(11499,'The background of the "Conflicting Lines" text.')),(0,ct.x1)("mergeEditor.conflict.input1.background",(0,ct.JO)(ht.dc,.4),(0,I.kg)(11500,"The background color of decorations in input 1.")),(0,ct.x1)("mergeEditor.conflict.input2.background",(0,ct.JO)(ht.id,.4),(0,I.kg)(11501,"The background color of decorations in input 2."));var Kh=i(31125);class jh extends p.jG{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=(0,Gh.y0)(this,this._editor.onDidScrollChange,(e=>this._editor.getScrollTop())),this.isScrollTopZero=this.scrollTop.map((e=>0===e)),this.modelAttached=(0,Gh.y0)(this,this._editor.onDidChangeModel,(e=>this._editor.hasModel())),this.editorOnDidChangeViewZones=(0,Gh.yQ)("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=(0,Gh.yQ)("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=(0,Gh.Yd)("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const o=this._domNode.appendChild((0,ke.h)("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),n=new ResizeObserver((()=>{(0,Oh.Rn)((e=>{this.domNodeSizeChanged.trigger(e)}))}));n.observe(this._domNode),this._register((0,p.s)((()=>n.disconnect()))),this._register((0,Nh.fm)((e=>{o.className=this.isScrollTopZero.read(e)?"":"scroll-decoration"}))),this._register((0,Nh.fm)((e=>this.render(e))))}dispose(){super.dispose(),(0,ke.Ln)(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),o=new Set(this.views.keys());if(i.length>0){const n=i[0],s=new Kh.M(n.startLineNumber,n.endLineNumber-n.startLineNumber).deltaEnd(1),r=this.itemProvider.getIntersectingGutterItems(s,e);for(const e of r){if(!e.range.touches(s))continue;o.delete(e.id);let i=this.views.get(e.id);if(i)i.gutterItemView.update(e);else{const t=document.createElement("div");this._domNode.appendChild(t);const o=this.itemProvider.createView(e,t);i=new Zh(o,t),this.views.set(e.id,i)}const n=e.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(e.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(e.range.startLineNumber-1,!1)-t,r=this._editor.getBottomForLineNumber(e.range.endLineNumberExclusive-1,!0)-t-n;i.domNode.style.top=`${n}px`,i.domNode.style.height=`${r}px`,i.gutterItemView.layout(n,r,0,this._domNode.clientHeight)}}for(const e of o){const t=this.views.get(e);t.gutterItemView.dispose(),t.domNode.remove(),this.views.delete(e)}}}class Zh{constructor(e,t){this.gutterItemView=e,this.domNode=t}}var Yh=i(83915),qh=i(47324),Jh=i(33825),Xh=i(51053);class el extends p.jG{updateOptions(e){this.editor.updateOptions(e)}constructor(e,t,i){super(),this.instantiationService=e,this.viewModel=t,this.configurationService=i,this.model=this.viewModel.map((e=>e?.model)),this.htmlElements=(0,ke.h)("div.code-view",[(0,ke.h)("div.header@header",[(0,ke.h)("span.title@title"),(0,ke.h)("span.description@description"),(0,ke.h)("span.detail@detail"),(0,ke.h)("span.toolbar@toolbar")]),(0,ke.h)("div.container",[(0,ke.h)("div.gutter@gutterDiv"),(0,ke.h)("div@editor")])]),this._onDidViewChange=new m.vl,this.view={element:this.htmlElements.root,minimumWidth:Xh.dp.width,maximumWidth:Xh.bZ.width,minimumHeight:Xh.dp.height,maximumHeight:Xh.bZ.height,onDidChange:this._onDidViewChange.event,layout:(e,t,i,o)=>{(0,Hh.eC)(this.htmlElements.root,{width:e,height:t,top:i,left:o}),this.editor.layout({width:e-this.htmlElements.gutterDiv.clientWidth,height:t-this.htmlElements.header.clientHeight})}},this.checkboxesVisible=(0,Qh.V)("mergeEditor.showCheckboxes",!1,this.configurationService),this.showDeletionMarkers=(0,Qh.V)("mergeEditor.showDeletionMarkers",!0,this.configurationService),this.useSimplifiedDecorations=(0,Qh.V)("mergeEditor.useSimplifiedDecorations",!1,this.configurationService),this.editor=this.instantiationService.createInstance(Oc.x,this.htmlElements.editor,{},{contributions:this.getEditorContributions()}),this.isFocused=(0,Gh.y0)(this,m.Jh.any(this.editor.onDidBlurEditorWidget,this.editor.onDidFocusEditorWidget),(()=>this.editor.hasWidgetFocus())),this.cursorPosition=(0,Gh.y0)(this,this.editor.onDidChangeCursorPosition,(()=>this.editor.getPosition())),this.selection=(0,Gh.y0)(this,this.editor.onDidChangeCursorSelection,(()=>this.editor.getSelections())),this.cursorLineNumber=this.cursorPosition.map((e=>e?.lineNumber))}getEditorContributions(){return Ge.dS.getEditorContributions().filter((e=>e.id!==qh.WR.ID&&e.id!==Yh.C.ID))}}function tl(e,t){const i=(0,Fh.un)((i=>{const o=e.viewModel.read(i);if(!o)return[];const n=o.selectionInBase.read(i);return n&&n.sourceEditor!==e?n.rangesInBase.map((e=>t(e,o))):[]}));return(0,Nh.fm)((t=>{const o=i.read(t);0!==o.length&&e.editor.setSelections(o.map((e=>new Xc.L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn))))}))}let il=class extends p.jG{constructor(e,t,i){super();const o=i.createInstance(Jh.m,t,e,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:e=>"primary"===e}});this._store.add(o)}};il=(0,s.C)([(0,s.Q)(2,a._Y)],il);let ol=class extends el{constructor(e,t,i){super(t,e,i),this.decorations=(0,Fh.un)(this,(e=>{const t=this.viewModel.read(e);if(!t)return[];const i=t.model,o=i.base,n=t.activeModifiedBaseRange.read(e),s=t.showNonConflictingChanges.read(e),r=this.showDeletionMarkers.read(e),a=[];for(const c of i.modifiedBaseRanges.read(e)){const d=c.baseRange;if(!d)continue;const h=i.isHandled(c).read(e);if(!c.isConflicting&&h&&!s)continue;const l=["merge-editor-block"];let u=[0,0,0,0];h&&l.push("handled"),c===n&&(l.push("focused"),u=[0,2,0,2]),l.push("base");const p=t.baseShowDiffAgainst.read(e);if(p)for(const e of c.getInputDiffs(p)){const t=e.inputRange.toInclusiveRange();t&&a.push({range:t,options:{className:"merge-editor-diff base",description:"Merge Editor",isWholeLine:!0}});for(const t of e.rangeMappings)!r&&t.inputRange.isEmpty()||a.push({range:t.inputRange,options:{className:t.inputRange.isEmpty()?"merge-editor-diff-empty-word base":"merge-editor-diff-word base",description:"Merge Editor",showIfCollapsed:!0}})}a.push({range:d.toInclusiveRangeOrEmpty(),options:{showIfCollapsed:!0,blockClassName:l.join(" "),blockPadding:u,blockIsAfterEnd:d.startLineNumber>o.getLineCount(),description:"Merge Editor",minimap:{position:2,color:{id:h?Uh:$h}},overviewRuler:c.isConflicting?{position:ds.A5.Center,color:{id:h?Uh:$h}}:void 0}})}return a})),this._register(tl(this,((e,t)=>e))),this._register(t.createInstance(il,_.D8.MergeBaseToolbar,this.htmlElements.title)),this._register((0,Nh.yC)(((e,t)=>{this.checkboxesVisible.read(e)&&t.add(new jh(this.editor,this.htmlElements.gutterDiv,{getIntersectingGutterItems:(e,t)=>[],createView:(e,t)=>{throw new xe.D7}}))}))),this._register((0,Nh.fm)((e=>{const t=this.viewModel.read(e);if(!t)return;this.editor.setModel(t.model.base),(0,ke.Ln)(this.htmlElements.title,...(0,Eh.n)((0,I.kg)(11485,"Base")));const i=t.baseShowDiffAgainst.read(e);let o;if(i){const e=(0,I.kg)(11486,"Comparing with {0}",1===i?t.model.input1.title:t.model.input2.title),n=(0,I.kg)(11487,"Differences are highlighted with a background color.");o=(0,ke.h)("span",{title:n},[e]).root}(0,ke.Ln)(this.htmlElements.description,...o?[o]:[])}))),this._register((0,Hh.pY)(this.editor,this.decorations))}};ol=(0,s.C)([(0,s.Q)(1,a._Y),(0,s.Q)(2,z.p)],ol);var nl=i(49128),sl=i(81452);class rl extends p.jG{get model(){return this.viewModel.get()?.model}get shouldAlignResult(){return"columns"===this.layout.get().kind}get shouldAlignBase(){return"mixed"===this.layout.get().kind&&!this.layout.get().showBaseAtTop}constructor(e,t,i,o,n,s){super(),this.viewModel=e,this.input1View=t,this.input2View=i,this.baseView=o,this.inputResultView=n,this.layout=s,this.reentrancyBarrier=new sl.l;const r=this.updateScrolling=()=>{if(!this.model)return;if(this.input2View.editor.setScrollTop(this.input1View.editor.getScrollTop(),1),this.shouldAlignResult)this.inputResultView.editor.setScrollTop(this.input1View.editor.getScrollTop(),1);else{const e=this.model.input1ResultMapping.get();this.synchronizeScrolling(this.input1View.editor,this.inputResultView.editor,e)}const e=this.baseView.get();if(e)if(this.shouldAlignBase)this.baseView.get()?.editor.setScrollTop(this.input1View.editor.getScrollTop(),1);else{const t=new nl.RT(this.model.baseInput1Diffs.get(),-1).reverse();this.synchronizeScrolling(this.input1View.editor,e.editor,t)}};this._store.add(this.input1View.editor.onDidScrollChange(this.reentrancyBarrier.makeExclusiveOrSkip((e=>{e.scrollTopChanged&&r(),e.scrollLeftChanged&&(this.baseView.get()?.editor.setScrollLeft(e.scrollLeft,1),this.input2View.editor.setScrollLeft(e.scrollLeft,1),this.inputResultView.editor.setScrollLeft(e.scrollLeft,1))})))),this._store.add(this.input2View.editor.onDidScrollChange(this.reentrancyBarrier.makeExclusiveOrSkip((e=>{if(this.model){if(e.scrollTopChanged){if(this.input1View.editor.setScrollTop(e.scrollTop,1),this.shouldAlignResult)this.inputResultView.editor.setScrollTop(this.input2View.editor.getScrollTop(),1);else{const e=this.model.input2ResultMapping.get();this.synchronizeScrolling(this.input2View.editor,this.inputResultView.editor,e)}const t=this.baseView.get();if(t&&this.model)if(this.shouldAlignBase)this.baseView.get()?.editor.setScrollTop(e.scrollTop,1);else{const e=new nl.RT(this.model.baseInput2Diffs.get(),-1).reverse();this.synchronizeScrolling(this.input2View.editor,t.editor,e)}}e.scrollLeftChanged&&(this.baseView.get()?.editor.setScrollLeft(e.scrollLeft,1),this.input1View.editor.setScrollLeft(e.scrollLeft,1),this.inputResultView.editor.setScrollLeft(e.scrollLeft,1))}})))),this._store.add(this.inputResultView.editor.onDidScrollChange(this.reentrancyBarrier.makeExclusiveOrSkip((e=>{if(e.scrollTopChanged){if(this.shouldAlignResult)this.input1View.editor.setScrollTop(e.scrollTop,1),this.input2View.editor.setScrollTop(e.scrollTop,1);else{const e=this.model?.resultInput1Mapping.get();this.synchronizeScrolling(this.inputResultView.editor,this.input1View.editor,e);const t=this.model?.resultInput2Mapping.get();this.synchronizeScrolling(this.inputResultView.editor,this.input2View.editor,t)}const t=this.model?.resultBaseMapping.get(),i=this.baseView.get();i&&this.model&&this.synchronizeScrolling(this.inputResultView.editor,i.editor,t)}e.scrollLeftChanged&&(this.baseView.get()?.editor?.setScrollLeft(e.scrollLeft,1),this.input1View.editor.setScrollLeft(e.scrollLeft,1),this.input2View.editor.setScrollLeft(e.scrollLeft,1))})))),this._store.add((0,Nh.yC)(((e,t)=>{const i=this.baseView.read(e);i&&t.add(i.editor.onDidScrollChange(this.reentrancyBarrier.makeExclusiveOrSkip((e=>{if(e.scrollTopChanged){if(!this.model)return;if(this.shouldAlignBase)this.input1View.editor.setScrollTop(e.scrollTop,1),this.input2View.editor.setScrollTop(e.scrollTop,1);else{const e=new nl.RT(this.model.baseInput1Diffs.get(),-1);this.synchronizeScrolling(i.editor,this.input1View.editor,e);const t=new nl.RT(this.model.baseInput2Diffs.get(),-1);this.synchronizeScrolling(i.editor,this.input2View.editor,t)}const t=this.model?.baseResultMapping.get();this.synchronizeScrolling(i.editor,this.inputResultView.editor,t)}e.scrollLeftChanged&&(this.inputResultView.editor.setScrollLeft(e.scrollLeft,1),this.input1View.editor.setScrollLeft(e.scrollLeft,1),this.input2View.editor.setScrollLeft(e.scrollLeft,1))}))))})))}synchronizeScrolling(e,t,i){if(!i)return;const o=e.getVisibleRanges();if(0===o.length)return;const n=o[0].startLineNumber-1,s=i.project(n),r=s.inputRange,a=s.outputRange,c=t.getTopForLineNumber(a.startLineNumber),d=t.getTopForLineNumber(a.endLineNumberExclusive),h=e.getTopForLineNumber(r.startLineNumber),l=e.getTopForLineNumber(r.endLineNumberExclusive),u=c+(d-c)*Math.min((e.getScrollTop()-h)/(l-h),1);t.setScrollTop(u,1)}}var al=i(77220);let cl=class extends p.jG{constructor(e,t,i,o,n,s,r,a){super(),this.model=e,this.inputCodeEditorView1=t,this.inputCodeEditorView2=i,this.resultCodeEditorView=o,this.baseCodeEditorView=n,this.showNonConflictingChanges=s,this.configurationService=r,this.notificationService=a,this.manuallySetActiveModifiedBaseRange=(0,Oh.FY)(this,{range:void 0,counter:0}),this.attachedHistory=this._register(new dl(this.model.resultTextModel)),this.shouldUseAppendInsteadOfAccept=(0,Qh.V)("mergeEditor.shouldUseAppendInsteadOfAccept",!1,this.configurationService),this.counter=0,this.lastFocusedEditor=(0,Gh.j4)(this,((e,t)=>{const i=[this.inputCodeEditorView1,this.inputCodeEditorView2,this.resultCodeEditorView,this.baseCodeEditorView.read(e)].find((t=>t&&t.isFocused.read(e)));return i?{view:i,counter:this.counter++}:t||{view:void 0,counter:this.counter++}})),this.baseShowDiffAgainst=(0,Fh.un)(this,(e=>{const t=this.lastFocusedEditor.read(e);return t.view===this.inputCodeEditorView1?1:t.view===this.inputCodeEditorView2?2:void 0})),this.selectionInBase=(0,Fh.un)(this,(e=>{const t=this.lastFocusedEditor.read(e).view;if(!t)return;const i=(t.selection.read(e)||[]).map((i=>t===this.inputCodeEditorView1?this.model.translateInputRangeToBase(1,i):t===this.inputCodeEditorView2?this.model.translateInputRangeToBase(2,i):t===this.resultCodeEditorView?this.model.translateResultRangeToBase(i):(this.baseCodeEditorView.read(e),i)));return{rangesInBase:i,sourceEditor:t}})),this.activeModifiedBaseRange=(0,Fh.un)(this,(e=>{const t=this.lastFocusedEditor.read(e),i=this.manuallySetActiveModifiedBaseRange.read(e);if(i.counter>t.counter)return i.range;if(!t.view)return;const o=t.view.cursorLineNumber.read(e);return o?this.model.modifiedBaseRanges.read(e).find((i=>{const n=this.getRangeOfModifiedBaseRange(t.view,i,e);return n.isEmpty?n.startLineNumber===o:n.contains(o)})):void 0})),this._register(o.editor.onDidChangeModelContent((e=>{if(this.model.isApplyingEditInResult||e.isRedoing||e.isUndoing)return;const t=[];for(const i of e.changes){const e=this.model.translateResultRangeToBase(Ao.Q.lift(i.range)),o=this.model.findModifiedBaseRangesInRange(new Kh.M(e.startLineNumber,e.endLineNumber-e.startLineNumber));1===o.length&&(this.model.isHandled(o[0]).get()||t.push(o[0]))}if(0===t.length)return;const i={model:this.model,redo(){(0,Oh.Rn)((e=>{for(const i of t)this.model.setHandled(i,!0,e)}))},undo(){(0,Oh.Rn)((e=>{for(const i of t)this.model.setHandled(i,!1,e)}))}};this.attachedHistory.pushAttachedHistoryElement(i),i.redo()})))}getRangeOfModifiedBaseRange(e,t,i){if(e===this.resultCodeEditorView)return this.model.getLineRangeInResult(t.baseRange,i);if(e===this.baseCodeEditorView.get())return t.baseRange;{const i=e===this.inputCodeEditorView1?1:2;return t.getInputRange(i)}}setActiveModifiedBaseRange(e,t){this.manuallySetActiveModifiedBaseRange.set({range:e,counter:this.counter++},t)}setState(e,t,i,o){this.manuallySetActiveModifiedBaseRange.set({range:e,counter:this.counter++},i),this.model.setState(e,t,o,i),this.lastFocusedEditor.clearCache(i)}goToConflict(e){let t=this.lastFocusedEditor.get().view;t||(t=this.resultCodeEditorView);const i=t.editor.getPosition()?.lineNumber;if(void 0===i)return;const o=e(t,i);if(o){const e=this.getRangeOfModifiedBaseRange(t,o,void 0);t.editor.focus();let i=e.startLineNumber,n=e.endLineNumberExclusive;e.startLineNumber>t.editor.getModel().getLineCount()&&((0,Oh.Rn)((e=>{this.setActiveModifiedBaseRange(o,e)})),i=n=t.editor.getModel().getLineCount()),t.editor.setPosition({lineNumber:i,column:t.editor.getModel().getLineFirstNonWhitespaceColumn(i)}),t.editor.revealLinesNearTop(i,n,0)}}goToNextModifiedBaseRange(e){this.goToConflict(((t,i)=>this.model.modifiedBaseRanges.get().find((o=>e(o)&&this.getRangeOfModifiedBaseRange(t,o,void 0).startLineNumber>i))||this.model.modifiedBaseRanges.get().find((t=>e(t)))))}goToPreviousModifiedBaseRange(e){this.goToConflict(((t,i)=>(0,al.Uk)(this.model.modifiedBaseRanges.get(),(o=>e(o)&&this.getRangeOfModifiedBaseRange(t,o,void 0).endLineNumberExclusive<i))||(0,al.Uk)(this.model.modifiedBaseRanges.get(),(t=>e(t)))))}toggleActiveConflict(e){const t=this.activeModifiedBaseRange.get();t?(0,Oh.Rn)((i=>{this.setState(t,this.model.getState(t).get().toggle(e),i,e)})):this.notificationService.error((0,I.kg)(11488,"There is currently no conflict focused that can be toggled."))}acceptAll(e){(0,Oh.Rn)((t=>{for(const i of this.model.modifiedBaseRanges.get())this.setState(i,this.model.getState(i).get().withInputValue(e,!0),t,e)}))}};cl=(0,s.C)([(0,s.Q)(6,z.p),(0,s.Q)(7,Y.O)],cl);class dl extends p.jG{constructor(e){super(),this.model=e,this.attachedHistory=[],this.previousAltId=this.model.getAlternativeVersionId(),this._register(e.onDidChangeContent((t=>{const i=e.getAlternativeVersionId();if(t.isRedoing)for(const e of this.attachedHistory)this.previousAltId<e.altId&&e.altId<=i&&e.element.redo();else if(t.isUndoing)for(let e=this.attachedHistory.length-1;e>=0;e--){const t=this.attachedHistory[e];i<t.altId&&t.altId<=this.previousAltId&&t.element.undo()}else for(;this.attachedHistory.length>0&&this.attachedHistory[this.attachedHistory.length-1].altId>this.previousAltId;)this.attachedHistory.pop();this.previousAltId=i})))}pushAttachedHistoryElement(e){this.attachedHistory.push({altId:this.model.getAlternativeVersionId(),element:e})}}var hl=i(37653),ll=i(80441);class ul extends p.jG{static{this.counter=0}constructor(e,t,i,o,n){super(),this.editor=e,this.overlayWidgetId="fixedZoneWidget-"+ul.counter++,this.widgetDomNode=(0,ke.h)("div.fixed-zone-widget").root,this.overlayWidget={getId:()=>this.overlayWidgetId,getDomNode:()=>this.widgetDomNode,getPosition:()=>null},this.viewZoneId=t.addZone({domNode:document.createElement("div"),afterLineNumber:i,heightInPx:o,ordinal:50001,onComputedHeight:e=>{this.widgetDomNode.style.height=`${e}px`},onDomNodeTop:e=>{this.widgetDomNode.style.top=`${e}px`}}),n.push(this.viewZoneId),this._register(m.Jh.runAndSubscribe(this.editor.onDidLayoutChange,(()=>{this.widgetDomNode.style.left=this.editor.getLayoutInfo().contentLeft+"px"}))),this.editor.addOverlayWidget(this.overlayWidget),this._register({dispose:()=>{this.editor.removeOverlayWidget(this.overlayWidget)}})}}class pl extends p.jG{constructor(e){super(),this._editor=e,this._register(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(52)||e.hasChanged(19)||e.hasChanged(18))&&this._updateLensStyle()}))),this._styleClassName="_conflictActionsFactory_"+(0,hl.tW)(this._editor.getId()).toString(16),this._styleElement=(0,ke.li)((0,ke.Cl)(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,void 0,this._store),this._updateLensStyle()}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),o=this._editor.getOption(52),n=`--codelens-font-family${this._styleClassName}`,s=`--codelens-font-features${this._styleClassName}`;let r=`\n\t\t.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(.5*t)}px; font-feature-settings: var(${s}) }\n\t\t.monaco-workbench .${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }\n\t\t`;i&&(r+=`${this._styleClassName} { font-family: var(${n}), ${at.jU.fontFamily}}`),this._styleElement.textContent=r,this._editor.getContainerDomNode().style?.setProperty(n,i??"inherit"),this._editor.getContainerDomNode().style?.setProperty(s,o.fontFeatureSettings)}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(68)/this._editor.getOption(54));let t=this._editor.getOption(19);return(!t||t<5)&&(t=.9*this._editor.getOption(54)|0),{fontSize:t,codeLensHeight:t*e|0}}createWidget(e,t,i,o){const n=this._getLayoutInfo();return new bl(this._editor,e,t,n.codeLensHeight+2,this._styleClassName,i,o)}}class gl{constructor(e,t){this.viewModel=e,this.modifiedBaseRange=t,this.itemsInput1=this.getItemsInput(1),this.itemsInput2=this.getItemsInput(2),this.resultItems=(0,Fh.un)(this,(e=>{const t=this.viewModel,i=this.modifiedBaseRange,o=t.model.getState(i).read(e),n=t.model,s=[];if(o.kind===ll.dR.unrecognized)s.push({text:(0,I.kg)(11590,"Manual Resolution"),tooltip:(0,I.kg)(11591,"This conflict has been resolved manually.")});else if(o.kind===ll.dR.base)s.push({text:(0,I.kg)(11592,"No Changes Accepted"),tooltip:(0,I.kg)(11593,"The current resolution of this conflict equals the common ancestor of both the right and left changes.")});else{const e=[];o.includesInput1&&e.push(n.input1.title),o.includesInput2&&e.push(n.input2.title),o.kind===ll.dR.both&&2===o.firstInput&&e.reverse(),s.push({text:`${e.join(" + ")}`})}const r=[];return o.includesInput1&&r.push(ml((0,I.kg)(11594,"Remove {0}",n.input1.title),(async()=>{(0,Oh.Rn)((e=>{n.setState(i,o.withInputValue(1,!1),!0,e),n.telemetry.reportRemoveInvoked(1,o.includesInput(2))}))}),(0,I.kg)(11595,"Remove {0} from the result document.",n.input1.title))),o.includesInput2&&r.push(ml((0,I.kg)(11594,"Remove {0}",n.input2.title),(async()=>{(0,Oh.Rn)((e=>{n.setState(i,o.withInputValue(2,!1),!0,e),n.telemetry.reportRemoveInvoked(2,o.includesInput(1))}))}),(0,I.kg)(11595,"Remove {0} from the result document.",n.input2.title))),o.kind===ll.dR.both&&2===o.firstInput&&r.reverse(),s.push(...r),o.kind===ll.dR.unrecognized&&s.push(ml((0,I.kg)(11596,"Reset to base"),(async()=>{(0,Oh.Rn)((e=>{n.setState(i,ll.vX.base,!0,e),n.telemetry.reportResetToBaseInvoked()}))}),(0,I.kg)(11597,"Reset this conflict to the common ancestor of both the right and left changes."))),s})),this.isEmpty=(0,Fh.un)(this,(e=>this.itemsInput1.read(e).length+this.itemsInput2.read(e).length+this.resultItems.read(e).length===0)),this.inputIsEmpty=(0,Fh.un)(this,(e=>this.itemsInput1.read(e).length+this.itemsInput2.read(e).length===0))}getItemsInput(e){return(0,Fh.un)((t=>{const i=this.viewModel,o=this.modifiedBaseRange;if(!i.model.hasBaseRange(o))return[];const n=i.model.getState(o).read(t),s=i.model.isHandled(o).read(t),r=i.model,a=[],c=1===e?i.model.input1:i.model.input2,d=i.showNonConflictingChanges.read(t);if(!o.isConflicting&&s&&!d)return[];const h=1===e?2:1;if(n.kind!==ll.dR.unrecognized&&!n.isInputIncluded(e)){if(n.isInputIncluded(h)&&this.viewModel.shouldUseAppendInsteadOfAccept.read(t))a.push(ml((0,I.kg)(11603,"Append {0}",c.title),(async()=>{(0,Oh.Rn)((t=>{r.setState(o,n.withInputValue(e,!0,!1),e,t),r.telemetry.reportAcceptInvoked(e,n.includesInput(h))}))}),(0,I.kg)(11604,"Append {0} to the result document.",c.title))),o.canBeCombined&&a.push(ml((0,I.kg)(11605,"Accept Combination",c.title),(async()=>{(0,Oh.Rn)((t=>{r.setState(o,n.withInputValue(e,!0,!0),e,t),r.telemetry.reportSmartCombinationInvoked(n.includesInput(h))}))}),(0,I.kg)(11602,"Accept an automatic combination of both sides in the result document.")));else if(a.push(ml((0,I.kg)(11598,"Accept {0}",c.title),(async()=>{(0,Oh.Rn)((t=>{r.setState(o,n.withInputValue(e,!0,!1),e,t),r.telemetry.reportAcceptInvoked(e,n.includesInput(h))}))}),(0,I.kg)(11599,"Accept {0} in the result document.",c.title))),o.canBeCombined){const t=o.isOrderRelevant?(0,I.kg)(11600,"Accept Combination ({0} First)",c.title):(0,I.kg)(11601,"Accept Combination");a.push(ml(t,(async()=>{(0,Oh.Rn)((t=>{r.setState(o,ll.vX.base.withInputValue(e,!0).withInputValue(h,!0,!0),!0,t),r.telemetry.reportSmartCombinationInvoked(n.includesInput(h))}))}),(0,I.kg)(11602,"Accept an automatic combination of both sides in the result document.")))}r.isInputHandled(o,e).read(t)||a.push(ml((0,I.kg)(11606,"Ignore"),(async()=>{(0,Oh.Rn)((t=>{r.setInputHandled(o,e,!0,t)}))}),(0,I.kg)(11607,"Don't take this side of the conflict.")))}return a}))}}function ml(e,t,i){return{text:e,action:t,tooltip:i}}class bl extends ul{constructor(e,t,i,o,n,s,r){super(e,t,i,o,r),this._domNode=(0,ke.h)("div.merge-editor-conflict-actions").root,this.widgetDomNode.appendChild(this._domNode),this._domNode.classList.add(n),this._register((0,Nh.fm)((e=>{const t=s.read(e);this.setState(t)})))}setState(e){const t=[];let i=!0;for(const o of e){i?i=!1:t.push((0,ke.$)("span",void 0," | "));const e=(0,Eh.n)(o.text);o.action?t.push((0,ke.$)("a",{title:o.tooltip,role:"button",onclick:()=>o.action()},...e)):t.push((0,ke.$)("span",{title:o.tooltip},...e))}(0,ke.Ln)(this._domNode,...t)}}var wl=i(57003),vl=i(69594),fl=i(37702),yl=i(67034);function Cl(e){const t=function(e,t){const i=[],o=[];for(const[i,n]of[[0,e],[1,t]])for(const e of n)o.push({input:i,start:!0,inputPos:e.inputRange.getStartPosition(),outputPos:e.outputRange.getStartPosition()}),o.push({input:i,start:!1,inputPos:e.inputRange.getEndPosition(),outputPos:e.outputRange.getEndPosition()});o.sort((0,f.VE)((e=>e.inputPos),vl.y.compare));const n=[void 0,void 0];let s;for(const e of o){if(s&&n.some((e=>!!e))){const t=(0,yl.t2)(s,e.inputPos);t.isZero()||(i.push({inputPos:s,length:t,output1Pos:n[0],output2Pos:n[1]}),n[0]&&(n[0]=(0,yl.ug)(n[0],t)),n[1]&&(n[1]=(0,yl.ug)(n[1],t)))}n[e.input]=e.start?e.outputPos:void 0,s=e.inputPos}return i}(Sl(e.input1Diffs.flatMap((e=>e.rangeMappings)),e.baseRange.toRange(),e.input1Range.toRange()),Sl(e.input2Diffs.flatMap((e=>e.rangeMappings)),e.baseRange.toRange(),e.input2Range.toRange()));let i=[];function o(e){return e.every((e=>void 0!==e))}i.push([e.input1Range.startLineNumber-1,e.baseRange.startLineNumber-1,e.input2Range.startLineNumber-1]);for(const e of t){const t=[e.output1Pos?.lineNumber,e.inputPos.lineNumber,e.output2Pos?.lineNumber];let n=!0;if(o(t)){const e=!i.some((e=>o(e)&&e.some(((e,i)=>void 0!==e&&e===t[i]))));e&&(i=i.filter((e=>!e.some(((e,i)=>void 0!==e&&e===t[i]))))),n=e}else n=!i.some((e=>e.some(((e,i)=>void 0!==e&&e===t[i]))));n?i.push(t):e.length.isGreaterThan(new fl.W(1,0))&&i.push([e.output1Pos?e.output1Pos.lineNumber+1:void 0,e.inputPos.lineNumber+1,e.output2Pos?e.output2Pos.lineNumber+1:void 0])}const n=[e.input1Range.endLineNumberExclusive,e.baseRange.endLineNumberExclusive,e.input2Range.endLineNumberExclusive];return i=i.filter((e=>e.every(((e,t)=>e!==n[t])))),i.push(n),(0,wl.Ft)((()=>(0,wl.Xo)(i.map((e=>e[0])).filter(y.O9),((e,t)=>e<t))&&(0,wl.Xo)(i.map((e=>e[1])).filter(y.O9),((e,t)=>e<=t))&&(0,wl.Xo)(i.map((e=>e[2])).filter(y.O9),((e,t)=>e<t))&&i.every((e=>e.filter(y.O9).length>=2)))),i}function Sl(e,t,i){const o=[];let n=t.getStartPosition(),s=i.getStartPosition();for(const t of e){const e=new nl.q6(Ao.Q.fromPositions(n,t.inputRange.getStartPosition()),Ao.Q.fromPositions(s,t.outputRange.getStartPosition()));(0,wl.Ft)((()=>(0,yl.pe)(e.inputRange).equals((0,yl.pe)(e.outputRange)))),e.inputRange.isEmpty()||o.push(e),n=t.inputRange.getEndPosition(),s=t.outputRange.getEndPosition()}const r=new nl.q6(Ao.Q.fromPositions(n,t.getEndPosition()),Ao.Q.fromPositions(s,i.getEndPosition()));return(0,wl.Ft)((()=>(0,yl.pe)(r.inputRange).equals((0,yl.pe)(r.outputRange)))),r.inputRange.isEmpty()||o.push(r),o}class kl{constructor(e,t,i){this.input1Editor=e,this.input2Editor=t,this.resultEditor=i,this.conflictActionsFactoryInput1=new pl(this.input1Editor),this.conflictActionsFactoryInput2=new pl(this.input2Editor),this.conflictActionsFactoryResult=new pl(this.resultEditor)}computeViewZones(e,t,i){let o=0,n=0,s=0,r=0;const a=[],c=[],d=[],h=[],l=t.model,u=l.baseResultDiffs.read(e),p=(0,Hh.fj)(l.modifiedBaseRanges.read(e),u,((e,t)=>e.baseRange.touches(t.inputRange)?f.$B.neitherLessOrGreaterThan:Kh.M.compareByStart(e.baseRange,t.inputRange))),g=i.codeLensesVisible,m=i.showNonConflictingChanges;let b,w;for(const u of p){if(g&&u.left&&(u.left.isConflicting||m||!l.isHandled(u.left).read(e))){const o=new gl(t,u.left);!i.shouldAlignResult&&o.inputIsEmpty.read(e)||(a.push(new Il(this.conflictActionsFactoryInput1,u.left.input1Range.startLineNumber-1,o.itemsInput1)),c.push(new Il(this.conflictActionsFactoryInput2,u.left.input2Range.startLineNumber-1,o.itemsInput2)),i.shouldAlignBase&&d.push(new Dl(u.left.baseRange.startLineNumber-1,16)));const n=u.left.baseRange.startLineNumber+(w?.resultingDeltaFromOriginalToModified??0)-1;h.push(new Il(this.conflictActionsFactoryResult,n,o.resultItems))}const p=u.rights.at(-1);let v;p&&(w=p),u.left?(v=Cl(u.left).map((e=>({input1Line:e[0],baseLine:e[1],input2Line:e[2],resultLine:void 0}))),b=u.left,v[v.length-1].resultLine=u.left.baseRange.endLineNumberExclusive+(w?w.resultingDeltaFromOriginalToModified:0)):v=[{baseLine:p.inputRange.endLineNumberExclusive,input1Line:p.inputRange.endLineNumberExclusive+(b?b.input1Range.endLineNumberExclusive-b.baseRange.endLineNumberExclusive:0),input2Line:p.inputRange.endLineNumberExclusive+(b?b.input2Range.endLineNumberExclusive-b.baseRange.endLineNumberExclusive:0),resultLine:p.outputRange.endLineNumberExclusive}];for(const{input1Line:e,baseLine:t,input2Line:l,resultLine:u}of v){if(!i.shouldAlignBase&&(void 0===e||void 0===l))continue;const p=void 0!==e?e+o:-1,g=void 0!==l?l+n:-1,m=t+s,b=void 0!==u?u+r:-1,w=Math.max(i.shouldAlignBase?m:0,p,g,i.shouldAlignResult?b:0);if(void 0!==e){const t=w-p;t>0&&(a.push(new El(e-1,t)),o+=t)}if(void 0!==l){const e=w-g;e>0&&(c.push(new El(l-1,e)),n+=e)}if(i.shouldAlignBase){const e=w-m;e>0&&(d.push(new El(t-1,e)),s+=e)}if(i.shouldAlignResult&&void 0!==u){const e=w-b;e>0&&(h.push(new El(u-1,e)),r+=e)}}}return new _l(a,c,d,h)}}class _l{constructor(e,t,i,o){this.input1ViewZones=e,this.input2ViewZones=t,this.baseViewZones=i,this.resultViewZones=o}}class xl{}class El extends xl{constructor(e,t){super(),this.afterLineNumber=e,this.heightInLines=t}create(e,t,i){t.push(e.addZone({afterLineNumber:this.afterLineNumber,heightInLines:this.heightInLines,domNode:(0,ke.$)("div.diagonal-fill")}))}}class Dl extends xl{constructor(e,t){super(),this.afterLineNumber=e,this.heightPx=t}create(e,t,i){t.push(e.addZone({afterLineNumber:this.afterLineNumber,heightInPx:this.heightPx,domNode:(0,ke.$)("div.conflict-actions-placeholder")}))}}class Il extends xl{constructor(e,t,i){super(),this.conflictActionsFactory=e,this.lineNumber=t,this.items=i}create(e,t,i){i.add(this.conflictActionsFactory.createWidget(e,this.lineNumber,this.items,t))}}var Vl=i(38528);const Ml=(0,ct.x1)("settings.headerForeground",{light:"#444444",dark:"#e7e7e7",hcDark:"#ffffff",hcLight:"#292929"},(0,I.kg)(10492,"The foreground color for a section header or active title."));(0,ct.x1)("settings.settingsHeaderHoverForeground",(0,ct.JO)(Ml,.7),(0,I.kg)(10493,"The foreground color for a section header or hovered title.")),(0,ct.x1)("settings.modifiedItemIndicator",{light:new hs.Q1(new hs.bU(102,175,224)),dark:new hs.Q1(new hs.bU(12,125,157)),hcDark:new hs.Q1(new hs.bU(0,73,122)),hcLight:new hs.Q1(new hs.bU(102,175,224))},(0,I.kg)(10494,"The color of the modified setting indicator.")),(0,ct.x1)("settings.headerBorder",aa.IZ,(0,I.kg)(10495,"The color of the header container border."));const Tl=(0,ct.x1)("settings.sashBorder",aa.IZ,(0,I.kg)(10496,"The color of the Settings editor splitview sash border."));(0,ct.x1)("settings.dropdownBackground",lt.rv,(0,I.kg)(10497,"Settings editor dropdown background.")),(0,ct.x1)("settings.dropdownForeground",lt.yq,(0,I.kg)(10498,"Settings editor dropdown foreground.")),(0,ct.x1)("settings.dropdownBorder",lt.Hc,(0,I.kg)(10499,"Settings editor dropdown border.")),(0,ct.x1)("settings.dropdownListBorder",ht.sI,(0,I.kg)(10500,"Settings editor dropdown list border. This surrounds the options and separates the options from the description.")),(0,ct.x1)("settings.checkboxBackground",lt.Oc,(0,I.kg)(10501,"Settings editor checkbox background.")),(0,ct.x1)("settings.checkboxForeground",lt.t0,(0,I.kg)(10502,"Settings editor checkbox foreground.")),(0,ct.x1)("settings.checkboxBorder",lt.C5,(0,I.kg)(10503,"Settings editor checkbox border.")),(0,ct.x1)("settings.textInputBackground",lt.L4,(0,I.kg)(10504,"Settings editor text input box background.")),(0,ct.x1)("settings.textInputForeground",lt.cw,(0,I.kg)(10505,"Settings editor text input box foreground.")),(0,ct.x1)("settings.textInputBorder",lt.Zg,(0,I.kg)(10506,"Settings editor text input box border.")),(0,ct.x1)("settings.numberInputBackground",lt.L4,(0,I.kg)(10507,"Settings editor number input box background.")),(0,ct.x1)("settings.numberInputForeground",lt.cw,(0,I.kg)(10508,"Settings editor number input box foreground.")),(0,ct.x1)("settings.numberInputBorder",lt.Zg,(0,I.kg)(10509,"Settings editor number input box border.")),(0,ct.x1)("settings.focusedRowBackground",{dark:(0,ct.JO)(ut.lO,.6),light:(0,ct.JO)(ut.lO,.6),hcDark:null,hcLight:null},(0,I.kg)(10510,"The background color of a settings row when focused.")),(0,ct.x1)("settings.rowHoverBackground",{dark:(0,ct.JO)(ut.lO,.3),light:(0,ct.JO)(ut.lO,.3),hcDark:null,hcLight:null},(0,I.kg)(10511,"The background color of a settings row when hovered.")),(0,ct.x1)("settings.focusedRowBorder",dt.tA,(0,I.kg)(10512,"The color of the row's top and bottom border when the row is focused."));var Al=i(25439);let Ll=class extends el{constructor(e,t,i,o,n){super(i,t,n),this.inputNumber=e,this.otherInputNumber=1===this.inputNumber?2:1,this.modifiedBaseRangeGutterItemInfos=(0,Fh.C)({debugName:`input${this.inputNumber}.modifiedBaseRangeGutterItemInfos`},(e=>{const t=this.viewModel.read(e);if(!t)return[];const i=t.model,o=this.inputNumber,n=t.showNonConflictingChanges.read(e);return i.modifiedBaseRanges.read(e).filter((t=>t.getInputDiffs(this.inputNumber).length>0&&(n||t.isConflicting||!i.isHandled(t).read(e)))).map(((e,i)=>new Pl(i.toString(),e,o,t)))})),this.decorations=(0,Fh.C)({debugName:`input${this.inputNumber}.decorations`},(e=>{const t=this.viewModel.read(e);if(!t)return[];const i=t.model,o=(1===this.inputNumber?i.input1:i.input2).textModel,n=t.activeModifiedBaseRange.read(e),s=new Array,r=t.showNonConflictingChanges.read(e),a=this.showDeletionMarkers.read(e),c=!(void 0!==t.baseCodeEditorView.read(e)&&t.baseShowDiffAgainst.read(e)===this.inputNumber)&&this.useSimplifiedDecorations.read(e);for(const t of i.modifiedBaseRanges.read(e)){const d=t.getInputRange(this.inputNumber);if(!d)continue;const h=["merge-editor-block"];let l=[0,0,0,0];const u=i.isInputHandled(t,this.inputNumber).read(e);u&&h.push("handled"),t===n&&(h.push("focused"),l=[0,2,0,2]),t.isConflicting&&h.push("conflicting");const p=1===this.inputNumber?"input i1":"input i2";if(h.push(p),(t.isConflicting||r||!u)&&(c&&!u&&h.push("use-simplified-decorations"),s.push({range:d.toInclusiveRangeOrEmpty(),options:{showIfCollapsed:!0,blockClassName:h.join(" "),blockPadding:l,blockIsAfterEnd:d.startLineNumber>o.getLineCount(),description:"Merge Editor",minimap:{position:2,color:{id:u?Uh:$h}},overviewRuler:t.isConflicting?{position:ds.A5.Center,color:{id:u?Uh:$h}}:void 0}}),!c&&(t.isConflicting||!i.isHandled(t).read(e)))){const e=t.getInputDiffs(this.inputNumber);for(const t of e){const e=t.outputRange.toInclusiveRange();if(e&&s.push({range:e,options:{className:`merge-editor-diff ${p}`,description:"Merge Editor",isWholeLine:!0}}),t.rangeMappings)for(const e of t.rangeMappings)!a&&e.outputRange.isEmpty()||s.push({range:e.outputRange,options:{className:e.outputRange.isEmpty()?`merge-editor-diff-empty-word ${p}`:`merge-editor-diff-word ${p}`,description:"Merge Editor",showIfCollapsed:!0}})}}}return s})),this.htmlElements.root.classList.add("input"),this._register(new jh(this.editor,this.htmlElements.gutterDiv,{getIntersectingGutterItems:(e,t)=>this.checkboxesVisible.read(t)?this.modifiedBaseRangeGutterItemInfos.read(t):[],createView:(e,t)=>new Rl(e,t,o)})),this._register(tl(this,((e,t)=>t.model.translateBaseRangeToInput(this.inputNumber,e)))),this._register(i.createInstance(il,1===e?_.D8.MergeInput1Toolbar:_.D8.MergeInput2Toolbar,this.htmlElements.toolbar)),this._register((0,Nh.zL)({debugName:`input${this.inputNumber}: update labels & text model`},(e=>{const t=this.viewModel.read(e);if(!t)return;this.editor.setModel(1===this.inputNumber?t.model.input1.textModel:t.model.input2.textModel);const i=1===this.inputNumber?t.model.input1.title||(0,I.kg)(11502,"Input 1"):t.model.input2.title||(0,I.kg)(11503,"Input 2"),o=1===this.inputNumber?t.model.input1.description:t.model.input2.description,n=1===this.inputNumber?t.model.input1.detail:t.model.input2.detail;(0,ke.Ln)(this.htmlElements.title,...(0,Eh.n)(i)),(0,ke.Ln)(this.htmlElements.description,...o?(0,Eh.n)(o):[]),(0,ke.Ln)(this.htmlElements.detail,...n?(0,Eh.n)(n):[])}))),this._register((0,Hh.pY)(this.editor,this.decorations))}};Ll=(0,s.C)([(0,s.Q)(2,a._Y),(0,s.Q)(3,ne.Z),(0,s.Q)(4,z.p)],Ll);class Pl{constructor(e,t,i,o){this.id=e,this.baseRange=t,this.inputNumber=i,this.viewModel=o,this.model=this.viewModel.model,this.range=this.baseRange.getInputRange(this.inputNumber),this.enabled=this.model.isUpToDate,this.toggleState=(0,Fh.un)(this,(e=>{const t=this.model.getState(this.baseRange).read(e).getInput(this.inputNumber);return 2!==t||this.baseRange.isOrderRelevant?t:1})),this.state=(0,Fh.un)(this,(e=>{const t=this.viewModel.activeModifiedBaseRange.read(e);return this.model.hasBaseRange(this.baseRange)?{handled:this.model.isHandled(this.baseRange).read(e),focused:this.baseRange===t}:{handled:!1,focused:!1}}))}setState(e,t){this.viewModel.setState(this.baseRange,this.model.getState(this.baseRange).get().withInputValue(this.inputNumber,e),t,this.inputNumber)}toggleBothSides(){(0,Oh.Rn)((e=>{const t=this.model.getState(this.baseRange).get();this.model.setState(this.baseRange,t.toggle(this.inputNumber).toggle(1===this.inputNumber?2:1),!0,e)}))}getContextMenuActions(){const e=this.model.getState(this.baseRange).get(),t=this.model.isHandled(this.baseRange).get(),i=e=>{(0,Oh.Rn)((t=>this.viewModel.setState(this.baseRange,e,t,this.inputNumber)))};function o(e,t,o,n){const s=new vi.rc(e,t,void 0,!0,(()=>{i(o)}));return s.checked=n,s}const n=e.includesInput1&&e.includesInput2;return[this.baseRange.input1Diffs.length>0?o("mergeEditor.acceptInput1",(0,I.kg)(11504,"Accept {0}",this.model.input1.title),e.toggle(1),e.includesInput1):void 0,this.baseRange.input2Diffs.length>0?o("mergeEditor.acceptInput2",(0,I.kg)(11504,"Accept {0}",this.model.input2.title),e.toggle(2),e.includesInput2):void 0,this.baseRange.isConflicting?(0,Hh.Ey)(o("mergeEditor.acceptBoth",(0,I.kg)(11505,"Accept Both"),e.withInputValue(1,!n).withInputValue(2,!n),n),{enabled:this.baseRange.canBeCombined}):void 0,new vi.wv,this.baseRange.isConflicting?(0,Hh.Ey)(o("mergeEditor.swap",(0,I.kg)(11506,"Swap"),e.swap(),!1),{enabled:!e.kind&&(!n||this.baseRange.isOrderRelevant)}):void 0,(0,Hh.Ey)(new vi.rc("mergeEditor.markAsHandled",(0,I.kg)(11507,"Mark as Handled"),void 0,!0,(()=>{(0,Oh.Rn)((e=>{this.model.setHandled(this.baseRange,!t,e)}))})),{checked:t})].filter(y.O9)}}class Rl extends p.jG{constructor(e,t,i){super(),this.isMultiLine=(0,Oh.FY)(this,!1),this.item=(0,Oh.FY)(this,e);const o=new ki.lM({isChecked:!1,title:"",icon:xi.W6.check,...$t.mk});o.domNode.classList.add("accept-conflict-group"),this._register((0,ke.ko)(o.domNode,ke.Bx.MOUSE_DOWN,(e=>{const t=this.item.get();t&&(2===e.button?(e.stopPropagation(),e.preventDefault(),i.showContextMenu({getAnchor:()=>o.domNode,getActions:()=>t.getContextMenuActions()})):1===e.button&&(e.stopPropagation(),e.preventDefault(),t.toggleBothSides()))}))),this._register((0,Nh.fm)((e=>{const t=this.item.read(e),i=t.toggleState.read(e),n={0:{icon:void 0,checked:!1,title:(0,I.kg)(11508,"Accept")},3:{icon:xi.W6.circleFilled,checked:!1,title:(0,I.kg)(11509,"Accept (result is dirty)")},1:{icon:xi.W6.check,checked:!0,title:(0,I.kg)(11510,"Undo accept")},2:{icon:xi.W6.checkAll,checked:!0,title:(0,I.kg)(11511,"Undo accept (currently second)")}}[i];o.setIcon(n.icon),o.checked=n.checked,o.setTitle(n.title),t.enabled.read(e)?o.enable():o.disable()}))),this._register((0,Nh.fm)((e=>{const i=this.item.read(e).state.read(e),o=["merge-accept-gutter-marker",i.handled&&"handled",i.focused&&"focused",this.isMultiLine.read(e)?"multi-line":"single-line"];t.className=o.filter((e=>"string"==typeof e)).join(" ")}))),this._register(o.onChange((()=>{(0,Oh.Rn)((e=>{this.item.get().setState(o.checked,e)}))}))),t.appendChild((0,ke.h)("div.background",[Ht.S8]).root),t.appendChild(this.checkboxDiv=(0,ke.h)("div.checkbox",[(0,ke.h)("div.checkbox-background",[o.domNode])]).root)}layout(e,t,i,o){const n=this.checkboxDiv.clientHeight;let s=e+(t/2-n/2);const r=[n,i+o-n-n],a=[e+n,e+t-n-n];a[0]<a[1]&&(s=(0,Al.qE)(s,r[0],r[1]),s=(0,Al.qE)(s,a[0],a[1])),this.checkboxDiv.style.top=s-e+"px",(0,Oh.Rn)((e=>{this.isMultiLine.set(t>30,e)}))}update(e){(0,Oh.Rn)((t=>{this.item.set(e,t)}))}}let Bl=class extends el{constructor(e,t,i,o){super(t,e,o),this._labelService=i,this.decorations=(0,Fh.un)(this,(e=>{const t=this.viewModel.read(e);if(!t)return[];const i=t.model,o=i.resultTextModel,n=new Array,s=(0,Hh.fj)(i.modifiedBaseRanges.read(e),i.baseResultDiffs.read(e),((e,t)=>e.baseRange.touches(t.inputRange)?f.$B.neitherLessOrGreaterThan:Kh.M.compareByStart(e.baseRange,t.inputRange))),r=t.activeModifiedBaseRange.read(e),a=t.showNonConflictingChanges.read(e);for(const t of s){const s=t.left;if(s){const t=["merge-editor-block"];let c=[0,0,0,0];const d=i.isHandled(s).read(e);if(d&&t.push("handled"),s===r&&(t.push("focused"),c=[0,2,0,2]),s.isConflicting&&t.push("conflicting"),t.push("result"),!s.isConflicting&&!a&&d)continue;const h=i.getLineRangeInResult(s.baseRange,e);n.push({range:h.toInclusiveRangeOrEmpty(),options:{showIfCollapsed:!0,blockClassName:t.join(" "),blockPadding:c,blockIsAfterEnd:h.startLineNumber>o.getLineCount(),description:"Result Diff",minimap:{position:2,color:{id:d?Uh:$h}},overviewRuler:s.isConflicting?{position:ds.A5.Center,color:{id:d?Uh:$h}}:void 0}})}if(!s||s.isConflicting)for(const e of t.rights){const t=e.outputRange.toInclusiveRange();if(t&&n.push({range:t,options:{className:"merge-editor-diff result",description:"Merge Editor",isWholeLine:!0}}),e.rangeMappings)for(const t of e.rangeMappings)n.push({range:t.outputRange,options:{className:"merge-editor-diff-word result",description:"Merge Editor"}})}}return n})),this.editor.invokeWithinContext((e=>{const t=e.get(d.f),i=Vl.uv.bindTo(t);i.set(!0),this._register((0,p.s)((()=>i.reset())))})),this.htmlElements.gutterDiv.style.width="5px",this.htmlElements.root.classList.add("result"),this._register((0,Nh.yC)(((e,t)=>{this.checkboxesVisible.read(e)&&t.add(new jh(this.editor,this.htmlElements.gutterDiv,{getIntersectingGutterItems:(e,t)=>[],createView:(e,t)=>{throw new xe.D7}}))}))),this._register((0,Nh.fm)((e=>{const t=this.viewModel.read(e);t&&(this.editor.setModel(t.model.resultTextModel),(0,ke.Ln)(this.htmlElements.title,...(0,Eh.n)((0,I.kg)(11512,"Result"))),(0,ke.Ln)(this.htmlElements.description,...(0,Eh.n)(this._labelService.getUriLabel(t.model.resultTextModel.uri,{relative:!0}))))})));const n=this._register(new Ci.E(this.htmlElements.detail));this._register((0,Nh.fm)((e=>{const t=this.viewModel.read(e);if(!t)return;const i=t.model;if(!i)return;const o=i.unhandledConflictsCount.read(e),s=1===o?(0,I.kg)(11513,"{0} Conflict Remaining",o):(0,I.kg)(11514,"{0} Conflicts Remaining ",o);n.clear(),n.push({class:void 0,enabled:o>0,id:"nextConflict",label:s,run(){t.model.telemetry.reportConflictCounterClicked(),t.goToNextModifiedBaseRange((e=>!i.isHandled(e).get()))},tooltip:o>0?(0,I.kg)(11515,"Go to next conflict"):(0,I.kg)(11516,"All conflicts handled, the merge can be completed now.")})}))),this._register((0,Hh.pY)(this.editor,this.decorations)),this._register(tl(this,((e,t)=>t.model.translateBaseRangeToResult(e)))),this._register(t.createInstance(il,_.D8.MergeInputResultToolbar,this.htmlElements.toolbar))}};var Ol,Nl;Bl=(0,s.C)([(0,s.Q)(1,a._Y),(0,s.Q)(2,jo.L),(0,s.Q)(3,z.p)],Bl);let Fl=class extends Nc.z{static{Ol=this}static{this.ID="mergeEditor"}get viewModel(){return this._viewModel}get inputModel(){return this._inputModel}get model(){return this.inputModel.get()?.model}get inputsWritable(){return!!this._configurationService.getValue("mergeEditor.writableInputs")}constructor(e,t,i,o,n,s,r,a,c,d,h,l,u){super(Ol.ID,e,o,t,n,r,s,c,d,h),this.contextKeyService=i,this._configurationService=a,this._codeEditorService=l,this.configurationService=u,this._sessionDisposables=new p.Cm,this._viewModel=(0,Oh.FY)(this,void 0),this._grid=this._register(new p.HE),this.input1View=this._register(this.instantiationService.createInstance(Ll,1,this._viewModel)),this.baseView=(0,Oh.FY)(this,void 0),this.baseViewOptions=(0,Oh.FY)(this,void 0),this.input2View=this._register(this.instantiationService.createInstance(Ll,2,this._viewModel)),this.inputResultView=this._register(this.instantiationService.createInstance(Bl,this._viewModel)),this._layoutMode=this.instantiationService.createInstance(Gl),this._layoutModeObs=(0,Oh.FY)(this,this._layoutMode.value),this._ctxIsMergeEditor=Vl.T_.bindTo(this.contextKeyService),this._ctxUsesColumnLayout=Vl.vp.bindTo(this.contextKeyService),this._ctxShowBase=Vl.JN.bindTo(this.contextKeyService),this._ctxShowBaseAtTop=Vl.BI.bindTo(this.contextKeyService),this._ctxResultUri=Vl.hH.bindTo(this.contextKeyService),this._ctxBaseUri=Vl.vc.bindTo(this.contextKeyService),this._ctxShowNonConflictingChanges=Vl.IO.bindTo(this.contextKeyService),this._inputModel=(0,Oh.FY)(this,void 0),this.viewZoneComputer=new kl(this.input1View.editor,this.input2View.editor,this.inputResultView.editor),this.codeLensesVisible=(0,Qh.V)("mergeEditor.showCodeLenses",!0,this.configurationService),this.scrollSynchronizer=this._register(new rl(this._viewModel,this.input1View,this.input2View,this.baseView,this.inputResultView,this._layoutModeObs)),this._onDidChangeSizeConstraints=new m.vl,this.onDidChangeSizeConstraints=this._onDidChangeSizeConstraints.event,this.baseViewDisposables=this._register(new p.Cm),this.showNonConflictingChangesStore=this.instantiationService.createInstance(Hh.LT,"mergeEditor/showNonConflictingChanges"),this.showNonConflictingChanges=(0,Oh.FY)(this,this.showNonConflictingChangesStore.get()??!1)}dispose(){this._sessionDisposables.dispose(),this._ctxIsMergeEditor.reset(),this._ctxUsesColumnLayout.reset(),this._ctxShowNonConflictingChanges.reset(),super.dispose()}get minimumWidth(){return"mixed"===this._layoutMode.value.kind?this.input1View.view.minimumWidth+this.input2View.view.minimumWidth:this.input1View.view.minimumWidth+this.input2View.view.minimumWidth+this.inputResultView.view.minimumWidth}getTitle(){return this.input?this.input.getName():(0,I.kg)(9960,"Text Merge Editor")}createEditorControl(e,t){this.rootHtmlElement=e,e.classList.add("merge-editor"),this.applyLayout(this._layoutMode.value),this.applyOptions(t)}updateEditorControlOptions(e){this.applyOptions(e)}applyOptions(e){const t=(0,Hh.$N)(e,{minimap:{enabled:!1},glyphMargin:!1,lineNumbersMinChars:2,readOnly:!this.inputsWritable});this.input1View.updateOptions(t),this.input2View.updateOptions(t),this.baseViewOptions.set({...this.input2View.editor.getRawOptions()},void 0),this.inputResultView.updateOptions(e)}getMainControl(){return this.inputResultView.editor}layout(e){this._grid.value?.layout(e.width,e.height)}async setInput(e,t,i,o){if(!(e instanceof Rh.O))throw new xe.D7("ONLY MergeEditorInput is supported");await super.setInput(e,t,i,o),this._sessionDisposables.clear(),(0,Oh.Rn)((e=>{this._viewModel.set(void 0,e),this._inputModel.set(void 0,e)}));const n=await e.resolve(),s=n.model,r=this.instantiationService.createInstance(cl,s,this.input1View,this.input2View,this.inputResultView,this.baseView,this.showNonConflictingChanges);s.telemetry.reportMergeEditorOpened({combinableConflictCount:s.combinableConflictCount,conflictCount:s.conflictCount,baseTop:this._layoutModeObs.get().showBaseAtTop,baseVisible:this._layoutModeObs.get().showBase,isColumnView:"columns"===this._layoutModeObs.get().kind}),(0,Oh.Rn)((e=>{this._viewModel.set(r,e),this._inputModel.set(n,e)})),this._sessionDisposables.add(r),this._ctxResultUri.set(n.resultUri.toString()),this._ctxBaseUri.set(s.base.uri.toString()),this._sessionDisposables.add((0,p.s)((()=>{this._ctxBaseUri.reset(),this._ctxResultUri.reset()}))),this._sessionDisposables.add((0,Nh.yC)(((e,t)=>{const i=this.baseView.read(e);this.inputResultView.editor.changeViewZones((o=>{const n=this._layoutModeObs.read(e),s="columns"===n.kind,a="mixed"===n.kind&&!n.showBaseAtTop;this.input1View.editor.changeViewZones((n=>{this.input2View.editor.changeViewZones((c=>{i?i.editor.changeViewZones((d=>{t.add(this.setViewZones(e,r,this.input1View.editor,n,this.input2View.editor,c,i.editor,d,a,this.inputResultView.editor,o,s))})):t.add(this.setViewZones(e,r,this.input1View.editor,n,this.input2View.editor,c,void 0,void 0,!1,this.inputResultView.editor,o,s))}))}))})),this.scrollSynchronizer.updateScrolling()})));const a=this.loadEditorViewState(e,i);a?this._applyViewState(a):this._sessionDisposables.add((0,Hh.FU)(s.onInitialized,(()=>{const e=s.modifiedBaseRanges.get().find((e=>e.isConflicting));e&&(this.input1View.editor.revealLineInCenter(e.input1Range.startLineNumber),(0,Oh.Rn)((t=>{r.setActiveModifiedBaseRange(e,t)})))})));const c=e=>{const t=(0,zh.k)(e,this._codeEditorService);(0,zh.T)(s.input2.textModel,t,this._codeEditorService),(0,zh.T)(s.input1.textModel,t,this._codeEditorService),(0,zh.T)(s.resultTextModel,t,this._codeEditorService);const i=this.baseView.get()?.editor.getModel();i&&(0,zh.T)(i,t,this._codeEditorService)};this._sessionDisposables.add(this._codeEditorService.onDidChangeTransientModelProperty((e=>{c(e)}))),c(this.inputResultView.editor.getModel());const d=this;this._sessionDisposables.add(new class{constructor(){this._disposable=new p.Cm;for(const e of this.baseInput1Input2())this._disposable.add(e.onDidChangeContent((()=>this._checkBaseInput1Input2AllEmpty())))}dispose(){this._disposable.dispose()}*baseInput1Input2(){yield s.base,yield s.input1.textModel,yield s.input2.textModel}_checkBaseInput1Input2AllEmpty(){for(const e of this.baseInput1Input2())if(e.getValueLength()>0)return;d.editorService.replaceEditors([{editor:e,replacement:{resource:e.result,options:{preserveFocus:!0}},forceReplaceDirty:!0}],d.group)}})}setViewZones(e,t,i,o,n,s,r,a,c,d,h,l){const u=[],g=[],m=[],b=[],w=this.viewZoneComputer.computeViewZones(e,t,{codeLensesVisible:this.codeLensesVisible.read(e),showNonConflictingChanges:this.showNonConflictingChanges.read(e),shouldAlignBase:c,shouldAlignResult:l}),v=new p.Cm;if(a)for(const e of w.baseViewZones)e.create(a,m,v);for(const e of w.resultViewZones)e.create(h,b,v);for(const e of w.input1ViewZones)e.create(o,u,v);for(const e of w.input2ViewZones)e.create(s,g,v);return v.add({dispose:()=>{i.changeViewZones((e=>{for(const t of u)e.removeZone(t)})),n.changeViewZones((e=>{for(const t of g)e.removeZone(t)})),r?.changeViewZones((e=>{for(const t of m)e.removeZone(t)})),d.changeViewZones((e=>{for(const t of b)e.removeZone(t)}))}}),v}setOptions(e){super.setOptions(e),e&&(0,Lc.r)(e,this.inputResultView.editor,0)}clearInput(){super.clearInput(),this._sessionDisposables.clear();for(const{editor:e}of[this.input1View,this.input2View,this.inputResultView])e.setModel(null)}focus(){super.focus(),(this.getControl()??this.inputResultView.editor).focus()}hasFocus(){for(const{editor:e}of[this.input1View,this.input2View,this.inputResultView])if(e.hasTextFocus())return!0;return super.hasFocus()}setEditorVisible(e){super.setEditorVisible(e);for(const{editor:t}of[this.input1View,this.input2View,this.inputResultView])e?t.onVisible():t.onHide();this._ctxIsMergeEditor.set(e)}getControl(){return this.inputResultView.editor}get scopedContextKeyService(){const e=this.getControl();return e?.invokeWithinContext((e=>e.get(d.f)))}toggleBase(){this.setLayout({...this._layoutMode.value,showBase:!this._layoutMode.value.showBase})}toggleShowBaseTop(){const e=this._layoutMode.value.showBase&&this._layoutMode.value.showBaseAtTop;this.setLayout({...this._layoutMode.value,showBaseAtTop:!0,showBase:!e})}toggleShowBaseCenter(){const e=this._layoutMode.value.showBase&&!this._layoutMode.value.showBaseAtTop;this.setLayout({...this._layoutMode.value,showBaseAtTop:!1,showBase:!e})}setLayoutKind(e){this.setLayout({...this._layoutMode.value,kind:e})}setLayout(e){const t=this._layoutMode.value;JSON.stringify(t)!==JSON.stringify(e)&&(this.model?.telemetry.reportLayoutChange({baseTop:e.showBaseAtTop,baseVisible:e.showBase,isColumnView:"columns"===e.kind}),this.applyLayout(e))}applyLayout(e){(0,Oh.Rn)((t=>{if(e.showBase&&!this.baseView.get()){this.baseViewDisposables.clear();const e=this.baseViewDisposables.add(this.instantiationService.createInstance(ol,this.viewModel));this.baseViewDisposables.add((0,Nh.fm)((t=>{const i=this.baseViewOptions.read(t);i&&e.updateOptions(i)}))),this.baseView.set(e,t)}else!e.showBase&&this.baseView.get()&&(this.baseView.set(void 0,t),this.baseViewDisposables.clear());"mixed"===e.kind?this.setGrid([e.showBaseAtTop&&e.showBase?{size:38,data:this.baseView.get().view}:void 0,{size:38,groups:[{data:this.input1View.view},!e.showBaseAtTop&&e.showBase?{data:this.baseView.get().view}:void 0,{data:this.input2View.view}].filter(y.O9)},{size:62,data:this.inputResultView.view}].filter(y.O9)):"columns"===e.kind&&this.setGrid([e.showBase?{size:40,data:this.baseView.get().view}:void 0,{size:60,groups:[{data:this.input1View.view},{data:this.inputResultView.view},{data:this.input2View.view}]}].filter(y.O9)),this._layoutMode.value=e,this._ctxUsesColumnLayout.set(e.kind),this._ctxShowBase.set(e.showBase),this._ctxShowBaseAtTop.set(e.showBaseAtTop),this._onDidChangeSizeConstraints.fire(),this._layoutModeObs.set(e,t)}))}setGrid(e){let t=-1,i=-1;this._grid.value&&(t=this._grid.value.width,i=this._grid.value.height),this._grid.value=Bh.A_.from({orientation:0,size:100,groups:e},{styles:{separatorBorder:this.theme.getColor(Tl)??hs.Q1.transparent},proportionalLayout:!0}),(0,ke.Ln)(this.rootHtmlElement,this._grid.value.element),-1!==t&&this._grid.value.layout(t,i)}_applyViewState(e){e&&(this.inputResultView.editor.restoreViewState(e),e.input1State&&this.input1View.editor.restoreViewState(e.input1State),e.input2State&&this.input2View.editor.restoreViewState(e.input2State),e.focusIndex>=0&&[this.input1View.editor,this.input2View.editor,this.inputResultView.editor][e.focusIndex].focus())}computeEditorViewState(e){if(!(0,C.n4)(this.inputModel.get()?.resultUri,e))return;const t=this.inputResultView.editor.saveViewState();if(!t)return;const i=this.input1View.editor.saveViewState()??void 0,o=this.input2View.editor.saveViewState()??void 0,n=[this.input1View.editor,this.input2View.editor,this.inputResultView.editor].findIndex((e=>e.hasWidgetFocus()));return{...t,input1State:i,input2State:o,focusIndex:n}}tracksEditorViewState(e){return e instanceof Rh.O}toggleShowNonConflictingChanges(){this.showNonConflictingChanges.set(!this.showNonConflictingChanges.get(),void 0),this.showNonConflictingChangesStore.set(this.showNonConflictingChanges.get()),this._ctxShowNonConflictingChanges.set(this.showNonConflictingChanges.get())}};Fl=Ol=(0,s.C)([(0,s.Q)(1,a._Y),(0,s.Q)(2,d.f),(0,s.Q)(3,b.k),(0,s.Q)(4,h.C),(0,s.Q)(5,Zi.G),(0,s.Q)(6,Wc.U),(0,s.Q)(7,z.p),(0,s.Q)(8,be.I),(0,s.Q)(9,U.m),(0,s.Q)(10,ve.$),(0,s.Q)(11,re.T),(0,s.Q)(12,z.p)],Fl);let Gl=class{static{Nl=this}static{this._key="mergeEditor/layout"}constructor(e){this._storageService=e,this._value={kind:"mixed",showBase:!1,showBaseAtTop:!0};const t=e.get(Nl._key,0,"mixed");if("mixed"===t||"columns"===t)this._value={kind:t,showBase:!1,showBaseAtTop:!0};else if(t)try{this._value=JSON.parse(t)}catch(e){(0,xe.dz)(e)}}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._storageService.store(Nl._key,JSON.stringify(this._value),0,0))}};Gl=Nl=(0,s.C)([(0,s.Q)(0,h.C)],Gl);let Wl=class extends p.jG{constructor(e,t){super(),this._editorService=e,this._store.add(t.registerCodeEditorOpenHandler(this.openCodeEditorFromMergeEditor.bind(this)))}async openCodeEditorFromMergeEditor(e,t,i){const o=this._editorService.activeEditorPane;if(!i&&e.options&&o instanceof Fl&&o.getControl()&&o.input instanceof Rh.O&&(0,C.n4)(e.resource,o.input.result)){const t=o.getControl();return(0,Lc.r)(e.options,t,0),t}return null}};Wl=(0,s.C)([(0,s.Q)(0,be.I),(0,s.Q)(1,re.T)],Wl);let zl=class extends p.jG{static{this.ID="workbench.contrib.mergeEditorResolver"}constructor(e,t){super(),this._register(e.registerEditor("*",{id:Q.Ie.id,label:Q.Ie.displayName,detail:Q.Ie.providerDisplayName,priority:K.C8.builtin},{},{createMergeEditorInput:e=>({editor:t.createInstance(Rh.O,e.base.resource,{uri:e.input1.resource,title:e.input1.label??(0,C.P8)(e.input1.resource),description:e.input1.description??"",detail:e.input1.detail},{uri:e.input2.resource,title:e.input2.label??(0,C.P8)(e.input2.resource),description:e.input2.description??"",detail:e.input2.detail},e.result.resource)})}))}};zl=(0,s.C)([(0,s.Q)(0,G.Y),(0,s.Q)(1,a._Y)],zl);class Hl extends _.L{constructor(e){super(e)}run(e){const{activeEditorPane:t}=e.get(be.I);if(t instanceof Fl){const i=t.viewModel.get();if(!i)return;this.runWithViewModel(i,e)}}}class Ql extends _.L{constructor(e){super(e)}run(e,...t){const{activeEditorPane:i}=e.get(be.I);if(i instanceof Fl){const o=i.viewModel.get();if(!o)return;return this.runWithMergeEditor({viewModel:o,inputModel:i.inputModel.get(),input:i.input,editorIdentifier:{editor:i.input,groupId:i.group.id}},e,...t)}}}class Ul extends _.L{constructor(){super({id:"_open.mergeEditor",title:(0,I.aS)(9925,"Open Merge Editor")})}run(e,...t){const i=$l.validate(t[0]),o={base:{resource:i.base},input1:{resource:i.input1.uri,label:i.input1.title,description:i.input1.description,detail:i.input1.detail},input2:{resource:i.input2.uri,label:i.input2.title,description:i.input2.description,detail:i.input2.detail},result:{resource:i.output},options:{preserveFocus:!0}};e.get(be.I).openEditor(o)}}var $l;!function(e){function t(e){if("string"==typeof e)return new Rh.Q(v.rz.parse(e,!0),void 0,void 0,void 0);if(!e||"object"!=typeof e)throw new TypeError("invalid argument");if(function(e){if(!e||"object"!=typeof e)return!1;const t=e;return"string"==typeof t.scheme&&"string"==typeof t.authority&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.fragment}(e))return new Rh.Q(v.rz.revive(e),void 0,void 0,void 0);const t=e,o=t.title,n=i(t.uri),s=t.detail,r=t.description;return new Rh.Q(n,o,s,r)}function i(e){if("string"==typeof e)return v.rz.parse(e,!0);if(e&&"object"==typeof e)return v.rz.revive(e);throw new TypeError("invalid argument")}e.validate=function(e){if(!e||"object"!=typeof e)throw new TypeError("invalid argument");const o=e,n=i(o.base),s=i(o.output);return{base:n,input1:t(o.input1),input2:t(o.input2),output:s}}}($l||($l={}));class Kl extends _.L{constructor(){super({id:"merge.mixedLayout",title:(0,I.aS)(9926,"Mixed Layout"),toggled:Vl.vp.isEqualTo("mixed"),menu:[{id:_.D8.EditorTitle,when:Vl.T_,group:"1_merge",order:9}],precondition:Vl.T_})}run(e){const{activeEditorPane:t}=e.get(be.I);t instanceof Fl&&t.setLayoutKind("mixed")}}class jl extends _.L{constructor(){super({id:"merge.columnLayout",title:(0,I.aS)(9927,"Column Layout"),toggled:Vl.vp.isEqualTo("columns"),menu:[{id:_.D8.EditorTitle,when:Vl.T_,group:"1_merge",order:10}],precondition:Vl.T_})}run(e){const{activeEditorPane:t}=e.get(be.I);t instanceof Fl&&t.setLayoutKind("columns")}}class Zl extends _.L{constructor(){super({id:"merge.showNonConflictingChanges",title:(0,I.aS)(9928,"Show Non-Conflicting Changes"),toggled:Vl.IO.isEqualTo(!0),menu:[{id:_.D8.EditorTitle,when:Vl.T_,group:"3_merge",order:9}],precondition:Vl.T_})}run(e){const{activeEditorPane:t}=e.get(be.I);t instanceof Fl&&t.toggleShowNonConflictingChanges()}}class Yl extends _.L{constructor(){super({id:"merge.showBase",title:(0,I.aS)(9929,"Show Base"),toggled:Vl.JN.isEqualTo(!0),menu:[{id:_.D8.EditorTitle,when:c.M$.and(Vl.T_,Vl.vp.isEqualTo("columns")),group:"2_merge",order:9}]})}run(e){const{activeEditorPane:t}=e.get(be.I);t instanceof Fl&&t.toggleBase()}}class ql extends _.L{constructor(){super({id:"merge.showBaseTop",title:(0,I.aS)(9930,"Show Base Top"),toggled:c.M$.and(Vl.JN,Vl.BI),menu:[{id:_.D8.EditorTitle,when:c.M$.and(Vl.T_,Vl.vp.isEqualTo("mixed")),group:"2_merge",order:10}]})}run(e){const{activeEditorPane:t}=e.get(be.I);t instanceof Fl&&t.toggleShowBaseTop()}}class Jl extends _.L{constructor(){super({id:"merge.showBaseCenter",title:(0,I.aS)(9931,"Show Base Center"),toggled:c.M$.and(Vl.JN,Vl.BI.negate()),menu:[{id:_.D8.EditorTitle,when:c.M$.and(Vl.T_,Vl.vp.isEqualTo("mixed")),group:"2_merge",order:11}]})}run(e){const{activeEditorPane:t}=e.get(be.I);t instanceof Fl&&t.toggleShowBaseCenter()}}const Xl=(0,I.aS)(9932,"Merge Editor");async function eu(e,t,i){t.openEditor(t.activeEditor,{pinned:!0});const o=e.model.base,n=1===i?e.inputCodeEditorView1.editor:e.inputCodeEditorView2.editor,s=n.getPosition().lineNumber;await t.openEditor({original:{resource:o.uri},modified:{resource:n.getModel().uri},options:{selection:{startLineNumber:s,startColumn:1},revealIfOpened:!0,revealIfVisible:!0}})}class tu extends _.L{constructor(){super({id:"mergeEditor.resetCloseWithConflictsChoice",category:Xl,title:(0,I.aS)(9946,"Reset Choice for 'Close with Conflicts'"),f1:!0})}run(e){e.get(h.C).remove(Vl.N8,0)}}const iu=(0,I.aS)(9951,"Merge Editor (Dev)");class ou extends _.L{constructor(){super({id:"merge.dev.copyContentsJson",category:iu,title:(0,I.aS)(9952,"Copy Merge Editor State as JSON"),icon:xi.W6.layoutCentered,f1:!0,precondition:Vl.T_})}run(e){const{activeEditorPane:t}=e.get(be.I),i=e.get(jr.h),o=e.get(Y.O);if(!(t instanceof Fl))return void o.info({name:(0,I.kg)(9953,"Merge Editor"),message:(0,I.kg)(9954,"No active merge editor")});const n=t.model;if(!n)return;const s={languageId:n.resultTextModel.getLanguageId(),base:n.base.getValue(),input1:n.input1.textModel.getValue(),input2:n.input2.textModel.getValue(),result:n.resultTextModel.getValue(),initialResult:n.getInitialResultValue()},r=JSON.stringify(s,void 0,4);i.writeText(r),o.info({name:(0,I.kg)(9953,"Merge Editor"),message:(0,I.kg)(9955,"Successfully copied merge editor state")})}}class nu extends _.L{constructor(){super({id:"merge.dev.saveContentsToFolder",category:iu,title:(0,I.aS)(9956,"Save Merge Editor State to Folder"),icon:xi.W6.layoutCentered,f1:!0,precondition:Vl.T_})}async run(e){const{activeEditorPane:t}=e.get(be.I),i=e.get(Y.O),o=e.get(Wi.D),n=e.get(ve.$),s=e.get(Xo.L);if(!(t instanceof Fl))return void i.info({name:(0,I.kg)(9953,"Merge Editor"),message:(0,I.kg)(9954,"No active merge editor")});const r=t.model;if(!r)return;const a=await o.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,title:(0,I.kg)(9957,"Select folder to save to")});if(!a)return;const c=a[0],d=s.getExtensions(r.resultTextModel.getLanguageId())[0]||"";async function h(e,t){await n.writeFile(v.rz.joinPath(c,e+d),ft.MB.fromString(t),{})}await Promise.all([h("base",r.base.getValue()),h("input1",r.input1.textModel.getValue()),h("input2",r.input2.textModel.getValue()),h("result",r.resultTextModel.getValue()),h("initialResult",r.getInitialResultValue())]),i.info({name:(0,I.kg)(9953,"Merge Editor"),message:(0,I.kg)(9958,"Successfully saved merge editor state to folder")})}}class su extends _.L{constructor(){super({id:"merge.dev.loadContentsFromFolder",category:iu,title:(0,I.aS)(9959,"Load Merge Editor State from Folder"),icon:xi.W6.layoutCentered,f1:!0})}async run(e,t){const i=e.get(Wi.D),o=e.get(be.I),n=e.get(ve.$),s=e.get(j.G);let r;if(t||(t={}),t.folderUri)r=t.folderUri;else{const e=await i.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,title:(0,I.kg)(9957,"Select folder to save to")});if(!e)return;r=e[0]}const a=await n.resolve(r);function c(e){return a.children.find((t=>t.name.startsWith(e)))?.resource}const d=await async function(e,t){if(t)return"initial"===t;const i=await e.pick([{label:"result",result:!1},{label:"initial result",result:!0}],{canPickMany:!1});return i?.result}(s,t.resultState),h={base:{resource:c("base")},input1:{resource:c("input1"),label:"Input 1",description:"Input 1",detail:"(from file)"},input2:{resource:c("input2"),label:"Input 2",description:"Input 2",detail:"(from file)"},result:{resource:c(d?"initialResult":"result")}};o.openEditor(h)}}var ru=i(19427);u.O.as(Q.q5.EditorPane).registerEditorPane(oo.nQ.create(Fl,Fl.ID,(0,I.kg)(4193,"Merge Editor")),[new o.d(Rh.O)]),u.O.as(Q.q5.EditorFactory).registerEditorSerializer(Rh.O.ID,class{canSerialize(){return!0}serialize(e){return JSON.stringify(this.toJSON(e))}toJSON(e){return{base:e.base,input1:e.input1,input2:e.input2,result:e.result}}deserialize(e,t){try{const i=(0,ru.qg)(t);return e.createInstance(Rh.O,i.base,new Rh.Q(i.input1.uri,i.input1.title,i.input1.detail,i.input1.description),new Rh.Q(i.input2.uri,i.input2.title,i.input2.detail,i.input2.description),i.result)}catch(e){return void(0,xe.dz)(e)}}}),u.O.as(go.Fd.Configuration).registerConfiguration({properties:{"mergeEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:"advanced",markdownEnumDescriptions:[(0,I.kg)(4194,"Uses the legacy diffing algorithm."),(0,I.kg)(4195,"Uses the advanced diffing algorithm.")]},"mergeEditor.showDeletionMarkers":{type:"boolean",default:!0,description:"Controls if deletions in base or one of the inputs should be indicated by a vertical bar."}}}),(0,_.ug)(class extends Hl{constructor(){super({id:"merge.openResult",icon:xi.W6.goToFile,title:(0,I.aS)(9933,"Open File"),category:Xl,menu:[{id:_.D8.EditorTitle,when:Vl.T_,group:"navigation",order:1}],precondition:Vl.T_})}runWithViewModel(e,t){t.get(be.I).openEditor({resource:e.model.resultTextModel.uri})}}),(0,_.ug)(Kl),(0,_.ug)(jl),(0,_.ug)(Ul),(0,_.ug)(class extends Hl{constructor(){super({id:"merge.openBaseEditor",category:Xl,title:(0,I.aS)(9941,"Open Base File"),f1:!0,precondition:Vl.T_})}runWithViewModel(e,t){t.get(Yo.C).open(e.model.base.uri)}}),(0,_.ug)(Zl),(0,_.ug)(Yl),(0,_.ug)(ql),(0,_.ug)(Jl),(0,_.ug)(class extends Hl{constructor(){super({id:"merge.goToNextUnhandledConflict",category:Xl,title:(0,I.aS)(9934,"Go to Next Unhandled Conflict"),icon:xi.W6.arrowDown,menu:[{id:_.D8.EditorTitle,when:Vl.T_,group:"navigation",order:3}],f1:!0,precondition:Vl.T_})}runWithViewModel(e){e.model.telemetry.reportNavigationToNextConflict(),e.goToNextModifiedBaseRange((t=>!e.model.isHandled(t).get()))}}),(0,_.ug)(class extends Hl{constructor(){super({id:"merge.goToPreviousUnhandledConflict",category:Xl,title:(0,I.aS)(9935,"Go to Previous Unhandled Conflict"),icon:xi.W6.arrowUp,menu:[{id:_.D8.EditorTitle,when:Vl.T_,group:"navigation",order:2}],f1:!0,precondition:Vl.T_})}runWithViewModel(e){e.model.telemetry.reportNavigationToPreviousConflict(),e.goToPreviousModifiedBaseRange((t=>!e.model.isHandled(t).get()))}}),(0,_.ug)(class extends Hl{constructor(){super({id:"merge.toggleActiveConflictInput1",category:Xl,title:(0,I.aS)(9936,"Toggle Current Conflict from Left"),f1:!0,precondition:Vl.T_})}runWithViewModel(e){e.toggleActiveConflict(1)}}),(0,_.ug)(class extends Hl{constructor(){super({id:"merge.toggleActiveConflictInput2",category:Xl,title:(0,I.aS)(9937,"Toggle Current Conflict from Right"),f1:!0,precondition:Vl.T_})}runWithViewModel(e){e.toggleActiveConflict(2)}}),(0,_.ug)(class extends Hl{constructor(){super({id:"mergeEditor.compareInput1WithBase",category:Xl,title:(0,I.aS)(9938,"Compare Input 1 With Base"),shortTitle:(0,I.kg)(9939,"Compare With Base"),f1:!0,precondition:Vl.T_,menu:{id:_.D8.MergeInput1Toolbar,group:"primary"},icon:xi.W6.compareChanges})}runWithViewModel(e,t){eu(e,t.get(be.I),1)}}),(0,_.ug)(class extends Hl{constructor(){super({id:"mergeEditor.compareInput2WithBase",category:Xl,title:(0,I.aS)(9940,"Compare Input 2 With Base"),shortTitle:(0,I.kg)(9939,"Compare With Base"),f1:!0,precondition:Vl.T_,menu:{id:_.D8.MergeInput2Toolbar,group:"primary"},icon:xi.W6.compareChanges})}runWithViewModel(e,t){eu(e,t.get(be.I),2)}}),(0,_.ug)(class extends Hl{constructor(){super({id:"merge.acceptAllInput1",category:Xl,title:(0,I.aS)(9942,"Accept All Changes from Left"),f1:!0,precondition:Vl.T_,menu:{id:_.D8.MergeInput1Toolbar,group:"primary"},icon:xi.W6.checkAll})}runWithViewModel(e){e.acceptAll(1)}}),(0,_.ug)(class extends Hl{constructor(){super({id:"merge.acceptAllInput2",category:Xl,title:(0,I.aS)(9943,"Accept All Changes from Right"),f1:!0,precondition:Vl.T_,menu:{id:_.D8.MergeInput2Toolbar,group:"primary"},icon:xi.W6.checkAll})}runWithViewModel(e){e.acceptAll(2)}}),(0,_.ug)(class extends Hl{constructor(){super({id:"mergeEditor.resetResultToBaseAndAutoMerge",category:Xl,title:(0,I.aS)(9944,"Reset Result"),shortTitle:(0,I.kg)(9945,"Reset"),f1:!0,precondition:Vl.T_,menu:{id:_.D8.MergeInputResultToolbar,group:"primary"},icon:xi.W6.discard})}runWithViewModel(e,t){e.model.reset()}}),(0,_.ug)(class extends Ql{constructor(){super({id:"mergeEditor.acceptMerge",category:Xl,title:(0,I.aS)(9947,"Complete Merge"),f1:!1,precondition:Vl.T_})}async runWithMergeEditor({inputModel:e,editorIdentifier:t,viewModel:i},o){const n=o.get(Wi.X),s=o.get(be.I);if(i.model.unhandledConflictsCount.get()>0){const{confirmed:t}=await n.confirm({message:(0,I.kg)(9948,"Do you want to complete the merge of {0}?",(0,C.P8)(e.resultUri)),detail:(0,I.kg)(9949,"The file contains unhandled conflicts."),primaryButton:(0,I.kg)(9950,"&&Complete with Conflicts")});if(!t)return{successful:!1}}return await e.accept(),await s.closeEditor(t),{successful:!0}}}),(0,_.ug)(tu),(0,_.ug)(ou),(0,_.ug)(nu),(0,_.ug)(su),u.O.as($o.Fd.Workbench).registerWorkbenchContribution(Wl,3),(0,$o.tr)(zl.ID,zl,1);var au=i(64641);function cu(e,t){e?.addImplementation(100,"webview",(e=>{const i=e.get(ai.a).activeWebview;if(i?.isFocused)return t(i),!0;if((0,ke.bq)()?.classList.contains("action-menu-item")){const i=e.get(be.I);if(i.activeEditor instanceof ih.w)return t(i.activeEditor.webview),!0}return!1}))}cu(Ge.aU,(e=>e.undo())),cu(Ge.ih,(e=>e.redo())),cu(Ge.tc,(e=>e.selectAll())),cu(au.en,(e=>e.copy())),cu(au.On,(e=>e.paste())),cu(au.t,(e=>e.cut()));const du="preventDefaultContextMenuItems";au.t&&_.ZG.appendMenuItem(_.D8.WebviewContext,{command:{id:au.t.id,title:(0,I.kg)(4196,"Cut")},group:"5_cutcopypaste",order:1,when:c.M$.not(du)}),au.en&&_.ZG.appendMenuItem(_.D8.WebviewContext,{command:{id:au.en.id,title:(0,I.kg)(4197,"Copy")},group:"5_cutcopypaste",order:2,when:c.M$.not(du)}),au.On&&_.ZG.appendMenuItem(_.D8.WebviewContext,{command:{id:au.On.id,title:(0,I.kg)(4198,"Paste")},group:"5_cutcopypaste",order:3,when:c.M$.not(du)});var hu=i(37461);const lu=(0,I.kg)(4199,"Configure");let uu=class extends p.jG{constructor(e,t){super();const i=[new pu,new gu].map((e=>new mu(t,e)));let o;i.forEach((e=>this._register(e)));const n=()=>{const t=e.activeTextEditorControl;if(t===o)return;o=t;const n=(0,po.jA)(t);i.forEach((e=>e.onActiveEditorChanged(n)))};this._register(e.onDidActiveEditorChange(n)),n()}};uu=(0,s.C)([(0,s.Q)(0,be.I),(0,s.Q)(1,Dh.L)],uu);class pu{constructor(){this.id="decoratorsLimitInfo",this.name=(0,I.kg)(4200,"Color Decorator Status"),this.label=(0,I.kg)(4201,"Color Decorators"),this.source=(0,I.kg)(4202,"Color Decorators"),this.settingsId="editor.colorDecoratorsLimit"}getLimitReporter(e){return hu.mn.get(e)?.limitReporter}}class gu{constructor(){this.id="foldingLimitInfo",this.name=(0,I.kg)(4203,"Folding Status"),this.label=(0,I.kg)(4204,"Folding Ranges"),this.source=(0,I.kg)(4205,"Folding"),this.settingsId="editor.foldingMaximumRegions"}getLimitReporter(e){return qh.WR.get(e)?.limitReporter}}class mu{constructor(e,t){this.languageStatusService=e,this.accessor=t}onActiveEditorChanged(e){let t;return this._indicatorChangeListener&&(this._indicatorChangeListener.dispose(),this._indicatorChangeListener=void 0),e&&(t=this.accessor.getLimitReporter(e)),this.updateStatusItem(t),!!t&&(this._indicatorChangeListener=t.onDidChange((e=>{this.updateStatusItem(t)})),!0)}updateStatusItem(e){if(this._limitStatusItem&&(this._limitStatusItem.dispose(),this._limitStatusItem=void 0),e&&!1!==e.limited){const t={id:this.accessor.id,selector:"*",name:this.accessor.name,severity:X.A.Warning,label:this.accessor.label,detail:(0,I.kg)(4206,"only {0} shown for performance reasons",e.limited),command:{id:"workbench.action.openSettings",arguments:[this.accessor.settingsId],title:lu},accessibilityInfo:void 0,source:this.accessor.source,busy:!1};this._limitStatusItem=this.languageStatusService.addStatus(t)}}dispose(){this._limitStatusItem=void 0,this._indicatorChangeListener=void 0}}u.O.as($o.Fd.Workbench).registerWorkbenchContribution(uu,3);let bu=class{constructor(e,t){this.configurationService=e,this.layoutService=t,this.disposables=new p.Cm,m.Jh.filter(e.onDidChangeConfiguration,(e=>e.affectsConfiguration("workbench.sash.size")))(this.onDidChangeSize,this,this.disposables),this.onDidChangeSize(),m.Jh.filter(e.onDidChangeConfiguration,(e=>e.affectsConfiguration("workbench.sash.hoverDelay")))(this.onDidChangeHoverDelay,this,this.disposables),this.onDidChangeHoverDelay()}onDidChangeSize(){const e=this.configurationService.getValue("workbench.sash.size"),t=(0,Al.qE)(e,4,20),i=(0,Al.qE)(e,1,8);this.layoutService.mainContainer.style.setProperty("--vscode-sash-size",t+"px"),this.layoutService.mainContainer.style.setProperty("--vscode-sash-hover-size",i+"px"),(0,Kt._t)(t)}onDidChangeHoverDelay(){(0,Kt.bH)(this.configurationService.getValue("workbench.sash.hoverDelay"))}dispose(){this.disposables.dispose()}};bu=(0,s.C)([(0,s.Q)(0,z.p),(0,s.Q)(1,fi.x)],bu),u.O.as($o.Fd.Workbench).registerWorkbenchContribution(bu,3),u.O.as(go.Fd.Configuration).registerConfiguration({...Wd.nR,properties:{"workbench.sash.size":{type:"number",default:Di.un?20:4,minimum:1,maximum:20,description:(0,I.kg)(4207,"Controls the feedback area size in pixels of the dragging area in between views/editors. Set it to a larger value if you feel it's hard to resize views using the mouse.")},"workbench.sash.hoverDelay":{type:"number",default:300,minimum:0,maximum:2e3,description:(0,I.kg)(4208,"Controls the hover feedback delay in milliseconds of the dragging area in between views/editors.")}}});var wu=i(42624),vu=i(42069);new c.N1("inSettingsEditor",!1),new c.N1("inSettingsJSONEditor",!1),new c.N1("inSettingsSearch",!1),new c.N1("settingsTocRowFocus",!1),new c.N1("settingRowFocus",!1),new c.N1("inKeybindings",!1),new c.N1("inKeybindingsSearch",!1),new c.N1("keybindingFocus",!1),new c.N1("whenFocus",!1);const fu="workbench.action.openKeyboardLayoutPicker";(0,I.kg)(6249,"This setting controls a new feature that is still under refinement yet ready to use. Feedback is welcome."),(0,I.kg)(6250,"This setting controls a new feature that is actively being developed and may be unstable. It is subject to change or removal.");var yu=i(96181);let Cu=class extends p.jG{static{this.ID="workbench.contrib.keyboardLayoutPicker"}constructor(e,t){super(),this.keyboardLayoutService=e,this.statusbarService=t,this.pickerElement=this._register(new p.HE);const i=(0,I.kg)(4209,"Keyboard Layout"),o=this.keyboardLayoutService.getCurrentKeyboardLayout();if(o){const e=(0,wu.bY)(o),t=(0,I.kg)(4210,"Layout: {0}",e.label);this.pickerElement.value=this.statusbarService.addEntry({name:i,text:t,ariaLabel:t,command:fu},"status.workbench.keyboardLayout",1)}this._register(this.keyboardLayoutService.onDidChangeKeyboardLayout((()=>{const e=this.keyboardLayoutService.getCurrentKeyboardLayout(),t=(0,wu.bY)(e);if(this.pickerElement.value){const e=(0,I.kg)(4210,"Layout: {0}",t.label);this.pickerElement.value.update({name:i,text:e,ariaLabel:e,command:fu})}else{const e=(0,I.kg)(4210,"Layout: {0}",t.label);this.pickerElement.value=this.statusbarService.addEntry({name:i,text:e,ariaLabel:e,command:fu},"status.workbench.keyboardLayout",1)}})))}};Cu=(0,s.C)([(0,s.Q)(0,vu.w),(0,s.Q)(1,bi.S)],Cu),(0,$o.tr)(Cu.ID,Cu,1);const Su=[`// ${(0,I.kg)(4211,"Defines the keyboard layout used in VS Code in the browser environment.")}`,`// ${(0,I.kg)(4212,'Open VS Code and run "Developer: Inspect Key Mappings (JSON)" from Command Palette.')}`,"","// Once you have the keyboard layout info, please paste it below.","\n"].join("\n");(0,_.ug)(class extends _.L{constructor(){super({id:fu,title:(0,I.aS)(4213,"Change Keyboard Layout"),f1:!0})}async run(e){const t=e.get(vu.w),i=e.get(j.G),o=e.get(z.p),n=e.get(yu.k),s=e.get(be.I),r=e.get(ve.$),a=t.getAllKeyboardLayouts(),c=t.getCurrentKeyboardLayout(),d="autodetect"===o.getValue("keyboard.layout"),h=a.map((e=>{const t=!d&&(0,wu.Vs)(c,e),i=(0,wu.bY)(e);return{layout:e,label:[i.label,e&&e.isUserKeyboardLayout?"(User configured layout)":""].join(" "),id:e.text||e.lang||e.layout,description:i.description+(t?" (Current layout)":""),picked:!d&&(0,wu.Vs)(c,e)}})).sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0));if(h.length>0){const e=Di.zx?"Mac":Di.uF?"Win":"Linux";h.unshift({type:"separator",label:(0,I.kg)(4214,"Keyboard Layouts ({0})",e)})}const l={label:(0,I.kg)(4215,"Configure Keyboard Layout")};h.unshift(l);const u={label:(0,I.kg)(4216,"Auto Detect"),description:d?`Current: ${(0,wu.bY)(c).label}`:void 0,picked:!!d||void 0};h.unshift(u);const p=await i.pick(h,{placeHolder:(0,I.kg)(4217,"Select Keyboard Layout"),matchOnDescription:!0});if(p)if(p!==u){if(p===l){const e=n.keyboardLayoutResource;return await r.stat(e).then(void 0,(()=>r.createFile(e,ft.MB.fromString(Su)))).then((e=>{if(e)return s.openEditor({resource:e.resource,languageId:"jsonc",options:{pinned:!0}})}),(t=>{throw new Error((0,I.kg)(4218,"Unable to create '{0}' ({1}).",e.toString(),t))})),Promise.resolve()}o.updateValue("keyboard.layout",(0,wu.n$)(p.layout))}else o.updateValue("keyboard.layout","autodetect")}});var ku,_u=i(52606);let xu=class extends jc{static{ku=this}static{this.ID=Qr.H6}constructor(e,t,i,o,n){super(ku.ID,e,{openInternal:(e,t)=>this.openInternal(e,t)},t,i,n),this.editorResolverService=o}async openInternal(e,t){if(e instanceof _u.K&&this.group.activeEditor){const i=this.group.activeEditor,o=i?.toUntyped();if(!o)return;let n=await this.editorResolverService.resolveEditor({...o,options:{...t,override:H.gS.PICK}},this.group);if(2===n)n=void 0;else if(1===n)return;if((0,Q.cs)(n))for(const e of n.editor instanceof We.p?[n.editor.original,n.editor.modified]:[n.editor])e instanceof _u.K&&(e.setForceOpenAsText(),e.setPreferredLanguageId(Qr.lS));await this.group.replaceEditors([{editor:i,replacement:n?.editor??e,options:{...n?.options??t}}])}}getTitle(){return this.input?this.input.getName():(0,I.kg)(9961,"Binary File Viewer")}};xu=ku=(0,s.C)([(0,s.Q)(1,b.k),(0,s.Q)(2,Zi.G),(0,s.Q)(3,G.Y),(0,s.Q)(4,h.C)],xu);let Eu=class extends p.jG{static{this.ID="workbench.contrib.fileEditorWorkingCopyEditorHandler"}constructor(e,t,i){super(),this.textEditorService=t,this.fileService=i,this._register(e.registerHandler(this))}handles(e){return e.typeId===Bd.R&&this.fileService.canHandleResource(e.resource)}handlesSync(e){return e.typeId===Bd.R&&this.fileService.hasProvider(e.resource)}isOpen(e,t){return!!this.handlesSync(e)&&(0,C.n4)(e.resource,t.resource)}createEditor(e){return this.textEditorService.createTextEditor({resource:e.resource,forceFile:!0})}};Eu=(0,s.C)([(0,s.Q)(0,Od.U),(0,s.Q)(1,ce.P),(0,s.Q)(2,ve.$)],Eu);var Du,Iu=i(70340);let Vu=class extends Fc{static{Du=this}static{this.ID=Qr.hS}constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,p,g,m,b,w,v){super(Du.ID,e,t,n,r,a,d,c,h,i),this.paneCompositeService=o,this.contextService=s,this.textFileService=l,this.explorerService=u,this.uriIdentityService=p,this.pathService=g,this.configurationService=m,this.preferencesService=b,this.hostService=w,this.filesConfigurationService=v,this._register(this.fileService.onDidFilesChange((e=>this.onDidFilesChange(e)))),this._register(this.fileService.onDidRunOperation((e=>this.onDidRunOperation(e))))}onDidFilesChange(e){for(const t of e.rawDeleted)this.clearEditorViewState(t)}onDidRunOperation(e){2===e.operation&&e.target&&this.moveEditorViewState(e.resource,e.target.resource,this.uriIdentityService.extUri)}getTitle(){return this.input?this.input.getName():(0,I.kg)(9962,"Text File Editor")}get input(){return this._input}async setInput(e,t,i,o){(0,Gi.G)("code/willSetInputToTextFileEditor"),await super.setInput(e,t,i,o);try{const n=await e.resolve(t);if(o.isCancellationRequested)return;if(n instanceof $c.k)return this.openAsBinary(e,t);const s=n,r=(0,y.eU)(this.editorControl);if(r.setModel(s.textEditorModel),!(0,Q.jw)(t?.viewState)){const o=this.loadEditorViewState(e,i);o&&(t?.selection&&(o.cursorState=[]),r.restoreViewState(o))}t&&(0,Lc.r)(t,r,1),r.updateOptions(this.getReadonlyConfiguration(s.isReadonly())),r.handleInitialized&&r.handleInitialized()}catch(i){await this.handleSetInputError(i,e,t)}(0,Gi.G)("code/didSetInputToTextFileEditor")}async handleSetInputError(e,t,i){if(0===e.textFileOperationResult)return this.openAsBinary(t,i);if(0===e.fileOperationResult){const e=[];throw e.push((0,vi.ih)({id:"workbench.files.action.openFolder",label:(0,I.kg)(9963,"Open Folder"),run:async()=>this.hostService.openWindow([{folderUri:t.resource}],{forceNewWindow:!0})})),this.contextService.isInsideWorkspace(t.preferredResource)&&e.push((0,vi.ih)({id:"workbench.files.action.reveal",label:(0,I.kg)(9964,"Reveal Folder"),run:async()=>(await this.paneCompositeService.openPaneComposite(Qr.xh,0,!0),this.explorerService.select(t.preferredResource,!0))})),(0,Q.Yu)((0,I.kg)(9965,"The file is not displayed in the text editor because it is a directory."),e,{forceMessage:!0})}if(7===e.fileOperationResult){let o;throw o=e instanceof we.BL?(0,I.kg)(9966,"The file is not displayed in the text editor because it is very large ({0}).",we.sW.formatSize(e.size)):(0,I.kg)(9967,"The file is not displayed in the text editor because it is very large."),(0,Q.QT)(this.group,t,i,o,this.preferencesService)}if(1===e.fileOperationResult&&!this.filesConfigurationService.isReadonly(t.preferredResource)&&await this.pathService.hasValidBasename(t.preferredResource))throw(0,Q.Yu)(new we.uf((0,I.kg)(9968,"The editor could not be opened because the file was not found."),1),[(0,vi.ih)({id:"workbench.files.action.createMissingFile",label:(0,I.kg)(9969,"Create File"),run:async()=>(await this.textFileService.create([{resource:t.preferredResource}]),this.editorService.openEditor({resource:t.preferredResource,options:{pinned:!0}}))})],{allowDialog:!0});throw e}openAsBinary(e,t){const i=this.configurationService.getValue("workbench.editor.defaultBinaryEditor"),o={...t,activation:H.u2.PRESERVE};i&&""!==i&&i!==Q.Ie.id?this.doOpenAsBinaryInDifferentEditor(this.group,i,e,o):this.doOpenAsBinaryInSameEditor(this.group,i,e,o)}doOpenAsBinaryInDifferentEditor(e,t,i,o){this.editorService.replaceEditors([{editor:i,replacement:{resource:i.resource,options:{...o,override:t}}}],e)}doOpenAsBinaryInSameEditor(e,t,i,o){t===Q.Ie.id?(i.setForceOpenAsText(),i.setPreferredLanguageId(Qr.lS),o={...o,forceReload:!0}):i.setForceOpenAsBinary(),e.openEditor(i,o)}clearInput(){super.clearInput(),this.editorControl?.setModel(null)}createEditorControl(e,t){(0,Gi.G)("code/willCreateTextFileEditorControl"),super.createEditorControl(e,t),(0,Gi.G)("code/didCreateTextFileEditorControl")}tracksEditorViewState(e){return e instanceof _u.K}tracksDisposedEditorViewState(){return!0}};Vu=Du=(0,s.C)([(0,s.Q)(1,b.k),(0,s.Q)(2,ve.$),(0,s.Q)(3,F.b),(0,s.Q)(4,a._Y),(0,s.Q)(5,fe.V),(0,s.Q)(6,h.C),(0,s.Q)(7,Wc.U),(0,s.Q)(8,be.I),(0,s.Q)(9,Zi.G),(0,s.Q)(10,U.m),(0,s.Q)(11,fo.a),(0,s.Q)(12,Iu.k),(0,s.Q)(13,Ie.J),(0,s.Q)(14,De.S),(0,s.Q)(15,z.p),(0,s.Q)(16,rc.v),(0,s.Q)(17,Qi.v),(0,s.Q)(18,Rd.U)],Vu);let Mu=class extends p.jG{static{this.ID="workbench.contrib.textFileEditorTracker"}constructor(e,t,i,o,n,s,r){super(),this.editorService=e,this.textFileService=t,this.lifecycleService=i,this.hostService=o,this.codeEditorService=n,this.filesConfigurationService=s,this.workingCopyEditorService=r,this.ensureDirtyFilesAreOpenedWorker=this._register(new vt.jL((e=>this.ensureDirtyTextFilesAreOpened(e)),this.getDirtyTextFileTrackerDelay())),this.registerListeners()}registerListeners(){this._register(this.textFileService.files.onDidChangeDirty((e=>this.ensureDirtyFilesAreOpenedWorker.work(e.resource)))),this._register(this.textFileService.files.onDidSaveError((e=>this.ensureDirtyFilesAreOpenedWorker.work(e.resource)))),this._register(this.textFileService.untitled.onDidChangeDirty((e=>this.ensureDirtyFilesAreOpenedWorker.work(e.resource)))),this._register(this.hostService.onDidChangeFocus((e=>e?this.reloadVisibleTextFileEditors():void 0))),this._register(this.lifecycleService.onDidShutdown((()=>this.dispose())))}getDirtyTextFileTrackerDelay(){return 800}ensureDirtyTextFilesAreOpened(e){this.doEnsureDirtyTextFilesAreOpened((0,f.dM)(e.filter((e=>{if(!this.textFileService.isDirty(e))return!1;const t=this.textFileService.files.get(e);if(t?.hasState(2))return!1;if(e.scheme!==$.ny.untitled&&!t?.hasState(5)&&this.filesConfigurationService.hasShortAutoSaveDelay(e))return!1;if(this.editorService.isOpened({resource:e,typeId:e.scheme===$.ny.untitled?Bc.m.ID:Qr.Io,editorId:Q.Ie.id}))return!1;const i=t??this.textFileService.untitled.get(e);return!i||!this.workingCopyEditorService.findEditor(i)})),(e=>e.toString())))}doEnsureDirtyTextFilesAreOpened(e){e.length&&this.editorService.openEditors(e.map((e=>({resource:e,options:{inactive:!0,pinned:!0,preserveFocus:!0}}))))}reloadVisibleTextFileEditors(){(0,f.dM)((0,f.Yc)(this.codeEditorService.listCodeEditors().map((e=>{const t=e.getModel()?.uri;if(!t)return;const i=this.textFileService.files.get(t);return i&&!i.isDirty()&&i.isResolved()?i:void 0}))),(e=>e.resource.toString())).forEach((e=>this.textFileService.files.resolve(e.resource,{reload:{async:!0}})))}};Mu=(0,s.C)([(0,s.Q)(0,be.I),(0,s.Q)(1,fo.a),(0,s.Q)(2,Ve.f),(0,s.Q)(3,Qi.v),(0,s.Q)(4,re.T),(0,s.Q)(5,Rd.U),(0,s.Q)(6,Od.U)],Mu);var Tu=i(69612),Au=i(58349),Lu=i(62876);const Pu="conflictResolution",Ru="learnMoreDirtyWriteError",Bu=(0,I.kg)(5468,"Use the actions in the editor tool bar to either undo your changes or overwrite the content of the file with your changes.");let Ou=class extends p.jG{static{this.ID="workbench.contrib.textFileSaveErrorHandler"}constructor(e,t,i,o,n,s,r){super(),this.notificationService=e,this.textFileService=t,this.contextKeyService=i,this.editorService=o,this.instantiationService=s,this.storageService=r,this.messages=new D.fT,this.conflictResolutionContext=new c.N1("saveConflictResolutionContext",!1,!0).bindTo(this.contextKeyService),this.activeConflictResolutionResource=void 0;const a=this._register(s.createInstance(Qr.SW));this._register(n.registerTextModelContentProvider(Pu,a)),this.textFileService.files.saveErrorHandler=this,this.registerListeners()}registerListeners(){this._register(this.textFileService.files.onDidSave((e=>this.onFileSavedOrReverted(e.model.resource)))),this._register(this.textFileService.files.onDidRevert((e=>this.onFileSavedOrReverted(e.resource)))),this._register(this.editorService.onDidActiveEditorChange((()=>this.onActiveEditorChanged())))}onActiveEditorChanged(){let e,t=!1;const i=this.editorService.activeEditor;if(i instanceof We.p){const o=i.original.resource;o?.scheme===Pu&&(t=!0,e=i.modified.resource)}this.conflictResolutionContext.set(t),this.activeConflictResolutionResource=e}onFileSavedOrReverted(e){const t=this.messages.get(e);t&&(t.close(),this.messages.delete(e))}onSaveError(e,t,i){const o=e,n=t.resource;let s;const r=[],a=[];if(3===o.fileOperationResult)if(this.activeConflictResolutionResource&&(0,C.n4)(this.activeConflictResolutionResource,t.resource)){if(this.storageService.getBoolean(Ru,-1))return;s=Bu,r.push(this.instantiationService.createInstance(Fu)),a.push(this.instantiationService.createInstance(Gu))}else s=(0,I.kg)(5469,"Failed to save '{0}': The content of the file is newer. Please compare your version with the file contents or overwrite the content of the file with your changes.",(0,C.P8)(n)),r.push(this.instantiationService.createInstance(Wu,t)),r.push(this.instantiationService.createInstance(Ku,t,i)),a.push(this.instantiationService.createInstance(ju));else{const a=5===o.fileOperationResult,c=a&&o.options?.unlock,d=6===o.fileOperationResult,h=n.scheme===$.ny.file;h&&(d||c)?r.push(this.instantiationService.createInstance(zu,t,i,!!c)):a?r.push(this.instantiationService.createInstance($u,t,i)):r.push(this.instantiationService.createInstance(Hu,t,i)),r.push(this.instantiationService.createInstance(Uu,t)),r.push(this.instantiationService.createInstance(Qu,t)),s=a?c&&h?Di.uF?(0,I.kg)(5470,"Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.",(0,C.P8)(n)):(0,I.kg)(5471,"Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.",(0,C.P8)(n)):(0,I.kg)(5472,"Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.",(0,C.P8)(n)):h&&d?Di.uF?(0,I.kg)(5473,"Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.",(0,C.P8)(n)):(0,I.kg)(5474,"Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.",(0,C.P8)(n)):(0,I.kg)(5475,"Failed to save '{0}': {1}",(0,C.P8)(n),(0,Tu.rx)(e,!1))}const c={primary:r,secondary:a},d=this.notificationService.notify({id:`${(0,hl.tW)(t.resource.toString())}`,severity:X.A.Error,message:s,actions:c});m.Jh.once(d.onDidClose)((()=>{(0,p.AS)(r),(0,p.AS)(a)})),this.messages.set(t.resource,d)}dispose(){super.dispose(),this.messages.clear()}};Ou=(0,s.C)([(0,s.Q)(0,Y.O),(0,s.Q)(1,fo.a),(0,s.Q)(2,d.f),(0,s.Q)(3,be.I),(0,s.Q)(4,Lo.b),(0,s.Q)(5,a._Y),(0,s.Q)(6,h.C)],Ou);const Nu=[];let Fu=class extends vi.rc{constructor(e){super("workbench.files.action.resolveConflictLearnMore",(0,I.kg)(5476,"Learn More")),this.openerService=e}async run(){await this.openerService.open(v.rz.parse("https://go.microsoft.com/fwlink/?linkid=868264"))}};Fu=(0,s.C)([(0,s.Q)(0,Yo.C)],Fu);let Gu=class extends vi.rc{constructor(e){super("workbench.files.action.resolveConflictLearnMoreDoNotShowAgain",(0,I.kg)(5477,"Don't Show Again")),this.storageService=e}async run(e){this.storageService.store(Ru,!0,-1,0),e.dispose()}};Gu=(0,s.C)([(0,s.Q)(0,h.C)],Gu);let Wu=class extends vi.rc{constructor(e,t,i,o,n){super("workbench.files.action.resolveConflict",(0,I.kg)(5478,"Compare")),this.model=e,this.editorService=t,this.notificationService=i,this.instantiationService=o,this.productService=n}async run(){if(!this.model.isDisposed()){const e=this.model.resource,t=(0,C.P8)(e),i=(0,I.kg)(5479,"{0} (in file) ↔ {1} (in {2}) - Resolve save conflict",t,t,this.productService.nameLong);await Qr.SW.open(e,Pu,i,this.editorService,{pinned:!0});const o={primary:[this.instantiationService.createInstance(Fu)]},n=this.notificationService.notify({id:`${(0,hl.tW)(e.toString())}`,severity:X.A.Info,message:Bu,actions:o,neverShowAgain:{id:Ru,isSecondary:!0}});m.Jh.once(n.onDidClose)((()=>(0,p.AS)(o.primary))),Nu.push(n)}}};Wu=(0,s.C)([(0,s.Q)(1,be.I),(0,s.Q)(2,Y.O),(0,s.Q)(3,a._Y),(0,s.Q)(4,Lu.Y)],Wu);class zu extends vi.rc{constructor(e,t,i){super("workbench.files.action.saveModelElevated",i?Di.uF?(0,I.kg)(5480,"Overwrite as Admin..."):(0,I.kg)(5481,"Overwrite as Sudo..."):Di.uF?(0,I.kg)(5482,"Retry as Admin..."):(0,I.kg)(5483,"Retry as Sudo...")),this.model=e,this.options=t,this.triedToUnlock=i}async run(){this.model.isDisposed()||await this.model.save({...this.options,writeElevated:!0,writeUnlock:this.triedToUnlock,reason:1})}}class Hu extends vi.rc{constructor(e,t){super("workbench.files.action.saveModel",(0,I.kg)(5484,"Retry")),this.model=e,this.options=t}async run(){this.model.isDisposed()||await this.model.save({...this.options,reason:1})}}class Qu extends vi.rc{constructor(e){super("workbench.files.action.revertModel",(0,I.kg)(5485,"Revert")),this.model=e}async run(){this.model.isDisposed()||await this.model.revert()}}let Uu=class extends vi.rc{constructor(e,t){super("workbench.files.action.saveModelAs",Au.VY.value),this.model=e,this.editorService=t}async run(){if(!this.model.isDisposed()){const e=this.findEditor();e&&await this.editorService.save(e,{saveAs:!0,reason:1})}}findEditor(){let e;const t=this.editorService.findEditors(this.model.resource,{supportSideBySide:Q.zX.PRIMARY});for(const i of t){if(i.editor instanceof _u.K){e=i;break}e||(e=i)}return e}};Uu=(0,s.C)([(0,s.Q)(1,be.I)],Uu);class $u extends vi.rc{constructor(e,t){super("workbench.files.action.unlock",(0,I.kg)(5486,"Overwrite")),this.model=e,this.options=t}async run(){this.model.isDisposed()||await this.model.save({...this.options,writeUnlock:!0,reason:1})}}class Ku extends vi.rc{constructor(e,t){super("workbench.files.action.saveIgnoreModifiedSince",(0,I.kg)(5486,"Overwrite")),this.model=e,this.options=t}async run(){this.model.isDisposed()||await this.model.save({...this.options,ignoreModifiedSince:!0,reason:1})}}let ju=class extends vi.rc{constructor(e){super("workbench.files.action.configureSaveConflict",(0,I.kg)(5487,"Configure")),this.preferencesService=e}async run(){this.preferencesService.openSettings({query:"files.saveConflictResolution"})}};ju=(0,s.C)([(0,s.Q)(0,rc.v)],ju);let Zu=class extends p.jG{static{this.ID="workbench.contrib.workspaceWatcher"}constructor(e,t,i,o,n,s,r,a){super(),this.fileService=e,this.configurationService=t,this.contextService=i,this.notificationService=o,this.openerService=n,this.uriIdentityService=s,this.hostService=r,this.telemetryService=a,this.watchedWorkspaces=new D.fT((e=>this.uriIdentityService.extUri.getComparisonKey(e))),this.registerListeners(),this.refresh()}registerListeners(){this._register(this.contextService.onDidChangeWorkspaceFolders((e=>this.onDidChangeWorkspaceFolders(e)))),this._register(this.contextService.onDidChangeWorkbenchState((()=>this.onDidChangeWorkbenchState()))),this._register(this.configurationService.onDidChangeConfiguration((e=>this.onDidChangeConfiguration(e)))),this._register(this.fileService.onDidWatchError((e=>this.onDidWatchError(e))))}onDidChangeWorkspaceFolders(e){for(const t of e.removed)this.unwatchWorkspace(t);for(const t of e.added)this.watchWorkspace(t)}onDidChangeWorkbenchState(){this.refresh()}onDidChangeConfiguration(e){(e.affectsConfiguration("files.watcherExclude")||e.affectsConfiguration("files.watcherInclude"))&&this.refresh()}onDidWatchError(e){const t=e.toString();let i;t.indexOf("ENOSPC")>=0?(i="ENOSPC",this.notificationService.prompt(X.A.Warning,(0,I.kg)(9970,"Unable to watch for file changes. Please follow the instructions link to resolve this issue."),[{label:(0,I.kg)(9971,"Instructions"),run:()=>this.openerService.open(v.rz.parse("https://go.microsoft.com/fwlink/?linkid=867693"))}],{sticky:!0,neverShowAgain:{id:"ignoreEnospcError",isSecondary:!0,scope:Z.wJ.WORKSPACE}})):t.indexOf("EUNKNOWN")>=0?(i="EUNKNOWN",this.notificationService.prompt(X.A.Warning,(0,I.kg)(9972,"File changes watcher stopped unexpectedly. A reload of the window may enable the watcher again unless the workspace cannot be watched for file changes."),[{label:(0,I.kg)(9973,"Reload"),run:()=>this.hostService.reload()}],{sticky:!0,priority:Z.AE.SILENT})):t.indexOf("ETERM")>=0&&(i="ETERM"),i&&this.telemetryService.publicLog2("fileWatcherError",{reason:i})}watchWorkspace(e){const t=[],i=this.configurationService.getValue({resource:e.uri});if(i.files?.watcherExclude)for(const e in i.files.watcherExclude)e&&!0===i.files.watcherExclude[e]&&t.push(e);const o=new D.fT((e=>this.uriIdentityService.extUri.getComparisonKey(e)));if(o.set(e.uri,e.uri),i.files?.watcherInclude)for(const t of i.files.watcherInclude)if(t)if((0,It.oP)(t)){const i=v.rz.file(t).with({scheme:e.uri.scheme});this.uriIdentityService.extUri.isEqualOrParent(i,e.uri)&&o.set(i,i)}else{const i=e.toResource(t);o.set(i,i)}const n=new p.Cm;for(const[,e]of o)n.add(this.fileService.watch(e,{recursive:!0,excludes:t}));this.watchedWorkspaces.set(e.uri,n)}unwatchWorkspace(e){this.watchedWorkspaces.has(e.uri)&&((0,p.AS)(this.watchedWorkspaces.get(e.uri)),this.watchedWorkspaces.delete(e.uri))}refresh(){this.unwatchWorkspaces();for(const e of this.contextService.getWorkspace().folders)this.watchWorkspace(e)}unwatchWorkspaces(){for(const[,e]of this.watchedWorkspaces)e.dispose();this.watchedWorkspaces.clear()}dispose(){super.dispose(),this.unwatchWorkspaces()}};Zu=(0,s.C)([(0,s.Q)(0,ve.$),(0,s.Q)(1,z.p),(0,s.Q)(2,fe.V),(0,s.Q)(3,Y.O),(0,s.Q)(4,Yo.C),(0,s.Q)(5,Ie.J),(0,s.Q)(6,Qi.v),(0,s.Q)(7,b.k)],Zu);let Yu=class extends p.jG{static{this.ID="workbench.contrib.dirtyFilesIndicator"}constructor(e,t,i){super(),this.activityService=e,this.workingCopyService=t,this.filesConfigurationService=i,this.badgeHandle=this._register(new p.HE),this.lastKnownDirtyCount=0,this.updateActivityBadge(),this.registerListeners()}registerListeners(){this._register(this.workingCopyService.onDidChangeDirty((e=>this.onWorkingCopyDidChangeDirty(e))))}onWorkingCopyDidChangeDirty(e){const t=e.isDirty();(!t||2&e.capabilities||!this.filesConfigurationService.hasShortAutoSaveDelay(e.resource))&&(t||this.lastKnownDirtyCount>0)&&this.updateActivityBadge()}updateActivityBadge(){const e=this.lastKnownDirtyCount=this.workingCopyService.dirtyCount;e>0?this.badgeHandle.value=this.activityService.showViewContainerActivity(Qr.xh,{badge:new wi.hV(e,(t=>1===t?(0,I.kg)(9974,"1 unsaved file"):(0,I.kg)(9975,"{0} unsaved files",e)))}):this.badgeHandle.clear()}};Yu=(0,s.C)([(0,s.Q)(0,O.w),(0,s.Q)(1,zo.v),(0,s.Q)(2,Rd.U)],Yu),i(89887);let qu=class{static{this.ID="workbench.contrib.fileUriLabel"}constructor(e){e.registerFormatter({scheme:$.ny.file,formatting:{label:"${authority}${path}",separator:It.Vn,tildify:!Di.uF,normalizeDriveLetter:Di.uF,authorityPrefix:It.Vn+It.Vn,workspaceSuffix:""}})}};qu=(0,s.C)([(0,s.Q)(0,jo.L)],qu),u.O.as(Q.q5.EditorPane).registerEditorPane(oo.nQ.create(Vu,Vu.ID,(0,I.kg)(4219,"Text File Editor")),[new o.d(_u.K)]),u.O.as(Q.q5.EditorPane).registerEditorPane(oo.nQ.create(xu,xu.ID,(0,I.kg)(4220,"Binary File Editor")),[new o.d(_u.K)]),u.O.as(Q.q5.EditorFactory).registerEditorSerializer(Qr.Io,class{canSerialize(e){return!0}serialize(e){const t=e,i=t.resource,o=t.preferredResource,n={resourceJSON:i.toJSON(),preferredResourceJSON:(0,C.n4)(i,o)?void 0:o,name:t.getPreferredName(),description:t.getPreferredDescription(),encoding:t.getEncoding(),modeId:t.getPreferredLanguageId()};return JSON.stringify(n)}deserialize(e,t){return e.invokeFunction((e=>{const i=JSON.parse(t),o=v.rz.revive(i.resourceJSON),n=v.rz.revive(i.preferredResourceJSON),s=i.name,r=i.description,a=i.encoding,c=i.modeId,d=e.get(ce.P).createTextEditor({resource:o,label:s,description:r,encoding:a,languageId:c,forceFile:!0});return n&&d.setPreferredResource(n),d}))}}),(0,$o.tr)(Eu.ID,Eu,2),(0,$o.tr)(Mu.ID,Mu,1),(0,$o.tr)(Ou.ID,Ou,1),(0,$o.tr)(qu.ID,qu,1),(0,$o.tr)(Zu.ID,Zu,3),(0,$o.tr)(Yu.ID,Yu,1),vn.W6.registerLanguage({id:Qr.lS,aliases:["Binary"],mimetypes:["text/x-code-binary"]}),i(24168);class Ju extends _.L{constructor(e,t){super(e),this.direction=t}run(e){const t=e.get(Ce.Y),i=e.get(U.m),o=e.get(F.b),n=t.hasFocus("workbench.parts.editor"),s=t.hasFocus("workbench.parts.panel"),r=t.hasFocus("workbench.parts.sidebar"),a=t.hasFocus("workbench.parts.auxiliarybar");let c;if(n){if(this.navigateAcrossEditorGroup(this.toGroupDirection(this.direction),i))return;c=t.getVisibleNeighborPart("workbench.parts.editor",this.direction)}s&&(c=t.getVisibleNeighborPart("workbench.parts.panel",this.direction)),r&&(c=t.getVisibleNeighborPart("workbench.parts.sidebar",this.direction)),a&&(c=c=t.getVisibleNeighborPart("workbench.parts.auxiliarybar",this.direction)),"workbench.parts.editor"===c?this.navigateBackToEditorGroup(this.toGroupDirection(this.direction),i)||this.navigateToEditorGroup(3===this.direction?0:1,i):"workbench.parts.sidebar"===c?this.navigateToSidebar(t,o):"workbench.parts.panel"===c?this.navigateToPanel(t,o):"workbench.parts.auxiliarybar"===c&&this.navigateToAuxiliaryBar(t,o)}async navigateToPanel(e,t){if(!e.isVisible("workbench.parts.panel"))return!1;const i=t.getActivePaneComposite(1);if(!i)return!1;const o=i.getId();return await t.openPaneComposite(o,1,!0)||!1}async navigateToSidebar(e,t){if(!e.isVisible("workbench.parts.sidebar"))return!1;const i=t.getActivePaneComposite(0);if(!i)return!1;const o=i.getId();return!!await t.openPaneComposite(o,0,!0)}async navigateToAuxiliaryBar(e,t){if(!e.isVisible("workbench.parts.auxiliarybar"))return!1;const i=t.getActivePaneComposite(2);if(!i)return!1;const o=i.getId();return await t.openPaneComposite(o,2,!0)||!1}navigateAcrossEditorGroup(e,t){return this.doNavigateToEditorGroup({direction:e},t)}navigateToEditorGroup(e,t){return this.doNavigateToEditorGroup({location:e},t)}navigateBackToEditorGroup(e,t){if(!t.activeGroup)return!1;const i=this.toOppositeDirection(e);return!t.findGroup({direction:i},t.activeGroup)&&(t.activeGroup.focus(),!0)}toGroupDirection(e){switch(e){case 1:return 1;case 2:return 2;case 3:return 3;case 0:return 0}}toOppositeDirection(e){switch(e){case 0:return 1;case 3:return 2;case 2:return 3;case 1:return 0}}doNavigateToEditorGroup(e,t){const i=t.findGroup(e,t.activeGroup);return!!i&&(i.focus(),!0)}}(0,_.ug)(class extends Ju{constructor(){super({id:"workbench.action.navigateLeft",title:(0,I.aS)(4221,"Navigate to the View on the Left"),category:x.L.View,f1:!0},2)}}),(0,_.ug)(class extends Ju{constructor(){super({id:"workbench.action.navigateRight",title:(0,I.aS)(4222,"Navigate to the View on the Right"),category:x.L.View,f1:!0},3)}}),(0,_.ug)(class extends Ju{constructor(){super({id:"workbench.action.navigateUp",title:(0,I.aS)(4223,"Navigate to the View Above"),category:x.L.View,f1:!0},0)}}),(0,_.ug)(class extends Ju{constructor(){super({id:"workbench.action.navigateDown",title:(0,I.aS)(4224,"Navigate to the View Below"),category:x.L.View,f1:!0},1)}});class Xu extends _.L{constructor(e,t){super(e),this.focusNext=t}run(e){const t=e.get(Ce.Y),i=e.get(be.I);this.focusNextOrPreviousPart(t,i,this.focusNext)}findVisibleNeighbour(e,t,i){const o=(0,ke.fz)();let n;if((0,Te.$M)(o))n="workbench.parts.editor"===t?"workbench.parts.statusbar":"workbench.parts.editor";else switch(t){case"workbench.parts.editor":n=i?"workbench.parts.panel":"workbench.parts.sidebar";break;case"workbench.parts.panel":n=i?"workbench.parts.auxiliarybar":"workbench.parts.editor";break;case"workbench.parts.auxiliarybar":n=i?"workbench.parts.statusbar":"workbench.parts.panel";break;case"workbench.parts.statusbar":n=i?"workbench.parts.activitybar":"workbench.parts.auxiliarybar";break;case"workbench.parts.activitybar":n=i?"workbench.parts.sidebar":"workbench.parts.statusbar";break;case"workbench.parts.sidebar":n=i?"workbench.parts.editor":"workbench.parts.activitybar";break;default:n="workbench.parts.editor"}return e.isVisible(n,o)||"workbench.parts.editor"===n?n:this.findVisibleNeighbour(e,n,i)}focusNextOrPreviousPart(e,t,i){let o;t.activeEditorPane?.hasFocus()||e.hasFocus("workbench.parts.editor")?o="workbench.parts.editor":e.hasFocus("workbench.parts.activitybar")?o="workbench.parts.activitybar":e.hasFocus("workbench.parts.statusbar")?o="workbench.parts.statusbar":e.hasFocus("workbench.parts.sidebar")?o="workbench.parts.sidebar":e.hasFocus("workbench.parts.auxiliarybar")?o="workbench.parts.auxiliarybar":e.hasFocus("workbench.parts.panel")&&(o="workbench.parts.panel"),e.focusPart(o?this.findVisibleNeighbour(e,o,i):"workbench.parts.editor",(0,ke.fz)())}}(0,_.ug)(class extends Xu{constructor(){super({id:"workbench.action.focusNextPart",title:(0,I.aS)(4225,"Focus Next Part"),category:x.L.View,f1:!0,keybinding:{primary:64,weight:200}},!0)}}),(0,_.ug)(class extends Xu{constructor(){super({id:"workbench.action.focusPreviousPart",title:(0,I.aS)(4226,"Focus Previous Part"),category:x.L.View,f1:!0,keybinding:{primary:1088,weight:200}},!1)}}),i(80118);var ep={"vs/workbench/contrib/debug/browser/media/continue-tb.png":new URL(i(8171),i.b).href,"vs/workbench/contrib/debug/browser/media/pause-tb.png":new URL(i(53532),i.b).href,"vs/workbench/contrib/debug/browser/media/restart-tb.png":new URL(i(12565),i.b).href,"vs/workbench/contrib/debug/browser/media/run-with-debugging-tb.png":new URL(i(99455),i.b).href,"vs/workbench/contrib/debug/browser/media/stepinto-tb.png":new URL(i(51738),i.b).href,"vs/workbench/contrib/debug/browser/media/stepout-tb.png":new URL(i(38292),i.b).href,"vs/workbench/contrib/debug/browser/media/stepover-tb.png":new URL(i(14874),i.b).href,"vs/workbench/contrib/debug/browser/media/stop-tb.png":new URL(i(24594),i.b).href};let tp;function ip(e){return null!=e&&(tp=e),{[lo.nu.toString()]:new o.d(Qo,[],!0),[Mi.R.toString()]:new o.d(Ji,[],!1),[n.X.toString()]:new o.d(R,[],!0),[O.w.toString()]:new o.d(N.T,[],!0),[F.b.toString()]:new o.d(Oi,[],!0),[re.T.toString()]:new o.d(de.g,[],!0),[ce.P.toString()]:new o.d(ae.E,[],!1),[G.Y.toString()]:new o.d(ee,[],!1),[oe.T.toString()]:new o.d(ie.E,[],!0),[ne.l.toString()]:new o.d(se.Y,[],!0),[ge.g.toString()]:new o.d(le,[],!0),[me.z.toString()]:new o.d(Ae,[],!1),[Ne.t.toString()]:new o.d(st,[],!0),[ai.a.toString()]:new o.d(di,[],!0),[pi.d.toString()]:new o.d(ui,[],!0),[li.Z.toString()]:new o.d(hi.y,[],!0),[gi.G.toString()]:new o.d(Li,[],!0),[Ki.f.toString()]:new o.d($i,[],!0),[io.I.toString()]:new o.d(no,[],!0),[ro.p.toString()]:new o.d(so.Q,[],!0),[ho.f.toString()]:new o.d(ao,[],!0)}}(0,Kn.B)(ep),i(60970),(0,Kn.B)({"vs/workbench/contrib/webview/browser/pre/service-worker.js":()=>$n(new URL(i(5076),i.b).href,tp),"vs/workbench/contrib/webview/browser/pre/index.html":()=>$n(new URL(i(44768),i.b).href,tp),"vs/workbench/contrib/webview/browser/pre/index-no-csp.html":()=>$n(new URL(i(26373),i.b).href,tp),"vs/workbench/contrib/webview/browser/pre/fake.html":()=>$n(new URL(i(50419),i.b).href,tp)}),(0,jn.S8)((async e=>{e.get(me.z)}))},27064:(e,t,i)=>{i.d(t,{A_:()=>b,FR:()=>C,XQ:()=>o,lm:()=>c});var o,n=i(87427),s=i(24821),r=(i(34924),i(46697)),a=i(13175);function c(e){return!!e.children}function d(e,t){if(0===t.length)return e;if(!c(e))throw new Error("Invalid location");const[i,...o]=t;return d(e.children[i],o)}function h(e,t){const i=u(t);return{offset:0===t?e.top:3===t?e.left+e.width:1===t?e.top+e.height:e.left,range:{start:1===i?e.top:e.left,end:1===i?e.top+e.height:e.left+e.width}}}function l(e,t){return t.length%2==0?(0,r.ks)(e):e}function u(e){return 0===e||1===e?0:1}function p(e,t,i){if(l(e,t)===u(i)){let[e,o]=(0,n.bS)(t);return 3!==i&&1!==i||(o+=1),[...e,o]}{const e=3===i||1===i?1:0;return[...t,e]}}function g(e){const t=e.parentElement;if(!t)throw new Error("Invalid grid element");if(/\bmonaco-grid-view\b/.test(t.className))return[];const i=function(e){const t=e.parentElement;if(!t)throw new Error("Invalid grid element");let i=t.firstElementChild,o=0;for(;i!==e&&i!==t.lastElementChild&&i;)i=i.nextElementSibling,o++;return o}(t);return[...g(t.parentElement.parentElement.parentElement.parentElement),i]}!function(e){e.Distribute={type:"distribute"},e.Split={type:"split"},e.Auto={type:"auto"},e.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}}}(o||(o={}));class m extends s.jG{get orientation(){return this.gridview.orientation}set orientation(e){this.gridview.orientation=e}get width(){return this.gridview.width}get height(){return this.gridview.height}get minimumWidth(){return this.gridview.minimumWidth}get minimumHeight(){return this.gridview.minimumHeight}get maximumWidth(){return this.gridview.maximumWidth}get maximumHeight(){return this.gridview.maximumHeight}get boundarySashes(){return this.gridview.boundarySashes}set boundarySashes(e){this.gridview.boundarySashes=e}set edgeSnapping(e){this.gridview.edgeSnapping=e}get element(){return this.gridview.element}constructor(e,t={}){super(),this.views=new Map,this.didLayout=!1,e instanceof r.gf?(this.gridview=e,this.gridview.getViewMap(this.views)):this.gridview=new r.gf(t),this._register(this.gridview),this._register(this.gridview.onDidSashReset(this.onDidSashReset,this)),e instanceof r.gf||this._addView(e,0,[0]),this.onDidChange=this.gridview.onDidChange,this.onDidScroll=this.gridview.onDidScroll,this.onDidChangeViewMaximized=this.gridview.onDidChangeViewMaximized}style(e){this.gridview.style(e)}layout(e,t,i=0,o=0){this.gridview.layout(e,t,i,o),this.didLayout=!0}addView(e,t,i,o){if(this.views.has(e))throw new Error("Can't add same view twice");const s=u(o);1===this.views.size&&this.orientation!==s&&(this.orientation=s);const r=this.getViewLocation(i),c=p(this.gridview.orientation,r,o);let d;if("number"==typeof t)d=t;else if("split"===t.type){const[,e]=(0,n.bS)(r);d=a.X.Split(e)}else if("distribute"===t.type)d=a.X.Distribute;else if("auto"===t.type){const[,e]=(0,n.bS)(r);d=a.X.Auto(e)}else d=t;this._addView(e,d,c)}addViewAt(e,t,i){if(this.views.has(e))throw new Error("Can't add same view twice");let o;o="number"==typeof t?t:"distribute"===t.type?a.X.Distribute:t,this._addView(e,o,i)}_addView(e,t,i){this.views.set(e,e.element),this.gridview.addView(e,t,i)}removeView(e,t){if(1===this.views.size)throw new Error("Can't remove last view");const i=this.getViewLocation(e);let o;if("distribute"===t?.type)o=a.X.Distribute;else if("auto"===t?.type){const e=i[i.length-1];o=a.X.Auto(0===e?1:e-1)}this.gridview.removeView(i,o),this.views.delete(e)}moveView(e,t,i,o){const s=this.getViewLocation(e),[r,a]=(0,n.bS)(s),c=this.getViewLocation(i),d=p(this.gridview.orientation,c,o),[h,l]=(0,n.bS)(d);(0,n.aI)(r,h)?this.gridview.moveView(r,a,l):(this.removeView(e,"number"==typeof t?void 0:t),this.addView(e,t,i,o))}moveViewTo(e,t){const i=this.getViewLocation(e),[s,r]=(0,n.bS)(i),[a,c]=(0,n.bS)(t);if((0,n.aI)(s,a))this.gridview.moveView(s,r,c);else{const n=this.getViewSize(e),s=l(this.gridview.orientation,i),r=this.getViewCachedVisibleSize(e),a=void 0===r?1===s?n.width:n.height:o.Invisible(r);this.removeView(e),this.addViewAt(e,a,t)}}swapViews(e,t){const i=this.getViewLocation(e),o=this.getViewLocation(t);return this.gridview.swapViews(i,o)}resizeView(e,t){const i=this.getViewLocation(e);return this.gridview.resizeView(i,t)}isViewExpanded(e){const t=this.getViewLocation(e);return this.gridview.isViewExpanded(t)}isViewMaximized(e){const t=this.getViewLocation(e);return this.gridview.isViewMaximized(t)}hasMaximizedView(){return this.gridview.hasMaximizedView()}getViewSize(e){if(!e)return this.gridview.getViewSize();const t=this.getViewLocation(e);return this.gridview.getViewSize(t)}getViewCachedVisibleSize(e){const t=this.getViewLocation(e);return this.gridview.getViewCachedVisibleSize(t)}maximizeView(e){if(this.views.size<2)throw new Error("At least two views are required to maximize a view");const t=this.getViewLocation(e);this.gridview.maximizeView(t)}exitMaximizedView(){this.gridview.exitMaximizedView()}expandView(e){const t=this.getViewLocation(e);this.gridview.expandView(t)}distributeViewSizes(){this.gridview.distributeViewSizes()}isViewVisible(e){const t=this.getViewLocation(e);return this.gridview.isViewVisible(t)}setViewVisible(e,t){const i=this.getViewLocation(e);this.gridview.setViewVisible(i,t)}getViews(){return this.gridview.getView()}getNeighborViews(e,t,i=!1){if(!this.didLayout)throw new Error("Can't call getNeighborViews before first layout");const o=this.getViewLocation(e),n=this.getViews(),s=d(n,o);let r=h(s.box,t);return i&&(0===t&&0===s.box.top?r={offset:n.box.top+n.box.height,range:r.range}:3===t&&s.box.left+s.box.width===n.box.width||1===t&&s.box.top+s.box.height===n.box.height?r={offset:0,range:r.range}:2===t&&0===s.box.left&&(r={offset:n.box.left+n.box.width,range:r.range})),function(e,t,i){const o=[];return function e(t,i,n){if(c(t))for(const o of t.children)e(o,i,n);else{const{offset:e,range:a}=h(t.box,i);e!==n.offset||(s=a,r=n.range,s.start>=r.end||r.start>=s.end)||o.push(t)}var s,r}(e,t,i),o}(n,function(e){switch(e){case 0:return 1;case 1:return 0;case 2:return 3;case 3:return 2}}(t),r).map((e=>e.view))}getViewLocation(e){const t=this.views.get(e);if(!t)throw new Error("View not found");return g(t)}onDidSashReset(e){const t=e=>{const t=this.gridview.getView(e);if(c(t))return!1;const i=l(this.orientation,e),o=1===i?t.view.preferredWidth:t.view.preferredHeight;if("number"!=typeof o)return!1;const n=1===i?{width:Math.round(o)}:{height:Math.round(o)};return this.gridview.resizeView(e,n),!0};if(t(e))return;const[i,o]=(0,n.bS)(e);t([...i,o+1])||this.gridview.distributeViewSizes(i)}}class b extends m{constructor(){super(...arguments),this.initialLayoutContext=!0}static serializeNode(e,t){const i=0===t?e.box.width:e.box.height;if(!c(e)){const t={type:"leaf",data:e.view.toJSON(),size:i};return"number"==typeof e.cachedVisibleSize?(t.size=e.cachedVisibleSize,t.visible=!1):e.maximized&&(t.maximized=!0),t}const o=e.children.map((e=>b.serializeNode(e,(0,r.ks)(t))));return o.some((e=>!1!==e.visible))?{type:"branch",data:o,size:i}:{type:"branch",data:o,size:i,visible:!1}}static deserialize(e,t,i={}){if("number"!=typeof e.orientation)throw new Error("Invalid JSON: 'orientation' property must be a number.");if("number"!=typeof e.width)throw new Error("Invalid JSON: 'width' property must be a number.");if("number"!=typeof e.height)throw new Error("Invalid JSON: 'height' property must be a number.");const o=r.gf.deserialize(e,t,i);return new b(o,i)}static from(e,t={}){return b.deserialize(C(e),{fromJSON:e=>e},t)}serialize(){return{root:b.serializeNode(this.getViews(),this.orientation),orientation:this.orientation,width:this.width,height:this.height}}layout(e,t,i=0,o=0){super.layout(e,t,i,o),this.initialLayoutContext&&(this.initialLayoutContext=!1,this.gridview.trySet2x2())}}function w(e){return!!e.groups}function v(e,t){if(!t&&e.groups&&e.groups.length<=1&&(e.groups=void 0),!w(e))return;let i=0,o=0;for(const t of e.groups)v(t,!1),t.size&&(i+=t.size,o++);const n=(o>0?i:1)/(e.groups.length-o);for(const t of e.groups)t.size||(t.size=n)}function f(e){return w(e)?{type:"branch",data:e.groups.map((e=>f(e))),size:e.size}:{type:"leaf",data:e.data,size:e.size}}function y(e,t){if("branch"===e.type){const i=e.data.map((e=>y(e,(0,r.ks)(t))));return 0===t?{width:e.size||(0===i.length?void 0:Math.max(...i.map((e=>e.width||0)))),height:0===i.length?void 0:i.reduce(((e,t)=>e+(t.height||0)),0)}:{width:0===i.length?void 0:i.reduce(((e,t)=>e+(t.width||0)),0),height:e.size||(0===i.length?void 0:Math.max(...i.map((e=>e.height||0))))}}return{width:0===t?e.size:void 0,height:0===t?void 0:e.size}}function C(e){v(e,!0);const t=f(e),{width:i,height:o}=y(t,e.orientation);return{root:t,orientation:e.orientation,width:i||1,height:o||1}}},34924:(e,t,i)=>{(0,i(6162).A)(".monaco-grid-view{overflow:hidden;position:relative}.monaco-grid-branch-node,.monaco-grid-view{height:100%;width:100%}",{})},46697:(e,t,i)=>{i.d(t,{gf:()=>v,ks:()=>u});var o=i(68836),n=i(13175),s=i(87427),r=i(10442),a=i(1661),c=i(24821),d=i(25439),h=i(1180);i(34924),i(96596);const l={separatorBorder:r.Q1.transparent};function u(e){return 0===e?1:0}class p{constructor(e){this.isLayoutEnabled=e}}function g(e,t){if(Math.abs(e)>t)throw new Error("Invalid index");return(0,d.u5)(e,t+1)}class m{get size(){return this._size}get orthogonalSize(){return this._orthogonalSize}get absoluteOffset(){return this._absoluteOffset}get absoluteOrthogonalOffset(){return this._absoluteOrthogonalOffset}get styles(){return this._styles}get width(){return 1===this.orientation?this.size:this.orthogonalSize}get height(){return 1===this.orientation?this.orthogonalSize:this.size}get top(){return 1===this.orientation?this._absoluteOffset:this._absoluteOrthogonalOffset}get left(){return 1===this.orientation?this._absoluteOrthogonalOffset:this._absoluteOffset}get minimumSize(){return 0===this.children.length?0:Math.max(...this.children.map(((e,t)=>this.splitview.isViewVisible(t)?e.minimumOrthogonalSize:0)))}get maximumSize(){return Math.min(...this.children.map(((e,t)=>this.splitview.isViewVisible(t)?e.maximumOrthogonalSize:Number.POSITIVE_INFINITY)))}get priority(){if(0===this.children.length)return 0;const e=this.children.map((e=>void 0===e.priority?0:e.priority));return e.some((e=>2===e))?2:e.some((e=>1===e))?1:0}get proportionalLayout(){return 0===this.children.length||this.children.every((e=>e.proportionalLayout))}get minimumOrthogonalSize(){return this.splitview.minimumSize}get maximumOrthogonalSize(){return this.splitview.maximumSize}get minimumWidth(){return 1===this.orientation?this.minimumOrthogonalSize:this.minimumSize}get minimumHeight(){return 1===this.orientation?this.minimumSize:this.minimumOrthogonalSize}get maximumWidth(){return 1===this.orientation?this.maximumOrthogonalSize:this.maximumSize}get maximumHeight(){return 1===this.orientation?this.maximumSize:this.maximumOrthogonalSize}get boundarySashes(){return this._boundarySashes}set boundarySashes(e){if(this._boundarySashes.start!==e.start||this._boundarySashes.end!==e.end||this._boundarySashes.orthogonalStart!==e.orthogonalStart||this._boundarySashes.orthogonalEnd!==e.orthogonalEnd){this._boundarySashes=e,this.splitview.orthogonalStartSash=e.orthogonalStart,this.splitview.orthogonalEndSash=e.orthogonalEnd;for(let t=0;t<this.children.length;t++){const i=this.children[t],o=0===t,n=t===this.children.length-1;i.boundarySashes={start:e.orthogonalStart,end:e.orthogonalEnd,orthogonalStart:o?e.start:i.boundarySashes.orthogonalStart,orthogonalEnd:n?e.end:i.boundarySashes.orthogonalEnd}}}}get edgeSnapping(){return this._edgeSnapping}set edgeSnapping(e){if(this._edgeSnapping!==e){this._edgeSnapping=e;for(const t of this.children)t instanceof m&&(t.edgeSnapping=e);this.updateSplitviewEdgeSnappingEnablement()}}constructor(e,t,i,s,r=0,d=0,h=!1,l){if(this.orientation=e,this.layoutController=t,this.splitviewProportionalLayout=s,this.children=[],this._absoluteOffset=0,this._absoluteOrthogonalOffset=0,this.absoluteOrthogonalSize=0,this._onDidChange=new a.vl,this.onDidChange=this._onDidChange.event,this._onDidVisibilityChange=new a.vl,this.onDidVisibilityChange=this._onDidVisibilityChange.event,this.childrenVisibilityChangeDisposable=new c.Cm,this._onDidScroll=new a.vl,this.onDidScrollDisposable=c.jG.None,this.onDidScroll=this._onDidScroll.event,this.childrenChangeDisposable=c.jG.None,this._onDidSashReset=new a.vl,this.onDidSashReset=this._onDidSashReset.event,this.splitviewSashResetDisposable=c.jG.None,this.childrenSashResetDisposable=c.jG.None,this._boundarySashes={},this._edgeSnapping=!1,this._styles=i,this._size=r,this._orthogonalSize=d,this.element=(0,o.$)(".monaco-grid-branch-node"),l){const t={views:l.map((e=>({view:e.node,size:e.node.size,visible:!1!==e.visible}))),size:this.orthogonalSize},o={proportionalLayout:s,orientation:e,styles:i};this.children=l.map((e=>e.node)),this.splitview=new n.U(this.element,{...o,descriptor:t}),this.children.forEach(((e,t)=>{const i=0===t,o=t===this.children.length;e.boundarySashes={start:this.boundarySashes.orthogonalStart,end:this.boundarySashes.orthogonalEnd,orthogonalStart:i?this.boundarySashes.start:this.splitview.sashes[t-1],orthogonalEnd:o?this.boundarySashes.end:this.splitview.sashes[t]}}))}else this.splitview=new n.U(this.element,{orientation:e,styles:i,proportionalLayout:s}),this.splitview.layout(r,{orthogonalSize:d,absoluteOffset:0,absoluteOrthogonalOffset:0,absoluteSize:r,absoluteOrthogonalSize:d});const u=a.Jh.map(this.splitview.onDidSashReset,(e=>[e]));this.splitviewSashResetDisposable=u(this._onDidSashReset.fire,this._onDidSashReset),this.updateChildrenEvents()}style(e){this._styles=e,this.splitview.style(e);for(const t of this.children)t instanceof m&&t.style(e)}layout(e,t,i){if(this.layoutController.isLayoutEnabled){if(void 0===i)throw new Error("Invalid state");this._size=i.orthogonalSize,this._orthogonalSize=e,this._absoluteOffset=i.absoluteOffset+t,this._absoluteOrthogonalOffset=i.absoluteOrthogonalOffset,this.absoluteOrthogonalSize=i.absoluteOrthogonalSize,this.splitview.layout(i.orthogonalSize,{orthogonalSize:e,absoluteOffset:this._absoluteOrthogonalOffset,absoluteOrthogonalOffset:this._absoluteOffset,absoluteSize:i.absoluteOrthogonalSize,absoluteOrthogonalSize:i.absoluteSize}),this.updateSplitviewEdgeSnappingEnablement()}}setVisible(e){for(const t of this.children)t.setVisible(e)}addChild(e,t,i,o){i=g(i,this.children.length),this.splitview.addView(e,t,i,o),this.children.splice(i,0,e),this.updateBoundarySashes(),this.onDidChildrenChange()}removeChild(e,t){e=g(e,this.children.length);const i=this.splitview.removeView(e,t);return this.children.splice(e,1),this.updateBoundarySashes(),this.onDidChildrenChange(),i}removeAllChildren(){const e=this.splitview.removeAllViews();return this.children.splice(0,this.children.length),this.updateBoundarySashes(),this.onDidChildrenChange(),e}moveChild(e,t){(e=g(e,this.children.length))!==(t=g(t,this.children.length))&&(e<t&&(t-=1),this.splitview.moveView(e,t),this.children.splice(t,0,this.children.splice(e,1)[0]),this.updateBoundarySashes(),this.onDidChildrenChange())}swapChildren(e,t){(e=g(e,this.children.length))!==(t=g(t,this.children.length))&&(this.splitview.swapViews(e,t),[this.children[e].boundarySashes,this.children[t].boundarySashes]=[this.children[e].boundarySashes,this.children[t].boundarySashes],[this.children[e],this.children[t]]=[this.children[t],this.children[e]],this.onDidChildrenChange())}resizeChild(e,t){e=g(e,this.children.length),this.splitview.resizeView(e,t)}isChildExpanded(e){return this.splitview.isViewExpanded(e)}distributeViewSizes(e=!1){if(this.splitview.distributeViewSizes(),e)for(const e of this.children)e instanceof m&&e.distributeViewSizes(!0)}getChildSize(e){return e=g(e,this.children.length),this.splitview.getViewSize(e)}isChildVisible(e){return e=g(e,this.children.length),this.splitview.isViewVisible(e)}setChildVisible(e,t){if(e=g(e,this.children.length),this.splitview.isViewVisible(e)===t)return;const i=0===this.splitview.contentSize;this.splitview.setViewVisible(e,t);const o=0===this.splitview.contentSize;(t&&i||!t&&o)&&this._onDidVisibilityChange.fire(t)}getChildCachedVisibleSize(e){return e=g(e,this.children.length),this.splitview.getViewCachedVisibleSize(e)}updateBoundarySashes(){for(let e=0;e<this.children.length;e++)this.children[e].boundarySashes={start:this.boundarySashes.orthogonalStart,end:this.boundarySashes.orthogonalEnd,orthogonalStart:0===e?this.boundarySashes.start:this.splitview.sashes[e-1],orthogonalEnd:e===this.children.length-1?this.boundarySashes.end:this.splitview.sashes[e]}}onDidChildrenChange(){this.updateChildrenEvents(),this._onDidChange.fire(void 0)}updateChildrenEvents(){const e=a.Jh.map(a.Jh.any(...this.children.map((e=>e.onDidChange))),(()=>{}));this.childrenChangeDisposable.dispose(),this.childrenChangeDisposable=e(this._onDidChange.fire,this._onDidChange);const t=a.Jh.any(...this.children.map(((e,t)=>a.Jh.map(e.onDidSashReset,(e=>[t,...e])))));this.childrenSashResetDisposable.dispose(),this.childrenSashResetDisposable=t(this._onDidSashReset.fire,this._onDidSashReset);const i=a.Jh.any(a.Jh.signal(this.splitview.onDidScroll),...this.children.map((e=>e.onDidScroll)));this.onDidScrollDisposable.dispose(),this.onDidScrollDisposable=i(this._onDidScroll.fire,this._onDidScroll),this.childrenVisibilityChangeDisposable.clear(),this.children.forEach(((e,t)=>{e instanceof m&&this.childrenVisibilityChangeDisposable.add(e.onDidVisibilityChange((e=>{this.setChildVisible(t,e)})))}))}trySet2x2(e){if(2!==this.children.length||2!==e.children.length)return c.jG.None;if(this.getChildSize(0)!==e.getChildSize(0))return c.jG.None;const[t,i]=this.children,[o,n]=e.children;if(!(t instanceof b&&i instanceof b))return c.jG.None;if(!(o instanceof b&&n instanceof b))return c.jG.None;0===this.orientation?(i.linkedWidthNode=o.linkedHeightNode=t,t.linkedWidthNode=n.linkedHeightNode=i,n.linkedWidthNode=t.linkedHeightNode=o,o.linkedWidthNode=i.linkedHeightNode=n):(o.linkedWidthNode=i.linkedHeightNode=t,n.linkedWidthNode=t.linkedHeightNode=i,t.linkedWidthNode=n.linkedHeightNode=o,i.linkedWidthNode=o.linkedHeightNode=n);const s=this.splitview.sashes[0],r=e.splitview.sashes[0];return s.linkedSash=r,r.linkedSash=s,this._onDidChange.fire(void 0),e._onDidChange.fire(void 0),(0,c.s)((()=>{s.linkedSash=r.linkedSash=void 0,t.linkedHeightNode=t.linkedWidthNode=void 0,i.linkedHeightNode=i.linkedWidthNode=void 0,o.linkedHeightNode=o.linkedWidthNode=void 0,n.linkedHeightNode=n.linkedWidthNode=void 0}))}updateSplitviewEdgeSnappingEnablement(){this.splitview.startSnappingEnabled=this._edgeSnapping||this._absoluteOrthogonalOffset>0,this.splitview.endSnappingEnabled=this._edgeSnapping||this._absoluteOrthogonalOffset+this._size<this.absoluteOrthogonalSize}dispose(){for(const e of this.children)e.dispose();this._onDidChange.dispose(),this._onDidSashReset.dispose(),this._onDidVisibilityChange.dispose(),this.childrenVisibilityChangeDisposable.dispose(),this.splitviewSashResetDisposable.dispose(),this.childrenSashResetDisposable.dispose(),this.childrenChangeDisposable.dispose(),this.onDidScrollDisposable.dispose(),this.splitview.dispose()}}class b{get size(){return this._size}get orthogonalSize(){return this._orthogonalSize}get linkedWidthNode(){return this._linkedWidthNode}set linkedWidthNode(e){this._onDidLinkedWidthNodeChange.input=e?e._onDidViewChange:a.Jh.None,this._linkedWidthNode=e,this._onDidSetLinkedNode.fire(void 0)}get linkedHeightNode(){return this._linkedHeightNode}set linkedHeightNode(e){this._onDidLinkedHeightNodeChange.input=e?e._onDidViewChange:a.Jh.None,this._linkedHeightNode=e,this._onDidSetLinkedNode.fire(void 0)}constructor(e,t,i,o,n=0){this.view=e,this.orientation=t,this.layoutController=i,this._size=0,this.absoluteOffset=0,this.absoluteOrthogonalOffset=0,this.onDidScroll=a.Jh.None,this.onDidSashReset=a.Jh.None,this._onDidLinkedWidthNodeChange=new a.Wj,this._linkedWidthNode=void 0,this._onDidLinkedHeightNodeChange=new a.Wj,this._linkedHeightNode=void 0,this._onDidSetLinkedNode=new a.vl,this.disposables=new c.Cm,this._boundarySashes={},this.cachedWidth=0,this.cachedHeight=0,this.cachedTop=0,this.cachedLeft=0,this._orthogonalSize=o,this._size=n;const r=function(e){const[t,i]=a.Jh.split(e.onDidChange,h.b0);return a.Jh.any(i,a.Jh.map(a.Jh.latch(a.Jh.map(t,(t=>[e.minimumWidth,e.maximumWidth,e.minimumHeight,e.maximumHeight])),s.aI),(e=>{})))}(e);this._onDidViewChange=a.Jh.map(r,(e=>e&&(0===this.orientation?e.width:e.height)),this.disposables),this.onDidChange=a.Jh.any(this._onDidViewChange,this._onDidSetLinkedNode.event,this._onDidLinkedWidthNodeChange.event,this._onDidLinkedHeightNodeChange.event)}get width(){return 1===this.orientation?this.orthogonalSize:this.size}get height(){return 1===this.orientation?this.size:this.orthogonalSize}get top(){return 1===this.orientation?this.absoluteOffset:this.absoluteOrthogonalOffset}get left(){return 1===this.orientation?this.absoluteOrthogonalOffset:this.absoluteOffset}get element(){return this.view.element}get minimumWidth(){return this.linkedWidthNode?Math.max(this.linkedWidthNode.view.minimumWidth,this.view.minimumWidth):this.view.minimumWidth}get maximumWidth(){return this.linkedWidthNode?Math.min(this.linkedWidthNode.view.maximumWidth,this.view.maximumWidth):this.view.maximumWidth}get minimumHeight(){return this.linkedHeightNode?Math.max(this.linkedHeightNode.view.minimumHeight,this.view.minimumHeight):this.view.minimumHeight}get maximumHeight(){return this.linkedHeightNode?Math.min(this.linkedHeightNode.view.maximumHeight,this.view.maximumHeight):this.view.maximumHeight}get minimumSize(){return 1===this.orientation?this.minimumHeight:this.minimumWidth}get maximumSize(){return 1===this.orientation?this.maximumHeight:this.maximumWidth}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return this.view.snap}get minimumOrthogonalSize(){return 1===this.orientation?this.minimumWidth:this.minimumHeight}get maximumOrthogonalSize(){return 1===this.orientation?this.maximumWidth:this.maximumHeight}get boundarySashes(){return this._boundarySashes}set boundarySashes(e){var t;this._boundarySashes=e,this.view.setBoundarySashes?.((t=e,1===this.orientation?{left:t.start,right:t.end,top:t.orthogonalStart,bottom:t.orthogonalEnd}:{top:t.start,bottom:t.end,left:t.orthogonalStart,right:t.orthogonalEnd}))}layout(e,t,i){if(this.layoutController.isLayoutEnabled){if(void 0===i)throw new Error("Invalid state");this._size=e,this._orthogonalSize=i.orthogonalSize,this.absoluteOffset=i.absoluteOffset+t,this.absoluteOrthogonalOffset=i.absoluteOrthogonalOffset,this._layout(this.width,this.height,this.top,this.left)}}_layout(e,t,i,o){this.cachedWidth===e&&this.cachedHeight===t&&this.cachedTop===i&&this.cachedLeft===o||(this.cachedWidth=e,this.cachedHeight=t,this.cachedTop=i,this.cachedLeft=o,this.view.layout(e,t,i,o))}setVisible(e){this.view.setVisible?.(e)}dispose(){this.disposables.dispose()}}function w(e,t,i){if(e instanceof m){const o=new m(u(e.orientation),e.layoutController,e.styles,e.splitviewProportionalLayout,t,i,e.edgeSnapping);let n=0;for(let s=e.children.length-1;s>=0;s--){const r=e.children[s],a=r instanceof m?r.orthogonalSize:r.size;let c=0===e.size?0:Math.round(t*a/e.size);n+=c,0===s&&(c+=t-n),o.addChild(w(r,i,c),c,0,!0)}return e.dispose(),o}{const t=new b(e.view,u(e.orientation),e.layoutController,i);return e.dispose(),t}}class v{get root(){return this._root}set root(e){const t=this._root;t&&(t.element.remove(),t.dispose()),this._root=e,this.element.appendChild(e.element),this.onDidSashResetRelay.input=e.onDidSashReset,this._onDidChange.input=a.Jh.map(e.onDidChange,(()=>{})),this._onDidScroll.input=e.onDidScroll}get width(){return this.root.width}get height(){return this.root.height}get minimumWidth(){return this.root.minimumWidth}get minimumHeight(){return this.root.minimumHeight}get maximumWidth(){return this.root.maximumHeight}get maximumHeight(){return this.root.maximumHeight}get orientation(){return this._root.orientation}get boundarySashes(){return this._boundarySashes}set orientation(e){if(this._root.orientation===e)return;const{size:t,orthogonalSize:i,absoluteOffset:o,absoluteOrthogonalOffset:n}=this._root;this.root=w(this._root,i,t),this.root.layout(t,0,{orthogonalSize:i,absoluteOffset:n,absoluteOrthogonalOffset:o,absoluteSize:t,absoluteOrthogonalSize:i}),this.boundarySashes=this.boundarySashes}set boundarySashes(e){var t;this._boundarySashes=e,this.root.boundarySashes=(t=e,1===this.orientation?{start:t.left,end:t.right,orthogonalStart:t.top,orthogonalEnd:t.bottom}:{start:t.top,end:t.bottom,orthogonalStart:t.left,orthogonalEnd:t.right})}set edgeSnapping(e){this.root.edgeSnapping=e}constructor(e={}){this.onDidSashResetRelay=new a.Wj,this._onDidScroll=new a.Wj,this._onDidChange=new a.Wj,this._boundarySashes={},this.disposable2x2=c.jG.None,this.onDidSashReset=this.onDidSashResetRelay.event,this.onDidScroll=this._onDidScroll.event,this.onDidChange=this._onDidChange.event,this.maximizedNode=void 0,this._onDidChangeViewMaximized=new a.vl,this.onDidChangeViewMaximized=this._onDidChangeViewMaximized.event,this.element=(0,o.$)(".monaco-grid-view"),this.styles=e.styles||l,this.proportionalLayout=void 0===e.proportionalLayout||!!e.proportionalLayout,this.layoutController=new p(!1),this.root=new m(0,this.layoutController,this.styles,this.proportionalLayout)}style(e){this.styles=e,this.root.style(e)}layout(e,t,i=0,o=0){this.layoutController.isLayoutEnabled=!0;const[n,s,r,a]=1===this.root.orientation?[t,e,i,o]:[e,t,o,i];this.root.layout(n,0,{orthogonalSize:s,absoluteOffset:r,absoluteOrthogonalOffset:a,absoluteSize:n,absoluteOrthogonalSize:s})}addView(e,t,i){this.hasMaximizedView()&&this.exitMaximizedView(),this.disposable2x2.dispose(),this.disposable2x2=c.jG.None;const[o,r]=(0,s.bS)(i),[a,d]=this.getNode(o);if(d instanceof m){const i=new b(e,u(d.orientation),this.layoutController,d.orthogonalSize);try{d.addChild(i,t,r)}catch(e){throw i.dispose(),e}}else{const[,i]=(0,s.bS)(a),[,c]=(0,s.bS)(o);let h=0;const l=i.getChildCachedVisibleSize(c);"number"==typeof l&&(h=n.X.Invisible(l)),i.removeChild(c).dispose();const u=new m(d.orientation,d.layoutController,this.styles,this.proportionalLayout,d.size,d.orthogonalSize,i.edgeSnapping);i.addChild(u,d.size,c);const p=new b(d.view,i.orientation,this.layoutController,d.size);u.addChild(p,h,0),"number"!=typeof t&&"split"===t.type&&(t=n.X.Split(0));const g=new b(e,i.orientation,this.layoutController,d.size);u.addChild(g,t,r)}this.trySet2x2()}removeView(e,t){this.hasMaximizedView()&&this.exitMaximizedView(),this.disposable2x2.dispose(),this.disposable2x2=c.jG.None;const[i,o]=(0,s.bS)(e),[r,a]=this.getNode(i);if(!(a instanceof m))throw new Error("Invalid location");const d=a.children[o];if(!(d instanceof b))throw new Error("Invalid location");if(a.removeChild(o,t),d.dispose(),0===a.children.length)throw new Error("Invalid grid state");if(a.children.length>1)return this.trySet2x2(),d.view;if(0===r.length){const e=a.children[0];return e instanceof b||(a.removeChild(0),a.dispose(),this.root=e,this.boundarySashes=this.boundarySashes,this.trySet2x2()),d.view}const[,h]=(0,s.bS)(r),[,l]=(0,s.bS)(i),p=a.isChildVisible(0),g=a.removeChild(0),w=h.children.map(((e,t)=>h.getChildSize(t)));if(h.removeChild(l,t),a.dispose(),g instanceof m){w.splice(l,1,...g.children.map((e=>e.size)));const e=g.removeAllChildren();for(let t=0;t<e.length;t++)h.addChild(e[t],e[t].size,l+t)}else{const e=new b(g.view,u(g.orientation),this.layoutController,g.size),t=p?g.orthogonalSize:n.X.Invisible(g.orthogonalSize);h.addChild(e,t,l)}g.dispose();for(let e=0;e<w.length;e++)h.resizeChild(e,w[e]);return this.trySet2x2(),d.view}moveView(e,t,i){this.hasMaximizedView()&&this.exitMaximizedView();const[,o]=this.getNode(e);if(!(o instanceof m))throw new Error("Invalid location");o.moveChild(t,i),this.trySet2x2()}swapViews(e,t){this.hasMaximizedView()&&this.exitMaximizedView();const[i,o]=(0,s.bS)(e),[,n]=this.getNode(i);if(!(n instanceof m))throw new Error("Invalid from location");const r=n.getChildSize(o),a=n.children[o];if(!(a instanceof b))throw new Error("Invalid from location");const[c,d]=(0,s.bS)(t),[,h]=this.getNode(c);if(!(h instanceof m))throw new Error("Invalid to location");const l=h.getChildSize(d),u=h.children[d];if(!(u instanceof b))throw new Error("Invalid to location");n===h?n.swapChildren(o,d):(n.removeChild(o),h.removeChild(d),n.addChild(u,r,o),h.addChild(a,l,d)),this.trySet2x2()}resizeView(e,t){this.hasMaximizedView()&&this.exitMaximizedView();const[i,o]=(0,s.bS)(e),[n,r]=this.getNode(i);if(!(r instanceof m))throw new Error("Invalid location");if(!t.width&&!t.height)return;const[a,c]=1===r.orientation?[t.width,t.height]:[t.height,t.width];if("number"==typeof c&&n.length>0){const[,e]=(0,s.bS)(n),[,t]=(0,s.bS)(i);e.resizeChild(t,c)}"number"==typeof a&&r.resizeChild(o,a),this.trySet2x2()}getViewSize(e){if(!e)return{width:this.root.width,height:this.root.height};const[,t]=this.getNode(e);return{width:t.width,height:t.height}}getViewCachedVisibleSize(e){const[t,i]=(0,s.bS)(e),[,o]=this.getNode(t);if(!(o instanceof m))throw new Error("Invalid location");return o.getChildCachedVisibleSize(i)}expandView(e){this.hasMaximizedView()&&this.exitMaximizedView();const[t,i]=this.getNode(e);if(!(i instanceof b))throw new Error("Invalid location");for(let i=0;i<t.length;i++)t[i].resizeChild(e[i],Number.POSITIVE_INFINITY)}isViewExpanded(e){if(this.hasMaximizedView())return!1;const[t,i]=this.getNode(e);if(!(i instanceof b))throw new Error("Invalid location");for(let i=0;i<t.length;i++)if(!t[i].isChildExpanded(e[i]))return!1;return!0}maximizeView(e){const[,t]=this.getNode(e);if(!(t instanceof b))throw new Error("Location is not a LeafNode");this.maximizedNode!==t&&(this.hasMaximizedView()&&this.exitMaximizedView(),function e(t,i){for(let o=0;o<t.children.length;o++){const n=t.children[o];n instanceof b?n!==i&&t.setChildVisible(o,!1):e(n,i)}}(this.root,t),this.maximizedNode=t,this._onDidChangeViewMaximized.fire(!0))}exitMaximizedView(){this.maximizedNode&&(this.maximizedNode=void 0,function e(t){for(let i=t.children.length-1;i>=0;i--){const o=t.children[i];o instanceof b?t.setChildVisible(i,!0):e(o)}}(this.root),this._onDidChangeViewMaximized.fire(!1))}hasMaximizedView(){return void 0!==this.maximizedNode}isViewMaximized(e){const[,t]=this.getNode(e);if(!(t instanceof b))throw new Error("Location is not a LeafNode");return t===this.maximizedNode}distributeViewSizes(e){if(this.hasMaximizedView()&&this.exitMaximizedView(),!e)return void this.root.distributeViewSizes(!0);const[,t]=this.getNode(e);if(!(t instanceof m))throw new Error("Invalid location");t.distributeViewSizes(),this.trySet2x2()}isViewVisible(e){const[t,i]=(0,s.bS)(e),[,o]=this.getNode(t);if(!(o instanceof m))throw new Error("Invalid from location");return o.isChildVisible(i)}setViewVisible(e,t){if(this.hasMaximizedView())return void this.exitMaximizedView();const[i,o]=(0,s.bS)(e),[,n]=this.getNode(i);if(!(n instanceof m))throw new Error("Invalid from location");n.setChildVisible(o,t)}getView(e){const t=e?this.getNode(e)[1]:this._root;return this._getViews(t,this.orientation)}static deserialize(e,t,i={}){if("number"!=typeof e.orientation)throw new Error("Invalid JSON: 'orientation' property must be a number.");if("number"!=typeof e.width)throw new Error("Invalid JSON: 'width' property must be a number.");if("number"!=typeof e.height)throw new Error("Invalid JSON: 'height' property must be a number.");if("branch"!==e.root?.type)throw new Error("Invalid JSON: 'root' property must have 'type' value of branch.");const o=e.orientation,n=e.height,s=new v(i);return s._deserialize(e.root,o,t,n),s}_deserialize(e,t,i,o){this.root=this._deserializeNode(e,t,i,o)}_deserializeNode(e,t,i,o){let n;if("branch"===e.type){const s=e.data.map((o=>({node:this._deserializeNode(o,u(t),i,e.size),visible:o.visible})));n=new m(t,this.layoutController,this.styles,this.proportionalLayout,e.size,o,void 0,s)}else n=new b(i.fromJSON(e.data),t,this.layoutController,o,e.size),e.maximized&&!this.maximizedNode&&(this.maximizedNode=n,this._onDidChangeViewMaximized.fire(!0));return n}_getViews(e,t,i){const o={top:e.top,left:e.left,width:e.width,height:e.height};if(e instanceof b)return{view:e.view,box:o,cachedVisibleSize:i,maximized:this.maximizedNode===e};const n=[];for(let i=0;i<e.children.length;i++){const o=e.children[i],s=e.getChildCachedVisibleSize(i);n.push(this._getViews(o,u(t),s))}return{children:n,box:o}}getNode(e,t=this.root,i=[]){if(0===e.length)return[i,t];if(!(t instanceof m))throw new Error("Invalid location");const[o,...n]=e;if(o<0||o>=t.children.length)throw new Error("Invalid location");const s=t.children[o];return i.push(t),this.getNode(n,s,i)}trySet2x2(){if(this.disposable2x2.dispose(),this.disposable2x2=c.jG.None,2!==this.root.children.length)return;const[e,t]=this.root.children;e instanceof m&&t instanceof m&&(this.disposable2x2=e.trySet2x2(t))}getViewMap(e,t){t||(t=this.root),t instanceof m?t.children.forEach((t=>this.getViewMap(e,t))):e.set(t.view,t.element)}dispose(){this.onDidSashResetRelay.dispose(),this.root.dispose(),this.element.remove()}}},22031:(e,t,i)=>{i.d(t,{B:()=>F,m:()=>N});var o=i(92518),n=i(6162);(0,n.A)('.monaco-workbench .part.activitybar{height:100%;width:48px}.monaco-workbench .activitybar.bordered:before{border-color:inherit;box-sizing:border-box;content:"";float:left;height:100%;position:absolute;width:0}.monaco-workbench .activitybar.left.bordered:before{border-right-style:solid;border-right-width:1px;right:0}.monaco-workbench .activitybar.right.bordered:before{border-left-style:solid;border-left-width:1px;left:0}.monaco-workbench .activitybar>.content{display:flex;flex-direction:column;height:100%;justify-content:space-between}.monaco-workbench .activitybar>.content .monaco-action-bar{background-color:inherit;text-align:left}.monaco-workbench .activitybar .action-item:focus{outline:0!important}.monaco-workbench .activitybar>.content>.composite-bar{margin-bottom:auto}.monaco-workbench .activitybar .menubar,.monaco-workbench .activitybar .menubar.compact .toolbar-toggle-more{height:35px;width:100%}',{}),(0,n.A)('.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item{display:block;position:relative}.monaco-workbench .activitybar>.content .composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .activitybar>.content .composite-bar>.monaco-action-bar .action-item:before{background-color:transparent;content:"";display:none;height:2px;position:absolute;transition-delay:.1s;transition-duration:0ms;transition-property:background-color;width:48px}.monaco-workbench .activitybar>.content.dragged-over .composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .activitybar>.content.dragged-over .composite-bar>.monaco-action-bar .action-item:before{display:block}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:before{transition-delay:0s}.monaco-workbench .activitybar>.content.dragged-over-head>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .activitybar>.content.dragged-over-tail>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom+.action-item:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:last-of-type.bottom:after{background-color:var(--insert-border-color)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label{box-sizing:border-box;display:flex;height:48px;margin-right:0;overflow:hidden;position:relative;width:48px;z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label:not(.codicon){font-size:15px;line-height:40px;padding:0 0 0 48px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label.codicon{align-items:center;font-size:24px;justify-content:center}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.active .action-label.codicon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .action-label.codicon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .action-label.codicon{color:var(--vscode-activityBar-foreground)!important}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.active .action-label.uri-icon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .action-label.uri-icon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .action-label.uri-icon{background-color:var(--vscode-activityBar-foreground)!important}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-left:2px solid;content:"";height:100%;position:absolute;top:0;width:0;z-index:1}.monaco-workbench.hc-black .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench.hc-black .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-color:var(--vscode-activityBar-activeBorder)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before{height:100%;top:0}.monaco-workbench.hc-black .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator.action-item,.monaco-workbench.hc-light .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator{display:none}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.clicked:focus .active-item-indicator:before,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.clicked:focus:before{border-left:none!important}.monaco-workbench .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item .active-item-indicator:before{left:0}.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item .active-item-indicator:before{right:0}.monaco-workbench.hc-black .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-black .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-light .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-light .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before{outline:none}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge{z-index:2}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator{pointer-events:none}.monaco-workbench.border .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator{left:-2px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .badge-content{border-radius:20px;font-size:9px;font-weight:600;height:16px;line-height:16px;min-width:8px;padding:0 4px;position:absolute;right:8px;text-align:center;top:24px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge .profile-text-overlay{background-color:var(--vscode-profileBadge-background);border:2px solid var(--vscode-activityBar-background);border-radius:7px;color:var(--vscode-profileBadge-foreground);font-size:9px;font-weight:600;line-height:10px;padding:2px 3px;position:absolute;right:6px;top:24px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:active .profile-text-overlay,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .profile-text-overlay,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .profile-text-overlay{color:var(--vscode-activityBar-foreground)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .codicon.badge-content{font-size:12px;font-weight:unset;justify-content:center;padding:0}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .codicon.badge-content:before{text-align:center;vertical-align:baseline}.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .badge,.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{left:auto;right:0}',{});var s,r=i(25934),a=i(19510),c=i(39924),d=i(28672),h=i(24821),l=i(71849),u=i(32545),p=i(40240),g=i(5336),m=(i(86849),i(55325)),b=(i(27785),i(82437),i(32802),i(77692),i(16115),i(79849),i(17960),i(69416),i(10380),i(68836)),w=i(1180),v=i(82804),f=i(819),y=i(3560),C=i(76390),S=i(999),k=i(50163),_=i(43959),x=i(64533),E=i(63288),D=i(4141),I=i(64788),V=i(46361),M=i(16409),T=i(79268),A=i(91279),L=i(92986),P=i(82561),R=i(44622),B=i(85105),O=i(22475);let N=class extends a.e{static{s=this}static{this.ACTION_HEIGHT=48}static{this.pinnedViewContainersKey="workbench.activity.pinnedViewlets2"}static{this.placeholderViewContainersKey="workbench.activity.placeholderViewlets"}static{this.viewContainersWorkspaceStateKey="workbench.activity.viewletsWorkspaceState"}constructor(e,t,i,o,n){super("workbench.parts.activitybar",{hasTitle:!1},o,n,i),this.paneCompositePart=e,this.instantiationService=t,this.minimumWidth=48,this.maximumWidth=48,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.compositeBar=this._register(new h.HE)}createCompositeBar(){return this.instantiationService.createInstance(F,{partContainerClass:"activitybar",pinnedViewContainersKey:s.pinnedViewContainersKey,placeholderViewContainersKey:s.placeholderViewContainersKey,viewContainersWorkspaceStateKey:s.viewContainersWorkspaceStateKey,orientation:1,icon:!0,iconSize:24,activityHoverOptions:{position:()=>0===this.layoutService.getSideBarPosition()?1:0},preventLoopNavigation:!0,recomputeSizes:!1,fillExtraContextMenuActions:(e,t)=>{},compositeSize:52,colors:e=>({activeForegroundColor:e.getColor(g.kQ),inactiveForegroundColor:e.getColor(g.Ie),activeBorderColor:e.getColor(g.Yd),activeBackground:e.getColor(g.Uw),badgeBackground:e.getColor(g.Nl),badgeForeground:e.getColor(g.Sj),dragAndDropBorder:e.getColor(g.aq),activeBackgroundColor:void 0,inactiveBackgroundColor:void 0,activeBorderBottomColor:void 0}),overflowActionSize:s.ACTION_HEIGHT},"workbench.parts.activitybar",this.paneCompositePart,!0)}createContentArea(e){return this.element=e,this.content=(0,b.BC)(this.element,(0,b.$)(".content")),this.layoutService.isVisible("workbench.parts.activitybar")&&this.show(),this.content}getPinnedPaneCompositeIds(){return this.compositeBar.value?.getPinnedPaneCompositeIds()??[]}getVisiblePaneCompositeIds(){return this.compositeBar.value?.getVisiblePaneCompositeIds()??[]}getPaneCompositeIds(){return this.compositeBar.value?.getPaneCompositeIds()??[]}focus(){this.compositeBar.value?.focus()}updateStyles(){super.updateStyles();const e=(0,w.eU)(this.getContainer()),t=this.getColor(g.Vz)||"";e.style.backgroundColor=t;const i=this.getColor(g.TF)||this.getColor(m.b1)||"";e.classList.toggle("bordered",!!i),e.style.borderColor=i||""}show(e){this.content&&(this.compositeBar.value||(this.compositeBar.value=this.createCompositeBar(),this.compositeBar.value.create(this.content),this.dimension&&this.layout(this.dimension.width,this.dimension.height)),e&&this.focus())}hide(){this.compositeBar.value&&(this.compositeBar.clear(),this.content&&(0,b.w_)(this.content))}layout(e,t){if(super.layout(e,t,0,0),!this.compositeBar.value)return;const i=super.layoutContents(e,t).contentSize;this.compositeBar.value.layout(e,i.height)}toJSON(){return{type:"workbench.parts.activitybar"}}};N=s=(0,o.C)([(0,o.Q)(1,d._Y),(0,o.Q)(2,c.Y),(0,o.Q)(3,p.G),(0,o.Q)(4,x.C)],N);let F=class extends k.x{constructor(e,t,i,o,n,s,r,a,c,d,l,u,p,g){super({...e,fillExtraContextMenuActions:(t,i)=>{e.fillExtraContextMenuActions(t,i),this.fillContextMenuActions(t,i)}},t,i,n,s,r,a,c,d,l,g),this.configurationService=u,this.menuService=p,this.keyboardNavigationDisposables=this._register(new h.Cm),o&&(this.globalCompositeBar=this._register(n.createInstance(_.KN,(()=>this.getContextMenuActions()),(e=>this.options.colors(e)),this.options.activityHoverOptions))),this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("window.menuBarVisibility")&&("compact"===(0,y.nx)(this.configurationService)?this.installMenubar():this.uninstallMenubar())})))}fillContextMenuActions(e,t){const i=(0,y.nx)(this.configurationService);"compact"!==i&&"hidden"!==i&&"toggle"!==i||e.unshift((0,C.ih)({id:"toggleMenuVisibility",label:(0,r.kg)(3269,"Menu"),checked:"compact"===i,run:()=>this.configurationService.updateValue("window.menuBarVisibility","compact"===i?"toggle":"compact")}),new C.wv),"compact"===i&&this.menuBarContainer&&t?.target&&(0,b.QX)(t.target,this.menuBarContainer)&&e.unshift((0,C.ih)({id:"hideCompactMenu",label:(0,r.kg)(3270,"Hide Menu"),run:()=>this.configurationService.updateValue("window.menuBarVisibility","toggle")}),new C.wv),this.globalCompositeBar&&(e.push(new C.wv),e.push(...this.globalCompositeBar.getContextMenuActions())),e.push(new C.wv),e.push(...this.getActivityBarContextMenuActions())}uninstallMenubar(){this.menuBar&&(this.menuBar.dispose(),this.menuBar=void 0),this.menuBarContainer&&(this.menuBarContainer.remove(),this.menuBarContainer=void 0)}installMenubar(){this.menuBar||(this.menuBarContainer=document.createElement("div"),this.menuBarContainer.classList.add("menubar"),(0,w.eU)(this.element).prepend(this.menuBarContainer),this.menuBar=this._register(this.instantiationService.createInstance(v.j)),this.menuBar.create(this.menuBarContainer))}registerKeyboardNavigationListeners(){this.keyboardNavigationDisposables.clear(),this.menuBarContainer&&this.keyboardNavigationDisposables.add((0,b.ko)(this.menuBarContainer,b.Bx.KEY_DOWN,(e=>{const t=new S.Zh(e);(t.equals(18)||t.equals(17))&&this.focus()}))),this.compositeBarContainer&&this.keyboardNavigationDisposables.add((0,b.ko)(this.compositeBarContainer,b.Bx.KEY_DOWN,(e=>{const t=new S.Zh(e);t.equals(18)||t.equals(17)?this.globalCompositeBar?.focus():(t.equals(16)||t.equals(15))&&this.menuBar?.toggleFocus()}))),this.globalCompositeBar&&this.keyboardNavigationDisposables.add((0,b.ko)(this.globalCompositeBar.element,b.Bx.KEY_DOWN,(e=>{const t=new S.Zh(e);(t.equals(16)||t.equals(15))&&this.focus(this.getVisiblePaneCompositeIds().length-1)})))}create(e){return this.element=e,"compact"===(0,y.nx)(this.configurationService)&&this.installMenubar(),this.compositeBarContainer=super.create(this.element),this.globalCompositeBar&&this.globalCompositeBar.create(this.element),this.registerKeyboardNavigationListeners(),this.compositeBarContainer}layout(e,t){this.menuBarContainer&&(1===this.options.orientation?t-=this.menuBarContainer.clientHeight:e-=this.menuBarContainer.clientWidth),this.globalCompositeBar&&(1===this.options.orientation?t-=this.globalCompositeBar.size()*N.ACTION_HEIGHT:e-=this.globalCompositeBar.element.clientWidth),super.layout(e,t)}getActivityBarContextMenuActions(){const e=this.menuService.getMenuActions(E.D8.ActivityBarPositionMenu,this.contextKeyService,{shouldForwardArgs:!0,renderShortTitle:!0}),t=[];return(0,T.$u)(e,{primary:[],secondary:t}),[new C.YH("workbench.action.panel.position",(0,r.kg)(3271,"Activity Bar Position"),t),(0,C.ih)({id:l.WZ.ID,label:l.WZ.getLabel(this.layoutService),run:()=>this.instantiationService.invokeFunction((e=>(new l.WZ).run(e)))})]}};F=(0,o.C)([(0,o.Q)(4,d._Y),(0,o.Q)(5,x.C),(0,o.Q)(6,R.c),(0,o.Q)(7,L.X),(0,o.Q)(8,O.R),(0,o.Q)(9,V.f),(0,o.Q)(10,B.P),(0,o.Q)(11,f.p),(0,o.Q)(12,D.e),(0,o.Q)(13,c.Y)],F),(0,E.ug)(class extends E.L{constructor(){super({id:"workbench.action.activityBarLocation.default",title:{...(0,r.aS)(3272,"Move Activity Bar to Side"),mnemonicTitle:(0,r.kg)(3273,"&&Default")},shortTitle:(0,r.kg)(3274,"Default"),category:M.L.View,toggled:I.M$.equals("config.workbench.activityBar.location","default"),menu:[{id:E.D8.ActivityBarPositionMenu,order:1},{id:E.D8.CommandPalette,when:I.M$.notEquals("config.workbench.activityBar.location","default")}]})}run(e){e.get(f.p).updateValue("workbench.activityBar.location","default")}}),(0,E.ug)(class extends E.L{constructor(){super({id:"workbench.action.activityBarLocation.top",title:{...(0,r.aS)(3275,"Move Activity Bar to Top"),mnemonicTitle:(0,r.kg)(3276,"&&Top")},shortTitle:(0,r.kg)(3277,"Top"),category:M.L.View,toggled:I.M$.equals("config.workbench.activityBar.location","top"),menu:[{id:E.D8.ActivityBarPositionMenu,order:2},{id:E.D8.CommandPalette,when:I.M$.notEquals("config.workbench.activityBar.location","top")}]})}run(e){e.get(f.p).updateValue("workbench.activityBar.location","top")}}),(0,E.ug)(class extends E.L{constructor(){super({id:"workbench.action.activityBarLocation.bottom",title:{...(0,r.aS)(3278,"Move Activity Bar to Bottom"),mnemonicTitle:(0,r.kg)(3279,"&&Bottom")},shortTitle:(0,r.kg)(3280,"Bottom"),category:M.L.View,toggled:I.M$.equals("config.workbench.activityBar.location","bottom"),menu:[{id:E.D8.ActivityBarPositionMenu,order:3},{id:E.D8.CommandPalette,when:I.M$.notEquals("config.workbench.activityBar.location","bottom")}]})}run(e){e.get(f.p).updateValue("workbench.activityBar.location","bottom")}}),(0,E.ug)(class extends E.L{constructor(){super({id:"workbench.action.activityBarLocation.hide",title:{...(0,r.aS)(3281,"Hide Activity Bar"),mnemonicTitle:(0,r.kg)(3282,"&&Hidden")},shortTitle:(0,r.kg)(3283,"Hidden"),category:M.L.View,toggled:I.M$.equals("config.workbench.activityBar.location","hidden"),menu:[{id:E.D8.ActivityBarPositionMenu,order:4},{id:E.D8.CommandPalette,when:I.M$.notEquals("config.workbench.activityBar.location","hidden")}]})}run(e){e.get(f.p).updateValue("workbench.activityBar.location","hidden")}}),E.ZG.appendMenuItem(E.D8.MenubarAppearanceMenu,{submenu:E.D8.ActivityBarPositionMenu,title:(0,r.kg)(3284,"Activity Bar Position"),group:"3_workbench_layout_move",order:2}),E.ZG.appendMenuItem(E.D8.ViewContainerTitleContext,{submenu:E.D8.ActivityBarPositionMenu,title:(0,r.kg)(3284,"Activity Bar Position"),when:I.M$.equals("viewContainerLocation",(0,A._4)(0)),group:"3_workbench_layout_move",order:1}),E.ZG.appendMenuItem(E.D8.ViewTitleContext,{submenu:E.D8.ActivityBarPositionMenu,title:(0,r.kg)(3284,"Activity Bar Position"),when:I.M$.equals("viewLocation",(0,A._4)(0)),group:"3_workbench_layout_move",order:1});class G extends E.L{constructor(e,t){super(e),this.offset=t}async run(e){const t=e.get(P.b),i=t.getVisiblePaneCompositeIds(0),o=t.getActivePaneComposite(0);if(!o)return;let n;for(let e=0;e<i.length;e++)if(i[e]===o.getId()){n=i[(e+i.length+this.offset)%i.length];break}await t.openPaneComposite(n,0,!0)}}(0,E.ug)(class extends G{constructor(){super({id:"workbench.action.previousSideBarView",title:(0,r.aS)(3285,"Previous Primary Side Bar View"),category:M.L.View,f1:!0},-1)}}),(0,E.ug)(class extends G{constructor(){super({id:"workbench.action.nextSideBarView",title:(0,r.aS)(3286,"Next Primary Side Bar View"),category:M.L.View,f1:!0},1)}}),(0,E.ug)(class extends E.L{constructor(){super({id:"workbench.action.focusActivityBar",title:(0,r.aS)(3287,"Focus Activity Bar"),category:M.L.View,f1:!0})}async run(e){e.get(c.Y).focusPart("workbench.parts.activitybar")}}),(0,u.zy)(((e,t)=>{const i=e.getColor(g.Yd);i&&t.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator:before {\n\t\t\t\tborder-left-color: ${i};\n\t\t\t}\n\t\t`);const o=e.getColor(g.pw);o&&t.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus::before {\n\t\t\t\tvisibility: hidden;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus .active-item-indicator:before {\n\t\t\t\tvisibility: visible;\n\t\t\t\tborder-left-color: ${o};\n\t\t\t}\n\t\t`);const n=e.getColor(g.Uw);n&&t.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator {\n\t\t\t\tz-index: 0;\n\t\t\t\tbackground-color: ${n};\n\t\t\t}\n\t\t`);const s=e.getColor(m.bu);if(s)t.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item .action-label::before{\n\t\t\t\tpadding: 6px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active .action-label::before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:hover .action-label::before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .action-label::before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:hover .action-label::before {\n\t\t\t\toutline: 1px solid ${s};\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:hover .action-label::before {\n\t\t\t\toutline: 1px dashed ${s};\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator:before {\n\t\t\t\tborder-left-color: ${s};\n\t\t\t}\n\t\t`);else{const i=e.getColor(m.tA);i&&t.addRule(`\n\t\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator::before {\n\t\t\t\t\t\tborder-left-color: ${i};\n\t\t\t\t\t}\n\t\t\t\t`)}}))},96334:(e,t,i)=>{i.d(t,{z:()=>R});var o=i(92518);(0,i(6162).A)(".monaco-workbench.noauxiliarybar .part.auxiliarybar{display:none!important;visibility:hidden!important}.monaco-workbench .part.auxiliarybar>.content .monaco-editor,.monaco-workbench .part.auxiliarybar>.content .monaco-editor .margin,.monaco-workbench .part.auxiliarybar>.content .monaco-editor .monaco-editor-background{background-color:var(--vscode-sideBar-background)}.monaco-workbench .part.auxiliarybar .title-actions .actions-container{justify-content:flex-end}.monaco-workbench .part.auxiliarybar .title-actions .action-item{margin-right:4px}.monaco-workbench .part.auxiliarybar>.title{background-color:var(--vscode-sideBarTitle-background)}.monaco-workbench .part.auxiliarybar>.title>.title-label{flex:1}.monaco-workbench .part.auxiliarybar>.title>.title-label h2{text-transform:uppercase}.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container{flex:1}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus{outline:0!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label{border-radius:0;outline-offset:2px}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label:before,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label:before{left:5px;position:absolute}.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before{border-top-color:var(--vscode-panelTitle-activeBorder)!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before{border-top-color:var(--vscode-activityBarTop-activeBorder)!important}.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-sideBarTitle-foreground)!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-activityBarTop-foreground)!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) solid 1px!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.checked):hover .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.checked):hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) dashed 1px!important}.monaco-workbench .auxiliarybar.part.pane-composite-part>.composite.title>.title-actions{flex:inherit}.monaco-workbench .auxiliarybar.pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item{max-width:150px}",{});var n,s=i(25934),r=i(46361),a=i(87276),c=i(28672),d=i(76257),h=i(54521),l=i(64533),u=(i(86849),i(55325)),p=(i(27785),i(82437),i(32802),i(77692),i(16115),i(79849),i(17960),i(69416),i(10380),i(40240)),g=i(47622),m=i(5336),b=i(92986),w=i(44622),v=i(39924),f=i(76390),y=i(62179),C=i(1180),S=i(71849),k=i(84261),_=i(78775),x=i(19660),E=i(63288),D=i(4141),I=i(819),V=i(79268),M=i(68836),T=i(33825),A=i(7016),L=i(95915),P=i(70348);let R=class extends _.B{static{n=this}static{this.activePanelSettingsKey="workbench.auxiliarybar.activepanelid"}static{this.pinnedPanelsKey="workbench.auxiliarybar.pinnedPanels"}static{this.placeholdeViewContainersKey="workbench.auxiliarybar.placeholderPanels"}static{this.viewContainersWorkspaceStateKey="workbench.auxiliarybar.viewContainersWorkspaceState"}get preferredHeight(){return.4*this.layoutService.mainContainerDimension.height}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const t=e.getOptimalWidth();return"number"==typeof t?Math.max(t,300):void 0}constructor(e,t,i,o,s,r,a,c,d,h,l,p,b,w){super("workbench.parts.auxiliarybar",{hasTitle:!0,borderWidth:()=>this.getColor(m.z)||this.getColor(u.b1)?1:0},n.activePanelSettingsKey,g.Ok.bindTo(h),g.bQ.bindTo(h),"auxiliarybar","auxiliarybar",void 0,e,t,i,o,s,r,a,c,d,h,l,b),this.commandService=p,this.configurationService=w,this.minimumWidth=170,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.priority=1,this._register(w.onDidChangeConfiguration((e=>{e.affectsConfiguration("workbench.activityBar.location")&&this.onDidChangeActivityBarLocation()})))}onDidChangeActivityBarLocation(){this.updateCompositeBar();const e=this.getActiveComposite()?.getId();e&&this.onTitleAreaUpdate(e)}updateStyles(){super.updateStyles();const e=(0,C.eU)(this.getContainer());e.style.backgroundColor=this.getColor(m.ly)||"";const t=this.getColor(m.z)||this.getColor(u.b1),i=1===this.layoutService.getSideBarPosition();e.style.color=this.getColor(m.MH)||"",e.style.borderLeftColor=t??"",e.style.borderRightColor=t??"",e.style.borderLeftStyle=t&&!i?"solid":"none",e.style.borderRightStyle=t&&i?"solid":"none",e.style.borderLeftWidth=t&&!i?"1px":"0px",e.style.borderRightWidth=t&&i?"1px":"0px"}getCompositeBarOptions(){const e=this;return{partContainerClass:"auxiliarybar",pinnedViewContainersKey:n.pinnedPanelsKey,placeholderViewContainersKey:n.placeholdeViewContainersKey,viewContainersWorkspaceStateKey:n.viewContainersWorkspaceStateKey,icon:!0,orientation:0,recomputeSizes:!0,activityHoverOptions:{position:()=>this.getCompositeBarPosition()===_.u.BOTTOM?3:2},fillExtraContextMenuActions:e=>this.fillExtraContextMenuActions(e),compositeSize:0,iconSize:16,get overflowActionSize(){return e.getCompositeBarPosition()===_.u.TITLE?40:30},colors:t=>({activeBackgroundColor:t.getColor(m.ly),inactiveBackgroundColor:t.getColor(m.ly),get activeBorderBottomColor(){return e.getCompositeBarPosition()===_.u.TITLE?t.getColor(m.O):t.getColor(m.IH)},get activeForegroundColor(){return e.getCompositeBarPosition()===_.u.TITLE?t.getColor(m.hr):t.getColor(m.OJ)},get inactiveForegroundColor(){return e.getCompositeBarPosition()===_.u.TITLE?t.getColor(m.Iu):t.getColor(m.g8)},badgeBackground:t.getColor(m.Nl),badgeForeground:t.getColor(m.Sj),get dragAndDropBorder(){return e.getCompositeBarPosition()===_.u.TITLE?t.getColor(m.Tb):t.getColor(m.gv)}}),compact:!0}}fillExtraContextMenuActions(e){const t=0===this.layoutService.getSideBarPosition(),i=this.getViewsSubmenuAction();i&&(e.push(new f.wv),e.push(i));const o=this.menuService.getMenuActions(E.D8.ActivityBarPositionMenu,this.contextKeyService,{shouldForwardArgs:!0,renderShortTitle:!0}),n=[];(0,V.$u)(o,{primary:[],secondary:n}),e.push(new f.wv,new f.YH("workbench.action.panel.position",(0,s.kg)(3293,"Activity Bar Position"),n),(0,f.ih)({id:S.WZ.ID,label:t?(0,s.kg)(3294,"Move Secondary Side Bar Left"):(0,s.kg)(3295,"Move Secondary Side Bar Right"),run:()=>this.commandService.executeCommand(S.WZ.ID)}),(0,f.ih)({id:y.s.ID,label:(0,s.kg)(3296,"Hide Secondary Side Bar"),run:()=>this.commandService.executeCommand(y.s.ID)}))}shouldShowCompositeBar(){return"hidden"!==this.configurationService.getValue("workbench.activityBar.location")}getCompositeBarPosition(){switch(this.configurationService.getValue("workbench.activityBar.location")){case"top":return _.u.TOP;case"bottom":return _.u.BOTTOM;default:return _.u.TITLE}}createHeaderArea(){const e=super.createHeaderArea(),t=(0,M.$)(".auxiliary-bar-global-header"),i=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(L.S,E.D8.AuxiliaryBarHeader,void 0,void 0)),o=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(T.p,t,{actionViewItemProvider:(e,t)=>this.headerActionViewItemProvider(e,t),orientation:0,hiddenItemStrategy:-1,getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)}));return o.setActions((0,x.p)(i.getPrimaryActions())),this.headerFooterCompositeBarDispoables.add(i.onDidChange((()=>o.setActions((0,x.p)(i.getPrimaryActions()))))),e.appendChild(t),e}headerActionViewItemProvider(e,t){if(e.id===y.s.ID)return this.instantiationService.createInstance(A.Z4,void 0,e,t)}toJSON(){return{type:"workbench.parts.auxiliarybar"}}};R=n=(0,o.C)([(0,o.Q)(0,h.O),(0,o.Q)(1,l.C),(0,o.Q)(2,a.Z),(0,o.Q)(3,v.Y),(0,o.Q)(4,d.b),(0,o.Q)(5,P.T),(0,o.Q)(6,c._Y),(0,o.Q)(7,p.G),(0,o.Q)(8,b.X),(0,o.Q)(9,r.f),(0,o.Q)(10,w.c),(0,o.Q)(11,k.w),(0,o.Q)(12,D.e),(0,o.Q)(13,I.p)],R)},60970:(e,t,i)=>{i.d(t,{w:()=>Ni});var o=i(92518),n=i(25934),s=i(28672),r=i(1661),a=i(24821),c=i(40240),d=i(19510),h=i(68836),l=i(86849),u=i(55325),p=(i(27785),i(82437)),g=(i(32802),i(77692)),m=(i(16115),i(79849),i(17960),i(69416),i(10380),i(27064)),b=i(5336),w=i(87427),v=i(51053),f=i(6162);(0,f.A)('.monaco-workbench .part.editor>.content .editor-group-container{height:100%}.monaco-workbench .part.editor>.content .editor-group-container.empty{opacity:.5}.monaco-workbench .part.editor>.content .editor-group-container.empty.active,.monaco-workbench .part.editor>.content .editor-group-container.empty.dragged-over{opacity:1}.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty.active:focus{outline:1px solid var(--vscode-editorGroup-focusedEmptyBorder);outline-offset:-2px}.monaco-workbench .part.editor>.content.empty .editor-group-container.empty.active:focus{outline:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;margin:auto;max-width:290px}.monaco-workbench .part.editor>.content .editor-group-container:not(.empty)>.editor-group-watermark{display:none}.monaco-workbench .part.editor>.content.auxiliary .editor-group-container.empty>.editor-group-watermark,.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty>.editor-group-watermark{height:calc(100% - 70px);max-width:200px}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.letterpress{aspect-ratio:1/1;background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIG9wYWNpdHk9Ii4xIj48cGF0aCBkPSJNMjU5Ljk5NiAyNDIuMDAySC0uMDAzVjE4aDI2MHYyMjRaTTUuOTk3IDI0LjAwNnYyMTEuOTkxaDI0OFYyNC4wMDZoLTI0OFoiLz48cGF0aCBkPSJNNzcgMjJoMTh2MjE2SDc3ek0xMTIgNDJoNzB2MThoLTcwek0xMTIgMTgyaDcwdjE4aC03MHpNMTI5LjQ5OCA3N2g4OHYxOGgtODh6TTEyOS40OTggMTEyaDg4djE4aC04OHpNMTI5LjQ5OCAxNDdoODh2MThoLTg4eiIvPjwvZz48L3N2Zz4=");background-position-x:center;background-repeat:no-repeat;background-size:contain;max-height:100%;width:100%}.monaco-workbench.vs-dark .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIG9wYWNpdHk9Ii4zIj48cGF0aCBkPSJNMjU5Ljk5NiAyNDIuMDAySC0uMDAzVjE4aDI2MHYyMjRaTTUuOTk3IDI0LjAwNnYyMTEuOTkxaDI0OFYyNC4wMDZoLTI0OFoiLz48cGF0aCBkPSJNNzcgMjJoMTh2MjE2SDc3ek0xMTIgNDJoNzB2MThoLTcwek0xMTIgMTgyaDcwdjE4aC03MHpNMTI5LjQ5OCA3N2g4OHYxOGgtODh6TTEyOS40OTggMTEyaDg4djE4aC04OHpNMTI5LjQ5OCAxNDdoODh2MThoLTg4eiIvPjwvZz48L3N2Zz4=")}.monaco-workbench.hc-light .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIGZpbGw9IiNkOWQ5ZDkiPjxwYXRoIGQ9Ik0yNTkuOTk2IDI0Mi4wMDJILS4wMDNWMThoMjYwdjIyNFpNNS45OTcgMjQuMDA2djIxMS45OTFoMjQ4VjI0LjAwNmgtMjQ4WiIvPjxwYXRoIGQ9Ik03NyAyMmgxOHYyMTZINzd6TTExMiA0Mmg3MHYxOGgtNzB6TTExMiAxODJoNzB2MThoLTcwek0xMjkuNDk4IDc3aDg4djE4aC04OHpNMTI5LjQ5OCAxMTJoODh2MThoLTg4ek0xMjkuNDk4IDE0N2g4OHYxOGgtODh6Ii8+PC9nPjwvc3ZnPg==")}.monaco-workbench.hc-black .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIGZpbGw9IiMzQzNDM0MiPjxwYXRoIGQ9Ik0yNTkuOTk2IDI0Mi4wMDJILS4wMDNWMThoMjYwdjIyNFpNNS45OTcgMjQuMDA2djIxMS45OTFoMjQ4VjI0LjAwNmgtMjQ4WiIvPjxwYXRoIGQ9Ik03NyAyMmgxOHYyMTZINzd6TTExMiA0Mmg3MHYxOGgtNzB6TTExMiAxODJoNzB2MThoLTcwek0xMjkuNDk4IDc3aDg4djE4aC04OHpNMTI5LjQ5OCAxMTJoODh2MThoLTg4ek0xMjkuNDk4IDE0N2g4OHYxOGgtODh6Ii8+PC9nPjwvc3ZnPg==")}.monaco-workbench .part.editor>.content .editor-group-container.max-height-478px>.editor-group-watermark>.shortcuts,.monaco-workbench .part.editor>.content.auxiliary .editor-group-container>.editor-group-watermark>.shortcuts,.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container>.editor-group-watermark>.shortcuts{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts>.watermark-box{border-collapse:separate;border-spacing:11px 17px;display:inline-table}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dl{color:var(--vscode-editorWatermark-foreground);cursor:default;display:table-row;opacity:.8}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{letter-spacing:.04em;text-align:right}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dd{text-align:left}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dd,.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{display:table-cell;vertical-align:middle}.monaco-workbench .part.editor>.content .editor-group-container>.title{box-sizing:border-box;overflow:hidden;position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title:not(.tabs){display:flex;flex-wrap:nowrap}.monaco-workbench .part.editor>.content .editor-group-container>.title.title-border-bottom:after{background-color:var(--title-border-bottom-color);bottom:0;content:"";height:1px;left:0;pointer-events:none;position:absolute;width:100%;z-index:9}.monaco-workbench .part.editor>.content .editor-group-container.empty>.title{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar{display:none;height:35px}.monaco-workbench .part.editor>.content .editor-group-container.empty.locked>.editor-group-container-toolbar,.monaco-workbench .part.editor>.content.auxiliary .editor-group-container.empty>.editor-group-container-toolbar,.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty>.editor-group-container-toolbar{display:block}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar .actions-container{justify-content:flex-end}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container.empty>.editor-container{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-container>.editor-instance{height:100%}.monaco-workbench .part.editor>.content .grid-view-container{height:100%;width:100%}',{});var y=i(98642),C=i(80512),S=i(47622),k=i(23703),_=i(46490),x=i(46361),E=i(74504),D=i(32545),I=i(32834),V=i(93152),M=i(39924),T=i(76884),A=i(91193),L=i(1180),P=i(2481),R=i(9981),B=i(58544),O=i(53658),N=i(69612),F=i(30875),G=i(16093),W=i(16849);let z=class extends a.jG{get minimumWidth(){return this._activeEditorPane?.minimumWidth??v.dp.width}get minimumHeight(){return this._activeEditorPane?.minimumHeight??v.dp.height}get maximumWidth(){return this._activeEditorPane?.maximumWidth??v.bZ.width}get maximumHeight(){return this._activeEditorPane?.maximumHeight??v.bZ.height}get activeEditorPane(){return this._activeEditorPane}constructor(e,t,i,o,n,s,c,d,h,l){super(),this.editorGroupParent=e,this.editorPanesParent=t,this.groupView=i,this.layoutService=o,this.instantiationService=n,this.editorProgressService=s,this.workspaceTrustService=c,this.logService=d,this.dialogService=h,this.hostService=l,this._onDidFocus=this._register(new r.vl),this.onDidFocus=this._onDidFocus.event,this._onDidChangeSizeConstraints=this._register(new r.vl),this.onDidChangeSizeConstraints=this._onDidChangeSizeConstraints.event,this._activeEditorPane=null,this.editorPanes=[],this.mapEditorPaneToPendingSetInput=new Map,this.activeEditorPaneDisposables=this._register(new a.Cm),this.editorOperation=this._register(new T.xn(this.editorProgressService)),this.editorPanesRegistry=V.O.as(C.q5.EditorPane),this.registerListeners()}registerListeners(){this._register(this.workspaceTrustService.onDidChangeTrust((()=>this.onDidChangeWorkspaceTrust())))}onDidChangeWorkspaceTrust(){const e=this._activeEditorPane?.input,t=this._activeEditorPane?.options;e?.hasCapability(16)&&this.groupView.openEditor(e,t)}async openEditor(e,t,i,o=Object.create(null)){try{return await this.doOpenEditor(this.getEditorPaneDescriptor(e),e,t,i,o)}catch(n){return t?.ignoreError?{error:n}:this.doShowError(n,e,t,i,o)}}async doShowError(e,t,i,o,n){this.logService.error(e);let s=!1;if(i?.source!==B.$N.USER||(0,C.uD)(e)&&!e.allowDialog||(s=await this.doShowErrorDialog(e,t)),s)return{error:e};const r={...i};return(0,O.MB)(e)||(r.error=e),{...await this.doOpenEditor(R.BJ.DESCRIPTOR,t,r,o,n),error:e}}async doShowErrorDialog(e,t){let i,o,s=I.A.Error,r=(0,N.rx)(e);(0,C.uD)(e)&&(o=e.actions,s=e.forceSeverity??I.A.Error,e.forceMessage&&(i=e.message,r=void 0)),i||(i=(0,n.kg)(11540,"Unable to open '{0}'",t.getName()));const a=[];if(o&&o.length>0)for(const e of o)a.push({label:e.label,run:()=>e});else a.push({label:(0,n.kg)(11541,"&&OK"),run:()=>{}});let c;1===a.length&&(c={run:()=>{d=!0}});let d=!1;const{result:h}=await this.dialogService.prompt({type:s,message:i,detail:r,buttons:a,cancelButton:c});if(h){const e=h.run();e instanceof Promise&&e.catch((e=>this.dialogService.error((0,N.rx)(e)))),d=!0}return d}async doOpenEditor(e,t,i,o,n=Object.create(null)){const s=this.doShowEditorPane(e),r=(0,h.bq)(),{changed:a,cancelled:c}=await this.doSetInput(s,t,i,n);return c||(i&&i.preserveFocus||!this.shouldRestoreFocus(r)?o?.preserveWindowOrder||this.hostService.moveTop((0,h.ZF)(this.groupView.windowId,!0).window):s.focus()),{pane:s,changed:a,cancelled:c}}shouldRestoreFocus(e){if(!this.layoutService.isRestored())return!0;if(!e)return!0;const t=(0,h.bq)();return!t||t===e.ownerDocument.body||!(e!==t&&(0,h.yD)(t)&&!(0,h.QX)(t,this.editorGroupParent))}getEditorPaneDescriptor(e){return e.hasCapability(16)&&!this.workspaceTrustService.isWorkspaceTrusted()?R.be.DESCRIPTOR:(0,L.eU)(this.editorPanesRegistry.getEditorPane(e))}doShowEditorPane(e){if(this._activeEditorPane&&e.describes(this._activeEditorPane))return this._activeEditorPane;this.doHideActiveEditorPane();const t=this.doCreateEditorPane(e);this.doSetActiveEditorPane(t);const i=(0,L.eU)(t.getContainer());return this.editorPanesParent.appendChild(i),(0,h.WU)(i),t.setVisible(!0),this.pagePosition&&t.layout(new h.fg(this.pagePosition.width,this.pagePosition.height),{top:this.pagePosition.top,left:this.pagePosition.left}),this.boundarySashes&&t.setBoundarySashes(this.boundarySashes),t}doCreateEditorPane(e){const t=this.doInstantiateEditorPane(e);if(!t.getContainer()){const e=document.createElement("div");e.classList.add("editor-instance"),this.editorPanesParent.appendChild(e),t.create(e)}return t}doInstantiateEditorPane(e){const t=this.editorPanes.find((t=>e.describes(t)));if(t)return t;const i=this._register(e.instantiate(this.instantiationService,this.groupView));return this.editorPanes.push(i),i}doSetActiveEditorPane(e){this._activeEditorPane=e,this.activeEditorPaneDisposables.clear(),e&&(this.activeEditorPaneDisposables.add(e.onDidChangeSizeConstraints((e=>this._onDidChangeSizeConstraints.fire(e)))),this.activeEditorPaneDisposables.add(e.onDidFocus((()=>this._onDidFocus.fire())))),this._onDidChangeSizeConstraints.fire(void 0)}async doSetInput(e,t,i,o){let n=e.input?.matches(t);if(n&&!i?.forceReload)return this.mapEditorPaneToPendingSetInput.has(e)&&await this.mapEditorPaneToPendingSetInput.get(e),n=e.input?.matches(t),n&&e.setOptions(i),{changed:!1,cancelled:!n};const s=this.editorOperation.start(this.layoutService.isRestored()?800:3200);let r=!1;try{e.clearInput();const n=e.setInput(t,i,o,s.token);this.mapEditorPaneToPendingSetInput.set(e,n),await n,s.isCurrent()||(r=!0)}catch(e){if(s.isCurrent())throw e;r=!0}finally{s.isCurrent()&&this.mapEditorPaneToPendingSetInput.delete(e),s.stop()}return{changed:!n,cancelled:r}}doHideActiveEditorPane(){if(!this._activeEditorPane)return;this.editorOperation.stop(),this.safeRun((()=>this._activeEditorPane?.clearInput())),this.safeRun((()=>this._activeEditorPane?.setVisible(!1))),this.mapEditorPaneToPendingSetInput.delete(this._activeEditorPane);const e=this._activeEditorPane.getContainer();e&&(e.remove(),(0,h.jD)(e)),this.doSetActiveEditorPane(null)}closeEditor(e){this._activeEditorPane?.input&&e.matches(this._activeEditorPane.input)&&this.doHideActiveEditorPane()}setVisible(e){this.safeRun((()=>this._activeEditorPane?.setVisible(e)))}layout(e){this.pagePosition=e,this.safeRun((()=>this._activeEditorPane?.layout(new h.fg(e.width,e.height),e)))}setBoundarySashes(e){this.boundarySashes=e,this.safeRun((()=>this._activeEditorPane?.setBoundarySashes(e)))}safeRun(e){try{e()}catch(e){this.logService.error(e)}}};z=(0,o.C)([(0,o.Q)(3,M.Y),(0,o.Q)(4,s._Y),(0,o.Q)(5,A.N),(0,o.Q)(6,P.Lj),(0,o.Q)(7,F.r),(0,o.Q)(8,G.X),(0,o.Q)(9,W.v)],z);var H=i(44353),Q=i(84793),U=i(93765),$=i(4859),K=i(19660),j=i(76257),Z=i(63288),Y=i(4141),q=i(85655),J=i(79268),X=i(87276),ee=i(12417),te=i(37653),ie=i(21021),oe=i(85412),ne=i(30787),se=i(53725),re=i(19871),ae=i(47575),ce=i(71478),de=i(11199),he=i(45103),le=i(77829),ue=i(819),pe=i(86707),ge=i(50928),me=i(64788);(0,l.x1)("editorWatermark.foreground",{dark:(0,l.JO)(p.By,.6),light:(0,l.JO)(p.By,.68),hcDark:p.By,hcLight:p.By},(0,n.kg)(11542,"Foreground color for the labels in the editor watermark."));const be={text:(0,n.kg)(11543,"Show All Commands"),id:"workbench.action.showCommands"},we={text:(0,n.kg)(11544,"Go to File"),id:"workbench.action.quickOpen"},ve={text:(0,n.kg)(11545,"Open File"),id:"workbench.action.files.openFile",mac:!1},fe={text:(0,n.kg)(11546,"Open Folder"),id:"workbench.action.files.openFolder",mac:!1},ye={text:(0,n.kg)(11547,"Open File or Folder"),id:"workbench.action.files.openFileFolder",mac:!0},Ce={text:(0,n.kg)(11548,"Open Recent"),id:"workbench.action.openRecent"},Se={text:(0,n.kg)(11549,"New Untitled Text File"),id:"workbench.action.files.newUntitledFile",mac:!0},ke={text:(0,n.kg)(11550,"Find in Files"),id:"workbench.action.findInFiles"},_e={text:(0,n.kg)(11551,"Toggle Terminal"),id:"workbench.action.terminal.toggleTerminal",when:me.M$.equals("terminalProcessSupported",!0)},xe={text:(0,n.kg)(11552,"Start Debugging"),id:"workbench.action.debug.start",when:me.M$.equals("terminalProcessSupported",!0)},Ee={text:(0,n.kg)(11553,"Toggle Full Screen"),id:"workbench.action.toggleFullScreen"},De={text:(0,n.kg)(11554,"Show Settings"),id:"workbench.action.openSettings"},Ie=[be,ve,fe,ye,Ce,Se],Ve=[be,we,ke,xe,_e,Ee,De];let Me=class extends a.jG{constructor(e,t,i,o,n){super(),this.keybindingService=t,this.contextService=i,this.contextKeyService=o,this.configurationService=n,this.transientDisposables=this._register(new a.Cm),this.enabled=!1,this.keybindingLabels=new Set;const s=(0,h.h)(".editor-group-watermark",[(0,h.h)(".letterpress"),(0,h.h)(".shortcuts@shortcuts")]);(0,h.BC)(e,s.root),this.shortcuts=s.shortcuts,this.registerListeners(),this.workbenchState=i.getWorkbenchState(),this.render()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("workbench.tips.enabled")&&this.render()}))),this._register(this.contextService.onDidChangeWorkbenchState((e=>{this.workbenchState!==e&&(this.workbenchState=e,this.render())})));const e=[...Ie,...Ve].filter((e=>void 0!==e.when)).map((e=>e.when)),t=new Set;e.forEach((e=>e.keys().forEach((e=>t.add(e))))),this._register(this.contextKeyService.onDidChangeContext((e=>{e.affectsSome(t)&&this.render()})))}render(){const e=this.configurationService.getValue("workbench.tips.enabled");if(e===this.enabled)return;if(this.enabled=e,this.clear(),!e)return;const t=(0,h.BC)(this.shortcuts,(0,h.$)(".watermark-box")),i=(1!==this.workbenchState?Ve:Ie).filter((e=>!("when"in e)||this.contextKeyService.contextMatchesRules(e.when))).filter((e=>!("mac"in e)||e.mac===(ce.zx&&!ce.HZ))).filter((e=>!!ge.w.getCommand(e.id))).filter((e=>!!this.keybindingService.lookupKeybinding(e.id))),o=()=>{(0,h.w_)(t),this.keybindingLabels.forEach((e=>e.dispose())),this.keybindingLabels.clear();for(const e of i){const i=this.keybindingService.lookupKeybinding(e.id);if(!i)continue;const o=(0,h.BC)(t,(0,h.$)("dl"));(0,h.BC)(o,(0,h.$)("dt")).textContent=e.text;const n=(0,h.BC)(o,(0,h.$)("dd")),s=new pe.x(n,ce.OS,{renderUnboundKeybindings:!0,...he.ir});s.set(i),this.keybindingLabels.add(s)}};o(),this.transientDisposables.add(this.keybindingService.onDidUpdateKeybindings(o))}clear(){(0,h.w_)(this.shortcuts),this.transientDisposables.clear()}dispose(){super.dispose(),this.clear(),this.keybindingLabels.forEach((e=>e.dispose()))}};Me=(0,o.C)([(0,o.Q)(1,j.b),(0,o.Q)(2,le.V),(0,o.Q)(3,x.f),(0,o.Q)(4,ue.p)],Me),(0,f.A)(".monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control{cursor:default;flex:1 100%;height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-icon-label{height:22px;line-height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-icon-label:before{height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .outline-element-icon{height:22px;line-height:22px;padding-right:3px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-breadcrumb-item{max-width:80%}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-breadcrumb-item:before{align-items:center;display:flex;height:22px;justify-content:center;width:16px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-breadcrumb-item:last-child{padding-right:8px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-breadcrumb-item:last-child .codicon:last-child{display:none}",{});var Te=i(65734),Ae=i(80914);(0,f.A)('.monaco-breadcrumbs{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start;outline-style:none;user-select:none;-webkit-user-select:none}.monaco-breadcrumbs .monaco-breadcrumb-item{align-items:center;align-self:center;cursor:pointer;display:flex;flex:0 1 auto;height:100%;outline:none;white-space:nowrap}.monaco-breadcrumbs.disabled .monaco-breadcrumb-item{cursor:default}.monaco-breadcrumbs .monaco-breadcrumb-item .codicon-breadcrumb-separator{color:inherit}.monaco-breadcrumbs .monaco-breadcrumb-item:first-of-type:before{content:" "}',{});class Le{}class Pe{constructor(e,t,i,o){this._disposables=new a.Cm,this._onDidSelectItem=new r.vl,this._onDidFocusItem=new r.vl,this._onDidChangeFocus=new r.vl,this.onDidSelectItem=this._onDidSelectItem.event,this.onDidFocusItem=this._onDidFocusItem.event,this.onDidChangeFocus=this._onDidChangeFocus.event,this._items=new Array,this._nodes=new Array,this._freeNodes=new Array,this._enabled=!0,this._focusedItemIdx=-1,this._selectedItemIdx=-1,this._domNode=document.createElement("div"),this._domNode.className="monaco-breadcrumbs",this._domNode.tabIndex=0,this._domNode.setAttribute("role","list"),this._scrollable=new Te.MU(this._domNode,{vertical:2,horizontal:1,horizontalScrollbarSize:t,useShadows:!1,scrollYToX:!0}),this._separatorIcon=i,this._disposables.add(this._scrollable),this._disposables.add((0,h.b2)(this._domNode,"click",(e=>this._onClick(e)))),e.appendChild(this._scrollable.getDomNode());const n=(0,h.li)(this._domNode);this._style(n,o);const s=(0,h.w5)(this._domNode);this._disposables.add(s),this._disposables.add(s.onDidBlur((e=>this._onDidChangeFocus.fire(!1)))),this._disposables.add(s.onDidFocus((e=>this._onDidChangeFocus.fire(!0))))}setHorizontalScrollbarSize(e){this._scrollable.updateOptions({horizontalScrollbarSize:e})}dispose(){this._disposables.dispose(),this._pendingLayout?.dispose(),this._pendingDimLayout?.dispose(),this._onDidSelectItem.dispose(),this._onDidFocusItem.dispose(),this._onDidChangeFocus.dispose(),this._domNode.remove(),this._nodes.length=0,this._freeNodes.length=0}layout(e){e&&h.fg.equals(e,this._dimension)||(e?(this._pendingDimLayout?.dispose(),this._pendingDimLayout=this._updateDimensions(e)):(this._pendingLayout?.dispose(),this._pendingLayout=this._updateScrollbar()))}_updateDimensions(e){const t=new a.Cm;return t.add((0,h.JP)((0,h.zk)(this._domNode),(()=>{this._dimension=e,this._domNode.style.width=`${e.width}px`,this._domNode.style.height=`${e.height}px`,t.add(this._updateScrollbar())}))),t}_updateScrollbar(){return(0,h.xP)((0,h.zk)(this._domNode),(()=>{(0,h.xP)((0,h.zk)(this._domNode),(()=>{this._scrollable.setRevealOnScroll(!1),this._scrollable.scanDomNode(),this._scrollable.setRevealOnScroll(!0)}))}))}_style(e,t){let i="";t.breadcrumbsBackground&&(i+=`.monaco-breadcrumbs { background-color: ${t.breadcrumbsBackground}}`),t.breadcrumbsForeground&&(i+=`.monaco-breadcrumbs .monaco-breadcrumb-item { color: ${t.breadcrumbsForeground}}\n`),t.breadcrumbsFocusForeground&&(i+=`.monaco-breadcrumbs .monaco-breadcrumb-item.focused { color: ${t.breadcrumbsFocusForeground}}\n`),t.breadcrumbsFocusAndSelectionForeground&&(i+=`.monaco-breadcrumbs .monaco-breadcrumb-item.focused.selected { color: ${t.breadcrumbsFocusAndSelectionForeground}}\n`),t.breadcrumbsHoverForeground&&(i+=`.monaco-breadcrumbs:not(.disabled\t) .monaco-breadcrumb-item:hover:not(.focused):not(.selected) { color: ${t.breadcrumbsHoverForeground}}\n`),e.innerText=i}setEnabled(e){this._enabled=e,this._domNode.classList.toggle("disabled",!this._enabled)}domFocus(){const e=this._focusedItemIdx>=0?this._focusedItemIdx:this._items.length-1;e>=0&&e<this._items.length?this._focus(e,void 0):this._domNode.focus()}isDOMFocused(){return(0,h.nR)(this._domNode)}getFocused(){return this._items[this._focusedItemIdx]}setFocused(e,t){this._focus(this._items.indexOf(e),t)}focusPrev(e){this._focusedItemIdx>0&&this._focus(this._focusedItemIdx-1,e)}focusNext(e){this._focusedItemIdx+1<this._nodes.length&&this._focus(this._focusedItemIdx+1,e)}_focus(e,t){this._focusedItemIdx=-1;for(let t=0;t<this._nodes.length;t++){const i=this._nodes[t];t!==e?i.classList.remove("focused"):(this._focusedItemIdx=t,i.classList.add("focused"),i.focus())}this._reveal(this._focusedItemIdx,!0),this._onDidFocusItem.fire({type:"focus",item:this._items[this._focusedItemIdx],node:this._nodes[this._focusedItemIdx],payload:t})}reveal(e){const t=this._items.indexOf(e);t>=0&&this._reveal(t,!1)}revealLast(){this._reveal(this._items.length-1,!1)}_reveal(e,t){if(e<0||e>=this._nodes.length)return;const i=this._nodes[e];if(!i)return;const{width:o}=this._scrollable.getScrollDimensions(),{scrollLeft:n}=this._scrollable.getScrollPosition();(!t||i.offsetLeft>n+o||i.offsetLeft<n)&&(this._scrollable.setRevealOnScroll(!1),this._scrollable.setScrollPosition({scrollLeft:i.offsetLeft}),this._scrollable.setRevealOnScroll(!0))}getSelection(){return this._items[this._selectedItemIdx]}setSelection(e,t){this._select(this._items.indexOf(e),t)}_select(e,t){this._selectedItemIdx=-1;for(let t=0;t<this._nodes.length;t++){const i=this._nodes[t];t!==e?i.classList.remove("selected"):(this._selectedItemIdx=t,i.classList.add("selected"))}this._onDidSelectItem.fire({type:"select",item:this._items[this._selectedItemIdx],node:this._nodes[this._selectedItemIdx],payload:t})}getItems(){return this._items}setItems(e){let t,i=[];try{t=(0,w.Qp)(this._items,e,((e,t)=>e.equals(t))),i=this._items.splice(t,this._items.length-t,...e.slice(t)),this._render(t),(0,a.AS)(i),this._focus(-1,void 0)}catch(o){const n=new Error(`BreadcrumbsItem#setItems: newItems: ${e.length}, prefix: ${t}, removed: ${i.length}`);throw n.name=o.name,n.stack=o.stack,n}}_render(e){let t=!1;for(;e<this._items.length&&e<this._nodes.length;e++){const i=this._items[e],o=this._nodes[e];this._renderItem(i,o),t=!0}for(;e<this._nodes.length;){const e=this._nodes.pop();e&&(this._freeNodes.push(e),e.remove(),t=!0)}for(;e<this._items.length;e++){const i=this._items[e],o=this._freeNodes.length>0?this._freeNodes.pop():document.createElement("div");o&&(this._renderItem(i,o),this._domNode.appendChild(o),this._nodes.push(o),t=!0)}t&&this.layout(void 0)}_renderItem(e,t){(0,h.w_)(t),t.className="";try{e.render(t)}catch(e){t.innerText="<<RENDER ERROR>>",console.error(e)}t.tabIndex=-1,t.setAttribute("role","listitem"),t.classList.add("monaco-breadcrumb-item");const i=(0,h.$)(Ae.L0.asCSSSelector(this._separatorIcon));t.appendChild(i)}_onClick(e){if(this._enabled)for(let t=e.target;t;t=t.parentElement){const i=this._nodes.indexOf(t);if(i>=0){this._focus(i,e),this._select(i,e);break}}}}(0,f.A)(".monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control.hidden{display:none}.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.focused .hint-more,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.focused .monaco-icon-label,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.selected .hint-more,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.selected .monaco-icon-label{text-decoration-line:underline}.monaco-workbench .monaco-breadcrumb-item.shows-symbol-icon .codicon[class*=codicon-symbol-]{padding-right:6px}.monaco-workbench .monaco-breadcrumbs-picker .arrow{border-style:solid;position:absolute;width:0}.monaco-workbench .monaco-breadcrumbs-picker .picker-item{flex:1;line-height:22px}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree{display:flex;flex-direction:column;height:100%;overflow:hidden}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree>.input{box-sizing:border-box;height:36px;padding:5px 9px;position:relative}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree>.tree{height:calc(100% - 36px)}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree.inactive>.input{display:none}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree.inactive>.tree{height:100%}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree .monaco-highlighted-label .highlight{font-weight:700}",{});var Re=i(94384),Be=i(96485),Oe=i(77512),Ne=i(12234),Fe=i(21747),Ge=i(9957),We=i(88053),ze=i(85347),He=i(75560),Qe=i(29870),Ue=i(39509);class $e{constructor(e,t){this.uri=e,this.kind=t}}class Ke{constructor(e,t){this.element=e,this.outline=t}}let je=class{constructor(e,t,i,o,n){this.resource=e,this._workspaceService=o,this._outlineService=n,this._disposables=new a.Cm,this._currentOutline=new a.HE,this._outlineDisposables=new a.Cm,this._onDidUpdate=new r.vl,this.onDidUpdate=this._onDidUpdate.event,this._cfgFilePath=ze.h.FilePath.bindTo(i),this._cfgSymbolPath=ze.h.SymbolPath.bindTo(i),this._disposables.add(this._cfgFilePath.onDidChange((e=>this._onDidUpdate.fire(this)))),this._disposables.add(this._cfgSymbolPath.onDidChange((e=>this._onDidUpdate.fire(this)))),this._workspaceService.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders,this,this._disposables),this._fileInfo=this._initFilePathInfo(e),t&&(this._bindToEditor(t),this._disposables.add(n.onDidChange((()=>this._bindToEditor(t)))),this._disposables.add(t.onDidChangeControl((()=>this._bindToEditor(t))))),this._onDidUpdate.fire(this)}dispose(){this._disposables.dispose(),this._cfgFilePath.dispose(),this._cfgSymbolPath.dispose(),this._currentOutline.dispose(),this._outlineDisposables.dispose(),this._onDidUpdate.dispose()}isRelative(){return Boolean(this._fileInfo.folder)}getElements(){let e=[];if("on"===this._cfgFilePath.getValue()?e=e.concat(this._fileInfo.path):"last"===this._cfgFilePath.getValue()&&this._fileInfo.path.length>0&&(e=e.concat(this._fileInfo.path.slice(-1))),"off"===this._cfgSymbolPath.getValue())return e;if(!this._currentOutline.value)return e;const t=this._currentOutline.value.config.breadcrumbsDataSource.getBreadcrumbElements();for(let i="last"===this._cfgSymbolPath.getValue()&&t.length>0?t.length-1:0;i<t.length;i++)e.push(new Ke(t[i],this._currentOutline.value));return 0!==t.length||this._currentOutline.value.isEmpty||e.push(new Ke(this._currentOutline.value,this._currentOutline.value)),e}_initFilePathInfo(e){if((0,ne.fV)(e,ne.ny.untitled,ne.ny.data))return{folder:void 0,path:[]};const t={folder:this._workspaceService.getWorkspaceFolder(e)??void 0,path:[]};let i=e;for(;i&&"/"!==i.path&&(!t.folder||!(0,oe.n4)(t.folder.uri,i));){t.path.unshift(new $e(i,0===t.path.length?Re.pc.FILE:Re.pc.FOLDER));const e=i.path.length;if(i=(0,oe.pD)(i),i.path.length===e)break}return t.folder&&3===this._workspaceService.getWorkbenchState()&&t.path.unshift(new $e(t.folder.uri,Re.pc.ROOT_FOLDER)),t}_onDidChangeWorkspaceFolders(){this._fileInfo=this._initFilePathInfo(this.resource),this._onDidUpdate.fire(this)}_bindToEditor(e){const t=new Qe.Qi;this._currentOutline.clear(),this._outlineDisposables.clear(),this._outlineDisposables.add((0,a.s)((()=>t.dispose(!0)))),this._outlineService.createOutline(e,2,t.token).then((e=>{t.token.isCancellationRequested&&(e?.dispose(),e=void 0),this._currentOutline.value=e,this._onDidUpdate.fire(this),e&&this._outlineDisposables.add(e.onDidChange((()=>this._onDidUpdate.fire(this))))})).catch((e=>{this._onDidUpdate.fire(this),(0,O.dz)(e)}))}};je=(0,o.C)([(0,o.Q)(2,ue.p),(0,o.Q)(3,le.V),(0,o.Q)(4,Ue.p)],je);var Ze=i(60405),Ye=i(65698),qe=i(57651),Je=i(67198),Xe=i(81200),et=i(68796),tt=i(13901);let it=class{constructor(e,t,i,o,n){this.resource=t,this._instantiationService=i,this._themeService=o,this._configurationService=n,this._disposables=new a.Cm,this._fakeEvent=new UIEvent("fakeEvent"),this._onWillPickElement=new r.vl,this.onWillPickElement=this._onWillPickElement.event,this._previewDispoables=new a.HE,this._domNode=document.createElement("div"),this._domNode.className="monaco-breadcrumbs-picker show-file-icons",e.appendChild(this._domNode)}dispose(){this._disposables.dispose(),this._previewDispoables.dispose(),this._onWillPickElement.dispose(),this._domNode.remove(),setTimeout((()=>this._tree.dispose()),0)}async show(e,t,i,o,n){const s=this._themeService.getColorTheme().getColor(p.J1);this._arrow=document.createElement("div"),this._arrow.className="arrow",this._arrow.style.borderColor=`transparent transparent ${s?s.toString():""}`,this._domNode.appendChild(this._arrow),this._treeContainer=document.createElement("div"),this._treeContainer.style.background=s?s.toString():"",this._treeContainer.style.paddingTop="2px",this._treeContainer.style.borderRadius="3px",this._treeContainer.style.boxShadow=`0 0 8px 2px ${this._themeService.getColorTheme().getColor(p.f9)}`,this._treeContainer.style.border=`1px solid ${this._themeService.getColorTheme().getColor(p.DS)}`,this._domNode.appendChild(this._treeContainer),this._layoutInfo={maxHeight:t,width:i,arrowSize:o,arrowOffset:n,inputHeight:0},this._tree=this._createTree(this._treeContainer,e),this._disposables.add(this._tree.onDidOpen((async e=>{const{element:t,editorOptions:i,sideBySide:o}=e;await this._revealElement(t,{...i,preserveFocus:!1},o)}))),this._disposables.add(this._tree.onDidChangeFocus((e=>{this._previewDispoables.value=this._previewElement(e.elements[0])}))),this._disposables.add(this._tree.onDidChangeContentHeight((()=>{this._layout()}))),this._domNode.focus();try{await this._setInput(e),this._layout()}catch(e){(0,O.dz)(e)}}_layout(){const e=2*this._layoutInfo.arrowSize,t=Math.min(this._layoutInfo.maxHeight-e,this._tree.contentHeight),i=t+e;this._domNode.style.height=`${i}px`,this._domNode.style.width=`${this._layoutInfo.width}px`,this._arrow.style.top=`-${2*this._layoutInfo.arrowSize}px`,this._arrow.style.borderWidth=`${this._layoutInfo.arrowSize}px`,this._arrow.style.marginLeft=`${this._layoutInfo.arrowOffset}px`,this._treeContainer.style.height=`${t}px`,this._treeContainer.style.width=`${this._layoutInfo.width}px`,this._tree.layout(t,this._layoutInfo.width)}restoreViewState(){}};it=(0,o.C)([(0,o.Q)(2,s._Y),(0,o.Q)(3,c.G),(0,o.Q)(4,ue.p)],it);class ot{getHeight(e){return 22}getTemplateId(e){return"FileStat"}}class nt{getId(e){return re.rz.isUri(e)?e.toString():(0,Xe.SX)(e)?e.id:(0,Xe.Iy)(e)?e.uri.toString():e.resource.toString()}}let st=class{constructor(e){this._fileService=e}hasChildren(e){return re.rz.isUri(e)||(0,Xe.SX)(e)||(0,Xe.Iy)(e)||e.isDirectory}async getChildren(e){if((0,Xe.SX)(e))return e.folders;let t;return t=(0,Xe.Iy)(e)?e.uri:re.rz.isUri(e)?e:e.resource,(await this._fileService.resolve(t)).children??[]}};st=(0,o.C)([(0,o.Q)(0,Be.$)],st);let rt=class{constructor(e,t){this._labels=e,this._configService=t,this.templateId="FileStat"}renderTemplate(e){return this._labels.create(e,{supportHighlights:!0})}renderElement(e,t,i){const o=this._configService.getValue("explorer.decorations"),{element:n}=e;let s,r;(0,Xe.Iy)(n)?(s=n.uri,r=Re.pc.ROOT_FOLDER):(s=n.resource,r=n.isDirectory?Re.pc.FOLDER:Re.pc.FILE),i.setFile(s,{fileKind:r,hidePath:!0,fileDecorations:o,matches:(0,Ye.WJ)(e.filterData),extraClasses:["picker-item"]})}disposeTemplate(e){e.dispose()}};rt=(0,o.C)([(0,o.Q)(1,ue.p)],rt);class at{getKeyboardNavigationLabel(e){return e.name}}class ct{getWidgetAriaLabel(){return(0,n.kg)(11899,"Breadcrumbs")}getAriaLabel(e){return e.name}}let dt=class{constructor(e,t){this._workspaceService=e,this._cachedExpressions=new Map,this._disposables=new a.Cm;const i=ze.h.FileExcludes.bindTo(t),o=()=>{e.getWorkspace().folders.forEach((e=>{const t=i.getValue({resource:e.uri});if(!t)return;const o={};for(const i in t)"boolean"==typeof t[i]&&(o[0!==i.indexOf("**/")?Je.SA.join(e.uri.path,i):i]=t[i]);this._cachedExpressions.set(e.uri.toString(),(0,qe.qg)(o))}))};o(),this._disposables.add(i),this._disposables.add(i.onDidChange(o)),this._disposables.add(e.onDidChangeWorkspaceFolders(o))}dispose(){this._disposables.dispose()}filter(e,t){if((0,Xe.Iy)(e))return!0;const i=this._workspaceService.getWorkspaceFolder(e.resource);return!i||!this._cachedExpressions.has(i.uri.toString())||!this._cachedExpressions.get(i.uri.toString())((0,Je.V8)(i.uri.path,e.resource.path),(0,oe.P8)(e.resource))}};dt=(0,o.C)([(0,o.Q)(0,le.V),(0,o.Q)(1,ue.p)],dt);class ht{compare(e,t){return(0,Xe.Iy)(e)&&(0,Xe.Iy)(t)?e.index-t.index:e.isDirectory===t.isDirectory?(0,Ze.gE)(e.name,t.name):e.isDirectory?-1:1}}let lt=class extends it{constructor(e,t,i,o,n,s,r){super(e,t,i,o,n),this._workspaceService=s,this._editorService=r}_createTree(e){this._treeContainer.classList.add("file-icon-themable-tree"),this._treeContainer.classList.add("show-file-icons");const t=e=>{this._treeContainer.classList.toggle("align-icons-and-twisties",e.hasFileIcons&&!e.hasFolderIcons),this._treeContainer.classList.toggle("hide-arrows",!0===e.hidesExplorerArrows)};this._disposables.add(this._themeService.onDidFileIconThemeChange(t)),t(this._themeService.getFileIconTheme());const i=this._instantiationService.createInstance(We.SB,We.op);return this._disposables.add(i),this._instantiationService.createInstance(Ne.er,"BreadcrumbsFilePicker",e,new ot,[this._instantiationService.createInstance(rt,i)],this._instantiationService.createInstance(st),{multipleSelectionSupport:!1,sorter:new ht,filter:this._instantiationService.createInstance(dt),identityProvider:new nt,keyboardNavigationLabelProvider:new at,accessibilityProvider:this._instantiationService.createInstance(ct),showNotFoundMessage:!1,overrideStyles:{listBackground:p.J1}})}async _setInput(e){const{uri:t,kind:i}=e;let o;o=i===Re.pc.ROOT_FOLDER?this._workspaceService.getWorkspace():(0,oe.pD)(t);const n=this._tree;let s;await n.setInput(o);for(const{element:e}of n.getNode().children){if((0,Xe.Iy)(e)&&(0,oe.n4)(e.uri,t)){s=e;break}if((0,oe.n4)(e.resource,t)){s=e;break}}s&&(n.reveal(s,.5),n.setFocus([s],this._fakeEvent)),n.domFocus()}_previewElement(e){return a.jG.None}async _revealElement(e,t,i){return!((0,Xe.Iy)(e)||!e.isFile||(this._onWillPickElement.fire(),await this._editorService.openEditor({resource:e.resource,options:t},i?et.Sd:void 0),0))}};lt=(0,o.C)([(0,o.Q)(2,s._Y),(0,o.Q)(3,c.G),(0,o.Q)(4,ue.p),(0,o.Q)(5,le.V),(0,o.Q)(6,ee.I)],lt);let ut=class{constructor(e,t,i){this.comparator=e,this._order=i.getValue(t,"breadcrumbs.symbolSortOrder")}compare(e,t){return"name"===this._order?this.comparator.compareByName(e,t):"type"===this._order?this.comparator.compareByType(e,t):this.comparator.compareByPosition(e,t)}};ut=(0,o.C)([(0,o.Q)(2,tt.U)],ut);class pt extends it{_createTree(e,t){const{config:i}=t.outline;return this._instantiationService.createInstance(Ne.aH,"BreadcrumbsOutlinePicker",e,i.delegate,i.renderers,i.treeDataSource,{...i.options,sorter:this._instantiationService.createInstance(ut,i.comparator,void 0),collapseByDefault:!0,expandOnlyOnTwistieClick:!0,multipleSelectionSupport:!1,showNotFoundMessage:!1})}_setInput(e){const t=e.outline.captureViewState();this.restoreViewState=()=>{t.dispose()};const i=this._tree;return i.setInput(e.outline),e.element!==e.outline&&(i.reveal(e.element,.5),i.setFocus([e.element],this._fakeEvent)),i.domFocus(),Promise.resolve()}_previewElement(e){return this._tree.getInput().preview(e)}async _revealElement(e,t,i){this._onWillPickElement.fire();const o=this._tree.getInput();return await o.reveal(e,t,i,!1),!0}}var gt,mt=i(92449),bt=i(58361),wt=i(1935),vt=i(16409),ft=i(63383),yt=i(14956),Ct=i(69993);class St extends Le{constructor(e,t,i){super(),this.model=e,this.element=t,this.options=i,this._disposables=new a.Cm}dispose(){this._disposables.dispose()}equals(e){return e instanceof St&&this.element.element===e.element.element&&this.options.showFileIcons===e.options.showFileIcons&&this.options.showSymbolIcons===e.options.showSymbolIcons}render(e){const{element:t,outline:i}=this.element;if(t===i){const t=(0,h.$)("span",void 0,"…");return void e.appendChild(t)}const o=i.config.delegate.getTemplateId(t),n=i.config.renderers.find((e=>e.templateId===o));if(!n)return void(e.innerText="<<NO RENDERER>>");const s=n.renderTemplate(e);n.renderElement({element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:0,collapsible:!1,collapsed:!1,visible:!0,filterData:void 0},0,s,void 0),this._disposables.add((0,a.s)((()=>{n.disposeTemplate(s)})))}}class kt extends Le{constructor(e,t,i,o,n){super(),this.model=e,this.element=t,this.options=i,this._labels=o,this._hoverDelegate=n,this._disposables=new a.Cm}dispose(){this._disposables.dispose()}equals(e){return e instanceof kt&&oe.er.isEqual(this.element.uri,e.element.uri)&&this.options.showFileIcons===e.options.showFileIcons&&this.options.showSymbolIcons===e.options.showSymbolIcons}render(e){const t=this._labels.create(e,{hoverDelegate:this._hoverDelegate});t.setFile(this.element.uri,{hidePath:!0,hideIcon:this.element.kind===Re.pc.FOLDER||!this.options.showFileIcons,fileKind:this.element.kind,fileDecorations:{colors:this.options.showDecorationColors,badges:!1}}),e.classList.add(Re.pc[this.element.kind].toLowerCase()),this._disposables.add(t)}}const _t=(0,ft.pU)("breadcrumb-separator",yt.W6.chevronRight,(0,n.kg)(11859,"Icon for the separator in the breadcrumbs."));let xt=class{static{gt=this}static{this.HEIGHT=22}static{this.SCROLLBAR_SIZES={default:3,large:8}}static{this.Payload_Reveal={}}static{this.Payload_RevealAside={}}static{this.Payload_Pick={}}static{this.CK_BreadcrumbsPossible=new me.N1("breadcrumbsPossible",!1,(0,n.kg)(11860,"Whether the editor can show breadcrumbs"))}static{this.CK_BreadcrumbsVisible=new me.N1("breadcrumbsVisible",!1,(0,n.kg)(11861,"Whether breadcrumbs are currently visible"))}static{this.CK_BreadcrumbsActive=new me.N1("breadcrumbsActive",!1,(0,n.kg)(11862,"Whether breadcrumbs have focus"))}get onDidVisibilityChange(){return this._onDidVisibilityChange.event}constructor(e,t,i,o,n,s,c,d,l,u,p,g){this._options=t,this._editorGroup=i,this._contextKeyService=o,this._contextViewService=n,this._instantiationService=s,this._quickInputService=c,this._fileService=d,this._editorService=l,this._labelService=u,this._disposables=new a.Cm,this._breadcrumbsDisposables=new a.Cm,this._model=new a.HE,this._breadcrumbsPickerShowing=!1,this._onDidVisibilityChange=this._disposables.add(new r.vl),this.domNode=document.createElement("div"),this.domNode.classList.add("breadcrumbs-control"),(0,h.BC)(e,this.domNode),this._cfUseQuickPick=ze.h.UseQuickPick.bindTo(p),this._cfShowIcons=ze.h.Icons.bindTo(p),this._cfTitleScrollbarSizing=ze.h.TitleScrollbarSizing.bindTo(p),this._labels=this._instantiationService.createInstance(We.SB,We.op);const m=this._cfTitleScrollbarSizing.getValue()??"default",b=t.widgetStyles??he.k4;this._widget=new Pe(this.domNode,gt.SCROLLBAR_SIZES[m],_t,b),this._widget.onDidSelectItem(this._onSelectEvent,this,this._disposables),this._widget.onDidFocusItem(this._onFocusEvent,this,this._disposables),this._widget.onDidChangeFocus(this._updateCkBreadcrumbsActive,this,this._disposables),this._ckBreadcrumbsPossible=gt.CK_BreadcrumbsPossible.bindTo(this._contextKeyService),this._ckBreadcrumbsVisible=gt.CK_BreadcrumbsVisible.bindTo(this._contextKeyService),this._ckBreadcrumbsActive=gt.CK_BreadcrumbsActive.bindTo(this._contextKeyService),this._hoverDelegate=(0,Ct.nZ)("mouse"),this._disposables.add(g.register(this._editorGroup.id,this._widget)),this.hide()}dispose(){this._disposables.dispose(),this._breadcrumbsDisposables.dispose(),this._ckBreadcrumbsPossible.reset(),this._ckBreadcrumbsVisible.reset(),this._ckBreadcrumbsActive.reset(),this._cfUseQuickPick.dispose(),this._cfShowIcons.dispose(),this._widget.dispose(),this._labels.dispose(),this.domNode.remove()}get model(){return this._model.value}layout(e){this._widget.layout(e)}isHidden(){return this.domNode.classList.contains("hidden")}hide(){const e=this.isHidden();this._breadcrumbsDisposables.clear(),this._ckBreadcrumbsVisible.set(!1),this.domNode.classList.toggle("hidden",!0),e||this._onDidVisibilityChange.fire()}show(){const e=this.isHidden();this._ckBreadcrumbsVisible.set(!0),this.domNode.classList.toggle("hidden",!1),e&&this._onDidVisibilityChange.fire()}revealLast(){this._widget.revealLast()}update(){this._breadcrumbsDisposables.clear();const e=C.tf.getCanonicalUri(this._editorGroup.activeEditor,{supportSideBySide:C.zX.PRIMARY}),t=this.isHidden();if(!e||!this._fileService.hasProvider(e))return this._ckBreadcrumbsPossible.set(!1),!t&&(this.hide(),!0);const i=C.tf.getOriginalUri(this._editorGroup.activeEditor,{supportSideBySide:C.zX.PRIMARY});this.show(),this._ckBreadcrumbsPossible.set(!0);const o=this._instantiationService.createInstance(je,i??e,this._editorGroup.activeEditorPane);this._model.value=o,this.domNode.classList.toggle("backslash-path","\\"===this._labelService.getSeparator(e.scheme,e.authority));const s=()=>{this.domNode.classList.toggle("relative-path",o.isRelative());const e=this._cfShowIcons.getValue(),t={...this._options,showFileIcons:this._options.showFileIcons&&e,showSymbolIcons:this._options.showSymbolIcons&&e},i=o.getElements().map((e=>e instanceof $e?new kt(o,e,t,this._labels,this._hoverDelegate):new St(o,e,t)));0===i.length?(this._widget.setEnabled(!1),this._widget.setItems([new class extends Le{render(e){e.innerText=(0,n.kg)(11863,"no elements")}equals(e){return e===this}dispose(){}}])):(this._widget.setEnabled(!0),this._widget.setItems(i),this._widget.reveal(i[i.length-1]))},r=o.onDidUpdate(s),c=this._cfShowIcons.onDidChange(s);s(),this._breadcrumbsDisposables.clear(),this._breadcrumbsDisposables.add(r),this._breadcrumbsDisposables.add((0,a.s)((()=>this._model.clear()))),this._breadcrumbsDisposables.add(c),this._breadcrumbsDisposables.add((0,a.s)((()=>this._widget.setItems([]))));const d=()=>{const e=this._cfTitleScrollbarSizing.getValue()??"default";this._widget.setHorizontalScrollbarSize(gt.SCROLLBAR_SIZES[e])};d();const h=this._cfTitleScrollbarSizing.onDidChange(d);return this._breadcrumbsDisposables.add(h),this._breadcrumbsDisposables.add({dispose:()=>{this._breadcrumbsPickerShowing&&this._contextViewService.hideContextView({source:this})}}),t!==this.isHidden()}_onFocusEvent(e){e.item&&this._breadcrumbsPickerShowing&&(this._breadcrumbsPickerIgnoreOnceItem=void 0,this._widget.setSelection(e.item))}_onSelectEvent(e){if(!e.item)return;if(e.item===this._breadcrumbsPickerIgnoreOnceItem)return this._breadcrumbsPickerIgnoreOnceItem=void 0,this._widget.setFocused(void 0),void this._widget.setSelection(void 0);const{element:t}=e.item;this._editorGroup.focus();const i=this._getEditorGroup(e.payload);if(void 0!==i)return this._widget.setFocused(void 0),this._widget.setSelection(void 0),void this._revealInEditor(e,t,i);if(this._cfUseQuickPick.getValue())return this._widget.setFocused(void 0),this._widget.setSelection(void 0),void this._quickInputService.quickAccess.show(t instanceof Ke?"@":"");let o,n;this._contextViewService.showContextView({render:t=>{e.item instanceof kt?o=this._instantiationService.createInstance(lt,t,e.item.model.resource):e.item instanceof St&&(o=this._instantiationService.createInstance(pt,t,e.item.model.resource));const i=o.onWillPickElement((()=>this._contextViewService.hideContextView({source:this,didPick:!0}))),n=bt.c.getInstance((0,h.zk)(this.domNode)).onDidChange((()=>this._contextViewService.hideContextView({source:this}))),s=(0,h.w5)(t),r=s.onDidBlur((()=>{this._breadcrumbsPickerIgnoreOnceItem=this._widget.isDOMFocused()?e.item:void 0,this._contextViewService.hideContextView({source:this})}));return this._breadcrumbsPickerShowing=!0,this._updateCkBreadcrumbsActive(),(0,a.qE)(o,i,n,s,r)},getAnchor:()=>{if(!n){const i=(0,h.zk)(this.domNode),s=i.innerWidth-8;let r=Math.min(.7*i.innerHeight,300);const a=Math.min(s,Math.max(240,s/4.17)),c=8;let d;const l=(0,h.BK)(e.node.firstChild),u=l.top+l.height+c;u+r>=i.innerHeight&&(r=i.innerHeight-u-30);let p=l.left;if(p+a>=s&&(p=s-a),e.payload instanceof q.P){const t=a-2*c;d=e.payload.posx-p,d>t&&(p=Math.min(s-a,p+d-t),d=t)}else d=l.left+.3*l.width-p;o.show(t,r,a,c,Math.max(0,d)),n={x:p,y:u}}return n},onHide:e=>{e?.didPick||o.restoreViewState(),this._breadcrumbsPickerShowing=!1,this._updateCkBreadcrumbsActive(),e?.source===this&&(this._widget.setFocused(void 0),this._widget.setSelection(void 0)),o.dispose()}})}_updateCkBreadcrumbsActive(){const e=this._widget.isDOMFocused()||this._breadcrumbsPickerShowing;this._ckBreadcrumbsActive.set(e)}async _revealInEditor(e,t,i,o=!1){if(t instanceof $e)if(t.kind===Re.pc.FILE)await this._editorService.openEditor({resource:t.uri,options:{pinned:o}},i);else{const t=this._widget.getItems(),i=t.indexOf(e.item);this._widget.setFocused(t[i+1]),this._widget.setSelection(t[i+1],gt.Payload_Pick)}else t.outline.reveal(t,{pinned:o},i===et.Sd,!1)}_getEditorGroup(e){return e===gt.Payload_RevealAside?et.Sd:e===gt.Payload_Reveal?et.Bn:void 0}};xt=gt=(0,o.C)([(0,o.Q)(3,x.f),(0,o.Q)(4,X.l),(0,o.Q)(5,s._Y),(0,o.Q)(6,Ge.G),(0,o.Q)(7,Be.$),(0,o.Q)(8,ee.I),(0,o.Q)(9,wt.L),(0,o.Q)(10,ue.p),(0,o.Q)(11,He.T)],xt);let Et=class{get control(){return this._control}get onDidEnablementChange(){return this._onDidEnablementChange.event}get onDidVisibilityChange(){return this._onDidVisibilityChange.event}constructor(e,t,i,o,n,s){this._container=e,this._editorGroup=t,this._options=i,this._instantiationService=n,this._disposables=new a.Cm,this._controlDisposables=new a.Cm,this._onDidEnablementChange=this._disposables.add(new r.vl),this._onDidVisibilityChange=this._disposables.add(new r.vl);const c=this._disposables.add(ze.h.IsEnabled.bindTo(o));this._disposables.add(c.onDidChange((()=>{const e=c.getValue();!e&&this._control?(this._controlDisposables.clear(),this._control=void 0,this._onDidEnablementChange.fire()):e&&!this._control&&(this._control=this.createControl(),this._control.update(),this._onDidEnablementChange.fire())}))),c.getValue()&&(this._control=this.createControl()),this._disposables.add(s.onDidChangeFileSystemProviderRegistrations((e=>{this._control?.model&&this._control.model.resource.scheme!==e.scheme||this._control?.update()&&this._onDidEnablementChange.fire()})))}createControl(){const e=this._controlDisposables.add(this._instantiationService.createInstance(xt,this._container,this._options,this._editorGroup));return this._controlDisposables.add(e.onDidVisibilityChange((()=>this._onDidVisibilityChange.fire()))),e}dispose(){this._disposables.dispose(),this._controlDisposables.dispose()}};function Dt(e,t){const i=e.get(mt.m),o=e.get(He.T).getWidget(i.activeGroup.id);if(o){const e=(0,w.RT)(o.getItems());o.setFocused(e),t&&o.setSelection(e,xt.Payload_Pick)}}Et=(0,o.C)([(0,o.Q)(3,ue.p),(0,o.Q)(4,s._Y),(0,o.Q)(5,Be.$)],Et),(0,Z.ug)(class extends Z.L{constructor(){super({id:"breadcrumbs.toggle",title:{...(0,n.aS)(11864,"Toggle Breadcrumbs"),mnemonicTitle:(0,n.kg)(11865,"Toggle &&Breadcrumbs")},category:vt.L.View,toggled:{condition:me.M$.equals("config.breadcrumbs.enabled",!0),title:(0,n.kg)(11866,"Toggle Breadcrumbs"),mnemonicTitle:(0,n.kg)(11867,"Toggle &&Breadcrumbs")},menu:[{id:Z.D8.CommandPalette},{id:Z.D8.MenubarAppearanceMenu,group:"4_editor",order:2},{id:Z.D8.NotebookToolbar,group:"notebookLayout",order:2},{id:Z.D8.StickyScrollContext},{id:Z.D8.NotebookStickyScrollContext,group:"notebookView",order:2}]})}run(e){const t=e.get(ue.p),i=ze.h.IsEnabled.bindTo(t).getValue();ze.h.IsEnabled.bindTo(t).updateValue(!i)}}),(0,Z.ug)(class extends Z.L{constructor(){super({id:"breadcrumbs.focusAndSelect",title:(0,n.aS)(11868,"Focus and Select Breadcrumbs"),precondition:xt.CK_BreadcrumbsVisible,keybinding:{weight:200,primary:3161,when:xt.CK_BreadcrumbsPossible},f1:!0})}run(e,...t){Dt(e,!0)}}),(0,Z.ug)(class extends Z.L{constructor(){super({id:"breadcrumbs.focus",title:(0,n.aS)(11869,"Focus Breadcrumbs"),precondition:xt.CK_BreadcrumbsVisible,keybinding:{weight:200,primary:3157,when:xt.CK_BreadcrumbsPossible},f1:!0})}run(e,...t){Dt(e,!1)}}),Oe.f.registerCommandAndKeybindingRule({id:"breadcrumbs.toggleToOn",weight:200,primary:3161,when:me.M$.not("config.breadcrumbs.enabled"),handler:async e=>{const t=e.get(s._Y),i=e.get(ue.p),o=ze.h.IsEnabled.bindTo(i);return o.getValue()||(await o.updateValue(!0),await(0,U.wR)(50)),t.invokeFunction(Dt,!0)}}),Oe.f.registerCommandAndKeybindingRule({id:"breadcrumbs.focusNext",weight:200,primary:17,secondary:[2065],mac:{primary:17,secondary:[529]},when:me.M$.and(xt.CK_BreadcrumbsVisible,xt.CK_BreadcrumbsActive),handler(e){const t=e.get(mt.m),i=e.get(He.T).getWidget(t.activeGroup.id);i&&i.focusNext()}}),Oe.f.registerCommandAndKeybindingRule({id:"breadcrumbs.focusPrevious",weight:200,primary:15,secondary:[2063],mac:{primary:15,secondary:[527]},when:me.M$.and(xt.CK_BreadcrumbsVisible,xt.CK_BreadcrumbsActive),handler(e){const t=e.get(mt.m),i=e.get(He.T).getWidget(t.activeGroup.id);i&&i.focusPrev()}}),Oe.f.registerCommandAndKeybindingRule({id:"breadcrumbs.focusNextWithPicker",weight:201,primary:2065,mac:{primary:529},when:me.M$.and(xt.CK_BreadcrumbsVisible,xt.CK_BreadcrumbsActive,Ne.YD),handler(e){const t=e.get(mt.m),i=e.get(He.T).getWidget(t.activeGroup.id);i&&i.focusNext()}}),Oe.f.registerCommandAndKeybindingRule({id:"breadcrumbs.focusPreviousWithPicker",weight:201,primary:2063,mac:{primary:527},when:me.M$.and(xt.CK_BreadcrumbsVisible,xt.CK_BreadcrumbsActive,Ne.YD),handler(e){const t=e.get(mt.m),i=e.get(He.T).getWidget(t.activeGroup.id);i&&i.focusPrev()}}),Oe.f.registerCommandAndKeybindingRule({id:"breadcrumbs.selectFocused",weight:200,primary:3,secondary:[18],when:me.M$.and(xt.CK_BreadcrumbsVisible,xt.CK_BreadcrumbsActive),handler(e){const t=e.get(mt.m),i=e.get(He.T).getWidget(t.activeGroup.id);i&&i.setSelection(i.getFocused(),xt.Payload_Pick)}}),Oe.f.registerCommandAndKeybindingRule({id:"breadcrumbs.revealFocused",weight:200,primary:10,secondary:[2051],when:me.M$.and(xt.CK_BreadcrumbsVisible,xt.CK_BreadcrumbsActive),handler(e){const t=e.get(mt.m),i=e.get(He.T).getWidget(t.activeGroup.id);i&&i.setSelection(i.getFocused(),xt.Payload_Reveal)}}),Oe.f.registerCommandAndKeybindingRule({id:"breadcrumbs.selectEditor",weight:201,primary:9,when:me.M$.and(xt.CK_BreadcrumbsVisible,xt.CK_BreadcrumbsActive),handler(e){const t=e.get(mt.m),i=e.get(He.T).getWidget(t.activeGroup.id);i&&(i.setFocused(void 0),i.setSelection(void 0),t.activeGroup.activeEditorPane?.focus())}}),Oe.f.registerCommandAndKeybindingRule({id:"breadcrumbs.revealFocusedFromTreeAside",weight:200,primary:2051,when:me.M$.and(xt.CK_BreadcrumbsVisible,xt.CK_BreadcrumbsActive,Ne.YD),handler(e){const t=e.get(ee.I),i=e.get(Fe.P).lastFocusedList;if(!(i instanceof Ne.aH||i instanceof Ne.er))return;const o=i.getFocus()[0];if(re.rz.isUri(o?.resource))return t.openEditor({resource:o.resource,options:{pinned:!0}},et.Sd);const n=i.getInput();return n&&"string"==typeof n.outlineKind?n.reveal(o,{pinned:!0,preserveFocus:!1},!0,!1):void 0}}),(0,f.A)('.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container{display:flex;position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.empty{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.tabs-border-bottom:after{background-color:var(--tabs-border-bottom-color);bottom:0;content:"";height:1px;left:0;pointer-events:none;position:absolute;width:100%;z-index:9}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container>.monaco-scrollable-element{flex:1}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container>.monaco-scrollable-element .scrollbar{cursor:default;z-index:11}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container{display:flex;height:var(--editor-group-tab-height);scrollbar-width:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.scroll{overflow:scroll!important}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container{flex-wrap:wrap;height:auto}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container::-webkit-scrollbar{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab{background-color:var(--vscode-tab-unfocusedInactiveBackground);box-sizing:border-box;cursor:pointer;display:flex;height:var(--editor-group-tab-height);padding-left:10px;position:relative;white-space:nowrap}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab{background-color:var(--vscode-tab-inactiveBackground)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active{background-color:var(--vscode-tab-unfocusedActiveBackground)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active{background-color:var(--vscode-tab-activeBackground)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab{color:var(--vscode-tab-unfocusedInactiveForeground)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab{color:var(--vscode-tab-inactiveForeground)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active{color:var(--vscode-tab-unfocusedActiveForeground)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active{color:var(--vscode-tab-activeForeground)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.selected:not(.active){background-color:var(--vscode-tab-selectedBackground);color:var(--vscode-tab-selectedForeground)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:not(.active){box-shadow:none}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab:last-child{margin-right:var(--last-tab-margin-right)}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab.last-in-row:not(:last-child){border-right:0!important}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.has-icon.close-action-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.has-icon.tab-actions-right,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.has-icon.close-action-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.has-icon.tab-actions-right{padding-left:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit{flex-shrink:0;min-width:fit-content;width:120px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed{flex:1 0 0;max-width:var(--tab-sizing-current-width,var(--tab-sizing-fixed-max-width,160px));min-width:var(--tab-sizing-current-width,var(--tab-sizing-fixed-min-width,50px))}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.last-in-row{min-width:calc(var(--tab-sizing-current-width, var(--tab-sizing-fixed-min-width, 50px)) - 1px)}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab.sizing-fit.last-in-row:not(:last-child){flex-grow:1}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink{flex-basis:0;flex-grow:1;max-width:fit-content;min-width:80px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-shrink{flex-basis:0;flex-grow:0;position:sticky;z-index:8}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-compact{max-width:38px;min-width:38px;width:38px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-shrink{max-width:80px;min-width:80px;width:80px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-shrink.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-shrink.sticky-shrink{left:unset!important;position:relative;z-index:unset}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-fade-hider{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.close-action-off .tab-fade-hider,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-left .tab-fade-hider,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.close-action-off .tab-fade-hider,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-left .tab-fade-hider{display:flex;flex:0;width:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-left,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-left{min-width:80px;padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-left:not(.sticky-compact){flex-direction:row-reverse;padding-left:0;padding-right:10px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-border-bottom-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-border-top-container{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.selected.tab-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title.two-tab-bars .tabs-and-actions-container:not(:first-child) .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container,.monaco-workbench .part.editor>.content .editor-group-container>.title:not(.two-tab-bars) .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container{display:block;left:0;pointer-events:none;position:absolute;width:100%}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.selected.tab-border-top>.tab-border-top-container{background-color:var(--tab-border-top-color);height:1px;top:0;z-index:6}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container{background-color:var(--tab-border-bottom-color);bottom:0;height:1px;z-index:10}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty-border-top>.tab-border-top-container{background-color:var(--tab-dirty-border-top-color);height:2px;top:0;z-index:6}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label{line-height:var(--editor-group-tab-height);margin-bottom:auto;margin-top:auto}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink .tab-label{position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.tab-label>.monaco-icon-label-container:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.tab-label>.monaco-icon-label-container:after{bottom:1px;content:"";height:calc(100% - 2px);opacity:1;padding:0;position:absolute;right:0;top:1px;width:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed:focus>.tab-label>.monaco-icon-label-container:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink:focus>.tab-label>.monaco-icon-label-container:after{opacity:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.tab-label.tab-label-has-badge:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink:not(.tab-actions-left):not(.close-action-off) .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.tab-label.tab-label-has-badge:after{padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky-compact:not(.has-icon) .monaco-icon-label{text-align:center}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit .monaco-icon-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit .monaco-icon-label>.monaco-icon-label-container{overflow-x:visible}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container{flex:none;text-overflow:clip}.monaco-workbench.hc-black .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-black .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-light .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-light .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container{text-overflow:ellipsis}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions{margin-bottom:auto;margin-top:auto;width:28px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions>.monaco-action-bar{width:28px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink>.tab-actions{flex:0;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty.tab-actions-right.sizing-shrink>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.tab-actions-right.sizing-shrink>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed:hover>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed>.tab-actions:focus-within,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink:hover>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink>.tab-actions:focus-within{overflow:visible}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off:not(.dirty)>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky-compact>.tab-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.dirty>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.sticky:not(.pinned-action-off)>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab>.tab-actions .action-label:focus{opacity:1}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions .actions-container{justify-content:center}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab>.tab-actions .action-label.codicon{color:inherit;font-size:16px;height:16px;padding:2px;width:16px}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.sticky.dirty>.tab-actions .action-label:not(:hover):before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.dirty>.tab-actions .action-label:not(:hover):before{content:var(--vscode-icon-pinned-dirty-content);font-family:var(--vscode-icon-pinned-dirty-font-family)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.dirty>.tab-actions .action-label:not(:hover):before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty>.tab-actions .action-label:not(:hover):before{content:var(--vscode-icon-circle-filled-content);font-family:var(--vscode-icon-circle-filled-font-family)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky:not(.pinned-action-off)>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:hover>.tab-actions .action-label{opacity:.5}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions .action-label{opacity:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off{padding-right:10px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.close-action-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.close-action-off:not(.sticky-compact){padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off.dirty-border-top>.tab-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off.dirty:not(.dirty-border-top):not(.sticky-compact){padding-right:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off>.tab-actions{pointer-events:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions{cursor:default;flex:initial;height:var(--editor-group-tab-height);padding:0 8px 0 4px}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions.hidden{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .editor-actions{bottom:0;position:absolute;right:0}.monaco-workbench .part.editor>.content .editor-group-container>.title.two-tab-bars>.tabs-and-actions-container:first-child .editor-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.drop-target-left:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.drop-target-right:before{background-color:var(--vscode-tab-dragAndDropBorder);content:"";height:100%;pointer-events:none;position:absolute;top:0;width:1px;z-index:11}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.drop-target-right:before{left:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.drop-target-left:after{right:-1px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.last-in-row.drop-target-left:not(:last-child):after{right:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.last-in-row+.tab.drop-target-right:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.last-in-row.drop-target-left:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:first-child.drop-target-right:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:last-child.drop-target-left:after{width:2px}',{});var It=i(80222),Vt=i(39639),Mt=i(999),Tt=i(88693),At=i(79367),Lt=i(26658),Pt=i(54521),Rt=i(86434),Bt=i(65693),Ot=i(32696),Nt=i(75824),Ft=i(42317),Gt=i(36612),Wt=i(75125),zt=i(55260),Ht=i(19383);class Qt extends a.jG{constructor(e){super(),this.model=e,this._onDidModelChange=this._register(new r.vl),this.onDidModelChange=this._onDidModelChange.event,this._register(this.model.onDidModelChange((e=>{const t=e.editorIndex??e.editor;(void 0===t||this.filter(t))&&this._onDidModelChange.fire(e)})))}get id(){return this.model.id}get isLocked(){return this.model.isLocked}get stickyCount(){return this.model.stickyCount}get activeEditor(){return this.model.activeEditor&&this.filter(this.model.activeEditor)?this.model.activeEditor:null}get previewEditor(){return this.model.previewEditor&&this.filter(this.model.previewEditor)?this.model.previewEditor:null}get selectedEditors(){return this.model.selectedEditors.filter((e=>this.filter(e)))}isPinned(e){return this.model.isPinned(e)}isTransient(e){return this.model.isTransient(e)}isSticky(e){return this.model.isSticky(e)}isActive(e){return this.model.isActive(e)}isSelected(e){return this.model.isSelected(e)}isFirst(e){return this.model.isFirst(e,this.getEditors(1))}isLast(e){return this.model.isLast(e,this.getEditors(1))}getEditors(e,t){return this.model.getEditors(e,t).filter((e=>this.filter(e)))}findEditor(e,t){const i=this.model.findEditor(e,t);if(i)return this.filter(i[1])?i:void 0}}class Ut extends Qt{get count(){return this.model.stickyCount}getEditors(e,t){return t?.excludeSticky?[]:1===e?this.model.getEditors(1).slice(0,this.model.stickyCount):super.getEditors(e,t)}isSticky(e){return!0}getEditorByIndex(e){return e<this.count?this.model.getEditorByIndex(e):void 0}indexOf(e,t,i){const o=this.model.indexOf(e,t,i);return o<0||o>=this.model.stickyCount?-1:o}contains(e,t){const i=this.model.indexOf(e,void 0,t);return i>=0&&i<this.model.stickyCount}filter(e){return this.model.isSticky(e)}}class $t extends Qt{get count(){return this.model.count-this.model.stickyCount}get stickyCount(){return 0}isSticky(e){return!1}getEditors(e,t){return 1===e?this.model.getEditors(1).slice(this.model.stickyCount):super.getEditors(e,t)}getEditorByIndex(e){return e>=0?this.model.getEditorByIndex(e+this.model.stickyCount):void 0}indexOf(e,t,i){const o=this.model.indexOf(e,t,i);return o<this.model.stickyCount||o>=this.model.count?-1:o-this.model.stickyCount}contains(e,t){const i=this.model.indexOf(e,void 0,t);return i>=this.model.stickyCount&&i<this.model.count}filter(e){return!this.model.isSticky(e)}}var Kt,jt=i(19638);let Zt=class extends Tt.v{static{Kt=this}static{this.SCROLLBAR_SIZES={default:3,large:10}}static{this.TAB_WIDTH={compact:38,shrink:80,fit:120}}static{this.DRAG_OVER_OPEN_TAB_THRESHOLD=1500}static{this.MOUSE_WHEEL_EVENT_THRESHOLD=150}static{this.MOUSE_WHEEL_DISTANCE_THRESHOLD=1.5}constructor(e,t,i,o,n,s,r,c,d,l,u,p,g,m,b,w,v){super(e,t,i,o,n,s,r,c,d,l,u,p,w,v),this.editorService=g,this.pathService=m,this.treeViewsDragAndDropService=b,this.closeEditorAction=this._register(this.instantiationService.createInstance(Rt.zU,Rt.zU.ID,Rt.zU.LABEL)),this.unpinEditorAction=this._register(this.instantiationService.createInstance(Rt.sW,Rt.sW.ID,Rt.sW.LABEL)),this.tabResourceLabels=this._register(this.instantiationService.createInstance(We.SB,We.op)),this.tabLabels=[],this.tabActionBars=[],this.tabDisposables=[],this.dimensions={container:h.fg.None,available:h.fg.None},this.layoutScheduler=this._register(new a.HE),this.path=ce.uF?Je.IN:Je.SA,this.lastMouseWheelEventTime=0,this.isMouseOverTabs=!1,this.updateEditorLabelScheduler=this._register(new U.uC((()=>this.doUpdateEditorLabels()),0)),(async()=>{this.path=await this.pathService.path})(),this._register(this.tabResourceLabels.onDidChangeDecorations((()=>this.doHandleDecorationsChange())))}create(e){return super.create(e),this.titleContainer=e,this.tabsAndActionsContainer=document.createElement("div"),this.tabsAndActionsContainer.classList.add("tabs-and-actions-container"),this.titleContainer.appendChild(this.tabsAndActionsContainer),this.tabsContainer=document.createElement("div"),this.tabsContainer.setAttribute("role","tablist"),this.tabsContainer.draggable=!0,this.tabsContainer.classList.add("tabs-container"),this._register($.q.addTarget(this.tabsContainer)),this.tabSizingFixedDisposables=this._register(new a.Cm),this.updateTabSizing(!1),this.tabsScrollbar=this.createTabsScrollbar(this.tabsContainer),this.tabsAndActionsContainer.appendChild(this.tabsScrollbar.getDomNode()),this.registerTabsContainerListeners(this.tabsContainer,this.tabsScrollbar),this.createEditorActionsToolBar(this.tabsAndActionsContainer,["editor-actions"]),this.updateTabsControlVisibility(),this.tabsAndActionsContainer}createTabsScrollbar(e){const t=this._register(new Te.Se(e,{horizontal:1,horizontalScrollbarSize:this.getTabsScrollbarSizing(),vertical:2,scrollYToX:!0,useShadows:!1}));return this._register(t.onScroll((t=>{t.scrollLeftChanged&&(e.scrollLeft=t.scrollLeft)}))),t}updateTabsScrollbarSizing(){this.tabsScrollbar?.updateOptions({horizontalScrollbarSize:this.getTabsScrollbarSizing()})}updateTabSizing(e){const[t,i]=(0,L.Rd)(this.tabsContainer,this.tabSizingFixedDisposables);i.clear();const o=this.groupsView.partOptions;"fixed"===o.tabSizing?(t.style.setProperty("--tab-sizing-fixed-min-width",`${o.tabSizingFixedMinWidth}px`),t.style.setProperty("--tab-sizing-fixed-max-width",`${o.tabSizingFixedMaxWidth}px`),i.add((0,h.ko)(t,h.Bx.MOUSE_ENTER,(()=>{this.isMouseOverTabs=!0}))),i.add((0,h.ko)(t,h.Bx.MOUSE_LEAVE,(()=>{this.isMouseOverTabs=!1,this.updateTabsFixedWidth(!1)})))):e&&(t.style.removeProperty("--tab-sizing-fixed-min-width"),t.style.removeProperty("--tab-sizing-fixed-max-width"),this.updateTabsFixedWidth(!1))}updateTabsFixedWidth(e){this.forEachTab(((t,i,o)=>{if(e){const{width:e}=o.getBoundingClientRect();o.style.setProperty("--tab-sizing-current-width",`${e}px`)}else o.style.removeProperty("--tab-sizing-current-width")}))}getTabsScrollbarSizing(){return"large"!==this.groupsView.partOptions.titleScrollbarSizing?Kt.SCROLLBAR_SIZES.default:Kt.SCROLLBAR_SIZES.large}registerTabsContainerListeners(e,t){this._register((0,h.ko)(e,h.Bx.SCROLL,(()=>{e.classList.contains("scroll")&&t.setScrollPosition({scrollLeft:e.scrollLeft})})));for(const t of[$.B.Tap,h.Bx.DBLCLICK])this._register((0,h.ko)(e,t,(i=>{if(t===h.Bx.DBLCLICK){if(i.target!==e)return}else{if(2!==i.tapCount)return;if(i.initialTarget!==e)return}h.fs.stop(i),this.editorService.openEditor({resource:void 0,options:{pinned:!0,index:this.groupView.count,override:C.Ie.id}},this.groupView.id)})));let i;this._register((0,h.ko)(e,h.Bx.MOUSE_DOWN,(e=>{1===e.button&&e.preventDefault()}))),ce.j9&&this._register((0,h.ko)(e,h.Bx.MOUSE_UP,(e=>{1===e.button&&e.preventDefault()})));let o=!1;this._register(new h.pN(e,{onDragStart:t=>{o=this.onGroupDragStart(t,e)},onDrag:e=>{i=e},onDragEnter:t=>{e.classList.add("scroll"),t.target===e&&(this.isSupportedDropTransfer(t)?(this.editorTransfer.hasData(Lt.Nt.prototype)||t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),this.updateDropFeedback(e,!0,t)):t.dataTransfer&&(t.dataTransfer.dropEffect="none"))},onDragLeave:t=>{this.updateDropFeedback(e,!1,t),e.classList.remove("scroll")},onDragEnd:t=>{this.updateDropFeedback(e,!1,t),e.classList.remove("scroll"),this.onGroupDragEnd(t,i,e,o)},onDrop:t=>{if(this.updateDropFeedback(e,!1,t),e.classList.remove("scroll"),t.target===e){const i=this.groupTransfer.hasData(Lt.EV.prototype);this.onDrop(t,i?this.groupView.count:this.tabsModel.count,e)}}})),this._register((0,h.ko)(e,h.Bx.MOUSE_WHEEL,(e=>{const t=this.groupView.activeEditor;if(!t||this.groupView.count<2)return;if(!0===this.groupsView.partOptions.scrollToSwitchTabs){if(e.shiftKey)return}else if(!e.shiftKey)return;const i=Date.now();if(i-this.lastMouseWheelEventTime<Kt.MOUSE_WHEEL_EVENT_THRESHOLD-2*(Math.abs(e.deltaX)+Math.abs(e.deltaY)))return;let o;if(this.lastMouseWheelEventTime=i,e.deltaX+e.deltaY<-Kt.MOUSE_WHEEL_DISTANCE_THRESHOLD)o=-1;else{if(!(e.deltaX+e.deltaY>Kt.MOUSE_WHEEL_DISTANCE_THRESHOLD))return;o=1}const n=this.groupView.getEditorByIndex(this.groupView.getIndexOfEditor(t)+o);n&&(this.groupView.openEditor(n),h.fs.stop(e,!0))})));const n=t=>{h.fs.stop(t);let i=e;(0,h.Er)(t)&&(i=new q.P((0,h.zk)(this.parent),t)),this.contextMenuService.showContextMenu({getAnchor:()=>i,menuId:Z.D8.EditorTabsBarContext,contextKeyService:this.contextKeyService,menuActionOptions:{shouldForwardArgs:!0},getActionsContext:()=>({groupId:this.groupView.id}),getKeyBinding:e=>this.getKeybinding(e),onHide:()=>this.groupView.focus()})};this._register((0,h.ko)(e,$.B.Contextmenu,(e=>n(e)))),this._register((0,h.ko)(e,h.Bx.CONTEXT_MENU,(e=>n(e))))}doHandleDecorationsChange(){this.layout(this.dimensions)}updateEditorActionsToolbar(){super.updateEditorActionsToolbar(),this.layout(this.dimensions)}openEditor(e,t){const i=this.handleOpenedEditors();return t?.focusTabControl&&this.withTab(e,((e,t,i)=>i.focus())),i}openEditors(e){return this.handleOpenedEditors()}handleOpenedEditors(){this.updateTabsControlVisibility();const[e,t]=(0,L.Rd)(this.tabsContainer,this.tabsScrollbar);for(let i=e.children.length;i<this.tabsModel.count;i++)e.appendChild(this.createTab(i,e,t));const i=this.didActiveEditorChange(),o=this.activeTabLabel,n=this.tabLabels.length;this.computeTabLabels();let s=!1;return i||n!==this.tabLabels.length||!this.equalsEditorInputLabel(o,this.activeTabLabel)?(this.redraw({forceRevealActiveTab:!0}),s=!0):this.layout(this.dimensions,{forceRevealActiveTab:!0}),s}didActiveEditorChange(){return!(!(!this.activeTabLabel?.editor&&this.tabsModel.activeEditor||this.activeTabLabel?.editor&&!this.tabsModel.activeEditor)&&this.activeTabLabel?.editor&&this.tabsModel.isActive(this.activeTabLabel.editor))}equalsEditorInputLabel(e,t){return e===t||!(!e||!t)&&e.name===t.name&&e.description===t.description&&e.forceDescription===t.forceDescription&&e.title===t.title&&e.ariaLabel===t.ariaLabel}beforeCloseEditor(e){if(this.isMouseOverTabs&&"fixed"===this.groupsView.partOptions.tabSizing){const t=this.tabsModel.isLast(e);this.updateTabsFixedWidth(!t)}}closeEditor(e){this.handleClosedEditors()}closeEditors(e){this.handleClosedEditors()}handleClosedEditors(){if(this.tabsModel.count){const e=(0,L.eU)(this.tabsContainer);for(;e.children.length>this.tabsModel.count;)e.lastChild?.remove(),(0,a.AS)(this.tabDisposables.pop());this.computeTabLabels(),this.redraw({forceRevealActiveTab:!0})}else this.tabsContainer&&(0,h.w_)(this.tabsContainer),this.tabDisposables=(0,a.AS)(this.tabDisposables),this.tabResourceLabels.clear(),this.tabLabels=[],this.activeTabLabel=void 0,this.tabActionBars=[],this.clearEditorActionsToolbar(),this.updateTabsControlVisibility()}moveEditor(e,t,i){const o=this.tabLabels[t];this.tabLabels.splice(t,1),this.tabLabels.splice(i,0,o),this.forEachTab(((e,t,i,o,n,s)=>{this.redrawTab(e,t,i,o,n,s)}),Math.min(t,i),Math.max(t,i)),this.layout(this.dimensions,{forceRevealActiveTab:!0})}pinEditor(e){this.withTab(e,((e,t,i,o,n)=>this.redrawTabLabel(e,t,i,o,n)))}stickEditor(e){this.doHandleStickyEditorChange(e)}unstickEditor(e){this.doHandleStickyEditorChange(e)}doHandleStickyEditorChange(e){this.withTab(e,((e,t,i,o,n,s)=>this.redrawTab(e,t,i,o,n,s))),this.forEachTab(((e,t,i,o,n)=>{this.redrawTabBorders(t,i)})),this.layout(this.dimensions,{forceRevealActiveTab:!0})}setActive(e){this.forEachTab(((t,i,o,n,s,r)=>{this.redrawTabSelectedActiveAndDirty(e,t,o,r)})),this.updateEditorActionsToolbar(),this.layout(this.dimensions,{forceRevealActiveTab:!0})}updateEditorSelections(){this.forEachTab(((e,t,i,o,n,s)=>{this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup===this.groupView,e,i,s)}))}updateEditorLabel(e){this.updateEditorLabelScheduler.schedule()}doUpdateEditorLabels(){this.computeTabLabels(),this.forEachTab(((e,t,i,o,n)=>{this.redrawTabLabel(e,t,i,o,n)})),this.layout(this.dimensions)}updateEditorDirty(e){this.withTab(e,((e,t,i,o,n,s)=>this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup===this.groupView,e,i,s)))}updateOptions(e,t){super.updateOptions(e,t),e.labelFormat!==t.labelFormat&&this.computeTabLabels(),e.titleScrollbarSizing!==t.titleScrollbarSizing&&this.updateTabsScrollbarSizing(),e.alwaysShowEditorActions!==t.alwaysShowEditorActions&&this.updateEditorActionsToolbar(),e.tabSizingFixedMinWidth===t.tabSizingFixedMinWidth&&e.tabSizingFixedMaxWidth===t.tabSizingFixedMaxWidth&&e.tabSizing===t.tabSizing||this.updateTabSizing(!0),e.labelFormat===t.labelFormat&&e.tabActionLocation===t.tabActionLocation&&e.tabActionCloseVisibility===t.tabActionCloseVisibility&&e.tabActionUnpinVisibility===t.tabActionUnpinVisibility&&e.tabSizing===t.tabSizing&&e.pinnedTabSizing===t.pinnedTabSizing&&e.showIcons===t.showIcons&&e.hasIcons===t.hasIcons&&e.highlightModifiedTabs===t.highlightModifiedTabs&&e.wrapTabs===t.wrapTabs&&(0,Ft.aI)(e.decorations,t.decorations)||this.redraw()}updateStyles(){this.redraw()}forEachTab(e,t,i){this.tabsModel.getEditors(1).forEach(((o,n)=>{"number"==typeof t&&t>n||"number"==typeof i&&i<n||this.doWithTab(n,o,e)}))}withTab(e,t){this.doWithTab(this.tabsModel.indexOf(e),e,t)}doWithTab(e,t,i){const o=(0,L.eU)(this.tabsContainer).children[e],n=this.tabResourceLabels.get(e),s=this.tabLabels[e],r=this.tabActionBars[e];o&&n&&s&&i(t,e,o,n,s,r)}createTab(e,t,i){const o=document.createElement("div");o.draggable=!0,o.setAttribute("role","tab"),o.classList.add("tab"),this._register($.q.addTarget(o));const s=document.createElement("div");s.classList.add("tab-border-top-container"),o.appendChild(s);const r=this.tabResourceLabels.create(o,{hoverTargetOverrride:o}),c=document.createElement("div");c.classList.add("tab-actions"),o.appendChild(c);const d=this,h=new Tt.f({groupId:this.groupView.id,get editorIndex(){return d.toEditorIndex(e)}}),l=new K.E(c,{ariaLabel:(0,n.kg)(11870,"Tab actions"),actionRunner:h}),u=l.onWillRun((e=>{e.action.id===this.closeEditorAction.id&&this.blockRevealActiveTabOnce()})),p=(0,a.qE)(l,u,(0,a.s)((0,w.Yr)(this.tabActionBars,l))),g=document.createElement("div");g.classList.add("tab-fade-hider"),o.appendChild(g);const m=document.createElement("div");m.classList.add("tab-border-bottom-container"),o.appendChild(m);const b=this.registerTabListeners(o,e,t,i);return this.tabDisposables.push((0,a.qE)(b,p,h,r)),o}toEditorIndex(e){const t=(0,L.eU)(this.tabsModel.getEditorByIndex(e));return this.groupView.getIndexOfEditor(t)}registerTabListeners(e,t,i,o){const n=new a.Cm,s=async(i,o)=>{if(e.blur(),(0,h.Er)(i)&&(0!==i.button||ce.zx&&i.ctrlKey))return void(1===i.button&&i.preventDefault());if(this.originatesFromTabActionBar(i))return;const n=this.tabsModel.getEditorByIndex(t);if(n)if(i.shiftKey){let e;if(this.lastSingleSelectSelectedEditor&&this.tabsModel.isSelected(this.lastSingleSelectSelectedEditor))e=this.lastSingleSelectSelectedEditor;else{const t=(0,L.eU)(this.groupView.activeEditor);this.lastSingleSelectSelectedEditor=t,e=t}await this.selectEditorsBetween(n,e)}else if(i.ctrlKey&&!ce.zx||i.metaKey&&ce.zx)this.tabsModel.isSelected(n)?await this.unselectEditor(n):(await this.selectEditor(n),this.lastSingleSelectSelectedEditor=n);else{const e=this.tabsModel.isSelected(n)?this.groupView.selectedEditors.filter((e=>!e.matches(n))):[];await this.groupView.openEditor(n,{preserveFocus:o,activation:B.u2.ACTIVATE},{inactiveSelection:e,focusTabControl:!0})}},r=i=>{h.fs.stop(i);const o=this.tabsModel.getEditorByIndex(t);o&&this.onTabContextMenu(o,i,e)};n.add((0,h.ko)(e,h.Bx.MOUSE_DOWN,(e=>s(e,!1)))),n.add((0,h.ko)(e,$.B.Tap,(e=>s(e,!0)))),n.add((0,h.ko)(e,$.B.Change,(e=>{o.setScrollPosition({scrollLeft:o.getScrollPosition().scrollLeft-e.translationX})}))),n.add((0,h.ko)(e,h.Bx.MOUSE_UP,(async t=>{h.fs.stop(t),e.blur(),(0,h.Er)(t)&&(0!==t.button||ce.zx&&t.ctrlKey)||this.originatesFromTabActionBar(t)||!(t.ctrlKey&&!ce.zx||t.metaKey&&ce.zx)&&!t.shiftKey&&this.groupView.selectedEditors.length>1&&await this.unselectAllEditors()}))),n.add((0,h.ko)(e,h.Bx.AUXCLICK,(e=>{if(1===e.button){h.fs.stop(e,!0);const i=this.tabsModel.getEditorByIndex(t);if(i){if((0,C.wn)(this.tabsModel,i,C.$3.MOUSE,this.groupsView.partOptions))return;this.blockRevealActiveTabOnce(),this.closeEditorAction.run({groupId:this.groupView.id,editorIndex:this.groupView.getIndexOfEditor(i)})}}}))),n.add((0,h.ko)(e,h.Bx.KEY_DOWN,(e=>{const t=new Mt.Zh(e);t.shiftKey&&68===t.keyCode&&r(e)}))),n.add((0,h.ko)(e,$.B.Contextmenu,(e=>{r(e)}))),n.add((0,h.ko)(e,h.Bx.KEY_UP,(e=>{const n=new Mt.Zh(e);let s=!1;if(n.equals(3)||n.equals(10)){s=!0;const e=this.tabsModel.getEditorByIndex(t);e&&this.groupView.openEditor(e)}else if([15,17,16,18,14,13].some((e=>n.equals(e)))){let e=this.toEditorIndex(t);n.equals(15)||n.equals(16)?e-=1:n.equals(17)||n.equals(18)?e+=1:e=n.equals(14)?0:this.groupView.count-1;const i=this.groupView.getEditorByIndex(e);i&&(s=!0,this.groupView.openEditor(i,{preserveFocus:!0},{focusTabControl:!0}))}s&&h.fs.stop(e,!0),o.setScrollPosition({scrollLeft:i.scrollLeft})})));for(const i of[$.B.Tap,h.Bx.DBLCLICK])n.add((0,h.ko)(e,i,(e=>{if(i===h.Bx.DBLCLICK)h.fs.stop(e);else if(2!==e.tapCount)return;const o=this.tabsModel.getEditorByIndex(t);if(o&&this.tabsModel.isPinned(o))switch(this.groupsView.partOptions.doubleClickTabToToggleEditorGroupSizes){case"maximize":this.groupsView.toggleMaximizeGroup(this.groupView);break;case"expand":this.groupsView.toggleExpandGroup(this.groupView)}else this.groupView.pinEditor(o)})));let c;n.add((0,h.ko)(e,h.Bx.CONTEXT_MENU,(i=>{h.fs.stop(i,!0);const o=this.tabsModel.getEditorByIndex(t);o&&this.onTabContextMenu(o,i,e)}),!0));let d=!1;return n.add(new h.pN(e,{onDragStart:i=>{const o=this.tabsModel.getEditorByIndex(t);if(!o)return;d=this.isNewWindowOperation(i);const n=this.groupView.selectedEditors;if(this.editorTransfer.setData(n.map((e=>new Lt.Nt({editor:e,groupId:this.groupView.id}))),Lt.Nt.prototype),i.dataTransfer)if(i.dataTransfer.effectAllowed="copyMove",n.length>1){const e=`${o.getName()} + ${n.length-1}`;(0,jt.WN)(i,e,"monaco-editor-group-drag-image",this.getColor(g.Rj),this.getColor(g.GV))}else i.dataTransfer.setDragImage(e,0,0);this.doFillResourceDataTransfers(n,i,d),(0,h.PG)((0,h.zk)(this.parent),(()=>this.updateDropFeedback(e,!1,i,t)))},onDrag:e=>{c=e},onDragEnter:i=>{this.isSupportedDropTransfer(i)?(this.editorTransfer.hasData(Lt.Nt.prototype)||i.dataTransfer&&(i.dataTransfer.dropEffect="copy"),this.updateDropFeedback(e,!0,i,t)):i.dataTransfer&&(i.dataTransfer.dropEffect="none")},onDragOver:(i,o)=>{if(o>=Kt.DRAG_OVER_OPEN_TAB_THRESHOLD){const e=this.tabsModel.getEditorByIndex(t);e&&this.tabsModel.activeEditor!==e&&this.groupView.openEditor(e,{preserveFocus:!0})}this.updateDropFeedback(e,!0,i,t)},onDragEnd:async i=>{this.updateDropFeedback(e,!1,i,t);const o=this.editorTransfer.getData(Lt.Nt.prototype);if(this.editorTransfer.clearData(Lt.Nt.prototype),!d||(0,Lt.Nr)()||!o||0===o.length)return;const n=await this.maybeCreateAuxiliaryEditorPartAt(i,e);if(!n)return;const s=n.activeGroup,r=o.map((e=>({editor:e.identifier.editor})));this.isMoveOperation(c??i,s.id,o[0].identifier.editor)?this.groupView.moveEditors(r,s):this.groupView.copyEditors(r,s),s.focus()},onDrop:o=>{this.updateDropFeedback(e,!1,o,t);let n=t;"right"===this.getTabDragOverLocation(o,e)&&n++,this.onDrop(o,n,i)}})),n}isSupportedDropTransfer(e){if(this.groupTransfer.hasData(Lt.EV.prototype)){const e=this.groupTransfer.getData(Lt.EV.prototype);return!(Array.isArray(e)&&e.length>0&&e[0].identifier===this.groupView.id)}return!!this.editorTransfer.hasData(Lt.Nt.prototype)||!!(e.dataTransfer&&e.dataTransfer.types.length>0)}updateDropFeedback(e,t,i,o){let n;n=t?"number"==typeof o?this.computeDropTarget(i,o,e):{leftElement:e.lastElementChild,rightElement:void 0}:void 0,this.updateDropTarget(n)}updateDropTarget(e){const t=this.dropTarget;if(t===e||t&&e&&t.leftElement===e.leftElement&&t.rightElement===e.rightElement)return;const i="drop-target-left",o="drop-target-right";t&&(t.leftElement?.classList.remove(i),t.rightElement?.classList.remove(o)),e&&(e.leftElement?.classList.add(i),e.rightElement?.classList.add(o)),this.dropTarget=e}getTabDragOverLocation(e,t){const i=t.getBoundingClientRect();return e.clientX-i.left<=i.width/2?"left":"right"}computeDropTarget(e,t,i){const o="left"===this.getTabDragOverLocation(e,i),n=t===this.tabsModel.count-1;return o&&0===t?{leftElement:void 0,rightElement:i}:!o&&n?{leftElement:i,rightElement:void 0}:{leftElement:o?i.previousElementSibling:i,rightElement:o?i:i.nextElementSibling}}async selectEditor(e){this.groupView.isActive(e)||await this.groupView.setSelection(e,this.groupView.selectedEditors)}async selectEditorsBetween(e,t){const i=this.groupView.getIndexOfEditor(e);if(-1===i)throw new O.D7;const o=this.groupView.getIndexOfEditor(t);if(-1===o)throw new O.D7;let n=this.groupView.selectedEditors,s=o;for(;s>=0&&s<=this.groupView.count-1;){s=o<i?s-1:s+1;const e=this.groupView.getEditorByIndex(s);if(!e)break;if(!this.groupView.isSelected(e))break;n=n.filter((t=>!t.matches(e)))}const r=o<i?o:i,a=o<i?i:o,c=this.groupView.getEditors(1).slice(r,a+1);for(const e of c)this.groupView.isSelected(e)||n.push(e);const d=n.filter((t=>!t.matches(e)));await this.groupView.setSelection(e,d)}async unselectEditor(e){const t=this.groupView.isActive(e);if(t&&1===this.groupView.selectedEditors.length)return;let i=(0,L.eU)(this.groupView.activeEditor);if(t){const e=this.groupView.getEditors(0);for(let t=1;t<e.length;t++){const o=e[t];if(this.groupView.isSelected(o)){i=o;break}}}const o=this.groupView.selectedEditors.filter((t=>!t.matches(e)&&!t.matches(i)));await this.groupView.setSelection(i,o)}async unselectAllEditors(){if(this.groupView.selectedEditors.length>1){const e=(0,L.eU)(this.groupView.activeEditor);await this.groupView.setSelection(e,[])}}computeTabLabels(){const{labelFormat:e}=this.groupsView.partOptions,{verbosity:t,shortenDuplicates:i}=this.getLabelConfigFlags(e),o=[];let n=-1;this.tabsModel.getEditors(1).forEach(((e,i)=>{o.push({editor:e,name:e.getName(),description:e.getDescription(t),forceDescription:e.hasCapability(64),title:e.getTitle(2),ariaLabel:(0,Vt.Y5)(e,i,this.groupView,this.editorPartsView.count)}),e===this.tabsModel.activeEditor&&(n=i)})),i&&this.shortenTabLabels(o),this.tabLabels=o,this.activeTabLabel=o[n]}shortenTabLabels(e){const t=new Map;for(const i of e)"string"==typeof i.description?(0,At.IO)(t,i.name,[]).push(i):i.description="";for(const[,e]of t){if(1===e.length&&!e[0].forceDescription){e[0].description="";continue}const t=new Map;for(const i of e)(0,At.IO)(t,i.description,[]).push(i);let i=!1;for(const[,e]of t)if(!i&&e.length>1){const[t,...o]=e.map((({editor:e})=>e.getDescription(2)));i=o.some((e=>e!==t))}if(i){t.clear();for(const i of e)i.description=i.editor.getDescription(2),(0,At.IO)(t,i.description,[]).push(i)}const o=[];for(const[e]of t)o.push(e);if(1===o.length){for(const e of t.get(o[0])||[])e.forceDescription||(e.description="");continue}const n=(0,It.ml)(o,this.path.sep);o.forEach(((e,i)=>{for(const o of t.get(e)||[])o.description=n[i]}))}}getLabelConfigFlags(e){switch(e){case"short":return{verbosity:0,shortenDuplicates:!1};case"medium":return{verbosity:1,shortenDuplicates:!1};case"long":return{verbosity:2,shortenDuplicates:!1};default:return{verbosity:1,shortenDuplicates:!0}}}redraw(e){if(this.tabsAndActionsContainer){let e=this.getColor(b.Ir);!e&&(0,Ot.Bb)(this.theme.type)&&(e=this.getColor(b.Zb)||this.getColor(u.b1)),e?(this.tabsAndActionsContainer.classList.add("tabs-border-bottom"),this.tabsAndActionsContainer.style.setProperty("--tabs-border-bottom-color",e.toString())):(this.tabsAndActionsContainer.classList.remove("tabs-border-bottom"),this.tabsAndActionsContainer.style.removeProperty("--tabs-border-bottom-color"))}this.forEachTab(((e,t,i,o,n,s)=>{this.redrawTab(e,t,i,o,n,s)})),this.updateEditorActionsToolbar(),this.layout(this.dimensions,e)}redrawTab(e,t,i,o,n,s){const r=this.tabsModel.isSticky(t),a=this.groupsView.partOptions;this.redrawTabLabel(e,t,i,o,n);const c=r&&a.tabActionUnpinVisibility,d=!c&&a.tabActionCloseVisibility,h=c||d;let l;l=h?c?this.unpinEditorAction:this.closeEditorAction:r?this.unpinEditorAction:this.closeEditorAction,s.hasAction(l)||(s.isEmpty()||s.clear(),s.push(l,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(l)})),i.classList.toggle("pinned-action-off",r&&!c),i.classList.toggle("close-action-off",!c&&!d);for(const e of["left","right"])i.classList.toggle(`tab-actions-${e}`,h&&a.tabActionLocation===e);const u=r&&"shrink"===a.pinnedTabSizing?"shrink":a.tabSizing;for(const e of["fit","shrink","fixed"])i.classList.toggle(`sizing-${e}`,u===e);i.classList.toggle("has-icon",a.showIcons&&a.hasIcons),i.classList.toggle("sticky",r);for(const e of["normal","compact","shrink"])i.classList.toggle(`sticky-${e}`,r&&a.pinnedTabSizing===e);if(!a.wrapTabs&&r&&"normal"!==a.pinnedTabSizing){let e=0;switch(a.pinnedTabSizing){case"compact":e=Kt.TAB_WIDTH.compact;break;case"shrink":e=Kt.TAB_WIDTH.shrink}i.style.left=t*e+"px"}else i.style.left="auto";this.redrawTabBorders(t,i),this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup===this.groupView,e,i,s)}redrawTabLabel(e,t,i,o,n){const s=this.groupsView.partOptions;let r,a=!1,c=Boolean(s.decorations?.badges);const d=Boolean(s.decorations?.colors);let h;"compact"===s.pinnedTabSizing&&this.tabsModel.isSticky(t)?(r=s.showIcons&&s.hasIcons?"":n.name?.charAt(0).toUpperCase(),h="",a=!0,c=!1):(r=n.name,h=n.description||""),n.ariaLabel&&(i.setAttribute("aria-label",n.ariaLabel),i.setAttribute("aria-description","")),o.setResource({name:r,description:h,resource:C.tf.getOriginalUri(e,{supportSideBySide:C.zX.BOTH})},{title:this.getHoverTitle(e),extraClasses:(0,w.Yc)(["tab-label",c?"tab-label-has-badge":void 0].concat(e.getLabelExtraClasses())),italic:!this.tabsModel.isPinned(e),forceLabel:a,fileDecorations:{colors:d,badges:c},icon:e.getIcon(),hideIcon:!1===s.showIcons});const l=C.tf.getOriginalUri(e,{supportSideBySide:C.zX.PRIMARY});l?i.setAttribute("data-resource-name",(0,oe.Pi)(l)):i.removeAttribute("data-resource-name")}redrawTabSelectedActiveAndDirty(e,t,i,o){const n=this.tabsModel.isActive(t),s=this.doRedrawTabDirty(e,n,t,i);this.doRedrawTabActive(e,!s,t,i,o)}doRedrawTabActive(e,t,i,o,n){const s=this.tabsModel.isActive(i),r=this.tabsModel.isSelected(i);if(o.classList.toggle("active",s),o.classList.toggle("selected",r),o.setAttribute("aria-selected",s?"true":"false"),o.tabIndex=s?0:-1,n.setFocusable(s),s){const t=this.getColor(e?b.i9:b.R6);o.classList.toggle("tab-border-bottom",!!t),o.style.setProperty("--tab-border-bottom-color",t??"")}let a=null;t&&(s&&(a=this.getColor(e?b.OV:b.zp)),null===a&&r&&(a=this.getColor(b.LM))),o.classList.toggle("tab-border-top",!!a),o.style.setProperty("--tab-border-top-color",a??"")}doRedrawTabDirty(e,t,i,o){let n=!1;if(i.isDirty()&&!i.isSaving())if(o.classList.add("dirty"),this.groupsView.partOptions.highlightModifiedTabs){let i;i=e&&t?this.getColor(b.w4):e&&!t?this.getColor(b.T$):!e&&t?this.getColor(b.x9):this.getColor(b.M1),i&&(n=!0,o.classList.add("dirty-border-top"),o.style.setProperty("--tab-dirty-border-top-color",i))}else o.classList.remove("dirty-border-top"),o.style.removeProperty("--tab-dirty-border-top-color");else o.classList.remove("dirty","dirty-border-top"),o.style.removeProperty("--tab-dirty-border-top-color");return n}redrawTabBorders(e,t){const i=this.tabsModel.isSticky(e)&&this.tabsModel.stickyCount===e+1,o=this.tabsModel.stickyCount!==this.tabsModel.count,n=(i&&o?this.getColor(b.yt):void 0)||this.getColor(b.Zb)||this.getColor(u.b1);t.style.borderRight=n?`1px solid ${n}`:"",t.style.outlineColor=this.getColor(u.bu)||""}prepareEditorActions(e){return this.groupsView.activeGroup===this.groupView?e:{primary:this.groupsView.partOptions.alwaysShowEditorActions?e.primary:e.primary.filter((e=>e.id===Gt.BS)),secondary:e.secondary}}getHeight(){return this.dimensions.used?this.dimensions.used.height:this.computeHeight()}computeHeight(){let e;return e=this.visible?this.groupsView.partOptions.wrapTabs&&this.tabsAndActionsContainer?.classList.contains("wrapping")?this.tabsAndActionsContainer.offsetHeight:this.tabHeight:0,e}layout(e,t){if(Object.assign(this.dimensions,e),this.visible){if(!this.layoutScheduler.value){const e=(0,h.PG)((0,h.zk)(this.parent),(()=>{this.doLayout(this.dimensions,this.layoutScheduler.value?.options),this.layoutScheduler.clear()}));this.layoutScheduler.value={options:t,dispose:()=>e.dispose()}}t?.forceRevealActiveTab&&(this.layoutScheduler.value.options={...this.layoutScheduler.value.options,forceRevealActiveTab:!0})}return this.dimensions.used||(this.dimensions.used=new h.fg(e.container.width,this.computeHeight())),this.dimensions.used}doLayout(e,t){e.container!==h.fg.None&&e.available!==h.fg.None&&this.doLayoutTabs(e,t);const i=this.dimensions.used,o=this.dimensions.used=new h.fg(e.container.width,this.computeHeight());i&&i.height!==o.height&&this.groupView.relayout()}doLayoutTabs(e,t){this.doLayoutTabsWrapping(e)||this.doLayoutTabsNonWrapping(t)}doLayoutTabsWrapping(e){const[t,i,o,n]=(0,L.Rd)(this.tabsAndActionsContainer,this.tabsContainer,this.editorActionsToolbarContainer,this.tabsScrollbar),s=t.classList.contains("wrapping");let r=s;function a(e){r=e,t.classList.toggle("wrapping",r),i.style.setProperty("--last-tab-margin-right",r?`${o.offsetWidth}px`:"0");for(const e of i.children)e.classList.remove("last-in-row")}if(this.groupsView.partOptions.wrapTabs){const t=i.offsetWidth,n=i.scrollWidth,s=()=>{const t=this.getLastTab();return!t||!(t.offsetWidth+o.offsetWidth-e.available.width>1)};(r||n>t&&s())&&a(!0),r&&(i.offsetHeight>e.available.height||n===t&&i.offsetHeight===this.tabHeight||!s())&&a(!1)}else s&&a(!1);if(r&&!s){const e=i.offsetWidth;n.setScrollDimensions({width:e,scrollWidth:e})}if(r){const e=new Map;let t,o;for(const n of i.children){const i=n,s=i.offsetTop;s!==t&&(t=s,o&&e.set(o,!0)),o=i,e.set(i,!1)}o&&e.set(o,!0);for(const[t,i]of e)t.classList.toggle("last-in-row",i)}return r}doLayoutTabsNonWrapping(e){const[t,i]=(0,L.Rd)(this.tabsContainer,this.tabsScrollbar),o=t.offsetWidth,n=t.scrollWidth;let s=0;if(this.tabsModel.stickyCount>0){let e=0;switch(this.groupsView.partOptions.pinnedTabSizing){case"compact":e=Kt.TAB_WIDTH.compact;break;case"shrink":e=Kt.TAB_WIDTH.shrink}s=this.tabsModel.stickyCount*e}const r=this.tabsModel.activeEditor?this.getTabAndIndex(this.tabsModel.activeEditor):void 0,[a,c]=r??[void 0,void 0];let d,h,l="normal"!==this.groupsView.partOptions.pinnedTabSizing&&"number"==typeof c&&this.tabsModel.isSticky(c),u=o-s;this.tabsModel.stickyCount>0&&u<Kt.TAB_WIDTH.fit?(t.classList.add("disable-sticky-tabs"),u=o,s=0,l=!1):t.classList.remove("disable-sticky-tabs"),!this.blockRevealActiveTab&&a&&(d=a.offsetLeft,h=a.offsetWidth);const{width:p,scrollWidth:g}=i.getScrollDimensions();i.setScrollDimensions({width:o,scrollWidth:n});const m=p!==o||g!==n;if(this.blockRevealActiveTab||"number"!=typeof d||"number"!=typeof h||l||!m&&!e?.forceRevealActiveTab)return void(this.blockRevealActiveTab=!1);const b=i.getScrollPosition().scrollLeft,w=h<=u,v=d-s;w&&b+u<v+h?i.setScrollPosition({scrollLeft:b+(v+h-(b+u))}):(b>v||!w)&&i.setScrollPosition({scrollLeft:v})}updateTabsControlVisibility(){(0,L.eU)(this.tabsAndActionsContainer).classList.toggle("empty",!this.visible),!this.visible&&this.dimensions&&(this.dimensions.used=void 0)}get visible(){return this.tabsModel.count>0}getTabAndIndex(e){const t=this.tabsModel.indexOf(e),i=this.getTabAtIndex(t);if(i)return[i,t]}getTabAtIndex(e){if(e>=0)return(0,L.eU)(this.tabsContainer).children[e]}getLastTab(){return this.getTabAtIndex(this.tabsModel.count-1)}blockRevealActiveTabOnce(){this.blockRevealActiveTab=!0}originatesFromTabActionBar(e){let t;return t=(0,h.Er)(e)?e.target||e.srcElement:e.initialTarget,!!(0,h.m1)(t,"action-item","tab")}async onDrop(e,t,i){h.fs.stop(e,!0),this.updateDropFeedback(i,!1,e,t),i.classList.remove("scroll");let o=this.tabsModel instanceof $t?t+this.groupView.stickyCount:t;const n={sticky:this.tabsModel instanceof Ut&&this.tabsModel.stickyCount===o,index:o};if(this.groupTransfer.hasData(Lt.EV.prototype)){const t=this.groupTransfer.getData(Lt.EV.prototype);if(Array.isArray(t)&&t.length>0){const i=this.editorPartsView.getGroup(t[0].identifier);if(i){const t={index:o};this.isMoveOperation(e,i.id)||(t.mode=0),this.groupsView.mergeGroup(i,this.groupView,t)}this.groupView.focus(),this.groupTransfer.clearData(Lt.EV.prototype)}}else if(this.editorTransfer.hasData(Lt.Nt.prototype)){const t=this.editorTransfer.getData(Lt.Nt.prototype);if(Array.isArray(t)&&t.length>0){const i=this.editorPartsView.getGroup(t[0].identifier.groupId);if(i)for(const s of t){const t=s.identifier.editor;if(i.id!==s.identifier.groupId)continue;const r=i.getIndexOfEditor(t);i===this.groupView&&r<o&&o--,this.isMoveOperation(e,s.identifier.groupId,t)?i.moveEditor(t,this.groupView,{...n,index:o}):i.copyEditor(t,this.groupView,{...n,index:o}),o++}}this.groupView.focus(),this.editorTransfer.clearData(Lt.Nt.prototype)}else if(this.treeItemsTransfer.hasData(zt.u.prototype)){const e=this.treeItemsTransfer.getData(zt.u.prototype);if(Array.isArray(e)&&e.length>0){const t=[];for(const i of e){const e=await this.treeViewsDragAndDropService.removeDragOperationTransfer(i.identifier);if(e){const i=await(0,Lt.Xc)(e);t.push(...i.map((e=>({...e,options:{...e.options,pinned:!0,index:o}}))))}}this.editorService.openEditors(t,this.groupView,{validateTrust:!0})}this.treeItemsTransfer.clearData(zt.u.prototype)}else this.instantiationService.createInstance(Lt.fT,{allowWorkspaceOpen:!1}).handleDrop(e,(0,h.zk)(this.parent),(()=>this.groupView),(()=>this.groupView.focus()),n)}dispose(){super.dispose(),this.tabDisposables=(0,a.AS)(this.tabDisposables)}};Zt=Kt=(0,o.C)([(0,o.Q)(5,X.Z),(0,o.Q)(6,s._Y),(0,o.Q)(7,x.f),(0,o.Q)(8,j.b),(0,o.Q)(9,Pt.O),(0,o.Q)(10,Ge.G),(0,o.Q)(11,c.G),(0,o.Q)(12,ee.I),(0,o.Q)(13,Bt.S),(0,o.Q)(14,Wt.p),(0,o.Q)(15,Ht.Y),(0,o.Q)(16,W.v)],Zt),(0,D.zy)(((e,t)=>{const i=e.getColor(b.Zb);i&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title > .tabs-and-actions-container.wrapping .tabs-container > .tab {\n\t\t\t\tborder-bottom: 1px solid ${i};\n\t\t\t}\n\t\t`);const o=e.getColor(u.bu);o&&t.addRule("\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:hover  {\n\t\t\t\toutline: 1px solid;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.selected:not(.active):not(:hover)  {\n\t\t\t\toutline: 1px dotted;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:focus {\n\t\t\t\toutline-style: dashed;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active {\n\t\t\t\toutline: 1px dotted;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\toutline: 1px dashed;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active:hover > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.dirty > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.sticky > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-actions .action-label {\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t");const n=e.getColor(u.b1);n&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .editor-actions {\n\t\t\t\toutline: 1px solid ${n}\n\t\t\t}\n\t\t`);const s=e.getColor(b.u3);s&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:not(.selected):hover {\n\t\t\t\tbackground-color: ${s} !important;\n\t\t\t}\n\t\t`);const r=e.getColor(b.LO);r&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:not(.selected):hover  {\n\t\t\t\tbackground-color: ${r} !important;\n\t\t\t}\n\t\t`);const a=e.getColor(b.JR);a&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:not(.selected):hover  {\n\t\t\t\tcolor: ${a} !important;\n\t\t\t}\n\t\t`);const c=e.getColor(b.yv);c&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:not(.selected):hover  {\n\t\t\t\tcolor: ${c} !important;\n\t\t\t}\n\t\t`);const d=e.getColor(b.wV);d&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover > .tab-border-bottom-container {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${d};\n\t\t\t}\n\t\t`);const h=e.getColor(b.h4);if(h&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-border-bottom-container  {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${h};\n\t\t\t}\n\t\t`),!(0,Ot.Bb)(e.type)&&!Nt.nr&&!o){const i=(0,b.p9)(e),o=e.getColor(p.Yt),n=e.getColor(b.oe),a=e.getColor(b.Wi);let c,d;n&&o&&(c=n.flatten(o,o,i)),n&&o&&a&&o&&(d=n.flatten(o,a,o,i));const h=(e,t,i=!1)=>`\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${i?".active":""} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${i?".active":""} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${e}, transparent) !important;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${i?".active":""} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${i?".active":""} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${t}, transparent) !important;\n\t\t\t}\n\t\t`;if(s&&c&&d){const e=s.flatten(c),i=s.flatten(d);t.addRule(h(e,i,!0))}if(r&&c&&d){const e=r.flatten(c),i=r.flatten(d);t.addRule(h(e,i))}if(a&&d){const e=a.flatten(d);t.addRule(`\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${e}, transparent) !important;\n\t\t\t\t}\n\t\t`)}const l=(e,t,i,o)=>`\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${i?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-shrink${o?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${i?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-fixed${o?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${e}, transparent);\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${i?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-shrink${o?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${i?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-fixed${o?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${t}, transparent);\n\t\t\t\t}\n\t\t`,u=e.getColor(b.G8);if(u&&c&&d){const e=u.flatten(c),i=u.flatten(d);t.addRule(l(e,i,!0,!0))}const g=e.getColor(b.Hg);if(g&&c&&d){const e=g.flatten(c),i=g.flatten(d);t.addRule(l(e,i,!1,!0))}const m=e.getColor(b.ps);if(m&&c&&d){const e=m.flatten(c),i=m.flatten(d);t.addRule(l(e,i,!0,!1))}const w=e.getColor(b.si);if(w&&c&&d){const e=w.flatten(c),i=w.flatten(d);t.addRule(l(e,i,!1,!1))}}})),(0,f.A)('.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container{align-items:center;display:flex;flex:auto;height:var(--editor-group-tab-height);justify-content:flex-start;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container>.title-label{line-height:var(--editor-group-tab-height);overflow:hidden;padding-left:20px;position:relative;text-overflow:ellipsis}.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container>.title-label>.monaco-icon-label-container{flex:initial}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .single-tab.title-label{flex:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control{flex:1 50%;line-height:var(--editor-group-tab-height);margin-left:.45em;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.preview .monaco-breadcrumb-item{font-style:italic}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:before{background-image:none;content:"/";font-size:.9em;height:inherit;opacity:1;width:inherit}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.backslash-path .monaco-breadcrumb-item:before{content:"\\\\";font-size:.9em}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .outline-element-icon:before{font-size:.9em}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder+.monaco-breadcrumb-item:before,.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder:before,.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.relative-path .monaco-breadcrumb-item:nth-child(2):before,.monaco-workbench.windows .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:nth-child(2):before{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder:after{content:"\\00a0•\\00a0";font-size:.9em;padding:0}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:last-child{padding-right:4px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .codicon[class*=codicon-symbol-]{padding:0 1px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .codicon:last-child{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-icon-label:before{height:18px;padding-right:2px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-icon-label .label-name{font-size:.9em}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions{display:flex;flex:initial;height:var(--editor-group-tab-height);opacity:.5;padding-right:8px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions.hidden{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container.active>.title>.title-actions{opacity:1}',{});var Yt=i(10442);class qt extends Tt.v{constructor(){super(...arguments),this.activeLabel=Object.create(null)}get breadcrumbsControl(){return this.breadcrumbsControlFactory?.control}create(e){super.create(e);const t=this.titleContainer=e;t.draggable=!0,this.registerContainerListeners(t),this._register($.q.addTarget(t));const i=document.createElement("div");return i.classList.add("label-container"),t.appendChild(i),this.editorLabel=this._register(this.instantiationService.createInstance(We.h,i,{})).element,this._register((0,h.ko)(this.editorLabel.element,h.Bx.CLICK,(e=>this.onTitleLabelClick(e)))),this.breadcrumbsControlFactory=this._register(this.instantiationService.createInstance(Et,i,this.groupView,{showFileIcons:!1,showSymbolIcons:!0,showDecorationColors:!1,widgetStyles:{...he.k4,breadcrumbsBackground:Yt.Q1.transparent.toString()},showPlaceholder:!1})),this._register(this.breadcrumbsControlFactory.onDidEnablementChange((()=>this.handleBreadcrumbsEnablementChange()))),t.classList.toggle("breadcrumbs",Boolean(this.breadcrumbsControl)),this._register((0,a.s)((()=>t.classList.remove("breadcrumbs")))),this.createEditorActionsToolBar(t,["title-actions"]),t}registerContainerListeners(e){let t,i=!1;this._register(new h.pN(e,{onDragStart:t=>{i=this.onGroupDragStart(t,e)},onDrag:e=>{t=e},onDragEnd:o=>{this.onGroupDragEnd(o,t,e,i)}})),this._register((0,h.ko)(e,h.Bx.DBLCLICK,(e=>this.onTitleDoubleClick(e)))),this._register((0,h.ko)(e,h.Bx.AUXCLICK,(e=>this.onTitleAuxClick(e)))),this._register((0,h.ko)(e,$.B.Tap,(e=>this.onTitleTap(e))));for(const t of[h.Bx.CONTEXT_MENU,$.B.Contextmenu])this._register((0,h.ko)(e,t,(t=>{this.tabsModel.activeEditor&&this.onTabContextMenu(this.tabsModel.activeEditor,t,e)})))}onTitleLabelClick(e){h.fs.stop(e,!1),setTimeout((()=>this.quickInputService.quickAccess.show()))}onTitleDoubleClick(e){h.fs.stop(e),this.groupView.pinEditor()}onTitleAuxClick(e){1===e.button&&this.tabsModel.activeEditor&&(h.fs.stop(e,!0),(0,C.wn)(this.tabsModel,this.tabsModel.activeEditor,C.$3.MOUSE,this.groupsView.partOptions)||this.groupView.closeEditor(this.tabsModel.activeEditor))}onTitleTap(e){const t=e.initialTarget;(0,h.sb)(t)&&this.editorLabel&&(0,h.QX)(t,this.editorLabel.element)&&setTimeout((()=>this.quickInputService.quickAccess.show()),50)}openEditor(e){return this.doHandleOpenEditor()}openEditors(e){return this.doHandleOpenEditor()}doHandleOpenEditor(){const e=this.ifActiveEditorChanged((()=>this.redraw()));return e||this.ifActiveEditorPropertiesChanged((()=>this.redraw())),e}beforeCloseEditor(e){}closeEditor(e){this.ifActiveEditorChanged((()=>this.redraw()))}closeEditors(e){this.ifActiveEditorChanged((()=>this.redraw()))}moveEditor(e,t,i){this.ifActiveEditorChanged((()=>this.redraw()))}pinEditor(e){this.ifEditorIsActive(e,(()=>this.redraw()))}stickEditor(e){}unstickEditor(e){}setActive(e){this.redraw()}updateEditorSelections(){}updateEditorLabel(e){this.ifEditorIsActive(e,(()=>this.redraw()))}updateEditorDirty(e){this.ifEditorIsActive(e,(()=>{const t=(0,L.eU)(this.titleContainer);e.isDirty()&&!e.isSaving()?t.classList.add("dirty"):t.classList.remove("dirty")}))}updateOptions(e,t){super.updateOptions(e,t),e.labelFormat===t.labelFormat&&(0,Ft.aI)(e.decorations,t.decorations)||this.redraw()}updateStyles(){this.redraw()}handleBreadcrumbsEnablementChange(){(0,L.eU)(this.titleContainer).classList.toggle("breadcrumbs",Boolean(this.breadcrumbsControl)),this.redraw()}ifActiveEditorChanged(e){return!(!(!this.activeLabel.editor&&this.tabsModel.activeEditor||this.activeLabel.editor&&!this.tabsModel.activeEditor)&&this.activeLabel.editor&&this.tabsModel.isActive(this.activeLabel.editor)||(e(),0))}ifActiveEditorPropertiesChanged(e){this.activeLabel.editor&&this.tabsModel.activeEditor&&this.activeLabel.pinned!==this.tabsModel.isPinned(this.tabsModel.activeEditor)&&e()}ifEditorIsActive(e,t){this.tabsModel.isActive(e)&&t()}redraw(){const e=this.tabsModel.activeEditor??void 0,t=this.groupsView.partOptions,i=!!e&&this.tabsModel.isPinned(e),o=this.groupsView.activeGroup===this.groupView;this.activeLabel={editor:e,pinned:i},this.breadcrumbsControl&&(o?(this.breadcrumbsControl.update(),this.breadcrumbsControl.domNode.classList.toggle("preview",!i)):this.breadcrumbsControl.hide());const[n,s]=(0,L.Rd)(this.titleContainer,this.editorLabel);if(e){this.updateEditorDirty(e);const{labelFormat:r}=this.groupsView.partOptions;let a;a=this.breadcrumbsControl&&!this.breadcrumbsControl.isHidden()?"":("default"!==r||o)&&e.getDescription(this.getVerbosity(r))||"",s.setResource({resource:C.tf.getOriginalUri(e,{supportSideBySide:C.zX.BOTH}),name:e.getName(),description:a},{title:this.getHoverTitle(e),italic:!i,extraClasses:["single-tab","title-label"].concat(e.getLabelExtraClasses()),fileDecorations:{colors:Boolean(t.decorations?.colors),badges:Boolean(t.decorations?.badges)},icon:e.getIcon(),hideIcon:!1===t.showIcons}),n.style.color=o?this.getColor(b.vt)||"":this.getColor(b.OL)||"",this.updateEditorActionsToolbar()}else n.classList.remove("dirty"),s.clear(),this.clearEditorActionsToolbar()}getVerbosity(e){switch(e){case"short":return 0;case"long":return 2;default:return 1}}prepareEditorActions(e){return this.groupsView.activeGroup===this.groupView?e:{primary:this.groupsView.partOptions.alwaysShowEditorActions?e.primary:e.primary.filter((e=>e.id===Gt.l2||e.id===Gt.BS)),secondary:e.secondary}}getHeight(){return this.tabHeight}layout(e){return this.breadcrumbsControl?.layout(void 0),new h.fg(e.container.width,this.getHeight())}}let Jt=class extends a.jG{constructor(e,t,i,o,n,s){super(),this.parent=e,this.groupsView=i,this.groupView=o,this.model=n,this.instantiationService=s;const r=this._register(new Ut(this.model)),a=this._register(new $t(this.model));this.stickyEditorTabsControl=this._register(this.instantiationService.createInstance(Zt,this.parent,t,this.groupsView,this.groupView,r)),this.unstickyEditorTabsControl=this._register(this.instantiationService.createInstance(Zt,this.parent,t,this.groupsView,this.groupView,a)),this.handleTabBarsStateChange()}handleTabBarsStateChange(){this.activeControl=this.model.activeEditor?this.getEditorTabsController(this.model.activeEditor):void 0,this.handleTabBarsLayoutChange()}handleTabBarsLayoutChange(){if(0===this.groupView.count)return;const e=this.parent.classList.contains("two-tab-bars"),t=this.groupView.count!==this.groupView.stickyCount&&this.groupView.stickyCount>0;this.parent.classList.toggle("two-tab-bars",t),e!==t&&this.groupView.relayout()}didActiveControlChange(){return this.activeControl!==(this.model.activeEditor?this.getEditorTabsController(this.model.activeEditor):void 0)}getEditorTabsController(e){return this.model.isSticky(e)?this.stickyEditorTabsControl:this.unstickyEditorTabsControl}openEditor(e,t){const i=this.didActiveControlChange(),o=this.getEditorTabsController(e).openEditor(e,t)||i;return o&&this.handleOpenedEditors(),o}openEditors(e){const t=e.filter((e=>this.model.isSticky(e))),i=e.filter((e=>!this.model.isSticky(e))),o=this.didActiveControlChange(),n=this.stickyEditorTabsControl.openEditors(t),s=this.unstickyEditorTabsControl.openEditors(i),r=n||s||o;return r&&this.handleOpenedEditors(),r}handleOpenedEditors(){this.handleTabBarsStateChange()}beforeCloseEditor(e){this.getEditorTabsController(e).beforeCloseEditor(e)}closeEditor(e){this.stickyEditorTabsControl.closeEditor(e),this.unstickyEditorTabsControl.closeEditor(e),this.handleClosedEditors()}closeEditors(e){const t=e.filter((e=>this.model.isSticky(e))),i=e.filter((e=>!this.model.isSticky(e)));this.stickyEditorTabsControl.closeEditors(t),this.unstickyEditorTabsControl.closeEditors(i),this.handleClosedEditors()}handleClosedEditors(){this.handleTabBarsStateChange()}moveEditor(e,t,i,o){o?(this.model.isSticky(e)?(this.stickyEditorTabsControl.openEditor(e),this.unstickyEditorTabsControl.closeEditor(e)):(this.stickyEditorTabsControl.closeEditor(e),this.unstickyEditorTabsControl.openEditor(e)),this.handleTabBarsStateChange()):this.model.isSticky(e)?this.stickyEditorTabsControl.moveEditor(e,t,i,o):this.unstickyEditorTabsControl.moveEditor(e,t-this.model.stickyCount,i-this.model.stickyCount,o)}pinEditor(e){this.getEditorTabsController(e).pinEditor(e)}stickEditor(e){this.unstickyEditorTabsControl.closeEditor(e),this.stickyEditorTabsControl.openEditor(e),this.handleTabBarsStateChange()}unstickEditor(e){this.stickyEditorTabsControl.closeEditor(e),this.unstickyEditorTabsControl.openEditor(e),this.handleTabBarsStateChange()}setActive(e){this.stickyEditorTabsControl.setActive(e),this.unstickyEditorTabsControl.setActive(e)}updateEditorSelections(){this.stickyEditorTabsControl.updateEditorSelections(),this.unstickyEditorTabsControl.updateEditorSelections()}updateEditorLabel(e){this.getEditorTabsController(e).updateEditorLabel(e)}updateEditorDirty(e){this.getEditorTabsController(e).updateEditorDirty(e)}updateOptions(e,t){this.stickyEditorTabsControl.updateOptions(e,t),this.unstickyEditorTabsControl.updateOptions(e,t)}layout(e){const t=this.stickyEditorTabsControl.layout(e),i={container:e.container,available:new h.fg(e.available.width,e.available.height-t.height)},o=this.unstickyEditorTabsControl.layout(i);return new h.fg(e.container.width,t.height+o.height)}getHeight(){return this.stickyEditorTabsControl.getHeight()+this.unstickyEditorTabsControl.getHeight()}dispose(){this.parent.classList.toggle("two-tab-bars",!1),super.dispose()}};Jt=(0,o.C)([(0,o.Q)(5,s._Y)],Jt);class Xt extends Tt.v{constructor(){super(...arguments),this.activeEditor=null}prepareEditorActions(e){return{primary:[],secondary:[]}}openEditor(e){return this.handleOpenedEditors()}openEditors(e){return this.handleOpenedEditors()}handleOpenedEditors(){const e=this.activeEditorChanged();return this.activeEditor=this.tabsModel.activeEditor,e}activeEditorChanged(){return!(!(!this.activeEditor&&this.tabsModel.activeEditor||this.activeEditor&&!this.tabsModel.activeEditor)&&this.activeEditor&&this.tabsModel.isActive(this.activeEditor))}beforeCloseEditor(e){}closeEditor(e){this.handleClosedEditors()}closeEditors(e){this.handleClosedEditors()}handleClosedEditors(){this.activeEditor=this.tabsModel.activeEditor}moveEditor(e,t,i){}pinEditor(e){}stickEditor(e){}unstickEditor(e){}setActive(e){}updateEditorSelections(){}updateEditorLabel(e){}updateEditorDirty(e){}getHeight(){return 0}layout(e){return new h.fg(e.container.width,this.getHeight())}}let ei=class extends D.lR{get breadcrumbsControl(){return this.breadcrumbsControlFactory?.control}constructor(e,t,i,o,n,s,r){super(r),this.parent=e,this.editorPartsView=t,this.groupsView=i,this.groupView=o,this.model=n,this.instantiationService=s,this.editorTabsControlDisposable=this._register(new a.Cm),this.breadcrumbsControlDisposables=this._register(new a.Cm),this.editorTabsControl=this.createEditorTabsControl(),this.breadcrumbsControlFactory=this.createBreadcrumbsControl()}createEditorTabsControl(){let e;switch(this.groupsView.partOptions.showTabs){case"none":e=Xt;break;case"single":e=qt;break;default:e=this.groupsView.partOptions.pinnedTabsOnSeparateRow?Jt:Zt}const t=this.instantiationService.createInstance(e,this.parent,this.editorPartsView,this.groupsView,this.groupView,this.model);return this.editorTabsControlDisposable.add(t)}createBreadcrumbsControl(){if("single"===this.groupsView.partOptions.showTabs)return;const e=document.createElement("div");e.classList.add("breadcrumbs-below-tabs"),this.parent.appendChild(e);const t=this.breadcrumbsControlDisposables.add(this.instantiationService.createInstance(Et,e,this.groupView,{showFileIcons:!0,showSymbolIcons:!0,showDecorationColors:!1,showPlaceholder:!0}));return this.breadcrumbsControlDisposables.add(t.onDidEnablementChange((()=>this.groupView.relayout()))),this.breadcrumbsControlDisposables.add(t.onDidVisibilityChange((()=>this.groupView.relayout()))),t}openEditor(e,t){const i=this.editorTabsControl.openEditor(e,t);this.handleOpenedEditors(i)}openEditors(e){const t=this.editorTabsControl.openEditors(e);this.handleOpenedEditors(t)}handleOpenedEditors(e){e?this.breadcrumbsControl?.update():this.breadcrumbsControl?.revealLast()}beforeCloseEditor(e){return this.editorTabsControl.beforeCloseEditor(e)}closeEditor(e){this.editorTabsControl.closeEditor(e),this.handleClosedEditors()}closeEditors(e){this.editorTabsControl.closeEditors(e),this.handleClosedEditors()}handleClosedEditors(){this.groupView.activeEditor||this.breadcrumbsControl?.update()}moveEditor(e,t,i,o){return this.editorTabsControl.moveEditor(e,t,i,o)}pinEditor(e){return this.editorTabsControl.pinEditor(e)}stickEditor(e){return this.editorTabsControl.stickEditor(e)}unstickEditor(e){return this.editorTabsControl.unstickEditor(e)}setActive(e){return this.editorTabsControl.setActive(e)}updateEditorSelections(){this.editorTabsControl.updateEditorSelections()}updateEditorLabel(e){return this.editorTabsControl.updateEditorLabel(e)}updateEditorDirty(e){return this.editorTabsControl.updateEditorDirty(e)}updateOptions(e,t){e.showTabs!==t.showTabs||"single"!==t.showTabs&&e.pinnedTabsOnSeparateRow!==t.pinnedTabsOnSeparateRow?(this.editorTabsControlDisposable.clear(),this.breadcrumbsControlDisposables.clear(),(0,h.w_)(this.parent),this.editorTabsControl=this.createEditorTabsControl(),this.breadcrumbsControlFactory=this.createBreadcrumbsControl()):this.editorTabsControl.updateOptions(e,t)}layout(e){const t=this.editorTabsControl.layout(e);let i;return!1===this.breadcrumbsControl?.isHidden()&&(i=new h.fg(e.container.width,xt.HEIGHT),this.breadcrumbsControl.layout(i)),new h.fg(e.container.width,t.height+(i?i.height:0))}getHeight(){const e=this.editorTabsControl.getHeight();return{total:e+(!1===this.breadcrumbsControl?.isHidden()?xt.HEIGHT:0),offset:e}}};ei=(0,o.C)([(0,o.Q)(5,s._Y),(0,o.Q)(6,c.G)],ei);var ti,ii=i(84828),oi=i(65965);let ni=ti=class extends D.lR{static createNew(e,t,i,o,n,s){return n.createInstance(ti,null,e,t,i,o,s)}static createFromSerialized(e,t,i,o,n,s,r){return s.createInstance(ti,e,t,i,o,n,r)}static createCopy(e,t,i,o,n,s,r){return s.createInstance(ti,e,t,i,o,n,r)}constructor(e,t,i,o,n,s,c,d,h,l,u,p,g,m,b,v,f,C,k,D,I,V){super(h),this.editorPartsView=t,this.groupsView=i,this.groupsLabel=o,this._index=n,this.instantiationService=c,this.contextKeyService=d,this.telemetryService=l,this.keybindingService=u,this.menuService=p,this.contextMenuService=g,this.fileDialogService=m,this.editorService=b,this.filesConfigurationService=v,this.uriIdentityService=f,this.logService=C,this.editorResolverService=k,this.hostService=D,this.dialogService=I,this.fileService=V,this._onDidFocus=this._register(new r.vl),this.onDidFocus=this._onDidFocus.event,this._onWillDispose=this._register(new r.vl),this.onWillDispose=this._onWillDispose.event,this._onDidModelChange=this._register(new r.vl),this.onDidModelChange=this._onDidModelChange.event,this._onDidActiveEditorChange=this._register(new r.vl),this.onDidActiveEditorChange=this._onDidActiveEditorChange.event,this._onDidOpenEditorFail=this._register(new r.vl),this.onDidOpenEditorFail=this._onDidOpenEditorFail.event,this._onWillCloseEditor=this._register(new r.vl),this.onWillCloseEditor=this._onWillCloseEditor.event,this._onDidCloseEditor=this._register(new r.vl),this.onDidCloseEditor=this._onDidCloseEditor.event,this._onWillMoveEditor=this._register(new r.vl),this.onWillMoveEditor=this._onWillMoveEditor.event,this._onWillOpenEditor=this._register(new r.vl),this.onWillOpenEditor=this._onWillOpenEditor.event,this.disposedEditorsWorker=this._register(new U.jL((e=>this.handleDisposedEditors(e)),0)),this.mapEditorToPendingConfirmation=new Map,this.containerToolBarMenuDisposable=this._register(new a.HE),this.whenRestoredPromise=new U.Zv,this.whenRestored=this.whenRestoredPromise.p,this._disposed=!1,this.element=document.createElement("div"),this._onDidChange=this._register(new r.Wj),this.onDidChange=this._onDidChange.event,e instanceof ti?this.model=this._register(e.model.clone()):(0,y.KF)(e)?this.model=this._register(c.createInstance(y.sj,e)):this.model=this._register(c.createInstance(y.sj,void 0)),this.scopedContextKeyService=this._register(this.contextKeyService.createScoped(this.element)),this.element.classList.add(...(0,w.Yc)(["editor-group-container",this.model.isLocked?"locked":void 0])),this.registerContainerListeners(),this.createContainerToolbar(),this.createContainerContextMenu(),this._register(this.instantiationService.createInstance(Me,this.element)),this.progressBar=this._register(new E.z(this.element,he.oJ)),this.progressBar.hide(),this.scopedInstantiationService=this._register(this.instantiationService.createChild(new _.a([x.f,this.scopedContextKeyService],[A.N,this._register(new H.qO(this.progressBar,this))]))),this.resourceContext=this._register(this.scopedInstantiationService.createInstance(S.Lc)),this.handleGroupContextKeys(),this.titleContainer=document.createElement("div"),this.titleContainer.classList.add("title"),this.element.appendChild(this.titleContainer),this.titleControl=this._register(this.scopedInstantiationService.createInstance(ei,this.titleContainer,this.editorPartsView,this.groupsView,this,this.model)),this.editorContainer=document.createElement("div"),this.editorContainer.classList.add("editor-container"),this.element.appendChild(this.editorContainer),this.editorPane=this._register(this.scopedInstantiationService.createInstance(z,this.element,this.editorContainer,this)),this._onDidChange.input=this.editorPane.onDidChangeSizeConstraints,this.doTrackFocus(),this.updateTitleContainer(),this.updateContainer(),this.updateStyles(),(this.restoreEditors(e,s)??Promise.resolve()).finally((()=>{this.whenRestoredPromise.complete()})),this.registerListeners()}handleGroupContextKeys(){const e=this.editorPartsView.bind(S.Fy,this),t=this.editorPartsView.bind(S.F9,this),i=this.editorPartsView.bind(S.L5,this),o=this.editorPartsView.bind(S.bS,this),n=this.editorPartsView.bind(S.im,this),s=this.editorPartsView.bind(S.Ml,this),r=this.editorPartsView.bind(S.cY,this),c=S.h.bindTo(this.scopedContextKeyService),d=S.xC.bindTo(this.scopedContextKeyService),h=S._w.bindTo(this.scopedContextKeyService),l=this.editorPartsView.bind(S.Hj,this),u=this.editorPartsView.bind(S.xb,this),p=this.editorPartsView.bind(S.Z,this),g=this.editorPartsView.bind(S.dY,this),m=this.editorPartsView.bind(S.Te,this),b=this.editorPartsView.bind(S.xu,this),w=this.editorPartsView.bind(S.$Z,this),v=this.editorPartsView.bind(S.t0,this),f=this.editorPartsView.bind(S.j7,this),y=this.editorPartsView.bind(S.Ms,this),_=this._register(new a.HE),x=()=>{_.clear(),this.scopedContextKeyService.bufferChangeEvents((()=>{const t=this.activeEditor,i=this.activeEditorPane;if(this.resourceContext.set(C.tf.getOriginalUri(t,{supportSideBySide:C.zX.PRIMARY})),(0,S.DK)(v,t,this.editorResolverService),t?(f.set(t.hasCapability(32)),y.set(t.typeId===k.JL.ID),e.set(t.isDirty()&&!t.isSaving()),_.value=t.onDidChangeDirty((()=>{e.set(t.isDirty()&&!t.isSaving())}))):(f.set(!1),y.set(!1),e.set(!1)),i){l.set(i.getId()),p.set(!i.input.hasCapability(4)),u.set(!!i.input.isReadonly());const e=C.tf.getOriginalUri(i.input,{supportSideBySide:C.zX.PRIMARY}),t=C.tf.getOriginalUri(i.input,{supportSideBySide:C.zX.SECONDARY});m.set(i.input instanceof oi.p&&!i.input.original.isReadonly()&&!!e&&(this.fileService.hasProvider(e)||e.scheme===ne.ny.untitled)&&!!t&&(this.fileService.hasProvider(t)||t.scheme===ne.ny.untitled)),g.set(!!e&&this.fileService.hasProvider(e)&&!this.fileService.hasCapability(e,2048));const o=i?.getId()===C.iG;w.set(o),b.set(o)}else l.reset(),p.reset(),u.reset(),m.reset(),g.reset()}))},E=e=>{switch(e.kind){case 3:r.set(this.isLocked);break;case 8:i.set(this.model.isFirst(this.model.activeEditor)),o.set(this.model.isLast(this.model.activeEditor)),t.set(!!this.model.activeEditor&&this.model.isPinned(this.model.activeEditor)),n.set(!!this.model.activeEditor&&this.model.isSticky(this.model.activeEditor));break;case 6:t.set(!!this.model.activeEditor&&this.model.isPinned(this.model.activeEditor)),n.set(!!this.model.activeEditor&&this.model.isSticky(this.model.activeEditor));case 5:case 7:i.set(this.model.isFirst(this.model.activeEditor)),o.set(this.model.isLast(this.model.activeEditor));break;case 11:e.editor&&e.editor===this.model.activeEditor&&t.set(this.model.isPinned(this.model.activeEditor));break;case 13:e.editor&&e.editor===this.model.activeEditor&&n.set(this.model.isSticky(this.model.activeEditor));break;case 4:c.set(this.model.selectedEditors.length>1),d.set(2===this.model.selectedEditors.length),h.set(this.model.selectedEditors.every((e=>e.resource&&(this.fileService.hasProvider(e.resource)||e.resource.scheme===ne.ny.untitled))))}s.set(this.count)};this._register(this.onDidModelChange((e=>E(e)))),this._register(this.onDidActiveEditorChange((()=>x()))),x(),E({kind:8}),E({kind:3})}registerContainerListeners(){this._register((0,h.ko)(this.element,h.Bx.DBLCLICK,(e=>{this.isEmpty&&(h.fs.stop(e),this.editorService.openEditor({resource:void 0,options:{pinned:!0,override:C.Ie.id}},this.id))}))),this._register((0,h.ko)(this.element,h.Bx.AUXCLICK,(e=>{this.isEmpty&&1===e.button&&(h.fs.stop(e,!0),this.groupsView.removeGroup(this))})))}createContainerToolbar(){const e=document.createElement("div");e.classList.add("editor-group-container-toolbar"),this.element.appendChild(e);const t=this._register(new K.E(e,{ariaLabel:(0,n.kg)(10216,"Empty editor group actions"),highlightToggledItems:!0})),i=this._register(this.menuService.createMenu(Z.D8.EmptyEditorGroup,this.scopedContextKeyService)),o=()=>{const e={primary:[],secondary:[]};this.containerToolBarMenuDisposable.value=(0,a.s)((()=>t.clear())),(0,J.Ot)(i,{arg:{groupId:this.id},shouldForwardArgs:!0},e,"navigation");for(const i of[...e.primary,...e.secondary]){const e=this.keybindingService.lookupKeybinding(i.id);t.push(i,{icon:!0,label:!1,keybinding:e?.getLabel()})}};o(),this._register(i.onDidChange(o))}createContainerContextMenu(){this._register((0,h.ko)(this.element,h.Bx.CONTEXT_MENU,(e=>this.onShowContainerContextMenu(e)))),this._register((0,h.ko)(this.element,$.B.Contextmenu,(()=>this.onShowContainerContextMenu())))}onShowContainerContextMenu(e){if(!this.isEmpty)return;let t=this.element;e&&(t=new q.P((0,h.zk)(this.element),e)),this.contextMenuService.showContextMenu({menuId:Z.D8.EmptyEditorGroupContext,contextKeyService:this.contextKeyService,getAnchor:()=>t,onHide:()=>{this.focus()}})}doTrackFocus(){const e=this._register((0,h.w5)(this.element));this._register(e.onDidFocus((()=>{this.isEmpty&&this._onDidFocus.fire()})));const t=e=>{let t;if((0,h.Er)(e)){if(0!==e.button||ce.zx&&e.ctrlKey)return;t=e.target}else t=e.initialTarget;(0,h.m1)(t,"monaco-action-bar",this.titleContainer)||(0,h.m1)(t,"monaco-breadcrumb-item",this.titleContainer)||setTimeout((()=>{this.focus()}))};this._register((0,h.ko)(this.titleContainer,h.Bx.MOUSE_DOWN,(e=>t(e)))),this._register((0,h.ko)(this.titleContainer,$.B.Tap,(e=>t(e)))),this._register(this.editorPane.onDidFocus((()=>{this._onDidFocus.fire()})))}updateContainer(){this.isEmpty?(this.element.classList.add("empty"),this.element.tabIndex=0,this.element.setAttribute("aria-label",(0,n.kg)(10217,"{0} (empty)",this.ariaLabel))):(this.element.classList.remove("empty"),this.element.removeAttribute("tabIndex"),this.element.removeAttribute("aria-label")),this.updateStyles()}updateTitleContainer(){this.titleContainer.classList.toggle("tabs","multiple"===this.groupsView.partOptions.showTabs),this.titleContainer.classList.toggle("show-file-icons",this.groupsView.partOptions.showIcons)}restoreEditors(e,t){if(0===this.count)return;let i;i=e instanceof ti?(0,v.Jn)(e):Object.create(null);const o=this.model.activeEditor;if(!o)return;i.pinned=this.model.isPinned(o),i.sticky=this.model.isSticky(o),i.preserveFocus=!0;const n=(0,h.bq)(),s=this.doShowEditor(o,{active:!0,isNew:!1},i,{preserveWindowOrder:!0,skipTitleUpdate:!0}).then((()=>{this.groupsView.activeGroup===this&&n&&(0,h.X7)(n)&&!t?.preserveFocus&&this.focus()}));return this.titleControl.openEditors(this.editors),s}registerListeners(){this._register(this.model.onDidModelChange((e=>this.onDidGroupModelChange(e)))),this._register(this.groupsView.onDidChangeEditorPartOptions((e=>this.onDidChangeEditorPartOptions(e)))),this._register(this.groupsView.onDidVisibilityChange((e=>this.onDidVisibilityChange(e)))),this._register(this.onDidFocus((()=>this.onDidGainFocus())))}onDidGroupModelChange(e){switch(this._onDidModelChange.fire(e),e.kind){case 3:this.element.classList.toggle("locked",this.isLocked);break;case 4:this.onDidChangeEditorSelection()}if(e.editor)switch(e.kind){case 5:(0,y.t5)(e)&&this.onDidOpenEditor(e.editor,e.editorIndex);break;case 6:(0,y.$L)(e)&&this.handleOnDidCloseEditor(e.editor,e.editorIndex,e.context,e.sticky);break;case 15:this.onWillDisposeEditor(e.editor);break;case 14:this.onDidChangeEditorDirty(e.editor);break;case 12:this.onDidChangeEditorTransient(e.editor);break;case 9:this.onDidChangeEditorLabel(e.editor)}}onDidOpenEditor(e,t){this.telemetryService.publicLog("editorOpened",this.toEditorTelemetryDescriptor(e)),this.updateContainer()}handleOnDidCloseEditor(e,t,i,o){this._onWillCloseEditor.fire({groupId:this.id,editor:e,context:i,index:t,sticky:o});const n=[e];e instanceof k.JL&&n.push(e.primary,e.secondary);for(const e of n)this.canDispose(e)&&e.dispose();this.telemetryService.publicLog("editorClosed",this.toEditorTelemetryDescriptor(e)),this.updateContainer(),this._onDidCloseEditor.fire({groupId:this.id,editor:e,context:i,index:t,sticky:o})}canDispose(e){for(const t of this.editorPartsView.groups)if(t instanceof ti&&t.model.contains(e,{strictEquals:!0,supportSideBySide:C.zX.ANY}))return!1;return!0}toResourceTelemetryDescriptor(e){if(!e)return;const t=e?e.scheme===ne.ny.file?e.fsPath:e.path:void 0;if(!t)return;let i=(0,oe.LC)(e);const o=i.indexOf("?");return i=-1!==o?i.substr(0,o):i,{mimeType:new de.Yj((0,ie.yg)(e).join(", ")),scheme:e.scheme,ext:i,path:(0,te.tW)(t)}}toEditorTelemetryDescriptor(e){const t=e.getTelemetryDescriptor(),i=C.tf.getOriginalUri(e,{supportSideBySide:C.zX.BOTH});return re.rz.isUri(i)?(t.resource=this.toResourceTelemetryDescriptor(i),t):i?(i.primary&&(t.resource=this.toResourceTelemetryDescriptor(i.primary)),i.secondary&&(t.resourceSecondary=this.toResourceTelemetryDescriptor(i.secondary)),t):t}onWillDisposeEditor(e){this.disposedEditorsWorker.work(e)}handleDisposedEditors(e){let t;const i=[];for(const o of e){const e=this.model.findEditor(o);if(!e)continue;const n=e[0];n.isDisposed()&&(this.model.isActive(n)?t=n:i.push(n))}for(const e of i)this.doCloseEditor(e,!0);t&&this.doCloseEditor(t,!0)}onDidChangeEditorPartOptions(e){this.updateTitleContainer(),this.titleControl.updateOptions(e.oldPartOptions,e.newPartOptions),(e.oldPartOptions.showTabs!==e.newPartOptions.showTabs||e.oldPartOptions.tabHeight!==e.newPartOptions.tabHeight||"multiple"===e.oldPartOptions.showTabs&&e.oldPartOptions.pinnedTabsOnSeparateRow!==e.newPartOptions.pinnedTabsOnSeparateRow)&&(this.relayout(),this.model.activeEditor&&this.titleControl.openEditors(this.model.getEditors(1))),this.updateStyles(),e.oldPartOptions.enablePreview&&!e.newPartOptions.enablePreview&&this.model.previewEditor&&this.pinEditor(this.model.previewEditor)}onDidChangeEditorDirty(e){this.pinEditor(e),this.titleControl.updateEditorDirty(e)}onDidChangeEditorTransient(e){this.model.isTransient(e)||this.groupsView.partOptions.enablePreview||this.pinEditor(e)}onDidChangeEditorLabel(e){this.titleControl.updateEditorLabel(e)}onDidChangeEditorSelection(){this.titleControl.updateEditorSelections()}onDidVisibilityChange(e){this.editorPane.setVisible(e)}onDidGainFocus(){this.activeEditor&&this.model.setTransient(this.activeEditor,!1)}get index(){return this._index}get label(){return this.groupsLabel?(0,n.kg)(10218,"{0}: Group {1}",this.groupsLabel,this._index+1):(0,n.kg)(10219,"Group {0}",this._index+1)}get ariaLabel(){return this.groupsLabel?(0,n.kg)(10220,"{0}: Editor Group {1}",this.groupsLabel,this._index+1):(0,n.kg)(10221,"Editor Group {0}",this._index+1)}get disposed(){return this._disposed}get isEmpty(){return 0===this.count}get titleHeight(){return this.titleControl.getHeight()}notifyIndexChanged(e){this._index!==e&&(this._index=e,this.model.setIndex(e))}notifyLabelChanged(e){this.groupsLabel!==e&&(this.groupsLabel=e,this.model.setLabel(e))}setActive(e){this.active=e,!e&&this.activeEditor&&this.selectedEditors.length>1&&this.setSelection(this.activeEditor,[]),this.element.classList.toggle("active",e),this.element.classList.toggle("inactive",!e),this.titleControl.setActive(e),this.updateStyles(),this.model.setActive(void 0)}get id(){return this.model.id}get windowId(){return this.groupsView.windowId}get editors(){return this.model.getEditors(1)}get count(){return this.model.count}get stickyCount(){return this.model.stickyCount}get activeEditorPane(){return this.editorPane?this.editorPane.activeEditorPane??void 0:void 0}get activeEditor(){return this.model.activeEditor}get selectedEditors(){return this.model.selectedEditors}get previewEditor(){return this.model.previewEditor}isPinned(e){return this.model.isPinned(e)}isSticky(e){return this.model.isSticky(e)}isSelected(e){return this.model.isSelected(e)}isTransient(e){return this.model.isTransient(e)}isActive(e){return this.model.isActive(e)}async setSelection(e,t){this.isActive(e)?this.model.setSelection(e,t):await this.openEditor(e,{activation:B.u2.ACTIVATE},{inactiveSelection:t})}contains(e,t){return this.model.contains(e,t)}getEditors(e,t){return this.model.getEditors(e,t)}findEditors(e,t){const i=this.uriIdentityService.asCanonicalUri(e);return this.getEditors(1).filter((e=>{if(e.resource&&(0,oe.n4)(e.resource,i))return!0;if(t?.supportSideBySide===C.zX.PRIMARY||t?.supportSideBySide===C.zX.ANY){const t=C.tf.getCanonicalUri(e,{supportSideBySide:C.zX.PRIMARY});if(t&&(0,oe.n4)(t,i))return!0}if(t?.supportSideBySide===C.zX.SECONDARY||t?.supportSideBySide===C.zX.ANY){const t=C.tf.getCanonicalUri(e,{supportSideBySide:C.zX.SECONDARY});if(t&&(0,oe.n4)(t,i))return!0}return!1}))}getEditorByIndex(e){return this.model.getEditorByIndex(e)}getIndexOfEditor(e){return this.model.indexOf(e)}isFirst(e){return this.model.isFirst(e)}isLast(e){return this.model.isLast(e)}focus(){this.activeEditorPane?this.activeEditorPane.focus():this.element.focus(),this._onDidFocus.fire()}pinEditor(e=this.activeEditor||void 0){if(e&&!this.model.isPinned(e)){const t=this.model.pin(e);t&&this.titleControl.pinEditor(t)}}stickEditor(e=this.activeEditor||void 0){this.doStickEditor(e,!0)}unstickEditor(e=this.activeEditor||void 0){this.doStickEditor(e,!1)}doStickEditor(e,t){if(e&&this.model.isSticky(e)!==t){const i=this.getIndexOfEditor(e),o=t?this.model.stick(e):this.model.unstick(e);if(!o)return;const n=this.getIndexOfEditor(o);n!==i&&this.titleControl.moveEditor(o,i,n,!0),t?this.titleControl.stickEditor(o):this.titleControl.unstickEditor(o)}}async openEditor(e,t,i){return this.doOpenEditor(e,t,{...i,supportSideBySide:C.zX.BOTH})}async doOpenEditor(e,t,i){if(!e||e.isDisposed())return;this._onWillOpenEditor.fire({editor:e,groupId:this.id});const o=t?.sticky||!this.groupsView.partOptions.enablePreview&&!t?.transient||e.isDirty()||(t?.pinned??"number"==typeof t?.index)||"number"==typeof t?.index&&this.model.isSticky(t.index)||e.hasCapability(512),n={index:t?t.index:void 0,pinned:o,sticky:t?.sticky||"number"==typeof t?.index&&this.model.isSticky(t.index),transient:!!t?.transient,inactiveSelection:i?.inactiveSelection,active:0===this.count||!t||!t.inactive,supportSideBySide:i?.supportSideBySide};n.active||n.pinned||!this.model.activeEditor||this.model.isPinned(this.model.activeEditor)||(n.active=!0);let s=!1,r=!1;if(t?.activation===B.u2.ACTIVATE?s=!0:t?.activation===B.u2.RESTORE?r=!0:t?.activation===B.u2.PRESERVE?(s=!1,r=!1):n.active&&(s=!t||!t.preserveFocus,r=!s),"number"==typeof n.index){const t=this.model.indexOf(e);-1!==t&&t!==n.index&&this.doMoveEditorInsideGroup(e,n)}const{editor:a,isNew:c}=this.model.openEditor(e,n);c&&1===this.count&&this.editorPartsView.groups.length>1&&a.editorId&&this.groupsView.partOptions.autoLockGroups?.has(a.editorId)&&this.lock(!0);const d=this.doShowEditor(a,{active:!!n.active,isNew:c},t,i);return s?this.groupsView.activateGroup(this):r&&this.groupsView.restoreGroup(this),d}doShowEditor(e,t,i,o){let n;return n=t.active?(async()=>{const{pane:n,changed:s,cancelled:r,error:a}=await this.editorPane.openEditor(e,i,o,{newInGroup:t.isNew});if(!r)return s&&this._onDidActiveEditorChange.fire({editor:e}),a&&this._onDidOpenEditorFail.fire(e),n||this.activeEditor!==e||this.doCloseEditor(e,i?.preserveFocus,{fromError:!0}),n})():Promise.resolve(void 0),o?.skipTitleUpdate||this.titleControl.openEditor(e,o),n}async openEditors(e){const t=(0,w.Yc)(e).filter((({editor:e})=>!e.isDisposed())),i=t.at(0);if(!i)return;const o={supportSideBySide:C.zX.BOTH};await this.doOpenEditor(i.editor,i.options,o);const n=t.slice(1),s=this.getIndexOfEditor(i.editor)+1;return await U.HC.settled(n.map((({editor:e,options:t},i)=>this.doOpenEditor(e,{...t,inactive:!0,pinned:!0,index:s+i},{...o,skipTitleUpdate:!0})))),this.titleControl.openEditors(n.map((({editor:e})=>e))),this.editorPane.activeEditorPane??void 0}moveEditors(e,t){const i={skipTitleUpdate:this!==t};let o=!1;const n=new Set;for(const{editor:s,options:r}of e)this.moveEditor(s,t,r,i)?n.add(s):o=!0;return i.skipTitleUpdate&&(t.titleControl.openEditors(Array.from(n)),this.titleControl.closeEditors(Array.from(n))),!o}moveEditor(e,t,i,o){return this===t?(this.doMoveEditorInsideGroup(e,i),!0):this.doMoveOrCopyEditorAcrossGroups(e,t,i,{...o,keepCopy:!1})}doMoveEditorInsideGroup(e,t){const i=t?t.index:void 0;if("number"!=typeof i)return;const o=this.model.indexOf(e),n=this.model.getEditorByIndex(o);if(n){if(o!==i){const e=this.model.stickyCount;this.model.moveEditor(n,i),this.model.pin(n),this.titleControl.moveEditor(n,o,i,e!==this.model.stickyCount),this.titleControl.pinEditor(n)}t?.sticky&&this.stickEditor(n)}}doMoveOrCopyEditorAcrossGroups(e,t,i,o){const s=o?.keepCopy;if(!s||e.hasCapability(8)){const i=e.canMove(this.id,t.id);if("string"==typeof i)return this.dialogService.error(i,(0,n.kg)(10222,"Try saving or reverting the editor first and then try again.")),!1}const r=(0,v.Jn)(this,e,{...i,pinned:!0,sticky:i?.sticky??(!s&&this.model.isSticky(e))});return s||this._onWillMoveEditor.fire({groupId:this.id,editor:e,target:t.id}),t.doOpenEditor(s?e.copy():e,r,o),s||this.doCloseEditor(e,!0,{...o,context:C.TW.MOVE}),!0}copyEditors(e,t){const i={skipTitleUpdate:this!==t};for(const{editor:o,options:n}of e)this.copyEditor(o,t,n,i);if(i.skipTitleUpdate){const i=e.map((({editor:e})=>e));t.titleControl.openEditors(i)}}copyEditor(e,t,i,o){this===t?this.doMoveEditorInsideGroup(e,i):this.doMoveOrCopyEditorAcrossGroups(e,t,i,{...o,keepCopy:!0})}async closeEditor(e=this.activeEditor||void 0,t){return this.doCloseEditorWithConfirmationHandling(e,t)}async doCloseEditorWithConfirmationHandling(e=this.activeEditor||void 0,t,i){return!!e&&(!await this.handleCloseConfirmation([e])&&(this.doCloseEditor(e,t?.preserveFocus,i),!0))}doCloseEditor(e,t=this.groupsView.activeGroup!==this,i){i?.skipTitleUpdate||this.titleControl.beforeCloseEditor(e),this.model.isActive(e)?this.doCloseActiveEditor(t,i):this.doCloseInactiveEditor(e,i),i?.skipTitleUpdate||this.titleControl.closeEditor(e)}doCloseActiveEditor(e=this.groupsView.activeGroup!==this,t){const i=this.activeEditor,o=!e&&this.shouldRestoreFocus(this.element),n=this.groupsView.partOptions.closeEmptyGroups;if(n&&this.active&&1===this.count){const e=this.groupsView.getGroups(1)[1];e&&(o?e.focus():this.groupsView.activateGroup(e,!0))}i&&this.model.closeEditor(i,t?.context);const s=this.model.activeEditor;if(s){let i;e&&this.groupsView.activeGroup!==this&&(i=B.u2.PRESERVE);const o={preserveFocus:e,activation:i,ignoreError:t?.fromError},n={preserveWindowOrder:!0};this.doOpenEditor(s,o,n)}else i&&this.editorPane.closeEditor(i),o&&!n&&this.focus(),this._onDidActiveEditorChange.fire({editor:void 0}),n&&this.groupsView.removeGroup(this,e)}shouldRestoreFocus(e){const t=(0,h.bq)();return t===e.ownerDocument.body||(0,h.QX)(t,e)}doCloseInactiveEditor(e,t){this.model.closeEditor(e,t?.context)}async handleCloseConfirmation(e){if(!e.length)return!1;const t=e.shift();let i,o=this.mapEditorToPendingConfirmation.get(t);o||(o=this.doHandleCloseConfirmation(t),this.mapEditorToPendingConfirmation.set(t,o));try{i=await o}finally{this.mapEditorToPendingConfirmation.delete(t)}return i||this.handleCloseConfirmation(e)}async doHandleCloseConfirmation(e,t){if(!this.shouldConfirmClose(e))return!1;if(e instanceof k.JL&&this.model.contains(e.primary))return!1;if(this.editorPartsView.groups.some((t=>{if(t===this)return!1;const i=t;return!!i.contains(e,{supportSideBySide:C.zX.BOTH})||!!(e instanceof k.JL&&i.contains(e.primary))})))return!1;let i=2,o=1,n=!1;if(e.hasCapability(4)||t?.skipAutoSave||e.closeHandler||(3===this.filesConfigurationService.getAutoSaveMode(e).mode?(n=!0,i=0,o=3):ce.ib&&(ce.uF||ce.j9)&&4===this.filesConfigurationService.getAutoSaveMode(e).mode&&(n=!0,i=0,o=4)),!n)if(this.activeEditor&&this.activeEditor.matches(e)||await this.doOpenEditor(e),await this.hostService.focus((0,h.zk)(this.element)),"function"==typeof e.closeHandler?.confirm)i=await e.closeHandler.confirm([{editor:e,groupId:this.id}]);else{let t;t=e instanceof k.JL?e.primary.getName():e.getName(),i=await this.fileDialogService.showSaveConfirm([t])}if(!e.closeHandler&&!this.shouldConfirmClose(e))return 2===i;switch(i){case 0:return!await e.save(this.id,{reason:o})&&n?this.doHandleCloseConfirmation(e,{skipAutoSave:!0}):e.isDirty();case 1:try{return await e.revert(this.id),e.isDirty()}catch(t){return this.logService.error(t),await e.revert(this.id,{soft:!0}),e.isDirty()}case 2:return!0}}shouldConfirmClose(e){return e.closeHandler?e.closeHandler.showConfirm():e.isDirty()&&!e.isSaving()}async closeEditors(e,t){if(this.isEmpty)return!0;const i=this.doGetEditorsToClose(e);return!await this.handleCloseConfirmation(i.slice(0))&&(this.doCloseEditors(i,t),!0)}doGetEditorsToClose(e){if(Array.isArray(e))return e;const t=e,i="number"==typeof t.direction;let o=this.model.getEditors(i?1:0,t);return t.savedOnly?o=o.filter((e=>!e.isDirty()||e.isSaving())):i&&t.except?o=0===t.direction?o.slice(0,this.model.indexOf(t.except,o)):o.slice(this.model.indexOf(t.except,o)+1):t.except&&(o=o.filter((e=>t.except&&!e.matches(t.except)))),o}doCloseEditors(e,t){let i=!1;for(const t of e)this.isActive(t)?i=!0:this.doCloseInactiveEditor(t);i&&this.doCloseActiveEditor(t?.preserveFocus),e.length&&this.titleControl.closeEditors(e)}async closeAllEditors(e){if(this.isEmpty)return this.groupsView.partOptions.closeEmptyGroups&&this.groupsView.removeGroup(this),!0;let t=this.model.getEditors(0,e);return e?.excludeConfirming&&(t=t.filter((e=>!this.shouldConfirmClose(e)))),!await this.handleCloseConfirmation(t)&&(this.doCloseAllEditors(e),!0)}doCloseAllEditors(e){let t=this.model.getEditors(1,e);e?.excludeConfirming&&(t=t.filter((e=>!this.shouldConfirmClose(e))));const i=[];for(const e of t)this.isActive(e)||this.doCloseInactiveEditor(e),i.push(e);this.activeEditor&&i.includes(this.activeEditor)&&this.doCloseActiveEditor(),i.length&&this.titleControl.closeEditors(i)}async replaceEditors(e){let t;const i=[];for(let{editor:o,replacement:n,forceReplaceDirty:s,options:r}of e){const e=this.getIndexOfEditor(o);if(e>=0){const a=this.isActive(o);r?r.index=e:r={index:e},r.inactive=!a,r.pinned=r.pinned??!0;const c={editor:o,replacement:n,forceReplaceDirty:s,options:r};a?t=c:i.push(c)}}for(const{editor:e,replacement:t,forceReplaceDirty:o,options:n}of i)if(await this.doOpenEditor(t,n),!e.matches(t)){let t=!1;if(o?(this.doCloseEditor(e,!0,{context:C.TW.REPLACE}),t=!0):t=await this.doCloseEditorWithConfirmationHandling(e,{preserveFocus:!0},{context:C.TW.REPLACE}),!t)return}if(t){const e=this.doOpenEditor(t.replacement,t.options);t.editor.matches(t.replacement)||(t.forceReplaceDirty?this.doCloseEditor(t.editor,!0,{context:C.TW.REPLACE}):await this.doCloseEditorWithConfirmationHandling(t.editor,{preserveFocus:!0},{context:C.TW.REPLACE})),await e}}get isLocked(){return this.model.isLocked}lock(e){this.model.lock(e)}createEditorActions(e){const t=[],i=[];let o;const n=this.activeEditorPane;if(n instanceof ii.M){const s=n.scopedContextKeyService??this.scopedContextKeyService,r=e.add(this.menuService.createMenu(Z.D8.EditorTitle,s,{emitEventsForSubmenuChanges:!0,eventDebounceDelay:0}));o=r.onDidChange;const a=(e,t)=>"navigation"===t&&e.actions.length<=1;(0,J.Ot)(r,{arg:this.resourceContext.get(),shouldForwardArgs:!0},{primary:t,secondary:i},"navigation",a)}else{const t=e.add(new r.vl);o=t.event,e.add(this.onDidActiveEditorChange((()=>t.fire())))}return{actions:{primary:t,secondary:i},onDidChange:o}}updateStyles(){const e=this.isEmpty;this.element.style.backgroundColor=e&&this.getColor(b.H)||"";const t=this.getColor(b.Vp)||this.getColor(u.b1);!e&&t?(this.titleContainer.classList.add("title-border-bottom"),this.titleContainer.style.setProperty("--title-border-bottom-color",t)):(this.titleContainer.classList.remove("title-border-bottom"),this.titleContainer.style.removeProperty("--title-border-bottom-color"));const{showTabs:i}=this.groupsView.partOptions;this.titleContainer.style.backgroundColor=this.getColor("multiple"===i?b.oe:b.GS)||"",this.editorContainer.style.backgroundColor=this.getColor(p.Yt)||""}get minimumWidth(){return this.editorPane.minimumWidth}get minimumHeight(){return this.editorPane.minimumHeight}get maximumWidth(){return this.editorPane.maximumWidth}get maximumHeight(){return this.editorPane.maximumHeight}get proportionalLayout(){return!this.lastLayout||!(this.lastLayout.width===this.minimumWidth||this.lastLayout.height===this.minimumHeight)}layout(e,t,i,o){this.lastLayout={width:e,height:t,top:i,left:o},this.element.classList.toggle("max-height-478px",t<=478);const n=this.titleControl.layout({container:new h.fg(e,t),available:new h.fg(e,t-this.editorPane.minimumHeight)});this.progressBar.getContainer().style.top=`${Math.max(this.titleHeight.offset-2,0)}px`;const s=Math.max(0,t-n.height);this.editorContainer.style.height=`${s}px`,this.editorPane.layout({width:e,height:s,top:i+n.height,left:o})}relayout(){if(this.lastLayout){const{width:e,height:t,top:i,left:o}=this.lastLayout;this.layout(e,t,i,o)}}setBoundarySashes(e){this.editorPane.setBoundarySashes(e)}toJSON(){return this.model.serialize()}dispose(){this._disposed=!0,this._onWillDispose.fire(),super.dispose()}};ni=ti=(0,o.C)([(0,o.Q)(6,s._Y),(0,o.Q)(7,x.f),(0,o.Q)(8,c.G),(0,o.Q)(9,Q.k),(0,o.Q)(10,j.b),(0,o.Q)(11,Y.e),(0,o.Q)(12,X.Z),(0,o.Q)(13,G.D),(0,o.Q)(14,ee.I),(0,o.Q)(15,se.U),(0,o.Q)(16,ae.J),(0,o.Q)(17,F.r),(0,o.Q)(18,Ht.Y),(0,o.Q)(19,W.v),(0,o.Q)(20,G.X),(0,o.Q)(21,Be.$)],ni);var si=i(64533);(0,f.A)("#monaco-workbench-editor-drop-overlay{height:100%;left:0;position:absolute;width:100%;z-index:10000}#monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator{align-items:center;display:flex;height:100%;justify-content:center;left:0;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator{transition:opacity .15s ease-out}#monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt{line-height:normal;margin:.2em;opacity:0;padding:.6em;text-align:center}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt{transition:opacity .15s ease-out}#monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt i{background-color:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,80%,.4);border-radius:5px;font-style:normal;margin:0 1px;padding:0 8px}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator.overlay-move-transition{transition:top 70ms ease-out,left 70ms ease-out,width 70ms ease-out,height 70ms ease-out,opacity .15s ease-out}",{});var ri,ai=i(40028),ci=i(9117);function di(e){return e.getValue("editor.dropIntoEditor.enabled")}function hi(e){return e.shiftKey}let li=class extends D.lR{static{ri=this}static{this.OVERLAY_ID="monaco-workbench-editor-drop-overlay"}get disposed(){return!!this._disposed}constructor(e,t,i,o,n,s,r,a){super(t),this.groupView=e,this.configurationService=i,this.instantiationService=o,this.editorService=n,this.editorGroupService=s,this.treeViewsDragAndDropService=r,this.contextService=a,this.editorTransfer=ci.PD.getInstance(),this.groupTransfer=ci.PD.getInstance(),this.treeItemsTransfer=ci.PD.getInstance(),this.cleanupOverlayScheduler=this._register(new U.uC((()=>this.dispose()),300)),this.enableDropIntoEditor=di(this.configurationService)&&this.isDropIntoActiveEditorEnabled(),this.create()}create(){const e=this.getOverlayOffsetHeight(),t=this.container=document.createElement("div");t.id=ri.OVERLAY_ID,t.style.top=`${e}px`,this.groupView.element.appendChild(t),this.groupView.element.classList.add("dragged-over"),this._register((0,a.s)((()=>{t.remove(),this.groupView.element.classList.remove("dragged-over")}))),this.overlay=document.createElement("div"),this.overlay.classList.add("editor-group-overlay-indicator"),t.appendChild(this.overlay),this.enableDropIntoEditor&&(this.dropIntoPromptElement=(0,ai.yk)((0,n.kg)(11097,"Hold __{0}__ to drop into editor",ce.zx?"⇧":"Shift"),{}),this.dropIntoPromptElement.classList.add("editor-group-overlay-drop-into-prompt"),this.overlay.appendChild(this.dropIntoPromptElement)),this.registerListeners(t),this.updateStyles()}updateStyles(){const e=(0,L.eU)(this.overlay);e.style.backgroundColor=this.getColor(b.Wi)||"";const t=this.getColor(u.bu);if(e.style.outlineColor=t||"",e.style.outlineOffset=t?"-2px":"",e.style.outlineStyle=t?"dashed":"",e.style.outlineWidth=t?"2px":"",this.dropIntoPromptElement){this.dropIntoPromptElement.style.backgroundColor=this.getColor(b.Nf)??"",this.dropIntoPromptElement.style.color=this.getColor(b.Yo)??"";const e=this.getColor(b.do);e?(this.dropIntoPromptElement.style.borderWidth="1px",this.dropIntoPromptElement.style.borderStyle="solid",this.dropIntoPromptElement.style.borderColor=e):this.dropIntoPromptElement.style.borderWidth="0"}}registerListeners(e){this._register(new h.pN(e,{onDragOver:e=>{if(this.enableDropIntoEditor&&hi(e))return void this.dispose();const t=this.groupTransfer.hasData(Lt.EV.prototype),i=this.editorTransfer.hasData(Lt.Nt.prototype);i||t||!e.dataTransfer||(e.dataTransfer.dropEffect="copy");let o=!0;if(t)o=this.isCopyOperation(e);else if(i){const t=this.editorTransfer.getData(Lt.Nt.prototype);Array.isArray(t)&&t.length>0&&(o=this.isCopyOperation(e,t[0].identifier))}if(!o){const e=this.findSourceGroupView();if(e===this.groupView&&(t||i&&e.count<2))return void this.hideOverlay()}let n=!!this.editorGroupService.partOptions.splitOnDragAndDrop;this.isToggleSplitOperation(e)&&(n=!n),this.positionOverlay(e.offsetX,e.offsetY,t,n),this.cleanupOverlayScheduler.isScheduled()&&this.cleanupOverlayScheduler.cancel()},onDragLeave:e=>this.dispose(),onDragEnd:e=>this.dispose(),onDrop:e=>{h.fs.stop(e,!0),this.dispose(),this.currentDropOperation&&this.handleDrop(e,this.currentDropOperation.splitDirection)}})),this._register((0,h.ko)(e,h.Bx.MOUSE_OVER,(()=>{this.cleanupOverlayScheduler.isScheduled()||this.cleanupOverlayScheduler.schedule()})))}isDropIntoActiveEditorEnabled(){return!!this.groupView.activeEditor?.hasCapability(128)}findSourceGroupView(){if(this.groupTransfer.hasData(Lt.EV.prototype)){const e=this.groupTransfer.getData(Lt.EV.prototype);if(Array.isArray(e)&&e.length>0)return this.editorGroupService.getGroup(e[0].identifier)}else if(this.editorTransfer.hasData(Lt.Nt.prototype)){const e=this.editorTransfer.getData(Lt.Nt.prototype);if(Array.isArray(e)&&e.length>0)return this.editorGroupService.getGroup(e[0].identifier.groupId)}}async handleDrop(e,t){const i=()=>{let e;return e="number"==typeof t?this.editorGroupService.addGroup(this.groupView,t):this.groupView,e};if(this.groupTransfer.hasData(Lt.EV.prototype)){const i=this.groupTransfer.getData(Lt.EV.prototype);if(Array.isArray(i)&&i.length>0){const o=this.editorGroupService.getGroup(i[0].identifier);if(o){if("number"!=typeof t&&o===this.groupView)return;let i;if("number"==typeof t)i=this.isCopyOperation(e)?this.editorGroupService.copyGroup(o,this.groupView,t):this.editorGroupService.moveGroup(o,this.groupView,t);else{let t;this.isCopyOperation(e)&&(t={mode:0}),this.editorGroupService.mergeGroup(o,this.groupView,t)}i&&this.editorGroupService.activateGroup(i)}this.groupTransfer.clearData(Lt.EV.prototype)}}else if(this.editorTransfer.hasData(Lt.Nt.prototype)){const o=this.editorTransfer.getData(Lt.Nt.prototype);if(Array.isArray(o)&&o.length>0){const n=o,s=o[0].identifier,r=this.editorGroupService.getGroup(s.groupId);if(r){const o=this.isCopyOperation(e,s);let a;if(this.editorGroupService.partOptions.closeEmptyGroups&&1===r.count&&"number"==typeof t&&!o)a=this.editorGroupService.moveGroup(r,this.groupView,t);else{if(a=i(),r===a)return;const e=n.map((e=>({editor:e.identifier.editor,options:(0,v.Jn)(r,e.identifier.editor,{pinned:!0,sticky:r.isSticky(e.identifier.editor)})})));o?r.copyEditors(e,a):r.moveEditors(e,a)}a.focus()}this.editorTransfer.clearData(Lt.Nt.prototype)}}else if(this.treeItemsTransfer.hasData(zt.u.prototype)){const e=this.treeItemsTransfer.getData(zt.u.prototype);if(Array.isArray(e)&&e.length>0){const t=[];for(const i of e){const e=await this.treeViewsDragAndDropService.removeDragOperationTransfer(i.identifier);if(e){const i=await(0,Lt.Xc)(e);t.push(...i.map((e=>({...e,options:{...e.options,pinned:!0}}))))}}t.length&&this.editorService.openEditors(t,i(),{validateTrust:!0})}this.treeItemsTransfer.clearData(zt.u.prototype)}else this.instantiationService.createInstance(Lt.fT,{allowWorkspaceOpen:!ce.HZ||(0,Xe.PR)(this.contextService.getWorkspace())}).handleDrop(e,(0,h.zk)(this.groupView.element),(()=>i()),(e=>e?.focus()))}isCopyOperation(e,t){return!t?.editor.hasCapability(8)&&(e.ctrlKey&&!ce.zx||e.altKey&&ce.zx)}isToggleSplitOperation(e){return e.altKey&&!ce.zx||e.shiftKey&&ce.zx}positionOverlay(e,t,i,o){const n="right"===this.editorGroupService.partOptions.openSideBySideDirection,s=this.groupView.element.clientWidth,r=this.groupView.element.clientHeight-this.getOverlayOffsetHeight();let a,c;o?(a=i&&n?.3:.1,c=i?n?.1:.3:.1):(a=0,c=0);const d=s*a,h=r*c,l=s/3,u=r/3;let p;switch(p=e>d&&e<s-d&&t>h&&t<r-h?void 0:n?e<l?2:e>2*l?3:t<r/2?0:1:t<u?0:t>2*u?1:e<s/2?2:3,p){case 0:this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"50%"}),this.toggleDropIntoPrompt(!1);break;case 1:this.doPositionOverlay({top:"50%",left:"0",width:"100%",height:"50%"}),this.toggleDropIntoPrompt(!1);break;case 2:this.doPositionOverlay({top:"0",left:"0",width:"50%",height:"100%"}),this.toggleDropIntoPrompt(!1);break;case 3:this.doPositionOverlay({top:"0",left:"50%",width:"50%",height:"100%"}),this.toggleDropIntoPrompt(!1);break;default:this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"100%"}),this.toggleDropIntoPrompt(!0)}const g=(0,L.eU)(this.overlay);g.style.opacity="1",setTimeout((()=>g.classList.add("overlay-move-transition")),0),this.currentDropOperation={splitDirection:p}}doPositionOverlay(e){const[t,i]=(0,L.Rd)(this.container,this.overlay),o=this.getOverlayOffsetHeight();t.style.height=o?`calc(100% - ${o}px)`:"100%",i.style.top=e.top,i.style.left=e.left,i.style.width=e.width,i.style.height=e.height}getOverlayOffsetHeight(){return this.groupView.isEmpty||"multiple"!==this.editorGroupService.partOptions.showTabs?0:this.groupView.titleHeight.offset}hideOverlay(){const e=(0,L.eU)(this.overlay);this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"100%"}),e.style.opacity="0",e.classList.remove("overlay-move-transition"),this.currentDropOperation=void 0}toggleDropIntoPrompt(e){this.dropIntoPromptElement&&(this.dropIntoPromptElement.style.opacity=e?"1":"0")}contains(e){return e===this.container||e===this.overlay}dispose(){super.dispose(),this._disposed=!0}};li=ri=(0,o.C)([(0,o.Q)(1,c.G),(0,o.Q)(2,ue.p),(0,o.Q)(3,s._Y),(0,o.Q)(4,ee.I),(0,o.Q)(5,mt.m),(0,o.Q)(6,Wt.p),(0,o.Q)(7,le.V)],li);let ui=class extends D.lR{constructor(e,t,i,o,n,s){super(o),this.container=e,this.delegate=t,this.editorGroupService=i,this.configurationService=n,this.instantiationService=s,this.counter=0,this.editorTransfer=ci.PD.getInstance(),this.groupTransfer=ci.PD.getInstance(),this.registerListeners()}get overlay(){if(this._overlay&&!this._overlay.disposed)return this._overlay}registerListeners(){this._register((0,h.ko)(this.container,h.Bx.DRAG_ENTER,(e=>this.onDragEnter(e)))),this._register((0,h.ko)(this.container,h.Bx.DRAG_LEAVE,(()=>this.onDragLeave())));for(const e of[this.container,(0,h.zk)(this.container)])this._register((0,h.ko)(e,h.Bx.DRAG_END,(()=>this.onDragEnd())))}onDragEnter(e){if(di(this.configurationService)&&hi(e))return;if(this.counter++,!this.editorTransfer.hasData(Lt.Nt.prototype)&&!this.groupTransfer.hasData(Lt.EV.prototype)&&e.dataTransfer){const t=V.O.as(ci.Fd.DragAndDropContribution).getAll(),i=Array.from(t).map((e=>e.dataFormatKey));if(!(0,ci.Gv)(e,jt.tx.FILES,ci.sV.FILES,jt.tx.RESOURCES,ci.sV.EDITORS,...i))return void(e.dataTransfer.dropEffect="none")}this.updateContainer(!0);const t=e.target;if(t&&(this.overlay&&!this.overlay.contains(t)&&this.disposeOverlay(),!this.overlay)){const e=this.findTargetGroupView(t);e&&(this._overlay=this.instantiationService.createInstance(li,e))}}onDragLeave(){this.counter--,0===this.counter&&this.updateContainer(!1)}onDragEnd(){this.counter=0,this.updateContainer(!1),this.disposeOverlay()}findTargetGroupView(e){return this.editorGroupService.groups.find((t=>(0,h.QX)(e,t.element)||this.delegate.containsGroup?.(t)))}updateContainer(e){this.container.classList.toggle("dragged-over",e)}dispose(){super.dispose(),this.disposeOverlay()}disposeOverlay(){this.overlay&&(this.overlay.dispose(),this._overlay=void 0)}};ui=(0,o.C)([(0,o.Q)(2,mt.m),(0,o.Q)(3,c.G),(0,o.Q)(4,ue.p),(0,o.Q)(5,s._Y)],ui);var pi=i(13175);const gi={targetWidth:900,leftMarginRatio:.1909,rightMarginRatio:.1909},mi={type:"distribute"};function bi(e){const t=(0,h.$)(".centered-layout-margin");return t.style.height="100%",e&&(t.style.backgroundColor=e.toString()),{element:t,layout:()=>{},minimumSize:60,maximumSize:Number.POSITIVE_INFINITY,onDidChange:r.Jh.None}}class wi{constructor(e,t,i={...gi},o=!1){this.container=e,this.view=t,this.state=i,this.centeredLayoutFixedWidth=o,this.lastLayoutPosition={width:0,height:0,left:0,top:0},this.didLayout=!1,this.splitViewDisposables=new a.Cm,this._boundarySashes={},this.container.appendChild(this.view.element),this.container.style.overflow="hidden"}get minimumWidth(){return this.splitView?this.splitView.minimumSize:this.view.minimumWidth}get maximumWidth(){return this.splitView?this.splitView.maximumSize:this.view.maximumWidth}get minimumHeight(){return this.view.minimumHeight}get maximumHeight(){return this.view.maximumHeight}get onDidChange(){return this.view.onDidChange}get boundarySashes(){return this._boundarySashes}set boundarySashes(e){this._boundarySashes=e,this.splitView&&(this.splitView.orthogonalStartSash=e.top,this.splitView.orthogonalEndSash=e.bottom)}layout(e,t,i,o){this.lastLayoutPosition={width:e,height:t,top:i,left:o},this.splitView?(this.splitView.layout(e,this.lastLayoutPosition),this.didLayout&&!this.centeredLayoutFixedWidth||this.resizeSplitViews()):this.view.layout(e,t,i,o),this.didLayout=!0}resizeSplitViews(){if(this.splitView)if(this.centeredLayoutFixedWidth){const e=Math.min(this.lastLayoutPosition.width,this.state.targetWidth),t=(this.lastLayoutPosition.width-e)/2;this.splitView.resizeView(0,Math.floor(t)),this.splitView.resizeView(1,e),this.splitView.resizeView(2,Math.ceil(t))}else{const e=this.state.leftMarginRatio*this.lastLayoutPosition.width,t=this.state.rightMarginRatio*this.lastLayoutPosition.width,i=this.lastLayoutPosition.width-e-t;this.splitView.resizeView(0,e),this.splitView.resizeView(1,i),this.splitView.resizeView(2,t)}}setFixedWidth(e){this.centeredLayoutFixedWidth=e,this.splitView&&(this.updateState(),this.resizeSplitViews())}updateState(){this.splitView&&(this.state.targetWidth=this.splitView.getViewSize(1),this.state.leftMarginRatio=this.splitView.getViewSize(0)/this.lastLayoutPosition.width,this.state.rightMarginRatio=this.splitView.getViewSize(2)/this.lastLayoutPosition.width)}isActive(){return!!this.splitView}styles(e){this.style=e,this.splitView&&this.emptyViews&&(this.splitView.style(this.style),this.emptyViews[0].element.style.backgroundColor=this.style.background.toString(),this.emptyViews[1].element.style.backgroundColor=this.style.background.toString())}activate(e){var t,i;if(e!==this.isActive())if(e){this.view.element.remove(),this.splitView=new pi.U(this.container,{inverseAltBehavior:!0,orientation:1,styles:this.style}),this.splitView.orthogonalStartSash=this.boundarySashes.top,this.splitView.orthogonalEndSash=this.boundarySashes.bottom,this.splitViewDisposables.add(this.splitView.onDidSashChange((()=>{this.splitView&&this.updateState()}))),this.splitViewDisposables.add(this.splitView.onDidSashReset((()=>{this.state={...gi},this.resizeSplitViews()}))),this.splitView.layout(this.lastLayoutPosition.width,this.lastLayoutPosition);const e=this.style?this.style.background:void 0;this.emptyViews=[bi(e),bi(e)],this.splitView.addView(this.emptyViews[0],mi,0),this.splitView.addView((t=this.view,i=()=>this.lastLayoutPosition.height,{element:t.element,get maximumSize(){return t.maximumWidth},get minimumSize(){return t.minimumWidth},onDidChange:r.Jh.map(t.onDidChange,(e=>e&&e.width)),layout:(e,o,n)=>t.layout(e,i(),n?.top??0,(n?.left??0)+o)}),mi,1),this.splitView.addView(this.emptyViews[1],mi,2),this.resizeSplitViews()}else this.splitView?.el.remove(),this.splitViewDisposables.clear(),this.splitView?.dispose(),this.splitView=void 0,this.emptyViews=void 0,this.container.appendChild(this.view.element),this.view.layout(this.lastLayoutPosition.width,this.lastLayoutPosition.height,this.lastLayoutPosition.top,this.lastLayoutPosition.left)}isDefault(e){return this.centeredLayoutFixedWidth?e.targetWidth===gi.targetWidth:e.leftMarginRatio===gi.leftMarginRatio&&e.rightMarginRatio===gi.rightMarginRatio}dispose(){this.splitViewDisposables.dispose(),this.splitView&&(this.splitView.dispose(),this.splitView=void 0)}}var vi,fi=i(26888),yi=i(19730),Ci=i(46697);class Si{constructor(){this.element=(0,h.$)(".grid-view-container"),this._onDidChange=new r.Wj,this.onDidChange=this._onDidChange.event}get minimumWidth(){return this.gridWidget?this.gridWidget.minimumWidth:0}get maximumWidth(){return this.gridWidget?this.gridWidget.maximumWidth:Number.POSITIVE_INFINITY}get minimumHeight(){return this.gridWidget?this.gridWidget.minimumHeight:0}get maximumHeight(){return this.gridWidget?this.gridWidget.maximumHeight:Number.POSITIVE_INFINITY}get gridWidget(){return this._gridWidget}set gridWidget(e){this.element.innerText="",e?(this.element.appendChild(e.element),this._onDidChange.input=e.onDidChange):this._onDidChange.input=r.Jh.None,this._gridWidget=e}layout(e,t,i,o){this.gridWidget?.layout(e,t,i,o)}dispose(){this._onDidChange.dispose()}}let ki=class extends d.e{static{vi=this}static{this.EDITOR_PART_UI_STATE_STORAGE_KEY="editorpart.state"}static{this.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY="editorpart.centeredview"}constructor(e,t,i,o,n,s,c,d,h,l,u){super(t,{hasTitle:!1},s,d,h),this.editorPartsView=e,this.groupsLabel=i,this.windowId=o,this.instantiationService=n,this.configurationService=c,this.hostService=l,this.contextKeyService=u,this._onDidFocus=this._register(new r.vl),this.onDidFocus=this._onDidFocus.event,this._onDidLayout=this._register(new r.vl),this.onDidLayout=this._onDidLayout.event,this._onDidChangeActiveGroup=this._register(new r.vl),this.onDidChangeActiveGroup=this._onDidChangeActiveGroup.event,this._onDidChangeGroupIndex=this._register(new r.vl),this.onDidChangeGroupIndex=this._onDidChangeGroupIndex.event,this._onDidChangeGroupLabel=this._register(new r.vl),this.onDidChangeGroupLabel=this._onDidChangeGroupLabel.event,this._onDidChangeGroupLocked=this._register(new r.vl),this.onDidChangeGroupLocked=this._onDidChangeGroupLocked.event,this._onDidChangeGroupMaximized=this._register(new r.vl),this.onDidChangeGroupMaximized=this._onDidChangeGroupMaximized.event,this._onDidActivateGroup=this._register(new r.vl),this.onDidActivateGroup=this._onDidActivateGroup.event,this._onDidAddGroup=this._register(new r.fV),this.onDidAddGroup=this._onDidAddGroup.event,this._onDidRemoveGroup=this._register(new r.fV),this.onDidRemoveGroup=this._onDidRemoveGroup.event,this._onDidMoveGroup=this._register(new r.vl),this.onDidMoveGroup=this._onDidMoveGroup.event,this.onDidSetGridWidget=this._register(new r.vl),this._onDidChangeSizeConstraints=this._register(new r.Wj),this.onDidChangeSizeConstraints=r.Jh.any(this.onDidSetGridWidget.event,this._onDidChangeSizeConstraints.event),this._onDidScroll=this._register(new r.Wj),this.onDidScroll=r.Jh.any(this.onDidSetGridWidget.event,this._onDidScroll.event),this._onDidChangeEditorPartOptions=this._register(new r.vl),this.onDidChangeEditorPartOptions=this._onDidChangeEditorPartOptions.event,this._onWillDispose=this._register(new r.vl),this.onWillDispose=this._onWillDispose.event,this.workspaceMemento=this.getMemento(1,0),this.profileMemento=this.getMemento(0,1),this.groupViews=new Map,this.mostRecentActiveGroups=[],this.gridWidgetDisposables=this._register(new a.Cm),this.gridWidgetView=this._register(new Si),this.enforcedPartOptions=[],this._partOptions=(0,v.$K)(this.configurationService,this.themeService),this.top=0,this.left=0,this.sideGroup={openEditor:(e,t)=>{const[i]=this.scopedInstantiationService.invokeFunction((i=>(0,fi.$)(i,{editor:e,options:t},et.Sd)));return i.openEditor(e,t)}},this._isReady=!1,this.whenReadyPromise=new U.Zv,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new U.Zv,this.whenRestored=this.whenRestoredPromise.p,this._willRestoreState=!1,this.priority=2,this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>this.onConfigurationUpdated(e)))),this._register(this.themeService.onDidFileIconThemeChange((()=>this.handleChangedPartOptions()))),this._register(this.onDidChangeMementoValue(1,this._store)((e=>this.onDidChangeMementoState(e))))}onConfigurationUpdated(e){(0,v.ij)(e)&&this.handleChangedPartOptions()}handleChangedPartOptions(){const e=this._partOptions,t=(0,v.$K)(this.configurationService,this.themeService);for(const e of this.enforcedPartOptions)Object.assign(t,e);this._partOptions=t,this._onDidChangeEditorPartOptions.fire({oldPartOptions:e,newPartOptions:t})}get partOptions(){return this._partOptions}enforcePartOptions(e){return this.enforcedPartOptions.push(e),this.handleChangedPartOptions(),(0,a.s)((()=>{this.enforcedPartOptions.splice(this.enforcedPartOptions.indexOf(e),1),this.handleChangedPartOptions()}))}get contentDimension(){return this._contentDimension}get activeGroup(){return this._activeGroup}get groups(){return Array.from(this.groupViews.values())}get count(){return this.groupViews.size}get orientation(){return this.gridWidget&&0===this.gridWidget.orientation?1:0}get isReady(){return this._isReady}get hasRestorableState(){return!!this.workspaceMemento[vi.EDITOR_PART_UI_STATE_STORAGE_KEY]}get willRestoreState(){return this._willRestoreState}getGroups(e=0){switch(e){case 0:return this.groups;case 1:{const e=(0,w.Yc)(this.mostRecentActiveGroups.map((e=>this.getGroup(e))));return(0,w.dM)([...e,...this.groups])}case 2:{const e=[];return this.gridWidget&&this.fillGridNodes(e,this.gridWidget.getViews()),e}}}fillGridNodes(e,t){(0,m.lm)(t)?t.children.forEach((t=>this.fillGridNodes(e,t))):e.push(t.view)}hasGroup(e){return this.groupViews.has(e)}getGroup(e){return this.groupViews.get(e)}findGroup(e,t=this.activeGroup,i){if("number"==typeof e.direction)return this.doFindGroupByDirection(e.direction,t,i);if("number"==typeof e.location)return this.doFindGroupByLocation(e.location,t,i);throw new Error("invalid arguments")}doFindGroupByDirection(e,t,i){const o=this.assertGroupView(t),n=this.gridWidget.getNeighborViews(o,this.toGridViewDirection(e),i);return n.sort(((e,t)=>this.mostRecentActiveGroups.indexOf(e.id)-this.mostRecentActiveGroups.indexOf(t.id))),n[0]}doFindGroupByLocation(e,t,i){const o=this.assertGroupView(t),n=this.getGroups(2),s=n.indexOf(o);switch(e){case 0:return n[0];case 1:return n[n.length-1];case 2:{let e=n[s+1];return!e&&i&&(e=this.doFindGroupByLocation(0,t)),e}case 3:{let e=n[s-1];return!e&&i&&(e=this.doFindGroupByLocation(1,t)),e}}}activateGroup(e,t){const i=this.assertGroupView(e);return this.doSetGroupActive(i),t||this.hostService.moveTop((0,h.zk)(this.element)),i}restoreGroup(e){const t=this.assertGroupView(e);return this.doRestoreGroup(t),t}getSize(e){const t=this.assertGroupView(e);return this.gridWidget.getViewSize(t)}setSize(e,t){const i=this.assertGroupView(e);this.gridWidget.resizeView(i,t)}arrangeGroups(e,t=this.activeGroup){if(this.count<2)return;if(!this.gridWidget)return;const i=this.assertGroupView(t);switch(e){case 2:this.gridWidget.distributeViewSizes();break;case 0:if(this.groups.length<2)return;this.gridWidget.maximizeView(i),i.focus();break;case 1:this.gridWidget.expandView(i)}}toggleMaximizeGroup(e=this.activeGroup){this.hasMaximizedGroup()?this.unmaximizeGroup():this.arrangeGroups(0,e)}toggleExpandGroup(e=this.activeGroup){this.isGroupExpanded(this.activeGroup)?this.arrangeGroups(2):this.arrangeGroups(1,e)}unmaximizeGroup(){this.gridWidget.exitMaximizedView(),this._activeGroup.focus()}hasMaximizedGroup(){return this.gridWidget.hasMaximizedView()}isGroupMaximized(e){return this.gridWidget.isViewMaximized(e)}isGroupExpanded(e){return this.gridWidget.isViewExpanded(e)}setGroupOrientation(e){if(!this.gridWidget)return;const t=0===e?1:0;this.gridWidget.orientation!==t&&(this.gridWidget.orientation=t)}applyLayout(e){const t=this.shouldRestoreFocus(this.container);let i=0;!function e(t){for(const o of t)Array.isArray(o.groups)?e(o.groups):i++}(e.groups);let o=this.getGroups(2);if(i<o.length){const e=o[i-1];o.forEach(((t,o)=>{o>=i&&this.mergeGroup(t,e)})),o=this.getGroups(2)}const n=this.activeGroup,s=(0,m.FR)({orientation:this.toGridViewOrientation(e.orientation,this.isTwoDimensionalGrid()?this.gridWidget.orientation:(0,Ci.ks)(this.gridWidget.orientation)),groups:e.groups});this.doApplyGridState(s,n.id,o),t&&this._activeGroup.focus()}getLayout(){const e=this.gridWidget.serialize();return{orientation:1===e.orientation?0:1,groups:this.serializedNodeToGroupLayoutArgument(e.root).groups}}serializedNodeToGroupLayoutArgument(e){return"branch"===e.type?{size:e.size,groups:e.data.map((e=>this.serializedNodeToGroupLayoutArgument(e)))}:{size:e.size}}shouldRestoreFocus(e){return!!e&&((0,h.bq)()===e.ownerDocument.body||(0,h.nR)(e))}isTwoDimensionalGrid(){const e=this.gridWidget.getViews();return!!(0,m.lm)(e)&&e.children.some((e=>(0,m.lm)(e)))}addGroup(e,t,i){const o=this.assertGroupView(e);let n;if(o.groupsView===this){const e=this.shouldRestoreFocus(o.element),s=this.groupViews.size>1&&this.isGroupExpanded(o);n=this.doCreateGroupView(i),this.gridWidget.addView(n,this.getSplitSizingStyle(),o,this.toGridViewDirection(t)),this.updateContainer(),this._onDidAddGroup.fire(n),this.notifyGroupIndexChange(),s&&this.arrangeGroups(1,n),e&&o.focus()}else n=o.groupsView.addGroup(o,t,i);return n}getSplitSizingStyle(){switch(this._partOptions.splitSizing){case"distribute":return m.XQ.Distribute;case"split":return m.XQ.Split;default:return m.XQ.Auto}}doCreateGroupView(e,t){let i;i=e instanceof ni?ni.createCopy(e,this.editorPartsView,this,this.groupsLabel,this.count,this.scopedInstantiationService,t):(0,y.KF)(e)?ni.createFromSerialized(e,this.editorPartsView,this,this.groupsLabel,this.count,this.scopedInstantiationService,t):ni.createNew(this.editorPartsView,this,this.groupsLabel,this.count,this.scopedInstantiationService,t),this.groupViews.set(i.id,i);const o=new a.Cm;return o.add(i.onDidFocus((()=>{this.doSetGroupActive(i),this._onDidFocus.fire()}))),o.add(i.onDidModelChange((e=>{switch(e.kind){case 3:this._onDidChangeGroupLocked.fire(i);break;case 1:this._onDidChangeGroupIndex.fire(i);break;case 2:this._onDidChangeGroupLabel.fire(i)}}))),o.add(i.onDidActiveEditorChange((()=>{this.updateContainer()}))),r.Jh.once(i.onWillDispose)((()=>{(0,a.AS)(o),this.groupViews.delete(i.id),this.doUpdateMostRecentActive(i)})),i}doSetGroupActive(e){if(this._activeGroup!==e){const t=this._activeGroup;this._activeGroup=e,this.doUpdateMostRecentActive(e,!0),t&&!t.disposed&&t.setActive(!1),e.setActive(!0),this.doRestoreGroup(e),this._onDidChangeActiveGroup.fire(e)}this._onDidActivateGroup.fire(e)}doRestoreGroup(e){if(this.gridWidget){this.hasMaximizedGroup()&&!this.isGroupMaximized(e)&&this.unmaximizeGroup();try{const t=this.gridWidget.getViewSize(e);t.width!==e.minimumWidth&&t.height!==e.minimumHeight||this.arrangeGroups(1,e)}catch(e){}}}doUpdateMostRecentActive(e,t){const i=this.mostRecentActiveGroups.indexOf(e.id);-1!==i&&this.mostRecentActiveGroups.splice(i,1),t&&this.mostRecentActiveGroups.unshift(e.id)}toGridViewDirection(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3}}toGridViewOrientation(e,t){return"number"==typeof e?0===e?1:0:t}removeGroup(e,t){const i=this.assertGroupView(e);1!==this.count&&(i.isEmpty?this.doRemoveEmptyGroup(i,t):this.doRemoveGroupWithEditors(i))}doRemoveGroupWithEditors(e){const t=this.getGroups(1);let i;i=this._activeGroup===e?t[1]:t[0],this.mergeGroup(e,i)}doRemoveEmptyGroup(e,t){const i=!t&&this.shouldRestoreFocus(this.container);if(this._activeGroup===e){const e=this.getGroups(1)[1];this.doSetGroupActive(e)}this.gridWidget.removeView(e,this.getSplitSizingStyle()),e.dispose(),i&&this._activeGroup.focus(),this.notifyGroupIndexChange(),this.updateContainer(),this._onDidRemoveGroup.fire(e)}moveGroup(e,t,i){const o=this.assertGroupView(e),n=this.assertGroupView(t);if(o.id===n.id)throw new Error("Cannot move group into its own");const s=this.shouldRestoreFocus(o.element);let r;return o.groupsView===n.groupsView?(this.gridWidget.moveView(o,this.getSplitSizingStyle(),n,this.toGridViewDirection(i)),r=o):(r=n.groupsView.addGroup(n,i,o),o.closeAllEditors(),this.removeGroup(o,s)),s&&r.focus(),this._onDidMoveGroup.fire(r),this.notifyGroupIndexChange(),r}copyGroup(e,t,i){const o=this.assertGroupView(e),n=this.assertGroupView(t),s=this.shouldRestoreFocus(o.element),r=this.addGroup(n,i,o);return s&&r.focus(),r}mergeGroup(e,t,i){const o=this.assertGroupView(e),n=this.assertGroupView(t),s=[];let r=i&&"number"==typeof i.index?i.index:n.count;for(const e of o.editors){const t=!o.isActive(e)||this._activeGroup!==o,i={index:o.isSticky(e)?void 0:r,inactive:t,preserveFocus:t};s.push({editor:e,options:i}),r++}let a=!0;return 0===i?.mode?o.copyEditors(s,n):a=o.moveEditors(s,n),o.isEmpty&&!o.disposed&&this.removeGroup(o,!0),a}mergeAllGroups(e){const t=this.assertGroupView(e);let i=!0;for(const e of this.getGroups(1))e!==t&&(this.mergeGroup(e,t)||(i=!1));return i}assertGroupView(e){let t;if(t="number"==typeof e?this.editorPartsView.getGroup(e):e,!t)throw new Error("Invalid editor group provided!");return t}createEditorDropTarget(e,t){return(0,L.j)((0,h.sb)(e)),this.scopedInstantiationService.createInstance(ui,e,t)}get minimumWidth(){return Math.min(this.centeredLayoutWidget.minimumWidth,this.layoutService.getMaximumEditorDimensions(this.layoutService.getContainer((0,h.zk)(this.container))).width)}get maximumWidth(){return this.centeredLayoutWidget.maximumWidth}get minimumHeight(){return Math.min(this.centeredLayoutWidget.minimumHeight,this.layoutService.getMaximumEditorDimensions(this.layoutService.getContainer((0,h.zk)(this.container))).height)}get maximumHeight(){return this.centeredLayoutWidget.maximumHeight}get snap(){return"center"===this.layoutService.getPanelAlignment()}get onDidChange(){return r.Jh.any(this.centeredLayoutWidget.onDidChange,this.onDidSetGridWidget.event)}get gridSeparatorBorder(){return this.theme.getColor(b.fM)||this.theme.getColor(u.b1)||Yt.Q1.transparent}updateStyles(){(0,L.eU)(this.container).style.backgroundColor=this.getColor(p.Yt)||"";const e={separatorBorder:this.gridSeparatorBorder,background:this.theme.getColor(b.YX)||Yt.Q1.transparent};this.gridWidget.style(e),this.centeredLayoutWidget.styles(e)}createContentArea(e,t){this.element=e,this.container=document.createElement("div"),this.container.classList.add("content"),this.windowId!==yi.Gs.vscodeWindowId&&this.container.classList.add("auxiliary"),e.appendChild(this.container);const i=this._register(this.contextKeyService.createScoped(this.container));return this.scopedInstantiationService=this._register(this.instantiationService.createChild(new _.a([x.f,i]))),this._willRestoreState=!t||t.restorePreviousState,this.doCreateGridControl(),this.centeredLayoutWidget=this._register(new wi(this.container,this.gridWidgetView,this.profileMemento[vi.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY],this._partOptions.centeredLayoutFixedWidth)),this._register(this.onDidChangeEditorPartOptions((e=>this.centeredLayoutWidget.setFixedWidth(e.newPartOptions.centeredLayoutFixedWidth??!1)))),this.setupDragAndDropSupport(e,this.container),this.handleContextKeys(i),this.whenReadyPromise.complete(),this._isReady=!0,U.HC.settled(this.groups.map((e=>e.whenRestored))).finally((()=>{this.whenRestoredPromise.complete()})),this.container}handleContextKeys(e){S.EA.bindTo(e).set(this.windowId!==yi.Gs.vscodeWindowId);const t=S.TK.bindTo(e),i=S.sW.bindTo(e),o=()=>{this.count>1?t.set(!0):t.reset(),this.hasMaximizedGroup()?i.set(!0):i.reset()};o(),this._register(this.onDidAddGroup((()=>o()))),this._register(this.onDidRemoveGroup((()=>o()))),this._register(this.onDidChangeGroupMaximized((()=>o())))}setupDragAndDropSupport(e,t){this._register(this.createEditorDropTarget(t,Object.create(null)));const i=document.createElement("div");let o,n,s,r;i.classList.add("drop-block-overlay"),e.appendChild(i),this._register((0,h._9)(i,(()=>i.classList.remove("visible")))),this._register(Lt.eU.INSTANCE.registerTarget(this.element,{onDragStart:e=>i.classList.add("visible"),onDragEnd:e=>i.classList.remove("visible")}));const a=e=>{this.layoutService.isVisible("workbench.parts.panel")||e!==this.layoutService.getPanelPosition()?this.layoutService.isVisible("workbench.parts.auxiliarybar")||e!==(1===this.layoutService.getSideBarPosition()?0:1)||this.layoutService.setPartHidden(!1,"workbench.parts.auxiliarybar"):this.layoutService.setPartHidden(!1,"workbench.parts.panel")},c=()=>{o&&(clearTimeout(o),o=void 0),n&&(clearTimeout(n),n=void 0)};this._register(Lt.eU.INSTANCE.registerTarget(i,{onDragOver:e=>{h.fs.stop(e.eventData,!0),e.eventData.dataTransfer&&(e.eventData.dataTransfer.dropEffect="none");const t=i.getBoundingClientRect();let c,d;const l=100;e.eventData.clientX<t.left+l&&(c=0),e.eventData.clientX>t.right-l&&(c=1),e.eventData.clientY>t.bottom-l&&(d=2),e.eventData.clientY<t.top+l&&(d=3),o&&c!==s&&(clearTimeout(o),o=void 0),n&&d!==r&&(clearTimeout(n),n=void 0),o||void 0===c||(s=c,o=setTimeout((()=>a(c)),200)),n||void 0===d||(r=d,n=setTimeout((()=>a(d)),200))},onDragLeave:()=>c(),onDragEnd:()=>c(),onDrop:()=>c()}))}centerLayout(e){this.centeredLayoutWidget.activate(e),this._activeGroup.focus()}isLayoutCentered(){return!!this.centeredLayoutWidget&&this.centeredLayoutWidget.isActive()}doCreateGridControl(){let e=!1;if(this._willRestoreState&&(e=!this.doCreateGridControlWithPreviousState()),!this.gridWidget||e){const e=this.doCreateGroupView();this.doSetGridWidget(new m.A_(e)),this.doSetGroupActive(e)}this.updateContainer(),this.notifyGroupIndexChange()}doCreateGridControlWithPreviousState(){const e=this.loadState();if(e?.serializedGrid)try{this.mostRecentActiveGroups=e.mostRecentActiveGroups,this.doCreateGridControlWithState(e.serializedGrid,e.activeGroup)}catch(t){return(0,O.dz)(new Error(`Error restoring editor grid widget: ${t} (with state: ${JSON.stringify(e)})`)),this.disposeGroups(),!1}return!0}doCreateGridControlWithState(e,t,i,o){let n;n=i?i.slice(0):[];const s=[],r=m.A_.deserialize(e,{fromJSON:e=>{let i;return i=n.length>0?n.shift():this.doCreateGroupView(e,o),s.push(i),i.id===t&&this.doSetGroupActive(i),i}},{styles:{separatorBorder:this.gridSeparatorBorder}});this._activeGroup||this.doSetGroupActive(s[0]),this.mostRecentActiveGroups.some((e=>!this.getGroup(e)))&&(this.mostRecentActiveGroups=s.map((e=>e.id))),this.doSetGridWidget(r)}doSetGridWidget(e){let t={};this.gridWidget&&(t=this.gridWidget.boundarySashes,this.gridWidget.dispose()),this.gridWidget=e,this.gridWidget.boundarySashes=t,this.gridWidgetView.gridWidget=e,this._onDidChangeSizeConstraints.input=e.onDidChange,this._onDidScroll.input=e.onDidScroll,this.gridWidgetDisposables.clear(),this.gridWidgetDisposables.add(e.onDidChangeViewMaximized((e=>this._onDidChangeGroupMaximized.fire(e)))),this.onDidSetGridWidget.fire(void 0)}updateContainer(){(0,L.eU)(this.container).classList.toggle("empty",this.isEmpty)}notifyGroupIndexChange(){this.getGroups(2).forEach(((e,t)=>e.notifyIndexChanged(t)))}notifyGroupsLabelChange(e){for(const t of this.groups)t.notifyLabelChanged(e)}get isEmpty(){return 1===this.count&&this._activeGroup.isEmpty}setBoundarySashes(e){this.gridWidget.boundarySashes=e,this.centeredLayoutWidget.boundarySashes=e}layout(e,t,i,o){this.top=i,this.left=o;const n=super.layoutContents(e,t).contentSize;this.doLayout(h.fg.lift(n),i,o)}doLayout(e,t=this.top,i=this.left){this._contentDimension=e,this.centeredLayoutWidget.layout(this._contentDimension.width,this._contentDimension.height,t,i),this._onDidLayout.fire(e)}saveState(){if(this.gridWidget&&(this.isEmpty?delete this.workspaceMemento[vi.EDITOR_PART_UI_STATE_STORAGE_KEY]:this.workspaceMemento[vi.EDITOR_PART_UI_STATE_STORAGE_KEY]=this.createState()),this.centeredLayoutWidget){const e=this.centeredLayoutWidget.state;this.centeredLayoutWidget.isDefault(e)?delete this.profileMemento[vi.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY]:this.profileMemento[vi.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY]=e}super.saveState()}loadState(){return this.workspaceMemento[vi.EDITOR_PART_UI_STATE_STORAGE_KEY]}createState(){return{serializedGrid:this.gridWidget.serialize(),activeGroup:this._activeGroup.id,mostRecentActiveGroups:this.mostRecentActiveGroups}}applyState(e,t){return"empty"===e?this.doApplyEmptyState():this.doApplyState(e,t)}async doApplyState(e,t){const i=await this.doPrepareApplyState();this._onDidAddGroup.pause(),this._onDidRemoveGroup.pause(),this.disposeGroups(),this.mostRecentActiveGroups=e.mostRecentActiveGroups;try{this.doApplyGridState(e.serializedGrid,e.activeGroup,void 0,t)}finally{this._onDidRemoveGroup.resume(),this._onDidAddGroup.resume()}await this.activeGroup.openEditors(i.flatMap((e=>e.editors)).filter((e=>this.editorPartsView.groups.every((t=>!t.contains(e))))).map((e=>({editor:e,options:{pinned:!0,preserveFocus:!0,inactive:!0}}))))}async doApplyEmptyState(){await this.doPrepareApplyState(),this.mergeAllGroups(this.activeGroup)}async doPrepareApplyState(){const e=this.getGroups(1);for(const t of e)await t.closeAllEditors({excludeConfirming:!0});return e}doApplyGridState(e,t,i,o){this.doCreateGridControlWithState(e,t,i,o),this.doLayout(this._contentDimension),this.updateContainer();for(const e of this.getGroups(2))i?.includes(e)||this._onDidAddGroup.fire(e);this.notifyGroupIndexChange()}onDidChangeMementoState(e){if(e.external&&1===e.scope){this.reloadMemento(e.scope);const t=this.loadState();t&&this.applyState(t)}}toJSON(){return{type:"workbench.parts.editor"}}disposeGroups(){for(const e of this.groups)e.dispose(),this._onDidRemoveGroup.fire(e);this.groupViews.clear(),this.mostRecentActiveGroups=[]}dispose(){this._onWillDispose.fire(),this.disposeGroups(),this.gridWidget?.dispose(),super.dispose()}};ki=vi=(0,o.C)([(0,o.Q)(4,s._Y),(0,o.Q)(5,c.G),(0,o.Q)(6,ue.p),(0,o.Q)(7,si.C),(0,o.Q)(8,M.Y),(0,o.Q)(9,W.v),(0,o.Q)(10,x.f)],ki);let _i=class extends ki{constructor(e,t,i,o,n,s,r,a){super(e,"workbench.parts.editor","",yi.Gs.vscodeWindowId,t,i,o,n,s,r,a)}};_i=(0,o.C)([(0,o.Q)(1,s._Y),(0,o.Q)(2,c.G),(0,o.Q)(3,ue.p),(0,o.Q)(4,si.C),(0,o.Q)(5,M.Y),(0,o.Q)(6,W.v),(0,o.Q)(7,x.f)],_i);var xi,Ei,Di=i(3560),Ii=i(86003),Vi=i(45484),Mi=i(81893),Ti=i(71512),Ai=i(47813),Li=i(77192);let Pi=class{static{xi=this}static{this.STATUS_BAR_VISIBILITY="workbench.statusBar.visible"}constructor(e,t,i,o,n,s,r,a,c){this.editorPartsView=e,this.instantiationService=t,this.auxiliaryWindowService=i,this.lifecycleService=o,this.configurationService=n,this.statusbarService=s,this.titleService=r,this.editorService=a,this.layoutService=c}async create(e,t){function i(e){g?(0,h.WU)(p.container):(0,h.jD)(p.container),e&&s.layout()}function o(e){l&&(u?(0,h.WU)(l.container):(0,h.jD)(l.container),e&&s.layout())}const n=new a.Cm,s=n.add(await this.auxiliaryWindowService.open(t)),c=document.createElement("div");c.classList.add("part","editor"),c.setAttribute("role","main"),c.style.position="relative",s.container.appendChild(c);const d=n.add(this.instantiationService.createInstance(Ri,s.window.vscodeWindowId,this.editorPartsView,t?.state,e));let l;n.add(this.editorPartsView.registerPart(d)),d.create(c);let u=!1;if(ce.ib&&(0,Di.bQ)()){l=n.add(this.titleService.createAuxiliaryTitlebarPart(s.container,d)),u=(0,Mi.Xy)(this.configurationService,s.window,void 0);const e=()=>{const e=u;u=(0,Mi.Xy)(this.configurationService,s.window,void 0),e!==u&&o(!0)};n.add(l.onDidChange((()=>s.layout()))),n.add(this.layoutService.onDidChangePartVisibility((()=>e()))),n.add((0,Nt.EX)((t=>{t===s.window.vscodeWindowId&&e()}))),o(!1)}else n.add(this.instantiationService.createInstance(Ii.b7,s.window,d));const p=n.add(this.statusbarService.createAuxiliaryStatusbarPart(s.container));let g=!1!==this.configurationService.getValue(xi.STATUS_BAR_VISIBILITY);n.add(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(xi.STATUS_BAR_VISIBILITY)&&(g=!1!==this.configurationService.getValue(xi.STATUS_BAR_VISIBILITY),i(!0))}))),i(!1);const m=n.add(r.Jh.once(d.onWillClose)((()=>s.window.close())));n.add(r.Jh.once(s.onUnload)((()=>{n.isDisposed||(m.dispose(),d.close(),n.dispose())}))),n.add(r.Jh.once(this.lifecycleService.onDidShutdown)((()=>n.dispose()))),n.add(s.onBeforeUnload((e=>{for(const t of d.groups)for(const i of t.editors){const o=i.canMove(t.id,this.editorPartsView.mainPart.activeGroup.id);if("string"==typeof o){t.openEditor(i),e.veto(o);break}}}))),n.add(s.onWillLayout((e=>{const t=l?.height??0;l?.layout(e.width,t,0,0);const i=e.height-function(){let e=0;return g&&(e+=p.height),l&&u&&(e+=l.height),e}();d.layout(e.width,i,t,0),p.layout(e.width,p.height,e.height-p.height,0)}))),s.layout();const b=n.add(this.instantiationService.createChild(new _.a([Ai.S,this.statusbarService.createScoped(p,n)],[ee.I,this.editorService.createScoped(d,n)])));return{part:d,instantiationService:b,disposables:n}}};Pi=xi=(0,o.C)([(0,o.Q)(1,s._Y),(0,o.Q)(2,Vi.f),(0,o.Q)(3,Ti.f),(0,o.Q)(4,ue.p),(0,o.Q)(5,Ai.S),(0,o.Q)(6,Li.p),(0,o.Q)(7,ee.I),(0,o.Q)(8,M.Y)],Pi);let Ri=class extends ki{static{Ei=this}static{this.COUNTER=1}constructor(e,t,i,o,n,s,a,c,d,h,l){super(t,"workbench.parts.auxiliaryEditor."+Ei.COUNTER++,o,e,n,s,a,c,d,h,l),this.state=i,this._onWillClose=this._register(new r.vl),this.onWillClose=this._onWillClose.event}removeGroup(e,t){const i=this.assertGroupView(e);1===this.count&&this.activeGroup===i?this.doRemoveLastGroup(t):super.removeGroup(e,t)}doRemoveLastGroup(e){const t=!e&&this.shouldRestoreFocus(this.container),i=this.editorPartsView.getGroups(1)[1];i&&(i.groupsView.activateGroup(i),t&&i.focus()),this.doClose(!1)}loadState(){return this.state}saveState(){}close(){return this.doClose(!0)}doClose(e){let t=!0;return e&&(t=this.mergeGroupsToMainPart()),this._onWillClose.fire(),t}mergeGroupsToMainPart(){if(!this.groups.some((e=>e.count>0)))return!0;let e;for(const t of this.editorPartsView.mainPart.getGroups(1))if(!t.isLocked){e=t;break}e||(e=this.editorPartsView.mainPart.addGroup(this.editorPartsView.mainPart.activeGroup,"right"===this.partOptions.openSideBySideDirection?3:1));const t=this.mergeAllGroups(e);return e.focus(),t}};Ri=Ei=(0,o.C)([(0,o.Q)(4,s._Y),(0,o.Q)(5,c.G),(0,o.Q)(6,ue.p),(0,o.Q)(7,si.C),(0,o.Q)(8,M.Y),(0,o.Q)(9,W.v),(0,o.Q)(10,x.f)],Ri);var Bi,Oi=i(97634);let Ni=class extends d.S{static{Bi=this}constructor(e,t,i,o,n){super("workbench.editorParts",i,t),this.instantiationService=e,this.storageService=t,this.auxiliaryWindowService=o,this.contextKeyService=n,this.mainPart=this._register(this.createMainEditorPart()),this.mostRecentActiveParts=[this.mainPart],this.mapPartToInstantiationService=new Map,this._onDidCreateAuxiliaryEditorPart=this._register(new r.vl),this.onDidCreateAuxiliaryEditorPart=this._onDidCreateAuxiliaryEditorPart.event,this.workspaceMemento=this.getMemento(1,0),this._isReady=!1,this.whenReadyPromise=new U.Zv,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new U.Zv,this.whenRestored=this.whenRestoredPromise.p,this.editorWorkingSets=(()=>{const e=this.storageService.get(Bi.EDITOR_WORKING_SETS_STORAGE_KEY,1);return e?JSON.parse(e):[]})(),this._onDidActiveGroupChange=this._register(new r.vl),this.onDidChangeActiveGroup=this._onDidActiveGroupChange.event,this._onDidAddGroup=this._register(new r.vl),this.onDidAddGroup=this._onDidAddGroup.event,this._onDidRemoveGroup=this._register(new r.vl),this.onDidRemoveGroup=this._onDidRemoveGroup.event,this._onDidMoveGroup=this._register(new r.vl),this.onDidMoveGroup=this._onDidMoveGroup.event,this._onDidActivateGroup=this._register(new r.vl),this.onDidActivateGroup=this._onDidActivateGroup.event,this._onDidChangeGroupIndex=this._register(new r.vl),this.onDidChangeGroupIndex=this._onDidChangeGroupIndex.event,this._onDidChangeGroupLocked=this._register(new r.vl),this.onDidChangeGroupLocked=this._onDidChangeGroupLocked.event,this._onDidChangeGroupMaximized=this._register(new r.vl),this.onDidChangeGroupMaximized=this._onDidChangeGroupMaximized.event,this.globalContextKeys=new Map,this.scopedContextKeys=new Map,this.contextKeyProviders=new Map,this.registeredContextKeys=new Map,this.contextKeyProviderDisposables=this._register(new a.$w),this._register(this.registerPart(this.mainPart)),this.restoreParts(),this.registerListeners()}registerListeners(){this._register(this.onDidChangeMementoValue(1,this._store)((e=>this.onDidChangeMementoState(e)))),this.whenReady.then((()=>this.registerGroupsContextKeyListeners()))}createMainEditorPart(){return this.instantiationService.createInstance(_i,this)}getScopedInstantiationService(e){return e===this.mainPart&&(this.mapPartToInstantiationService.has(e.windowId)||this.instantiationService.invokeFunction((t=>{const i=t.get(ee.I);this.mapPartToInstantiationService.set(e.windowId,this._register(this.instantiationService.createChild(new _.a([ee.I,i.createScoped("main",this._store)]))))}))),this.mapPartToInstantiationService.get(e.windowId)??this.instantiationService}async createAuxiliaryEditorPart(e){const{part:t,instantiationService:i,disposables:o}=await this.instantiationService.createInstance(Pi,this).create(this.getGroupsLabel(this._parts.size),e);return this.mapPartToInstantiationService.set(t.windowId,i),o.add((0,a.s)((()=>this.mapPartToInstantiationService.delete(t.windowId)))),this._onDidAddGroup.fire(t.activeGroup),this._onDidCreateAuxiliaryEditorPart.fire(t),t}registerPart(e){const t=this._register(new a.Cm);return t.add(super.registerPart(e)),this.registerEditorPartListeners(e,t),t}unregisterPart(e){super.unregisterPart(e),this.parts.forEach(((e,t)=>{e!==this.mainPart&&e.notifyGroupsLabelChange(this.getGroupsLabel(t))}))}registerEditorPartListeners(e,t){t.add(e.onDidFocus((()=>{this.doUpdateMostRecentActive(e,!0),this._parts.size>1&&this._onDidActiveGroupChange.fire(this.activeGroup)}))),t.add((0,a.s)((()=>this.doUpdateMostRecentActive(e)))),t.add(e.onDidChangeActiveGroup((e=>this._onDidActiveGroupChange.fire(e)))),t.add(e.onDidAddGroup((e=>this._onDidAddGroup.fire(e)))),t.add(e.onDidRemoveGroup((e=>this._onDidRemoveGroup.fire(e)))),t.add(e.onDidMoveGroup((e=>this._onDidMoveGroup.fire(e)))),t.add(e.onDidActivateGroup((e=>this._onDidActivateGroup.fire(e)))),t.add(e.onDidChangeGroupMaximized((e=>this._onDidChangeGroupMaximized.fire(e)))),t.add(e.onDidChangeGroupIndex((e=>this._onDidChangeGroupIndex.fire(e)))),t.add(e.onDidChangeGroupLocked((e=>this._onDidChangeGroupLocked.fire(e))))}doUpdateMostRecentActive(e,t){const i=this.mostRecentActiveParts.indexOf(e);-1!==i&&this.mostRecentActiveParts.splice(i,1),t&&this.mostRecentActiveParts.unshift(e)}getGroupsLabel(e){return(0,n.kg)(3085,"Window {0}",e+1)}getPart(e){if(this._parts.size>1){if((0,h.sb)(e)){const t=e;return this.getPartByDocument(t.ownerDocument)}{let t;t="number"==typeof e?e:e.id;for(const e of this._parts)if(e.hasGroup(t))return e}}return this.mainPart}static{this.EDITOR_PARTS_UI_STATE_STORAGE_KEY="editorparts.state"}get isReady(){return this._isReady}async restoreParts(){if(await this.mainPart.whenReady,this.mainPart.willRestoreState){const e=this.loadState();e&&await this.restoreState(e)}const e=this.mostRecentActiveParts.at(0);e?.activeGroup.focus(),this._isReady=!0,this.whenReadyPromise.complete(),await Promise.allSettled(this.parts.map((e=>e.whenRestored))),this.whenRestoredPromise.complete()}loadState(){return this.workspaceMemento[Bi.EDITOR_PARTS_UI_STATE_STORAGE_KEY]}saveState(){const e=this.createState();0===e.auxiliary.length?delete this.workspaceMemento[Bi.EDITOR_PARTS_UI_STATE_STORAGE_KEY]:this.workspaceMemento[Bi.EDITOR_PARTS_UI_STATE_STORAGE_KEY]=e}createState(){return{auxiliary:this.parts.filter((e=>e!==this.mainPart)).map((e=>{const t=this.auxiliaryWindowService.getWindow(e.windowId);return{state:e.createState(),...t?.createState()}})),mru:this.mostRecentActiveParts.map((e=>this.parts.indexOf(e)))}}async restoreState(e){if(e.auxiliary.length){const t=[];for(const i of e.auxiliary)t.push(this.createAuxiliaryEditorPart(i));await Promise.allSettled(t),e.mru.length===this.parts.length?this.mostRecentActiveParts=e.mru.map((e=>this.parts[e])):this.mostRecentActiveParts=[...this.parts],await Promise.allSettled(this.parts.map((e=>e.whenReady)))}}get hasRestorableState(){return this.parts.some((e=>e.hasRestorableState))}onDidChangeMementoState(e){if(e.external&&1===e.scope){this.reloadMemento(e.scope);const t=this.loadState();t&&this.applyState(t)}}async applyState(e){for(const e of this.parts)if(e!==this.mainPart){for(const t of e.getGroups(1))await t.closeAllEditors({excludeConfirming:!0});if(!e.close())return!1}return"empty"!==e&&await this.restoreState(e),!0}static{this.EDITOR_WORKING_SETS_STORAGE_KEY="editor.workingSets"}saveWorkingSet(e){const t={id:(0,Oi.b)(),name:e,main:this.mainPart.createState(),auxiliary:this.createState()};return this.editorWorkingSets.push(t),this.saveWorkingSets(),{id:t.id,name:t.name}}getWorkingSets(){return this.editorWorkingSets.map((e=>({id:e.id,name:e.name})))}deleteWorkingSet(e){const t=this.indexOfWorkingSet(e);"number"==typeof t&&(this.editorWorkingSets.splice(t,1),this.saveWorkingSets())}async applyWorkingSet(e,t){let i;if(i="empty"===e?"empty":this.editorWorkingSets[this.indexOfWorkingSet(e)??-1],!i)return!1;if(!await this.applyState("empty"===i?i:i.auxiliary))return!1;if(await this.mainPart.applyState("empty"===i?i:i.main,t),!t?.preserveFocus){const e=this.mostRecentActiveParts.at(0);e&&(await e.whenReady,e.activeGroup.focus())}return!0}indexOfWorkingSet(e){for(let t=0;t<this.editorWorkingSets.length;t++)if(this.editorWorkingSets[t].id===e.id)return t}saveWorkingSets(){this.storageService.store(Bi.EDITOR_WORKING_SETS_STORAGE_KEY,JSON.stringify(this.editorWorkingSets),1,1)}get activeGroup(){return this.activePart.activeGroup}get sideGroup(){return this.activePart.sideGroup}get groups(){return this.getGroups()}get count(){return this.groups.length}getGroups(e=0){if(this._parts.size>1){let t;switch(e){case 2:case 0:t=this.parts;break;case 1:t=(0,w.dM)([...this.mostRecentActiveParts,...this.parts])}return t.map((t=>t.getGroups(e))).flat()}return this.mainPart.getGroups(e)}getGroup(e){if(this._parts.size>1)for(const t of this._parts){const i=t.getGroup(e);if(i)return i}return this.mainPart.getGroup(e)}assertGroupView(e){let t;if(t="number"==typeof e?this.getGroup(e):e,!t)throw new Error("Invalid editor group provided!");return t}activateGroup(e){return this.getPart(e).activateGroup(e)}getSize(e){return this.getPart(e).getSize(e)}setSize(e,t){this.getPart(e).setSize(e,t)}arrangeGroups(e,t=this.activePart.activeGroup){this.getPart(t).arrangeGroups(e,t)}toggleMaximizeGroup(e=this.activePart.activeGroup){this.getPart(e).toggleMaximizeGroup(e)}toggleExpandGroup(e=this.activePart.activeGroup){this.getPart(e).toggleExpandGroup(e)}restoreGroup(e){return this.getPart(e).restoreGroup(e)}applyLayout(e){this.activePart.applyLayout(e)}getLayout(){return this.activePart.getLayout()}get orientation(){return this.activePart.orientation}setGroupOrientation(e){this.activePart.setGroupOrientation(e)}findGroup(e,t=this.activeGroup,i){const o=this.getPart(t);if(this._parts.size>1){const n=this.getGroups(2);if(0===e.location||1===e.location)return 0===e.location?n[0]:n[n.length-1];const s=o.findGroup(e,t,!1);if(s)return s;if(2===e.location||3===e.location){const o=this.assertGroupView(t),s=n.indexOf(o);if(2===e.location){let e=n[s+1];return!e&&i&&(e=n[0]),e}{let e=n[s-1];return!e&&i&&(e=n[n.length-1]),e}}}return o.findGroup(e,t,i)}addGroup(e,t){return this.getPart(e).addGroup(e,t)}removeGroup(e){this.getPart(e).removeGroup(e)}moveGroup(e,t,i){return this.getPart(e).moveGroup(e,t,i)}mergeGroup(e,t,i){return this.getPart(e).mergeGroup(e,t,i)}mergeAllGroups(e){return this.activePart.mergeAllGroups(e)}copyGroup(e,t,i){return this.getPart(e).copyGroup(e,t,i)}createEditorDropTarget(e,t){return this.getPart(e).createEditorDropTarget(e,t)}registerGroupsContextKeyListeners(){this._register(this.onDidChangeActiveGroup((()=>this.updateGlobalContextKeys()))),this.groups.forEach((e=>this.registerGroupContextKeyProvidersListeners(e))),this._register(this.onDidAddGroup((e=>this.registerGroupContextKeyProvidersListeners(e)))),this._register(this.onDidRemoveGroup((e=>{this.scopedContextKeys.delete(e.id),this.registeredContextKeys.delete(e.id),this.contextKeyProviderDisposables.deleteAndDispose(e.id)})))}updateGlobalContextKeys(){const e=this.scopedContextKeys.get(this.activeGroup.id);if(e)for(const[t,i]of this.globalContextKeys){const o=e.get(t);o?i.set(o.get()):i.reset()}}bind(e,t){let i=this.globalContextKeys.get(e.key);i||(i=e.bindTo(this.contextKeyService),this.globalContextKeys.set(e.key,i));let o=this.scopedContextKeys.get(t.id);o||(o=new Map,this.scopedContextKeys.set(t.id,o));let n=o.get(e.key);n||(n=e.bindTo(t.scopedContextKeyService),o.set(e.key,n));const s=this;return{get:()=>n.get(),set(e){s.activeGroup===t&&i.set(e),n.set(e)},reset(){s.activeGroup===t&&i.reset(),n.reset()}}}registerContextKeyProvider(e){if(this.contextKeyProviders.has(e.contextKey.key)||this.globalContextKeys.has(e.contextKey.key))throw new Error(`A context key provider for key ${e.contextKey.key} already exists.`);this.contextKeyProviders.set(e.contextKey.key,e);const t=()=>{for(const t of this.groups)this.updateRegisteredContextKey(t,e)};t();const i=e.onDidChange?.((()=>t()));return(0,a.s)((()=>{i?.dispose(),this.globalContextKeys.delete(e.contextKey.key),this.scopedContextKeys.forEach((t=>t.delete(e.contextKey.key))),this.contextKeyProviders.delete(e.contextKey.key),this.registeredContextKeys.forEach((t=>t.delete(e.contextKey.key)))}))}registerGroupContextKeyProvidersListeners(e){const t=e.onDidActiveEditorChange((()=>{for(const t of this.contextKeyProviders.values())this.updateRegisteredContextKey(e,t)}));this.contextKeyProviderDisposables.set(e.id,t)}updateRegisteredContextKey(e,t){let i=this.registeredContextKeys.get(e.id);i||(i=new Map,this.registeredContextKeys.set(e.id,i));let o=i.get(t.contextKey.key);o||(o=this.bind(t.contextKey,e),i.set(t.contextKey.key,o)),o.set(t.getGroupContextKeyValue(e))}get partOptions(){return this.mainPart.partOptions}get onDidChangeEditorPartOptions(){return this.mainPart.onDidChangeEditorPartOptions}};Ni=Bi=(0,o.C)([(0,o.Q)(0,s._Y),(0,o.Q)(1,si.C),(0,o.Q)(2,c.G),(0,o.Q)(3,Vi.f),(0,o.Q)(4,x.f)],Ni)},50163:(e,t,i)=>{i.d(t,{x:()=>F});var o=i(92518),n=i(25934),s=i(74670),r=i(39924),a=i(28672),c=i(24821),d=i(76390),h=i(19660),l=i(76962),u=i(68836),p=i(85655),g=i(87276),m=i(69747),b=i(1180),w=i(1661),v=i(92986),f=i(26658),y=i(4859);class C{constructor(e,t,i,o,n,s){this.viewDescriptorService=e,this.targetContainerLocation=t,this.orientation=i,this.openComposite=o,this.moveComposite=n,this.getItems=s}drop(e,t,i,o){const n=e.getData();if("composite"===n.type){const e=this.viewDescriptorService.getViewContainerById(n.id);this.viewDescriptorService.getViewContainerLocation(e)===this.targetContainerLocation?t&&this.moveComposite(n.id,t,o):this.viewDescriptorService.moveViewContainerToLocation(e,this.targetContainerLocation,this.getTargetIndex(t,o),"dnd")}if("view"===n.type){const e=this.viewDescriptorService.getViewDescriptorById(n.id);if(e&&e.canMoveView){this.viewDescriptorService.moveViewToLocation(e,this.targetContainerLocation,"dnd");const i=this.viewDescriptorService.getViewContainerByViewId(e.id);t&&this.moveComposite(i.id,t,o),this.openComposite(i.id,!0).then((t=>{t?.openView(e.id,!0)}))}}}onDragEnter(e,t,i){return this.canDrop(e,t)}onDragOver(e,t,i){return this.canDrop(e,t)}getTargetIndex(e,t){if(!e)return;const i=this.getItems(),o=0===this.orientation?t?.horizontallyBefore:t?.verticallyBefore;return i.filter((e=>e.visible)).findIndex((t=>t.id===e))+(o?0:1)}canDrop(e,t){const i=e.getData();if("composite"===i.type){const e=this.viewDescriptorService.getViewContainerById(i.id);return this.viewDescriptorService.getViewContainerLocation(e)!==this.targetContainerLocation||i.id!==t}{const e=this.viewDescriptorService.getViewDescriptorById(i.id);return!(!e||!e.canMoveView)}}}class S{constructor(e,t,i,o,n){this.compositeBarContainer=e,this.actionBarContainer=t,this.compositeBarModel=i,this.dndHandler=o,this.orientation=n,this.insertDropBefore=void 0}onDragOver(e){const t=this.compositeBarModel.visibleItems;if(!t.length||e.eventData.target&&(0,u.QX)(e.eventData.target,this.actionBarContainer))return void(this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!0));const i=this.insertAtFront(this.actionBarContainer,e.eventData),o=i?t[0]:t[t.length-1],n=this.dndHandler.onDragOver(e.dragAndDropData,o.id,e.eventData);(0,f.FW)(e.eventData.dataTransfer,"move",n),this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,n,i,!0)}onDragLeave(e){this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!1)}onDragEnd(e){this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!1)}onDrop(e){const t=this.compositeBarModel.visibleItems;let i;t.length&&(i=this.insertAtFront(this.actionBarContainer,e.eventData)?t[0].id:t[t.length-1].id),this.dndHandler.drop(e.dragAndDropData,i,e.eventData,this.insertDropBefore),this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!1)}insertAtFront(e,t){const i=e.getBoundingClientRect(),o=t.clientX,n=t.clientY;switch(this.orientation){case 0:return o<i.left;case 1:return n<i.top}}updateFromDragging(e,t,i,o){if(e.classList.toggle("dragged-over",o),e.classList.toggle("dragged-over-head",t&&i),e.classList.toggle("dragged-over-tail",t&&!i),t)return{verticallyBefore:i,horizontallyBefore:i}}}let k=class extends m.x{constructor(e,t,i,o,n){super(),this.options=t,this.instantiationService=i,this.contextMenuService=o,this.viewDescriptorService=n,this._onDidChange=this._register(new w.vl),this.onDidChange=this._onDidChange.event,this.model=new _(e,t),this.visibleComposites=[],this.compositeSizeInBar=new Map,this.computeSizes(this.model.visibleItems)}getCompositeBarItems(){return[...this.model.items]}setCompositeBarItems(e){this.model.setItems(e),this.updateCompositeSwitcher(!0)}getPinnedComposites(){return this.model.pinnedItems}getPinnedCompositeIds(){return this.getPinnedComposites().map((e=>e.id))}getVisibleComposites(){return this.model.visibleItems}create(e){const t=e.appendChild((0,u.$)(".composite-bar"));this.compositeSwitcherBar=this._register(new h.E(t,{actionViewItemProvider:(e,t)=>{if(e instanceof l.LN)return this.compositeOverflowActionViewItem;const i=this.model.findItem(e.id);return i&&this.instantiationService.createInstance(l.uk,{...t,draggable:!0,colors:this.options.colors,icon:this.options.icon,hoverOptions:this.options.activityHoverOptions,compact:this.options.compact},e,i.pinnedAction,i.toggleBadgeAction,(e=>this.options.getContextMenuActionsForComposite(e)),(()=>this.getContextMenuActions()),this.options.dndHandler,this)},orientation:this.options.orientation,ariaLabel:(0,n.kg)(11380,"Active View Switcher"),ariaRole:"tablist",preventLoopNavigation:this.options.preventLoopNavigation,triggerKeys:{keyDown:!0}})),this._register((0,u.ko)(e,u.Bx.CONTEXT_MENU,(t=>this.showContextMenu((0,u.zk)(e),t)))),this._register(y.q.addTarget(e)),this._register((0,u.ko)(e,y.B.Contextmenu,(t=>this.showContextMenu((0,u.zk)(e),t))));const i=new S(e,t,this.model,this.options.dndHandler,this.options.orientation);return this._register(f.eU.INSTANCE.registerTarget(e,i)),t}focus(e){this.compositeSwitcherBar?.focus(e)}recomputeSizes(){this.computeSizes(this.model.visibleItems),this.updateCompositeSwitcher()}layout(e){this.dimension=e,0!==e.height&&0!==e.width&&(0===this.compositeSizeInBar.size&&this.computeSizes(this.model.visibleItems),this.updateCompositeSwitcher())}addComposite({id:e,name:t,order:i,requestedIndex:o}){this.model.add(e,t,i,o)&&(this.computeSizes([this.model.findItem(e)]),this.updateCompositeSwitcher())}removeComposite(e){this.isPinned(e)&&this.unpin(e),this.model.remove(e)&&this.updateCompositeSwitcher()}hideComposite(e){this.model.hide(e)&&(this.resetActiveComposite(e),this.updateCompositeSwitcher())}activateComposite(e){const t=this.model.activeItem;this.model.activate(e)&&(-1===this.visibleComposites.indexOf(e)||this.model.activeItem&&!this.model.activeItem.pinned||t&&!t.pinned)&&this.updateCompositeSwitcher()}deactivateComposite(e){const t=this.model.activeItem;this.model.deactivate()&&t&&!t.pinned&&this.updateCompositeSwitcher()}async pin(e,t){this.model.setPinned(e,!0)&&(this.updateCompositeSwitcher(),t&&(await this.options.openComposite(e),this.activateComposite(e)))}unpin(e){this.model.setPinned(e,!1)&&(this.updateCompositeSwitcher(),this.resetActiveComposite(e))}areBadgesEnabled(e){return this.viewDescriptorService.getViewContainerBadgeEnablementState(e)}toggleBadgeEnablement(e){this.viewDescriptorService.setViewContainerBadgeEnablementState(e,!this.areBadgesEnabled(e)),this.updateCompositeSwitcher();const t=this.model.findItem(e);t&&(t.activityAction.activity=t.activityAction.activity)}resetActiveComposite(e){const t=this.options.getDefaultCompositeId();if(this.model.activeItem&&this.model.activeItem.id===e)if(this.deactivateComposite(e),t&&t!==e&&this.isPinned(t))this.options.openComposite(t,!0);else{const t=this.visibleComposites.find((t=>t!==e));t&&this.options.openComposite(t)}}isPinned(e){const t=this.model.findItem(e);return t?.pinned}move(e,t,i){if(void 0!==i){const o=this.model.items.findIndex((t=>t.id===e));let n=this.model.items.findIndex((e=>e.id===t));o>=0&&n>=0&&(!i&&o>n&&n++,i&&o<n&&n--,n<this.model.items.length&&n>=0&&n!==o&&this.model.move(this.model.items[o].id,this.model.items[n].id)&&setTimeout((()=>this.updateCompositeSwitcher()),0))}else this.model.move(e,t)&&setTimeout((()=>this.updateCompositeSwitcher()),0)}getAction(e){const t=this.model.findItem(e);return t?.activityAction}computeSizes(e){const t=this.options.compositeSize;if(t)e.forEach((e=>this.compositeSizeInBar.set(e.id,t)));else{const t=this.compositeSwitcherBar;if(t&&this.dimension&&0!==this.dimension.height&&0!==this.dimension.width){const i=t.viewItems.length;t.push(e.map((e=>e.activityAction))),e.forEach(((e,o)=>this.compositeSizeInBar.set(e.id,1===this.options.orientation?t.getHeight(i+o):t.getWidth(i+o)))),e.forEach((()=>t.pull(t.viewItems.length-1)))}}}updateCompositeSwitcher(e){const t=this.compositeSwitcherBar;if(!t||!this.dimension)return;let i=this.model.visibleItems.filter((e=>e.pinned||this.model.activeItem&&this.model.activeItem.id===e.id)).map((e=>e.id)),o=i.length;const n=i.length;let s=0;const r=1===this.options.orientation?this.dimension.height:this.dimension.width;for(let e=0;e<i.length;e++){const t=this.compositeSizeInBar.get(i[e]);if(s+t>r){o=e;break}s+=t}for(n>o&&(i=i.slice(0,o)),this.model.activeItem&&i.every((e=>!!this.model.activeItem&&e!==this.model.activeItem.id))&&(s+=this.compositeSizeInBar.get(this.model.activeItem.id),i.push(this.model.activeItem.id));s>r&&i.length;){const e=i.length>1?i.splice(i.length-2,1)[0]:i.pop();s-=this.compositeSizeInBar.get(e)}for(n>i.length&&(s+=this.options.overflowActionSize);s>r&&i.length;){const e=i.length>1&&i[i.length-1]===this.model.activeItem?.id?i.splice(i.length-2,1)[0]:i.pop();s-=this.compositeSizeInBar.get(e)}n===i.length&&this.compositeOverflowAction&&(t.pull(t.length()-1),this.compositeOverflowAction.dispose(),this.compositeOverflowAction=void 0,this.compositeOverflowActionViewItem?.dispose(),this.compositeOverflowActionViewItem=void 0);const a=[];this.visibleComposites.forEach(((e,t)=>{i.includes(e)||a.push(t)})),a.reverse().forEach((e=>{t.pull(e),this.visibleComposites.splice(e,1)})),i.forEach(((e,i)=>{const o=this.visibleComposites.indexOf(e);i!==o&&(-1!==o&&(t.pull(o),this.visibleComposites.splice(o,1)),t.push(this.model.findItem(e).activityAction,{label:!0,icon:this.options.icon,index:i}),this.visibleComposites.splice(i,0,e))})),n>i.length&&!this.compositeOverflowAction&&(this.compositeOverflowAction=this._register(this.instantiationService.createInstance(l.LN,(()=>{this.compositeOverflowActionViewItem?.showMenu()}))),this.compositeOverflowActionViewItem=this._register(this.instantiationService.createInstance(l.Tu,this.compositeOverflowAction,(()=>this.getOverflowingComposites()),(()=>this.model.activeItem?this.model.activeItem.id:void 0),(e=>{const t=this.model.findItem(e);return t?.activity[0]?.badge}),this.options.getOnCompositeClickAction,this.options.colors,this.options.activityHoverOptions)),t.push(this.compositeOverflowAction,{label:!1,icon:!0})),e||this._onDidChange.fire()}getOverflowingComposites(){let e=this.model.visibleItems.filter((e=>e.pinned)).map((e=>e.id));return this.model.activeItem&&!this.model.activeItem.pinned&&e.push(this.model.activeItem.id),e=e.filter((e=>!this.visibleComposites.includes(e))),this.model.visibleItems.filter((t=>e.includes(t.id))).map((e=>({id:e.id,name:this.getAction(e.id)?.label||e.name})))}showContextMenu(e,t){u.fs.stop(t,!0);const i=new p.P(e,t);this.contextMenuService.showContextMenu({getAnchor:()=>i,getActions:()=>this.getContextMenuActions(t)})}getContextMenuActions(e){const t=this.model.visibleItems.map((({id:e,name:t,activityAction:i})=>{const o=this.isPinned(e);return(0,d.ih)({id:e,label:this.getAction(e).label||t||e,checked:o,enabled:i.enabled&&(!o||this.getPinnedCompositeIds().length>1),run:()=>{this.isPinned(e)?this.unpin(e):this.pin(e,!0)}})}));return this.options.fillExtraContextMenuActions(t,e),t}};k=(0,o.C)([(0,o.Q)(2,a._Y),(0,o.Q)(3,g.Z),(0,o.Q)(4,v.X)],k);class _{get items(){return this._items}constructor(e,t){this._items=[],this.options=t,this.setItems(e)}setItems(e){this._items=[],this._items=e.map((e=>this.createCompositeBarItem(e.id,e.name,e.order,e.pinned,e.visible)))}get visibleItems(){return this.items.filter((e=>e.visible))}get pinnedItems(){return this.items.filter((e=>e.visible&&e.pinned))}createCompositeBarItem(e,t,i,o,n){const s=this.options;return{id:e,name:t,pinned:o,order:i,visible:n,activity:[],get activityAction(){return s.getActivityAction(e)},get pinnedAction(){return s.getCompositePinnedAction(e)},get toggleBadgeAction(){return s.getCompositeBadgeAction(e)}}}add(e,t,i,o){const n=this.findItem(e);if(n){let e=!1;return n.name=t,(0,b.z)(i)||(e=n.order!==i,n.order=i),n.visible||(n.visible=!0,e=!0),e}{const n=this.createCompositeBarItem(e,t,i,!0,!0);if((0,b.z)(o))if((0,b.z)(i))this.items.push(n);else{let e=0;for(;e<this.items.length&&"number"==typeof this.items[e].order&&this.items[e].order<i;)e++;this.items.splice(e,0,n)}else{let e=0,t=o;for(;t>0&&e<this.items.length;)this.items[e++].visible&&t--;this.items.splice(e,0,n)}return!0}}remove(e){for(let t=0;t<this.items.length;t++)if(this.items[t].id===e)return this.items.splice(t,1),!0;return!1}hide(e){for(const t of this.items)if(t.id===e)return!!t.visible&&(t.visible=!1,!0);return!1}move(e,t){const i=this.findIndex(e),o=this.findIndex(t);if(-1===i||-1===o)return!1;const n=this.items.splice(i,1)[0];return this.items.splice(o,0,n),n.pinned=!0,!0}setPinned(e,t){for(const i of this.items)if(i.id===e)return i.pinned!==t&&(i.pinned=t,!0);return!1}activate(e){if(!this.activeItem||this.activeItem.id!==e){this.activeItem&&this.deactivate();for(const t of this.items)if(t.id===e)return this.activeItem=t,this.activeItem.activityAction.activate(),!0}return!1}deactivate(){return!!this.activeItem&&(this.activeItem.activityAction.deactivate(),this.activeItem=void 0,!0)}findItem(e){return this.items.filter((t=>t.id===e))[0]}findIndex(e){for(let t=0;t<this.items.length;t++)if(this.items[t].id===e)return t;return-1}}var x,E=i(68158),D=i(64533),I=i(44622),V=i(19871),M=i(64788),T=i(46361),A=i(85105),L=i(71478),P=i(80914),R=i(37653),B=i(84793),O=i(819),N=i(22475);let F=class extends c.jG{constructor(e,t,i,o,n,s,r,a,d,h,l){super(),this.options=e,this.part=t,this.paneCompositePart=i,this.instantiationService=o,this.storageService=n,this.extensionService=s,this.viewDescriptorService=r,this.viewService=a,this.contextKeyService=d,this.environmentService=h,this.layoutService=l,this.viewContainerDisposables=this._register(new c.$w),this.compositeActions=new Map,this.hasExtensionsRegistered=!1,this._cachedViewContainers=void 0,this.location="workbench.parts.panel"===i.partId?1:"workbench.parts.auxiliarybar"===i.partId?2:0,this.dndHandler=new C(this.viewDescriptorService,this.location,this.options.orientation,(async(e,t)=>await this.paneCompositePart.openPaneComposite(e,t)??null),((e,t,i)=>this.compositeBar.move(e,t,1===this.options.orientation?i?.verticallyBefore:i?.horizontallyBefore)),(()=>this.compositeBar.getCompositeBarItems()));const u=this.cachedViewContainers.map((e=>({id:e.id,name:e.name,visible:!this.shouldBeHidden(e.id,e),order:e.order,pinned:e.pinned})));this.compositeBar=this.createCompositeBar(u),this.onDidRegisterViewContainers(this.getViewContainers()),this.registerListeners()}createCompositeBar(e){return this._register(this.instantiationService.createInstance(k,e,{icon:this.options.icon,compact:this.options.compact,orientation:this.options.orientation,activityHoverOptions:this.options.activityHoverOptions,preventLoopNavigation:this.options.preventLoopNavigation,openComposite:async(e,t)=>await this.paneCompositePart.openPaneComposite(e,!t)??null,getActivityAction:e=>this.getCompositeActions(e).activityAction,getCompositePinnedAction:e=>this.getCompositeActions(e).pinnedAction,getCompositeBadgeAction:e=>this.getCompositeActions(e).badgeAction,getOnCompositeClickAction:e=>this.getCompositeActions(e).activityAction,fillExtraContextMenuActions:(e,t)=>this.options.fillExtraContextMenuActions(e,t),getContextMenuActionsForComposite:e=>this.getContextMenuActionsForComposite(e),getDefaultCompositeId:()=>this.viewDescriptorService.getDefaultViewContainer(this.location)?.id,dndHandler:this.dndHandler,compositeSize:this.options.compositeSize,overflowActionSize:this.options.overflowActionSize,colors:e=>this.options.colors(e)}))}getContextMenuActionsForComposite(e){const t=[],i=this.viewDescriptorService.getViewContainerById(e),o=this.viewDescriptorService.getDefaultViewContainerLocation(i);if(o!==this.viewDescriptorService.getViewContainerLocation(i))t.push((0,d.ih)({id:"resetLocationAction",label:(0,n.kg)(9454,"Reset Location"),run:()=>this.viewDescriptorService.moveViewContainerToLocation(i,o,void 0,"resetLocationAction")}));else{const e=this.viewDescriptorService.getViewContainerModel(i);if(1===e.allViewDescriptors.length){const o=e.allViewDescriptors[0],s=this.viewDescriptorService.getDefaultContainerById(o.id);s!==i&&t.push((0,d.ih)({id:"resetLocationAction",label:(0,n.kg)(9454,"Reset Location"),run:()=>this.viewDescriptorService.moveViewsToContainer([o],s,void 0,"resetLocationAction")}))}}return t}registerListeners(){this._register(this.viewDescriptorService.onDidChangeViewContainers((({added:e,removed:t})=>this.onDidChangeViewContainers(e,t)))),this._register(this.viewDescriptorService.onDidChangeContainerLocation((({viewContainer:e,from:t,to:i})=>this.onDidChangeViewContainerLocation(e,t,i)))),this._register(this.paneCompositePart.onDidPaneCompositeOpen((e=>this.onDidChangeViewContainerVisibility(e.getId(),!0)))),this._register(this.paneCompositePart.onDidPaneCompositeClose((e=>this.onDidChangeViewContainerVisibility(e.getId(),!1)))),this.extensionService.whenInstalledExtensionsRegistered().then((()=>{this._store.isDisposed||(this.onDidRegisterExtensions(),this._register(this.compositeBar.onDidChange((()=>{this.updateCompositeBarItemsFromStorage(!0),this.saveCachedViewContainers()}))),this._register(this.storageService.onDidChangeValue(0,this.options.pinnedViewContainersKey,this._store)((()=>this.updateCompositeBarItemsFromStorage(!1)))))}))}onDidChangeViewContainers(e,t){t.filter((({location:e})=>e===this.location)).forEach((({container:e})=>this.onDidDeregisterViewContainer(e))),this.onDidRegisterViewContainers(e.filter((({location:e})=>e===this.location)).map((({container:e})=>e)))}onDidChangeViewContainerLocation(e,t,i){t===this.location&&this.onDidDeregisterViewContainer(e),i===this.location&&this.onDidRegisterViewContainers([e])}onDidChangeViewContainerVisibility(e,t){t?this.onDidViewContainerVisible(e):this.compositeBar.deactivateComposite(e)}onDidRegisterExtensions(){this.hasExtensionsRegistered=!0;for(const{id:e}of this.cachedViewContainers){const t=this.getViewContainer(e);t?this.showOrHideViewContainer(t):this.viewDescriptorService.isViewContainerRemovedPermanently(e)?this.removeComposite(e):this.hideComposite(e)}this.saveCachedViewContainers()}onDidViewContainerVisible(e){const t=this.getViewContainer(e);t&&(this.addComposite(t),this.compositeBar.activateComposite(t.id),this.shouldBeHidden(t))&&0===this.viewDescriptorService.getViewContainerModel(t).activeViewDescriptors.length&&this.hideComposite(t.id)}create(e){return this.compositeBar.create(e)}getCompositeActions(e){let t=this.compositeActions.get(e);if(!t){const i=this.getViewContainer(e);if(i){const e=this.viewDescriptorService.getViewContainerModel(i);t={activityAction:this._register(this.instantiationService.createInstance(G,this.toCompositeBarActionItemFrom(e),this.part,this.paneCompositePart)),pinnedAction:this._register(new l.AF(this.toCompositeBarActionItemFrom(e),this.compositeBar)),badgeAction:this._register(new l.hC(this.toCompositeBarActionItemFrom(e),this.compositeBar))}}else{const i=this.cachedViewContainers.filter((t=>t.id===e))[0];t={activityAction:this._register(this.instantiationService.createInstance(W,this.toCompositeBarActionItem(e,i?.name??e,i?.icon,void 0),this.part,this.paneCompositePart)),pinnedAction:this._register(new z(e,this.compositeBar)),badgeAction:this._register(new H(e,this.compositeBar))}}this.compositeActions.set(e,t)}return t}onDidRegisterViewContainers(e){for(const t of e){this.addComposite(t),this.cachedViewContainers.filter((({id:e})=>e===t.id))[0]||this.compositeBar.pin(t.id);const e=this.paneCompositePart.getActivePaneComposite();e?.getId()===t.id&&this.compositeBar.activateComposite(t.id);const i=this.viewDescriptorService.getViewContainerModel(t);this.updateCompositeBarActionItem(t,i),this.showOrHideViewContainer(t);const o=new c.Cm;o.add(i.onDidChangeContainerInfo((()=>this.updateCompositeBarActionItem(t,i)))),o.add(i.onDidChangeActiveViewDescriptors((()=>this.showOrHideViewContainer(t)))),this.viewContainerDisposables.set(t.id,o)}}onDidDeregisterViewContainer(e){this.viewContainerDisposables.deleteAndDispose(e.id),this.removeComposite(e.id)}updateCompositeBarActionItem(e,t){const i=this.toCompositeBarActionItemFrom(t),{activityAction:o,pinnedAction:n}=this.getCompositeActions(e.id);o.updateCompositeBarActionItem(i),n instanceof z&&n.setActivity(i),this.options.recomputeSizes&&this.compositeBar.recomputeSizes(),this.saveCachedViewContainers()}toCompositeBarActionItemFrom(e){return this.toCompositeBarActionItem(e.viewContainer.id,e.title,e.icon,e.keybindingId)}toCompositeBarActionItem(e,t,i,o){let n,s;if(this.options.icon)if(V.rz.isUri(i)){s=i;const t=(0,E.Tf)(i),o=new R.v7;o.update(t);const r=`activity-${e.replace(/\./g,"-")}-${o.digest()}`,a=`.monaco-workbench .${this.options.partContainerClass} .monaco-action-bar .action-label.${r}`;n=[r,"uri-icon"],(0,u.Wt)(a,`\n\t\t\t\tmask: ${t} no-repeat 50% 50%;\n\t\t\t\tmask-size: ${this.options.iconSize}px;\n\t\t\t\t-webkit-mask: ${t} no-repeat 50% 50%;\n\t\t\t\t-webkit-mask-size: ${this.options.iconSize}px;\n\t\t\t\tmask-origin: padding;\n\t\t\t\t-webkit-mask-origin: padding;\n\t\t\t`)}else P.L0.isThemeIcon(i)&&(n=P.L0.asClassNameArray(i));return{id:e,name:t,classNames:n,iconUrl:s,keybindingId:o}}showOrHideViewContainer(e){if(this.shouldBeHidden(e))this.hideComposite(e.id);else{this.addComposite(e);const t=this.paneCompositePart.getActivePaneComposite();t?.getId()===e.id&&this.compositeBar.activateComposite(e.id)}}shouldBeHidden(e,t){const i=(0,b.Kg)(e)?this.getViewContainer(e):e,o=(0,b.Kg)(e)?e:e.id;if(i){if(!i.hideIfEmpty)return!1;if(this.viewService.isViewContainerActive(o))return!1}if(!(this.hasExtensionsRegistered||"workbench.parts.sidebar"===this.part&&this.environmentService.remoteAuthority&&L.ib)){if(t=t||this.cachedViewContainers.find((({id:e})=>e===o)),!i&&t?.isBuiltin&&t?.visible)return!1;if(t?.views?.length)return t.views.every((({when:e})=>!!e&&!this.contextKeyService.contextMatchesRules(M.M$.deserialize(e))))}return!0}addComposite(e){this.compositeBar.addComposite({id:e.id,name:"string"==typeof e.title?e.title:e.title.value,order:e.order,requestedIndex:e.requestedIndex})}hideComposite(e){this.compositeBar.hideComposite(e);const t=this.compositeActions.get(e);t&&(t.activityAction.dispose(),t.pinnedAction.dispose(),this.compositeActions.delete(e))}removeComposite(e){this.compositeBar.removeComposite(e);const t=this.compositeActions.get(e);t&&(t.activityAction.dispose(),t.pinnedAction.dispose(),this.compositeActions.delete(e))}getPinnedPaneCompositeIds(){const e=this.compositeBar.getPinnedComposites().map((e=>e.id));return this.getViewContainers().filter((e=>this.compositeBar.isPinned(e.id))).sort(((t,i)=>e.indexOf(t.id)-e.indexOf(i.id))).map((e=>e.id))}getVisiblePaneCompositeIds(){return this.compositeBar.getVisibleComposites().filter((e=>this.paneCompositePart.getActivePaneComposite()?.getId()===e.id||this.compositeBar.isPinned(e.id))).map((e=>e.id))}getPaneCompositeIds(){return this.compositeBar.getVisibleComposites().map((e=>e.id))}getContextMenuActions(){return this.compositeBar.getContextMenuActions()}focus(e){this.compositeBar.focus(e)}layout(e,t){this.compositeBar.layout(new u.fg(e,t))}getViewContainer(e){const t=this.viewDescriptorService.getViewContainerById(e);return t&&this.viewDescriptorService.getViewContainerLocation(t)===this.location?t:void 0}getViewContainers(){return this.viewDescriptorService.getViewContainersByLocation(this.location)}updateCompositeBarItemsFromStorage(e){if(this.pinnedViewContainersValue===this.getStoredPinnedViewContainersValue())return;this._placeholderViewContainersValue=void 0,this._pinnedViewContainersValue=void 0,this._cachedViewContainers=void 0;const t=[],i=this.compositeBar.getCompositeBarItems();for(const e of this.cachedViewContainers)t.push({id:e.id,name:e.name,order:e.order,pinned:e.pinned,visible:e.visible&&!!this.getViewContainer(e.id)});for(const e of this.getViewContainers())if(!t.some((({id:t})=>t===e.id))){const o=i.findIndex((({id:t})=>t===e.id));if(-1!==o){const n=i[o];t.splice(o,0,{id:e.id,name:"string"==typeof e.title?e.title:e.title.value,order:n.order,pinned:n.pinned,visible:n.visible})}else t.push({id:e.id,name:"string"==typeof e.title?e.title:e.title.value,order:e.order,pinned:!0,visible:!this.shouldBeHidden(e)})}if(e)for(const e of i)t.find((({id:t})=>t===e.id))||t.push(e);this.compositeBar.setCompositeBarItems(t)}saveCachedViewContainers(){const e=[],t=this.compositeBar.getCompositeBarItems();for(const i of t){const t=this.getViewContainer(i.id);if(t){const o=this.viewDescriptorService.getViewContainerModel(t),n=[];for(const{when:e}of o.allViewDescriptors)n.push({when:e?e.serialize():void 0});e.push({id:i.id,name:o.title,icon:V.rz.isUri(o.icon)&&this.environmentService.remoteAuthority?void 0:o.icon,views:n,pinned:i.pinned,order:i.order,visible:i.visible,isBuiltin:!t.extensionId})}else e.push({id:i.id,name:i.name,pinned:i.pinned,order:i.order,visible:!1,isBuiltin:!1})}this.storeCachedViewContainersState(e)}get cachedViewContainers(){if(void 0===this._cachedViewContainers){this._cachedViewContainers=this.getPinnedViewContainers();for(const e of this.getPlaceholderViewContainers()){const t=this._cachedViewContainers.find((t=>t.id===e.id));t&&(t.visible=e.visible??t.visible,t.name=e.name,t.icon=e.themeIcon?e.themeIcon:e.iconUrl?V.rz.revive(e.iconUrl):void 0,V.rz.isUri(t.icon)&&this.environmentService.remoteAuthority&&(t.icon=void 0),t.views=e.views,t.isBuiltin=e.isBuiltin)}for(const e of this.getViewContainersWorkspaceState()){const t=this._cachedViewContainers.find((t=>t.id===e.id));t&&(t.visible=e.visible??t.visible)}}return this._cachedViewContainers}storeCachedViewContainersState(e){const t=this.getPinnedViewContainers();this.setPinnedViewContainers(e.map((({id:e,pinned:i,order:o})=>({id:e,pinned:i,visible:Boolean(t.find((({id:t})=>t===e))?.visible),order:o})))),this.setPlaceholderViewContainers(e.map((({id:e,icon:t,name:i,views:o,isBuiltin:n})=>({id:e,iconUrl:V.rz.isUri(t)?t:void 0,themeIcon:P.L0.isThemeIcon(t)?t:void 0,name:i,isBuiltin:n,views:o})))),this.setViewContainersWorkspaceState(e.map((({id:e,visible:t})=>({id:e,visible:t}))))}getPinnedViewContainers(){return JSON.parse(this.pinnedViewContainersValue)}setPinnedViewContainers(e){this.pinnedViewContainersValue=JSON.stringify(e)}get pinnedViewContainersValue(){return this._pinnedViewContainersValue||(this._pinnedViewContainersValue=this.getStoredPinnedViewContainersValue()),this._pinnedViewContainersValue}set pinnedViewContainersValue(e){this.pinnedViewContainersValue!==e&&(this._pinnedViewContainersValue=e,this.setStoredPinnedViewContainersValue(e))}getStoredPinnedViewContainersValue(){return this.storageService.get(this.options.pinnedViewContainersKey,0,"[]")}setStoredPinnedViewContainersValue(e){this.storageService.store(this.options.pinnedViewContainersKey,e,0,0)}getPlaceholderViewContainers(){return JSON.parse(this.placeholderViewContainersValue)}setPlaceholderViewContainers(e){this.placeholderViewContainersValue=JSON.stringify(e)}get placeholderViewContainersValue(){return this._placeholderViewContainersValue||(this._placeholderViewContainersValue=this.getStoredPlaceholderViewContainersValue()),this._placeholderViewContainersValue}set placeholderViewContainersValue(e){this.placeholderViewContainersValue!==e&&(this._placeholderViewContainersValue=e,this.setStoredPlaceholderViewContainersValue(e))}getStoredPlaceholderViewContainersValue(){return this.storageService.get(this.options.placeholderViewContainersKey,0,"[]")}setStoredPlaceholderViewContainersValue(e){this.storageService.store(this.options.placeholderViewContainersKey,e,0,1)}getViewContainersWorkspaceState(){return JSON.parse(this.viewContainersWorkspaceStateValue)}setViewContainersWorkspaceState(e){this.viewContainersWorkspaceStateValue=JSON.stringify(e)}get viewContainersWorkspaceStateValue(){return this._viewContainersWorkspaceStateValue||(this._viewContainersWorkspaceStateValue=this.getStoredViewContainersWorkspaceStateValue()),this._viewContainersWorkspaceStateValue}set viewContainersWorkspaceStateValue(e){this.viewContainersWorkspaceStateValue!==e&&(this._viewContainersWorkspaceStateValue=e,this.setStoredViewContainersWorkspaceStateValue(e))}getStoredViewContainersWorkspaceStateValue(){return this.storageService.get(this.options.viewContainersWorkspaceStateKey,1,"[]")}setStoredViewContainersWorkspaceStateValue(e){this.storageService.store(this.options.viewContainersWorkspaceStateKey,e,1,1)}};F=(0,o.C)([(0,o.Q)(3,a._Y),(0,o.Q)(4,D.C),(0,o.Q)(5,I.c),(0,o.Q)(6,v.X),(0,o.Q)(7,N.R),(0,o.Q)(8,T.f),(0,o.Q)(9,A.P),(0,o.Q)(10,r.Y)],F);let G=class extends l.j{static{x=this}static{this.preventDoubleClickDelay=300}constructor(e,t,i,o,n,s,r){super(e),this.part=t,this.paneCompositePart=i,this.layoutService=o,this.telemetryService=n,this.configurationService=s,this.activityService=r,this.lastRun=0,this.updateActivity(),this._register(this.activityService.onDidChangeActivity((e=>{(0,b.Kg)(e)||e.id!==this.compositeBarActionItem.id||this.updateActivity()})))}updateCompositeBarActionItem(e){this.compositeBarActionItem=e}updateActivity(){const e=this.activityService.getViewContainerActivities(this.compositeBarActionItem.id);this.activity=e[0]}async run(e){if((0,u.Er)(e)&&2===e.button)return;const t=Date.now();if(t>this.lastRun&&t-this.lastRun<x.preventDoubleClickDelay)return;this.lastRun=t;const i=!e||!("preserveFocus"in e)||!e.preserveFocus;if("workbench.parts.activitybar"===this.part){const e=this.layoutService.isVisible("workbench.parts.sidebar"),t=this.paneCompositePart.getActivePaneComposite(),o=this.configurationService.getValue("workbench.activityBar.iconClickBehavior");if(e&&t?.getId()===this.compositeBarActionItem.id)return void("focus"===o?(this.logAction("refocus"),this.paneCompositePart.openPaneComposite(this.compositeBarActionItem.id,i)):(this.logAction("hide"),this.layoutService.setPartHidden(!0,"workbench.parts.sidebar")));this.logAction("show")}return await this.paneCompositePart.openPaneComposite(this.compositeBarActionItem.id,i),this.activate()}logAction(e){this.telemetryService.publicLog2("activityBarAction",{viewletId:this.compositeBarActionItem.id,action:e})}};G=x=(0,o.C)([(0,o.Q)(3,r.Y),(0,o.Q)(4,B.k),(0,o.Q)(5,O.p),(0,o.Q)(6,s.w)],G);class W extends G{}class z extends l.AF{constructor(e,t){super({id:e,name:e,classNames:void 0},t)}setActivity(e){this.label=e.name}}class H extends l.hC{constructor(e,t){super({id:e,name:e,classNames:void 0},t)}setCompositeBarActionItem(e){this.label=e.name}}},78775:(e,t,i)=>{i.d(t,{B:()=>j,u:()=>I});var o=i(92518),n=i(6162);(0,n.A)('.monaco-workbench .pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .actions-container{justify-content:flex-end}.monaco-workbench .pane-composite-part>.title.has-composite-bar>.global-actions .monaco-action-bar .action-item,.monaco-workbench .pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item{margin-right:4px}.monaco-workbench .pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item .action-label{outline-offset:-2px}.monaco-workbench .pane-composite-part>.title.has-composite-bar>.title-label{display:none}.monaco-workbench .pane-composite-part>.header-or-footer{background-color:var(--vscode-activityBarTop-background);padding-left:4px;padding-right:4px}.monaco-workbench .pane-composite-part>.header{border-bottom:1px solid var(--vscode-sideBarActivityBarTop-border)}.monaco-workbench .pane-composite-part>.footer{border-top:1px solid var(--vscode-sideBarActivityBarTop-border)}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container,.monaco-workbench .pane-composite-part>.title>.composite-bar-container{display:flex}.monaco-workbench .pane-composite-part>.header-or-footer .composite-bar-container{flex:1}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-label.codicon-more,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-label.codicon-more{align-items:center;color:inherit!important;display:flex;justify-content:center;margin-left:0;margin-right:0}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar{height:35px;line-height:27px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item{display:flex;font-size:11px;padding:2px 10px;text-transform:uppercase}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon{height:35px;padding:0 3px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .action-label:not(.codicon),.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .action-label:not(.codicon){height:16px;width:16px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:before{background-color:var(--insert-border-color);content:"";display:none;height:24px;opacity:0;position:absolute;transition-delay:.1s;transition-duration:0ms;transition-property:opacity;width:2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container.dragged-over>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container.dragged-over>.composite-bar>.monaco-action-bar .action-item:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container.dragged-over>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container.dragged-over>.composite-bar>.monaco-action-bar .action-item:before{display:block}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:before{left:1px;margin-left:-2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:after{margin-right:-2px;right:1px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:first-of-type:before{left:2px;margin-left:-2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:last-of-type:after{margin-right:-2px;right:2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right:before{transition-delay:0s}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container.dragged-over-head>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container.dragged-over-tail>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right+.action-item:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:last-of-type.right:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container.dragged-over-head>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container.dragged-over-tail>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right+.action-item:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:last-of-type.right:after{opacity:1}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label{border-radius:0;margin-right:0;padding:2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .action-label.codicon,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.icon) .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .action-label.codicon,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.icon) .action-label{background:none!important}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label{margin-right:0}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .badge,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .badge{align-items:center;display:flex;margin-left:8px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge{margin-left:0}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .badge .badge-content,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .badge .badge-content{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:11px;font-weight:400;height:18px;line-height:11px;min-width:18px;padding:3px 5px;position:relative;text-align:center}.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .icon-badge .badge-content{padding:3px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%;z-index:2}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact .badge-content,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact .badge-content{border-radius:16px;font-size:9px;font-weight:600;height:13px;line-height:13px;min-width:13px;padding:0 2px;position:absolute;right:0;text-align:center;top:17px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact.compact-content .badge-content,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact.compact-content .badge-content{font-size:8px;padding:0 3px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact.progress-badge .badge-content:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact.progress-badge .badge-content:before{left:1px;mask-size:11px;-webkit-mask-size:11px;top:3px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .active-item-indicator,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .active-item-indicator{bottom:0;height:100%;left:10px;overflow:hidden;pointer-events:none;position:absolute;top:-4px;width:calc(100% - 20px);z-index:1}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .active-item-indicator,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .active-item-indicator{left:2px;top:1px;width:calc(100% - 4px)}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon.checked,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon.checked{background-color:var(--vscode-activityBarTop-activeBackground)}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .active-item-indicator:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-top-style:solid;border-top-width:1px;bottom:2px;content:"";height:0;position:absolute;width:100%;z-index:1}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.clicked:not(.checked):focus .active-item-indicator:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.clicked:not(.checked):focus .active-item-indicator:before{border-top-color:transparent!important}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .active-item-indicator:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-top-color:var(--vscode-focusBorder)!important;border-top-width:2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) solid 1px!important}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.checked):hover .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.checked):hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) dashed 1px!important}.monaco-workbench .pane-composite-part .empty-pane-message-area{display:none;height:100%;width:100%}.monaco-workbench .pane-composite-part .empty-pane-message-area.visible{align-content:center;align-items:center;display:flex;justify-content:center}.monaco-workbench .pane-composite-part .empty-pane-message-area .empty-pane-message{margin:12px;text-align:center}',{});var s=i(1661),r=i(28672),a=i(72233),c=i(92986),d=i(24821),h=i(39924);(0,n.A)(".monaco-workbench .part>.content>.composite{height:100%}.monaco-workbench .part>.composite.header-or-footer,.monaco-workbench .part>.composite.title{display:flex}.monaco-workbench .part>.composite.title>.title-actions{flex:1;padding-left:5px}",{});var l=i(25934),u=i(71607),p=i(53658),g=i(19660),m=i(74504),b=i(19510),w=i(46490),v=i(91193),f=i(68836),y=i(1180),C=i(79268),S=i(44353),k=i(33825),_=i(45103),x=i(69993);class E extends b.e{constructor(e,t,i,o,n,r,a,c,h,l,u,p,g,m,b,w){super(b,w,c,t,o),this.notificationService=e,this.storageService=t,this.contextMenuService=i,this.keybindingService=n,this.hoverService=r,this.instantiationService=a,this.registry=h,this.activeCompositeSettingsKey=l,this.defaultCompositeId=u,this.nameForTelemetry=p,this.compositeCSSClass=g,this.titleForegroundColor=m,this.onDidCompositeOpen=this._register(new s.vl),this.onDidCompositeClose=this._register(new s.vl),this.mapCompositeToCompositeContainer=new Map,this.mapActionsBindingToComposite=new Map,this.instantiatedCompositeItems=new Map,this.actionsListener=this._register(new d.HE),this.lastActiveCompositeId=t.get(l,1,this.defaultCompositeId),this.toolbarHoverDelegate=this._register((0,x.bW)())}openComposite(e,t){return this.activeComposite?.getId()===e?(t&&this.activeComposite.focus(),this.activeComposite):this.element?this.doOpenComposite(e,t):void 0}doOpenComposite(e,t=!1){const i=u.r.nextId();this.currentCompositeOpenToken=i,this.activeComposite&&this.hideActiveComposite(),this.updateTitle(e);const o=this.createComposite(e,!0);if(!(this.currentCompositeOpenToken!==i||this.activeComposite&&this.activeComposite.getId()!==o.getId()))return this.activeComposite?.getId()===o.getId()?(t&&o.focus(),this.onDidCompositeOpen.fire({composite:o,focus:t}),o):(this.showComposite(o),t&&o.focus(),o&&this.onDidCompositeOpen.fire({composite:o,focus:t}),o)}createComposite(e,t){const i=this.instantiatedCompositeItems.get(e);if(i)return i.composite;const o=this.registry.getComposite(e);if(o){const i=this,n=new S.zm((0,y.eU)(this.progressBar),new class extends S.SA{constructor(){super(o.id,!!t),this._register(i.onDidCompositeOpen.event((e=>this.onScopeOpened(e.composite.getId())))),this._register(i.onDidCompositeClose.event((e=>this.onScopeClosed(e.getId()))))}}),s=this._register(this.instantiationService.createChild(new w.a([v.N,n]))),r=o.instantiate(s),a=new d.Cm;return this.instantiatedCompositeItems.set(e,{composite:r,disposable:a,progress:n}),a.add(r.onTitleAreaUpdate((()=>this.onTitleAreaUpdate(r.getId())),this)),a.add(s),r}throw new Error(`Unable to find composite with id ${e}`)}showComposite(e){this.activeComposite=e;const t=this.activeComposite.getId();t!==this.defaultCompositeId?this.storageService.store(this.activeCompositeSettingsKey,t,1,1):this.storageService.remove(this.activeCompositeSettingsKey,1),this.lastActiveCompositeId=this.activeComposite.getId();let i=this.mapCompositeToCompositeContainer.get(e.getId());if(i||(i=(0,f.$)(".composite"),i.classList.add(...this.compositeCSSClass.split(" ")),i.id=e.getId(),e.create(i),e.updateStyles(),this.mapCompositeToCompositeContainer.set(e.getId(),i)),!this.activeComposite||e.getId()!==this.activeComposite.getId())return;const o=this.getContentArea();o?.appendChild(i),(0,f.WU)(i);const n=(0,y.eU)(this.toolBar);n.actionRunner=e.getActionRunner();const s=this.registry.getComposite(e.getId());s&&s.name!==e.getTitle()&&this.updateTitle(e.getId(),e.getTitle());let r=this.mapActionsBindingToComposite.get(e.getId());r||(r=this.collectCompositeActions(e),this.mapActionsBindingToComposite.set(e.getId(),r)),r(),this.actionsListener.value=n.actionRunner.onDidRun((e=>{e.error&&!(0,p.MB)(e.error)&&this.notificationService.error(e.error)})),e.setVisible(!0),this.activeComposite&&e.getId()===this.activeComposite.getId()&&(this.contentAreaSize&&e.layout(this.contentAreaSize),this.boundarySashes&&e.setBoundarySashes(this.boundarySashes))}onTitleAreaUpdate(e){const t=this.instantiatedCompositeItems.get(e);if(t&&this.updateTitle(e,t.composite.getTitle()),this.activeComposite?.getId()===e){const e=this.collectCompositeActions(this.activeComposite);this.mapActionsBindingToComposite.set(this.activeComposite.getId(),e),e()}else this.mapActionsBindingToComposite.delete(e)}updateTitle(e,t){const i=this.registry.getComposite(e);if(!i||!this.titleLabel)return;t||(t=i.name);const o=this.keybindingService.lookupKeybinding(e);this.titleLabel.updateTitle(e,t,o?.getLabel()??void 0),(0,y.eU)(this.toolBar).setAriaLabel((0,l.kg)(11377,"{0} actions",t))}collectCompositeActions(e){const t=e?.getMenuIds(),i=e?.getActions().slice(0)||[],o=e?.getSecondaryActions().slice(0)||[],n=(0,y.eU)(this.toolBar);return n.context=this.actionsContextProvider(),()=>n.setActions((0,g.p)(i),(0,g.p)(o),t)}getActiveComposite(){return this.activeComposite}getLastActiveCompositeId(){return this.lastActiveCompositeId}hideActiveComposite(){if(!this.activeComposite)return;const e=this.activeComposite;this.activeComposite=void 0;const t=this.mapCompositeToCompositeContainer.get(e.getId());return e.setVisible(!1),t&&(t.remove(),(0,f.jD)(t)),this.progressBar?.stop().hide(),this.toolBar&&this.collectCompositeActions()(),this.onDidCompositeClose.fire(e),e}createTitleArea(e){const t=(0,f.BC)(e,(0,f.$)(".composite"));t.classList.add("title"),this.titleLabel=this.createTitleLabel(t);const i=(0,f.BC)(t,(0,f.$)(".title-actions"));return this.toolBar=this._register(this.instantiationService.createInstance(k.p,i,{actionViewItemProvider:(e,t)=>this.actionViewItemProvider(e,t),orientation:0,getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id),anchorAlignmentProvider:()=>this.getTitleAreaDropDownAnchorAlignment(),toggleMenuTitle:(0,l.kg)(11378,"Views and More Actions..."),telemetrySource:this.nameForTelemetry,hoverDelegate:this.toolbarHoverDelegate})),this.collectCompositeActions()(),t}createTitleLabel(e){const t=(0,f.BC)(e,(0,f.$)(".title-label")),i=(0,f.BC)(t,(0,f.$)("h2"));this.titleLabelElement=i;const o=this._register(this.hoverService.setupManagedHover((0,x.nZ)("mouse"),i,"")),n=this;return{updateTitle:(e,t,n)=>{this.activeComposite&&this.activeComposite.getId()!==e||(i.innerText=t,o.update(n?(0,l.kg)(11379,"{0} ({1})",t,n):t))},updateStyles:()=>{i.style.color=n.titleForegroundColor&&n.getColor(n.titleForegroundColor)||""}}}createHeaderArea(){return(0,f.$)(".composite")}createFooterArea(){return(0,f.$)(".composite")}updateStyles(){super.updateStyles(),(0,y.eU)(this.titleLabel).updateStyles()}actionViewItemProvider(e,t){return this.activeComposite?this.activeComposite.getActionViewItem(e,t):(0,C.rN)(this.instantiationService,e,t)}actionsContextProvider(){return this.activeComposite?this.activeComposite.getActionsContext():null}createContentArea(e){const t=(0,f.BC)(e,(0,f.$)(".content"));return this.progressBar=this._register(new m.z(t,_.oJ)),this.progressBar.hide(),t}getProgressIndicator(e){const t=this.instantiatedCompositeItems.get(e);return t?t.progress:void 0}getTitleAreaDropDownAnchorAlignment(){return 1}layout(e,t,i,o){super.layout(e,t,i,o),this.contentAreaSize=f.fg.lift(super.layoutContents(e,t).contentSize),this.activeComposite?.layout(this.contentAreaSize)}setBoundarySashes(e){this.boundarySashes=e,this.activeComposite?.setBoundarySashes(e)}removeComposite(e){if(this.activeComposite?.getId()===e)return!1;this.mapCompositeToCompositeContainer.delete(e),this.mapActionsBindingToComposite.delete(e);const t=this.instantiatedCompositeItems.get(e);return t&&(t.composite.dispose(),(0,d.AS)(t.disposable),this.instantiatedCompositeItems.delete(e)),!0}dispose(){this.mapCompositeToCompositeContainer.clear(),this.mapActionsBindingToComposite.clear(),this.instantiatedCompositeItems.forEach((e=>{e.composite.dispose(),(0,d.AS)(e.disposable)})),this.instantiatedCompositeItems.clear(),super.dispose()}}var D,I,V=i(50163),M=i(93152),T=i(54521),A=i(64533),L=i(87276),P=i(76257),R=i(40240),B=i(46361),O=i(44622),N=i(26658),F=i(5336),G=i(95915),W=i(63288),z=i(4141),H=i(4859),Q=i(85655),U=i(76390),$=i(73586),K=i(70348);!function(e){e[e.TOP=0]="TOP",e[e.TITLE=1]="TITLE",e[e.BOTTOM=2]="BOTTOM"}(I||(I={}));let j=class extends E{static{D=this}static{this.MIN_COMPOSITE_BAR_WIDTH=50}get snap(){return this.layoutService.isVisible(this.partId)||!!this.paneCompositeBar.value?.getVisiblePaneCompositeIds().length}get onDidPaneCompositeOpen(){return s.Jh.map(this.onDidCompositeOpen.event,(e=>e.composite))}constructor(e,t,i,o,n,s,r,c,h,l,u,p,g,m,b,w,v,f,y,C){let S=0,k=a.Fd.Viewlets,_=W.D8.SidebarTitle;"workbench.parts.panel"===e?(S=1,k=a.Fd.Panels,_=W.D8.PanelTitle):"workbench.parts.auxiliarybar"===e&&(S=2,k=a.Fd.Auxiliary,_=W.D8.AuxiliaryBarTitle),super(h,l,u,p,g,m,b,w,M.O.as(k),i,v.getDefaultViewContainer(S)?.id||"",s,r,c,e,t),this.partId=e,this.activePaneContextKey=o,this.paneFocusContextKey=n,this.viewDescriptorService=v,this.contextKeyService=f,this.extensionService=y,this.menuService=C,this.onDidPaneCompositeClose=this.onDidCompositeClose.event,this.headerFooterCompositeBarDispoables=this._register(new d.Cm),this.paneCompositeBar=this._register(new d.HE),this.compositeBarPosition=void 0,this.blockOpening=!1,this.location=S,this.globalActions=this._register(this.instantiationService.createInstance(G.S,_,void 0,void 0)),this.registerListeners()}registerListeners(){this._register(this.onDidPaneCompositeOpen((e=>this.onDidOpen(e)))),this._register(this.onDidPaneCompositeClose(this.onDidClose,this)),this._register(this.globalActions.onDidChange((()=>this.updateGlobalToolbarActions()))),this._register(this.registry.onDidDeregister((e=>{const t=this.viewDescriptorService.getViewContainersByLocation(this.location).filter((e=>this.viewDescriptorService.getViewContainerModel(e).activeViewDescriptors.length>0));if(t.length){if(this.getActiveComposite()?.getId()===e.id){const e=this.viewDescriptorService.getDefaultViewContainer(this.location)?.id,i=t.filter((t=>t.id===e))[0]||t[0];this.doOpenPaneComposite(i.id)}}else this.layoutService.setPartHidden(!0,this.partId);this.removeComposite(e.id)}))),this._register(this.extensionService.onDidRegisterExtensions((()=>{this.layoutCompositeBar()})))}onDidOpen(e){this.activePaneContextKey.set(e.getId())}onDidClose(e){const t=e.getId();this.activePaneContextKey.get()===t&&this.activePaneContextKey.reset()}showComposite(e){super.showComposite(e),this.layoutCompositeBar(),this.layoutEmptyMessage()}hideActiveComposite(){const e=super.hideActiveComposite();return this.layoutCompositeBar(),this.layoutEmptyMessage(),e}create(e){this.element=e,this.element.classList.add("pane-composite-part"),super.create(e);const t=this.getContentArea();t&&this.createEmptyPaneMessage(t),this.updateCompositeBar();const i=this._register((0,f.w5)(e));this._register(i.onDidFocus((()=>this.paneFocusContextKey.set(!0)))),this._register(i.onDidBlur((()=>this.paneFocusContextKey.set(!1))))}createEmptyPaneMessage(e){this.emptyPaneMessageElement=document.createElement("div"),this.emptyPaneMessageElement.classList.add("empty-pane-message-area");const t=document.createElement("div");t.classList.add("empty-pane-message"),t.innerText=(0,l.kg)(9451,"Drag a view here to display."),this.emptyPaneMessageElement.appendChild(t),e.appendChild(this.emptyPaneMessageElement),this._register(N.eU.INSTANCE.registerTarget(this.element,{onDragOver:e=>{if(f.fs.stop(e.eventData,!0),this.paneCompositeBar.value){const t=this.paneCompositeBar.value.dndHandler.onDragEnter(e.dragAndDropData,void 0,e.eventData);(0,N.FW)(e.eventData.dataTransfer,"move",t)}},onDragEnter:e=>{if(f.fs.stop(e.eventData,!0),this.paneCompositeBar.value){const t=this.paneCompositeBar.value.dndHandler.onDragEnter(e.dragAndDropData,void 0,e.eventData);this.emptyPaneMessageElement.style.backgroundColor=t&&this.theme.getColor(F.Wi)?.toString()||""}},onDragLeave:e=>{f.fs.stop(e.eventData,!0),this.emptyPaneMessageElement.style.backgroundColor=""},onDragEnd:e=>{f.fs.stop(e.eventData,!0),this.emptyPaneMessageElement.style.backgroundColor=""},onDrop:e=>{if(f.fs.stop(e.eventData,!0),this.emptyPaneMessageElement.style.backgroundColor="",this.paneCompositeBar.value)this.paneCompositeBar.value.dndHandler.drop(e.dragAndDropData,void 0,e.eventData);else{const t=e.dragAndDropData.getData();if("composite"===t.type){const e=this.viewDescriptorService.getViewContainerById(t.id);this.viewDescriptorService.moveViewContainerToLocation(e,this.location,void 0,"dnd"),this.openPaneComposite(e.id,!0)}else if("view"===t.type){const e=this.viewDescriptorService.getViewDescriptorById(t.id);if(e&&e.canMoveView){this.viewDescriptorService.moveViewToLocation(e,this.location,"dnd");const t=this.viewDescriptorService.getViewContainerByViewId(e.id);this.openPaneComposite(t.id,!0).then((t=>{t?.openView(e.id,!0)}))}}}}}))}createTitleArea(e){const t=super.createTitleArea(e);this._register((0,f.ko)(t,f.Bx.CONTEXT_MENU,(e=>{this.onTitleAreaContextMenu(new Q.P((0,f.zk)(t),e))}))),this._register(H.q.addTarget(t)),this._register((0,f.ko)(t,H.B.Contextmenu,(e=>{this.onTitleAreaContextMenu(new Q.P((0,f.zk)(t),e))})));const i=t.appendChild((0,f.$)(".global-actions"));return this.globalToolBar=this._register(this.instantiationService.createInstance(k.p,i,{actionViewItemProvider:(e,t)=>this.actionViewItemProvider(e,t),orientation:0,getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id),anchorAlignmentProvider:()=>this.getTitleAreaDropDownAnchorAlignment(),toggleMenuTitle:(0,l.kg)(9452,"More Actions..."),hoverDelegate:this.toolbarHoverDelegate,hiddenItemStrategy:-1})),this.updateGlobalToolbarActions(),t}createTitleLabel(e){this.titleContainer=e;const t=super.createTitleLabel(e);return this.titleLabelElement.draggable=!0,this._register(N.eU.INSTANCE.registerDraggable(this.titleLabelElement,(()=>({type:"composite",id:this.getActivePaneComposite().getId()})),{})),t}updateCompositeBar(e=!1){const t=void 0!==this.compositeBarPosition,i=this.shouldShowCompositeBar(),o=this.compositeBarPosition,n=i?this.getCompositeBarPosition():void 0;if(!e&&o===n)return;if(t){const e=o===I.TITLE?this.titleContainer:this.headerFooterCompositeBarContainer;if(!this.paneCompositeBarContainer||!this.paneCompositeBar.value||!e)throw new Error("Composite bar containers should exist when removing the previous composite bar");this.paneCompositeBarContainer.remove(),this.paneCompositeBarContainer=void 0,this.paneCompositeBar.value=void 0,e.classList.remove("has-composite-bar"),o===I.TOP?this.removeFooterHeaderArea(!0):o===I.BOTTOM&&this.removeFooterHeaderArea(!1)}let s;switch(n){case I.TOP:s=this.createHeaderArea();break;case I.TITLE:s=this.titleContainer;break;case I.BOTTOM:s=this.createFooterArea()}if(i){if(this.paneCompositeBarContainer||this.paneCompositeBar.value||!s)throw new Error("Invalid composite bar state when creating the new composite bar");s.classList.add("has-composite-bar"),this.paneCompositeBarContainer=(0,f.Hs)(s,(0,f.$)(".composite-bar-container")),this.paneCompositeBar.value=this.createCompositeBar(),this.paneCompositeBar.value.create(this.paneCompositeBarContainer),n===I.TOP?this.setHeaderArea(s):n===I.BOTTOM&&this.setFooterArea(s)}this.compositeBarPosition=n,e&&this.layoutCompositeBar()}createHeaderArea(){const e=super.createHeaderArea();return this.createHeaderFooterCompositeBarArea(e)}createFooterArea(){const e=super.createFooterArea();return this.createHeaderFooterCompositeBarArea(e)}createHeaderFooterCompositeBarArea(e){if(this.headerFooterCompositeBarContainer)throw new Error("Header or Footer composite bar already exists");return this.headerFooterCompositeBarContainer=e,this.headerFooterCompositeBarDispoables.add((0,f.ko)(e,f.Bx.CONTEXT_MENU,(t=>{this.onCompositeBarAreaContextMenu(new Q.P((0,f.zk)(e),t))}))),this.headerFooterCompositeBarDispoables.add(H.q.addTarget(e)),this.headerFooterCompositeBarDispoables.add((0,f.ko)(e,H.B.Contextmenu,(t=>{this.onCompositeBarAreaContextMenu(new Q.P((0,f.zk)(e),t))}))),e}removeFooterHeaderArea(e){this.headerFooterCompositeBarContainer=void 0,this.headerFooterCompositeBarDispoables.clear(),e?this.removeHeaderArea():this.removeFooterArea()}createCompositeBar(){return this.instantiationService.createInstance(V.x,this.getCompositeBarOptions(),this.partId,this)}onTitleAreaUpdate(e){super.onTitleAreaUpdate(e),this.layoutCompositeBar()}async openPaneComposite(e,t){return"string"==typeof e&&this.getPaneComposite(e)?this.doOpenPaneComposite(e,t):(await this.extensionService.whenInstalledExtensionsRegistered(),"string"==typeof e&&this.getPaneComposite(e)?this.doOpenPaneComposite(e,t):void 0)}doOpenPaneComposite(e,t){if(!this.blockOpening){if(!this.layoutService.isVisible(this.partId))try{this.blockOpening=!0,this.layoutService.setPartHidden(!1,this.partId)}finally{this.blockOpening=!1}return this.openComposite(e,t)}}getPaneComposite(e){return this.registry.getPaneComposite(e)}getPaneComposites(){return this.registry.getPaneComposites().sort(((e,t)=>"number"!=typeof e.order?1:"number"!=typeof t.order?-1:e.order-t.order))}getPinnedPaneCompositeIds(){return this.paneCompositeBar.value?.getPinnedPaneCompositeIds()??[]}getVisiblePaneCompositeIds(){return this.paneCompositeBar.value?.getVisiblePaneCompositeIds()??[]}getPaneCompositeIds(){return this.paneCompositeBar.value?.getPaneCompositeIds()??[]}getActivePaneComposite(){return this.getActiveComposite()}getLastActivePaneCompositeId(){return this.getLastActiveCompositeId()}hideActivePaneComposite(){this.layoutService.isVisible(this.partId)&&this.layoutService.setPartHidden(!0,this.partId),this.hideActiveComposite()}focusCompositeBar(){this.paneCompositeBar.value?.focus()}layout(e,t,i,o){this.layoutService.isVisible(this.partId)&&(this.contentDimension=new f.fg(e,t),super.layout(this.contentDimension.width,this.contentDimension.height,i,o),this.layoutCompositeBar(),this.layoutEmptyMessage())}layoutCompositeBar(){if(this.contentDimension&&this.dimension&&this.paneCompositeBar.value){const e=this.compositeBarPosition===I.TITLE?16:8,t="workbench.parts.panel"===this.partId?0:1;let i=this.contentDimension.width-e-t;i=Math.max(D.MIN_COMPOSITE_BAR_WIDTH,i-this.getToolbarWidth()),this.paneCompositeBar.value.layout(i,this.dimension.height)}}layoutEmptyMessage(){const e=!this.getActiveComposite();this.emptyPaneMessageElement?.classList.toggle("visible",e),e&&this.titleLabel?.updateTitle("","")}updateGlobalToolbarActions(){const e=this.globalActions.getPrimaryActions(),t=this.globalActions.getSecondaryActions();this.globalToolBar?.setActions((0,g.p)(e),(0,g.p)(t))}getToolbarWidth(){return this.toolBar&&this.compositeBarPosition===I.TITLE&&this.getActivePaneComposite()?this.toolBar.getItemsWidth()+4*this.toolBar.getItemsLength()+(this.globalToolBar?this.globalToolBar.getItemsWidth()+4*this.globalToolBar.getItemsLength():0)+5:0}onTitleAreaContextMenu(e){if(this.shouldShowCompositeBar()&&this.getCompositeBarPosition()===I.TITLE)return this.onCompositeBarContextMenu(e);{const t=this.getActivePaneComposite(),i=t?t.getContextMenuActions():[];i.length&&this.contextMenuService.showContextMenu({getAnchor:()=>e,getActions:()=>i,getActionViewItem:(e,t)=>this.actionViewItemProvider(e,t),actionRunner:t.getActionRunner(),skipTelemetry:!0})}}onCompositeBarAreaContextMenu(e){return this.onCompositeBarContextMenu(e)}onCompositeBarContextMenu(e){if(this.paneCompositeBar.value){const t=[...this.paneCompositeBar.value.getContextMenuActions()];t.length&&this.contextMenuService.showContextMenu({getAnchor:()=>e,getActions:()=>t,skipTelemetry:!0})}}getViewsSubmenuAction(){const e=this.getActivePaneComposite()?.getViewPaneContainer();if(e){const t=new d.Cm,i=[],o=t.add(this.contextKeyService.createScoped(this.element));o.createKey("viewContainer",e.viewContainer.id);const n=this.menuService.getMenuActions($.Ox,o,{shouldForwardArgs:!0,renderShortTitle:!0});return(0,C.Ot)(n,{primary:i,secondary:[]},(()=>!0)),t.dispose(),i.length>1&&i.some((e=>e.enabled))?new U.YH("views",(0,l.kg)(9453,"Views"),i):void 0}}};j=D=(0,o.C)([(0,o.Q)(8,T.O),(0,o.Q)(9,A.C),(0,o.Q)(10,L.Z),(0,o.Q)(11,h.Y),(0,o.Q)(12,P.b),(0,o.Q)(13,K.T),(0,o.Q)(14,r._Y),(0,o.Q)(15,R.G),(0,o.Q)(16,c.X),(0,o.Q)(17,B.f),(0,o.Q)(18,O.c),(0,o.Q)(19,z.e)],j)},7869:(e,t,i)=>{i.d(t,{s:()=>T});var o,n=i(92518),s=(i(80985),i(25934)),r=i(76390),a=i(47622),c=i(39924),d=i(64533),h=i(87276),l=i(76257),u=i(28672),p=i(57351),g=i(40240),m=i(5336),b=(i(86849),i(55325)),w=(i(27785),i(82437),i(32802),i(77692),i(16115),i(79849),i(17960)),v=(i(69416),i(10380),i(54521)),f=i(68836),y=i(46361),C=i(1180),S=i(44622),k=i(92986),_=i(63288),x=i(4141),E=i(78775),D=i(84261),I=i(79268),V=i(70348),M=i(819);let T=class extends E.B{static{o=this}get preferredHeight(){return.4*this.layoutService.mainContainerDimension.height}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const t=e.getOptimalWidth();return"number"==typeof t?Math.max(t,300):void 0}static{this.activePanelSettingsKey="workbench.panelpart.activepanelid"}constructor(e,t,i,n,s,r,c,d,h,l,u,p,g,m){super("workbench.parts.panel",{hasTitle:!0},o.activePanelSettingsKey,a.WN.bindTo(l),a.ml.bindTo(l),"panel","panel",void 0,e,t,i,n,s,r,c,d,h,l,u,g),this.commandService=p,this.configurationService=m,this.minimumWidth=300,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=77,this.maximumHeight=Number.POSITIVE_INFINITY,this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("workbench.panel.showLabels")&&this.updateCompositeBar(!0)})))}updateStyles(){super.updateStyles();const e=(0,C.eU)(this.getContainer());e.style.backgroundColor=this.getColor(m.WB)||"";const t=this.getColor(m.IZ)||this.getColor(b.b1)||"";e.style.borderLeftColor=t,e.style.borderRightColor=t,e.style.borderBottomColor=t;const i=this.getTitleArea();i&&(i.style.borderTopColor=this.getColor(m.IZ)||this.getColor(b.b1)||"")}getCompositeBarOptions(){return{partContainerClass:"panel",pinnedViewContainersKey:"workbench.panel.pinnedPanels",placeholderViewContainersKey:"workbench.panel.placeholderPanels",viewContainersWorkspaceStateKey:"workbench.panel.viewContainersWorkspaceState",icon:!1===this.configurationService.getValue("workbench.panel.showLabels"),orientation:0,recomputeSizes:!0,activityHoverOptions:{position:()=>2!==this.layoutService.getPanelPosition()||this.layoutService.isPanelMaximized()?2:3},fillExtraContextMenuActions:e=>this.fillExtraContextMenuActions(e),compositeSize:0,iconSize:16,compact:!0,overflowActionSize:44,colors:e=>({activeBackgroundColor:e.getColor(m.WB),inactiveBackgroundColor:e.getColor(m.WB),activeBorderBottomColor:e.getColor(m.O),activeForegroundColor:e.getColor(m.hr),inactiveForegroundColor:e.getColor(m.Iu),badgeBackground:e.getColor(w.WM),badgeForeground:e.getColor(w.zR),dragAndDropBorder:e.getColor(m.Tb)})}}fillExtraContextMenuActions(e){const t=this.menuService.getMenuActions(_.D8.PanelPositionMenu,this.contextKeyService,{shouldForwardArgs:!0}),i=this.menuService.getMenuActions(_.D8.PanelAlignmentMenu,this.contextKeyService,{shouldForwardArgs:!0}),o=[],n=[];(0,I.$u)(t,{primary:[],secondary:o}),(0,I.$u)(i,{primary:[],secondary:n});const a=this.configurationService.getValue("workbench.panel.showLabels"),c=(0,r.ih)({id:"workbench.action.panel.toggleShowLabels",label:a?(0,s.kg)(3288,"Show Icons"):(0,s.kg)(3289,"Show Labels"),run:()=>this.configurationService.updateValue("workbench.panel.showLabels",!a)});e.push(new r.wv,new r.YH("workbench.action.panel.position",(0,s.kg)(3290,"Panel Position"),o),new r.YH("workbench.action.panel.align",(0,s.kg)(3291,"Align Panel"),n),c,(0,r.ih)({id:p.rI.ID,label:(0,s.kg)(3292,"Hide Panel"),run:()=>this.commandService.executeCommand(p.rI.ID)}))}layout(e,t,i,o){let n;switch(this.layoutService.getPanelPosition()){case 1:n=new f.fg(e-1,t);break;case 3:n=new f.fg(e,t-1);break;default:n=new f.fg(e,t)}super.layout(n.width,n.height,i,o)}shouldShowCompositeBar(){return!0}getCompositeBarPosition(){return E.u.TITLE}toJSON(){return{type:"workbench.parts.panel"}}};T=o=(0,n.C)([(0,n.Q)(0,v.O),(0,n.Q)(1,d.C),(0,n.Q)(2,h.Z),(0,n.Q)(3,c.Y),(0,n.Q)(4,l.b),(0,n.Q)(5,V.T),(0,n.Q)(6,u._Y),(0,n.Q)(7,g.G),(0,n.Q)(8,k.X),(0,n.Q)(9,y.f),(0,n.Q)(10,S.c),(0,n.Q)(11,D.w),(0,n.Q)(12,x.e),(0,n.Q)(13,M.p)],T)},39371:(e,t,i)=>{i.d(t,{E:()=>T});var o=i(92518);(0,i(6162).A)(".monaco-workbench.nosidebar>.part.sidebar{display:none!important;visibility:hidden!important}.monaco-workbench .part.sidebar .title-actions .actions-container{justify-content:flex-end}.monaco-workbench .part.sidebar .title-actions .action-item{margin-right:4px}.monaco-workbench .part.sidebar>.title{background-color:var(--vscode-sideBarTitle-background)}.monaco-workbench .part.sidebar>.title>.title-label h2{text-transform:uppercase}.monaco-workbench .viewlet .collapsible.header .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .viewlet .collapsible.header .actions{width:0}.monaco-workbench .viewlet .collapsible.header.focused .actions,.monaco-workbench .viewlet .split-view-view:hover>.header .actions{flex:1;width:auto}.monaco-workbench .viewlet .collapsible.header .actions .action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;height:22px;margin-right:0;width:28px}.monaco-workbench .viewlet .collapsible.header .actions .action-label .label,.monaco-workbench .viewlet .collapsible.header.collapsed .actions{display:none}.monaco-workbench .viewlet .collapsible.header .action-label{background-repeat:no-repeat;height:16px;margin-right:.2em;width:16px}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus{outline:0!important}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label{border-radius:0;outline-offset:2px}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label:before,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label:before{left:5px;position:absolute}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before{border-top-color:var(--vscode-activityBarTop-activeBorder)!important}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-activityBarTop-foreground)!important}.monaco-workbench .sidebar.pane-composite-part>.title>.composite-bar-container{flex:1}.monaco-workbench .sidebar.part.pane-composite-part>.composite.title.has-composite-bar>.title-actions{flex:inherit}.monaco-workbench .sidebar.pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item{max-width:150px}",{});var n=i(25934),s=i(63288),r=i(39924),a=i(16409),c=i(82561);class d extends s.L{constructor(){super({id:"workbench.action.focusSideBar",title:(0,n.aS)(9450,"Focus into Primary Side Bar"),category:a.L.View,f1:!0,keybinding:{weight:200,when:null,primary:2069}})}async run(e){const t=e.get(r.Y),i=e.get(c.b);t.isVisible("workbench.parts.sidebar")||t.setPartHidden(!1,"workbench.parts.sidebar");const o=i.getActivePaneComposite(0);o?.focus()}}(0,s.ug)(d);var h,l=i(47622),u=i(64533),p=i(87276),g=i(76257),m=i(28672),b=i(40240),w=(i(86849),i(55325)),v=(i(27785),i(82437),i(32802),i(77692),i(16115),i(79849),i(17960),i(69416),i(10380),i(5336)),f=i(54521),y=i(46361),C=i(44622),S=i(1180),k=i(92986),_=i(78775),x=i(22031),E=i(819),D=i(4141),I=i(76390),V=i(71849),M=i(70348);let T=class extends _.B{static{h=this}static{this.activeViewletSettingsKey="workbench.sidebar.activeviewletid"}get snap(){return!0}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const t=e.getOptimalWidth();return"number"==typeof t?Math.max(t,300):void 0}constructor(e,t,i,o,n,s,r,a,c,d,u,p,g){super("workbench.parts.sidebar",{hasTitle:!0,borderWidth:()=>this.getColor(v.z)||this.getColor(w.b1)?1:0},h.activeViewletSettingsKey,l._N.bindTo(d),l.Qb.bindTo(d),"sideBar","viewlet",v.RX,e,t,i,o,n,s,r,a,c,d,u,g),this.configurationService=p,this.minimumWidth=170,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.priority=1,this.activityBarPart=this._register(this.instantiationService.createInstance(x.m,this)),this.rememberActivityBarVisiblePosition(),this._register(p.onDidChangeConfiguration((e=>{e.affectsConfiguration("workbench.activityBar.location")&&this.onDidChangeActivityBarLocation()}))),this.registerActions()}onDidChangeActivityBarLocation(){this.activityBarPart.hide(),this.updateCompositeBar();const e=this.getActiveComposite()?.getId();e&&this.onTitleAreaUpdate(e),this.shouldShowActivityBar()&&this.activityBarPart.show(),this.rememberActivityBarVisiblePosition()}updateStyles(){super.updateStyles();const e=(0,S.eU)(this.getContainer());e.style.backgroundColor=this.getColor(v.ly)||"",e.style.color=this.getColor(v.MH)||"";const t=this.getColor(v.z)||this.getColor(w.b1),i=0===this.layoutService.getSideBarPosition();e.style.borderRightWidth=t&&i?"1px":"",e.style.borderRightStyle=t&&i?"solid":"",e.style.borderRightColor=i&&t||"",e.style.borderLeftWidth=t&&!i?"1px":"",e.style.borderLeftStyle=t&&!i?"solid":"",e.style.borderLeftColor=i?"":t||"",e.style.outlineColor=this.getColor(v.Gc)??""}layout(e,t,i,o){this.layoutService.isVisible("workbench.parts.sidebar")&&super.layout(e,t,i,o)}getTitleAreaDropDownAnchorAlignment(){return 0===this.layoutService.getSideBarPosition()?0:1}createCompositeBar(){return this.instantiationService.createInstance(x.B,this.getCompositeBarOptions(),this.partId,this,!1)}getCompositeBarOptions(){return{partContainerClass:"sidebar",pinnedViewContainersKey:x.m.pinnedViewContainersKey,placeholderViewContainersKey:x.m.placeholderViewContainersKey,viewContainersWorkspaceStateKey:x.m.viewContainersWorkspaceStateKey,icon:!0,orientation:0,recomputeSizes:!0,activityHoverOptions:{position:()=>this.getCompositeBarPosition()===_.u.BOTTOM?3:2},fillExtraContextMenuActions:e=>{const t=this.getViewsSubmenuAction();t&&(e.push(new I.wv),e.push(t))},compositeSize:0,iconSize:16,overflowActionSize:30,colors:e=>({activeBackgroundColor:e.getColor(v.ly),inactiveBackgroundColor:e.getColor(v.ly),activeBorderBottomColor:e.getColor(v.IH),activeForegroundColor:e.getColor(v.OJ),inactiveForegroundColor:e.getColor(v.g8),badgeBackground:e.getColor(v.Nl),badgeForeground:e.getColor(v.Sj),dragAndDropBorder:e.getColor(v.gv)}),compact:!0}}shouldShowCompositeBar(){const e=this.configurationService.getValue("workbench.activityBar.location");return"top"===e||"bottom"===e}shouldShowActivityBar(){return!this.shouldShowCompositeBar()&&"hidden"!==this.configurationService.getValue("workbench.activityBar.location")}getCompositeBarPosition(){switch(this.configurationService.getValue("workbench.activityBar.location")){case"top":return _.u.TOP;case"bottom":return _.u.BOTTOM;default:return _.u.TITLE}}rememberActivityBarVisiblePosition(){const e=this.configurationService.getValue("workbench.activityBar.location");"hidden"!==e&&this.storageService.store("workbench.activityBar.location",e,0,0)}getRememberedActivityBarVisiblePosition(){switch(this.storageService.get("workbench.activityBar.location",0)){case"top":return"top";case"bottom":return"bottom";default:return"default"}}getPinnedPaneCompositeIds(){return this.shouldShowCompositeBar()?super.getPinnedPaneCompositeIds():this.activityBarPart.getPinnedPaneCompositeIds()}getVisiblePaneCompositeIds(){return this.shouldShowCompositeBar()?super.getVisiblePaneCompositeIds():this.activityBarPart.getVisiblePaneCompositeIds()}getPaneCompositeIds(){return this.shouldShowCompositeBar()?super.getPaneCompositeIds():this.activityBarPart.getPaneCompositeIds()}async focusActivityBar(){"hidden"===this.configurationService.getValue("workbench.activityBar.location")&&(await this.configurationService.updateValue("workbench.activityBar.location",this.getRememberedActivityBarVisiblePosition()),this.onDidChangeActivityBarLocation()),this.shouldShowCompositeBar()?this.focusCompositeBar():(this.layoutService.isVisible("workbench.parts.activitybar")||this.layoutService.setPartHidden(!1,"workbench.parts.activitybar"),this.activityBarPart.show(!0))}registerActions(){const e=this;this._register((0,s.ug)(class extends s.L{constructor(){super({id:V.kW,title:(0,n.aS)(3268,"Toggle Activity Bar Visibility")})}run(){const t="hidden"===e.configurationService.getValue("workbench.activityBar.location")?e.getRememberedActivityBarVisiblePosition():"hidden";return e.configurationService.updateValue("workbench.activityBar.location",t)}}))}toJSON(){return{type:"workbench.parts.sidebar"}}};T=h=(0,o.C)([(0,o.Q)(0,f.O),(0,o.Q)(1,u.C),(0,o.Q)(2,p.Z),(0,o.Q)(3,r.Y),(0,o.Q)(4,g.b),(0,o.Q)(5,M.T),(0,o.Q)(6,m._Y),(0,o.Q)(7,b.G),(0,o.Q)(8,k.X),(0,o.Q)(9,y.f),(0,o.Q)(10,C.c),(0,o.Q)(11,E.p),(0,o.Q)(12,D.e)],T)},46002:(e,t,i)=>{i.d(t,{M:()=>a});var o=i(68836),n=i(17513),s=i(69993),r=i(12707);class a{constructor(e){this._container=e}set text(e){(0,o.Ln)(this._container,...(0,r.n)(e??""))}set title(e){!this.hover&&e?this.hover=(0,n.i)().setupManagedHover((0,s.nZ)("mouse"),this._container,e):this.hover&&this.hover.update(e)}dispose(){this.hover?.dispose()}}},71849:(e,t,i)=>{i.d(t,{EQ:()=>le,En:()=>be,FV:()=>he,Qu:()=>se,So:()=>ce,WZ:()=>ee,Xp:()=>re,ZT:()=>ae,b3:()=>pe,cX:()=>me,ef:()=>ue,gw:()=>oe,kW:()=>Z,uJ:()=>de});var o=i(25934),n=i(63288),s=i(16409),r=i(819),a=i(81893),c=i(39924),d=i(28672),h=i(61478),l=i(71478),u=i(19643),p=i(77512),g=i(64788),m=i(46361),b=i(91279),w=i(92986),v=i(22475),f=i(9957),y=i(16093),C=i(82561),S=i(62179),k=i(57351),_=i(84261),x=i(47622),E=i(14956),D=i(80914),I=i(24821),V=i(63383),M=i(19730),T=i(76257),A=i(55196);const L=(0,V.pU)("menuBar",E.W6.layoutMenubar,(0,o.kg)(6865,"Represents the menu bar")),P=(0,V.pU)("activity-bar-left",E.W6.layoutActivitybarLeft,(0,o.kg)(6866,"Represents the activity bar in the left position")),R=(0,V.pU)("activity-bar-right",E.W6.layoutActivitybarRight,(0,o.kg)(6867,"Represents the activity bar in the right position")),B=(0,V.pU)("panel-left",E.W6.layoutSidebarLeft,(0,o.kg)(6868,"Represents a side bar in the left position")),O=(0,V.pU)("panel-left-off",E.W6.layoutSidebarLeftOff,(0,o.kg)(6869,"Represents a side bar in the left position toggled off")),N=(0,V.pU)("panel-right",E.W6.layoutSidebarRight,(0,o.kg)(6870,"Represents side bar in the right position")),F=(0,V.pU)("panel-right-off",E.W6.layoutSidebarRightOff,(0,o.kg)(6871,"Represents side bar in the right position toggled off")),G=(0,V.pU)("panel-bottom",E.W6.layoutPanel,(0,o.kg)(6872,"Represents the bottom panel")),W=(0,V.pU)("statusBar",E.W6.layoutStatusbar,(0,o.kg)(6873,"Represents the status bar")),z=(0,V.pU)("panel-align-left",E.W6.layoutPanelLeft,(0,o.kg)(6874,"Represents the bottom panel alignment set to the left")),H=(0,V.pU)("panel-align-right",E.W6.layoutPanelRight,(0,o.kg)(6875,"Represents the bottom panel alignment set to the right")),Q=(0,V.pU)("panel-align-center",E.W6.layoutPanelCenter,(0,o.kg)(6876,"Represents the bottom panel alignment set to the center")),U=(0,V.pU)("panel-align-justify",E.W6.layoutPanelJustify,(0,o.kg)(6877,"Represents the bottom panel alignment set to justified")),$=(0,V.pU)("fullscreen",E.W6.screenFull,(0,o.kg)(6878,"Represents full screen")),K=(0,V.pU)("centerLayoutIcon",E.W6.layoutCentered,(0,o.kg)(6879,"Represents centered layout mode")),j=(0,V.pU)("zenMode",E.W6.target,(0,o.kg)(6880,"Represents zen mode"));(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.closeSidebar",title:(0,o.aS)(6881,"Close Primary Side Bar"),category:s.L.View,f1:!0})}run(e){e.get(c.Y).setPartHidden(!0,"workbench.parts.sidebar")}});const Z="workbench.action.toggleActivityBarVisibility";(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.toggleCenteredLayout",title:{...(0,o.aS)(6882,"Toggle Centered Layout"),mnemonicTitle:(0,o.kg)(6883,"&&Centered Layout")},precondition:x.Lu.toNegated(),category:s.L.View,f1:!0,toggled:x.Cx,menu:[{id:n.D8.MenubarAppearanceMenu,group:"1_toggle_view",order:3}]})}run(e){const t=e.get(c.Y);t.centerMainEditorLayout(!t.isMainEditorLayoutCentered())}});const Y="workbench.sideBar.location";class q extends n.L{constructor(e,t,i){super({id:e,title:t,f1:!1}),this.position=i}async run(e){const t=e.get(c.Y),i=e.get(r.p);if(t.getSideBarPosition()!==this.position)return i.updateValue(Y,(0,a.Wf)(this.position))}}class J extends q{static{this.ID="workbench.action.moveSideBarRight"}constructor(){super(J.ID,(0,o.aS)(6884,"Move Primary Side Bar Right"),1)}}class X extends q{static{this.ID="workbench.action.moveSideBarLeft"}constructor(){super(X.ID,(0,o.aS)(6885,"Move Primary Side Bar Left"),0)}}(0,n.ug)(J),(0,n.ug)(X);class ee extends n.L{static{this.ID="workbench.action.toggleSidebarPosition"}static{this.LABEL=(0,o.kg)(6886,"Toggle Primary Side Bar Position")}static getLabel(e){return 0===e.getSideBarPosition()?(0,o.kg)(6884,"Move Primary Side Bar Right"):(0,o.kg)(6885,"Move Primary Side Bar Left")}constructor(){super({id:ee.ID,title:(0,o.aS)(6886,"Toggle Primary Side Bar Position"),category:s.L.View,f1:!0})}run(e){const t=e.get(c.Y),i=e.get(r.p),o=0===t.getSideBarPosition()?"right":"left";return i.updateValue(Y,o)}}(0,n.ug)(ee);const te=(0,V.pU)("configure-layout-icon",E.W6.layout,(0,o.kg)(6887,"Icon represents workbench layout configuration."));n.ZG.appendMenuItem(n.D8.LayoutControlMenu,{submenu:n.D8.LayoutControlMenuSubmenu,title:(0,o.kg)(6888,"Configure Layout"),icon:te,group:"1_workbench_layout",when:g.M$.equals("config.workbench.layoutControl.type","menu")}),n.ZG.appendMenuItems([{id:n.D8.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:ee.ID,title:(0,o.kg)(6889,"Move Primary Side Bar Right")},when:g.M$.and(g.M$.notEquals("config.workbench.sideBar.location","right"),g.M$.equals("viewContainerLocation",(0,b._4)(0))),order:1}},{id:n.D8.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:ee.ID,title:(0,o.kg)(6890,"Move Primary Side Bar Right")},when:g.M$.and(g.M$.notEquals("config.workbench.sideBar.location","right"),g.M$.equals("viewLocation",(0,b._4)(0))),order:1}},{id:n.D8.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:ee.ID,title:(0,o.kg)(6891,"Move Primary Side Bar Left")},when:g.M$.and(g.M$.equals("config.workbench.sideBar.location","right"),g.M$.equals("viewContainerLocation",(0,b._4)(0))),order:1}},{id:n.D8.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:ee.ID,title:(0,o.kg)(6891,"Move Primary Side Bar Left")},when:g.M$.and(g.M$.equals("config.workbench.sideBar.location","right"),g.M$.equals("viewLocation",(0,b._4)(0))),order:1}},{id:n.D8.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:ee.ID,title:(0,o.kg)(6892,"Move Secondary Side Bar Left")},when:g.M$.and(g.M$.notEquals("config.workbench.sideBar.location","right"),g.M$.equals("viewLocation",(0,b._4)(2))),order:1}},{id:n.D8.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:ee.ID,title:(0,o.kg)(6893,"Move Secondary Side Bar Right")},when:g.M$.and(g.M$.equals("config.workbench.sideBar.location","right"),g.M$.equals("viewLocation",(0,b._4)(2))),order:1}}]),n.ZG.appendMenuItem(n.D8.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:ee.ID,title:(0,o.kg)(6894,"&&Move Primary Side Bar Right")},when:g.M$.notEquals("config.workbench.sideBar.location","right"),order:2}),n.ZG.appendMenuItem(n.D8.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:ee.ID,title:(0,o.kg)(6895,"&&Move Primary Side Bar Left")},when:g.M$.equals("config.workbench.sideBar.location","right"),order:2}),(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.toggleEditorVisibility",title:{...(0,o.aS)(6896,"Toggle Editor Area Visibility"),mnemonicTitle:(0,o.kg)(6897,"Show &&Editor Area")},category:s.L.View,f1:!0,toggled:x.xK,precondition:g.M$.and(x.Lu.toNegated(),g.M$.or(x.hE.isEqualTo("center"),x.pi.notEqualsTo("bottom")))})}run(e){e.get(c.Y).toggleMaximizedPanel()}}),n.ZG.appendMenuItem(n.D8.MenubarViewMenu,{group:"2_appearance",title:(0,o.kg)(6898,"&&Appearance"),submenu:n.D8.MenubarAppearanceMenu,order:1});class ie extends n.L{static{this.ID="workbench.action.toggleSidebarVisibility"}constructor(){super({id:ie.ID,title:(0,o.aS)(6899,"Toggle Primary Side Bar Visibility"),toggled:{condition:x.OD,title:(0,o.kg)(6900,"Primary Side Bar"),mnemonicTitle:(0,o.kg)(6901,"&&Primary Side Bar")},category:s.L.View,f1:!0,keybinding:{weight:200,primary:2080},menu:[{id:n.D8.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:0},{id:n.D8.MenubarAppearanceMenu,group:"2_workbench_layout",order:1}]})}run(e){const t=e.get(c.Y);t.setPartHidden(t.isVisible("workbench.parts.sidebar"),"workbench.parts.sidebar")}}(0,n.ug)(ie),n.ZG.appendMenuItems([{id:n.D8.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:ie.ID,title:(0,o.kg)(6902,"Hide Primary Side Bar")},when:g.M$.and(x.OD,g.M$.equals("viewContainerLocation",(0,b._4)(0))),order:2}},{id:n.D8.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:ie.ID,title:(0,o.kg)(6902,"Hide Primary Side Bar")},when:g.M$.and(x.OD,g.M$.equals("viewLocation",(0,b._4)(0))),order:2}},{id:n.D8.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:ie.ID,title:(0,o.kg)(6903,"Toggle Primary Side Bar"),icon:O,toggled:{condition:x.OD,icon:B}},when:g.M$.and(g.M$.or(g.M$.equals("config.workbench.layoutControl.type","toggles"),g.M$.equals("config.workbench.layoutControl.type","both")),g.M$.equals("config.workbench.sideBar.location","left")),order:0}},{id:n.D8.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:ie.ID,title:(0,o.kg)(6903,"Toggle Primary Side Bar"),icon:F,toggled:{condition:x.OD,icon:N}},when:g.M$.and(g.M$.or(g.M$.equals("config.workbench.layoutControl.type","toggles"),g.M$.equals("config.workbench.layoutControl.type","both")),g.M$.equals("config.workbench.sideBar.location","right")),order:2}}]);class oe extends n.L{static{this.ID="workbench.action.toggleStatusbarVisibility"}static{this.statusbarVisibleKey="workbench.statusBar.visible"}constructor(){super({id:oe.ID,title:{...(0,o.aS)(6904,"Toggle Status Bar Visibility"),mnemonicTitle:(0,o.kg)(6905,"S&&tatus Bar")},category:s.L.View,f1:!0,toggled:g.M$.equals("config.workbench.statusBar.visible",!0),menu:[{id:n.D8.MenubarAppearanceMenu,group:"2_workbench_layout",order:3}]})}run(e){const t=e.get(c.Y),i=e.get(r.p),o=!t.isVisible("workbench.parts.statusbar",M.Gs);return i.updateValue(oe.statusbarVisibleKey,o)}}(0,n.ug)(oe);class ne extends n.L{constructor(e,t,i,o,n,r){super({id:o,title:i,category:s.L.View,precondition:n,metadata:r?{description:r}:void 0,f1:!0}),this.settingName=e,this.value=t}run(e){return e.get(r.p).updateValue(this.settingName,this.value)}}class se extends ne{static{this.ID="workbench.action.hideEditorTabs"}constructor(){const e=g.M$.and(g.M$.equals("config.workbench.editor.showTabs","none").negate(),x.qv.negate());super("workbench.editor.showTabs","none",(0,o.aS)(6906,"Hide Editor Tabs"),se.ID,e,(0,o.aS)(6907,"Hide Tab Bar"))}}class re extends ne{static{this.ID="workbench.action.zenHideEditorTabs"}constructor(){const e=g.M$.and(g.M$.equals("config.zenMode.showTabs","none").negate(),x.qv);super("zenMode.showTabs","none",(0,o.aS)(6908,"Hide Editor Tabs in Zen Mode"),re.ID,e,(0,o.aS)(6909,"Hide Tab Bar in Zen Mode"))}}class ae extends ne{static{this.ID="workbench.action.showMultipleEditorTabs"}constructor(){const e=g.M$.and(g.M$.equals("config.workbench.editor.showTabs","multiple").negate(),x.qv.negate());super("workbench.editor.showTabs","multiple",(0,o.aS)(6910,"Show Multiple Editor Tabs"),ae.ID,e,(0,o.aS)(6911,"Show Tab Bar with multiple tabs"))}}class ce extends ne{static{this.ID="workbench.action.zenShowMultipleEditorTabs"}constructor(){const e=g.M$.and(g.M$.equals("config.zenMode.showTabs","multiple").negate(),x.qv);super("zenMode.showTabs","multiple",(0,o.aS)(6912,"Show Multiple Editor Tabs in Zen Mode"),ce.ID,e,(0,o.aS)(6913,"Show Tab Bar in Zen Mode"))}}class de extends ne{static{this.ID="workbench.action.showEditorTab"}constructor(){const e=g.M$.and(g.M$.equals("config.workbench.editor.showTabs","single").negate(),x.qv.negate());super("workbench.editor.showTabs","single",(0,o.aS)(6914,"Show Single Editor Tab"),de.ID,e,(0,o.aS)(6915,"Show Tab Bar with one Tab"))}}class he extends ne{static{this.ID="workbench.action.zenShowEditorTab"}constructor(){const e=g.M$.and(g.M$.equals("config.zenMode.showTabs","single").negate(),x.qv);super("zenMode.showTabs","single",(0,o.aS)(6916,"Show Single Editor Tab in Zen Mode"),he.ID,e,(0,o.aS)(6917,"Show Tab Bar in Zen Mode with one Tab"))}}(0,n.ug)(se),(0,n.ug)(re),(0,n.ug)(ae),(0,n.ug)(ce),(0,n.ug)(de),(0,n.ug)(he),n.ZG.appendMenuItem(n.D8.MenubarAppearanceMenu,{submenu:n.D8.EditorTabsBarShowTabsSubmenu,title:(0,o.kg)(6918,"Tab Bar"),group:"3_workbench_layout_move",order:10,when:x.qv.negate()}),n.ZG.appendMenuItem(n.D8.MenubarAppearanceMenu,{submenu:n.D8.EditorTabsBarShowTabsZenModeSubmenu,title:(0,o.kg)(6918,"Tab Bar"),group:"3_workbench_layout_move",order:10,when:x.qv});class le extends n.L{static{this.ID="workbench.action.editorActionsTitleBar"}constructor(){super({id:le.ID,title:(0,o.aS)(6919,"Move Editor Actions to Title Bar"),category:s.L.View,precondition:g.M$.equals("config.workbench.editor.editorActionsLocation","titleBar").negate(),metadata:{description:(0,o.aS)(6920,"Move Editor Actions from the tab bar to the title bar")},f1:!0})}run(e){return e.get(r.p).updateValue("workbench.editor.editorActionsLocation","titleBar")}}(0,n.ug)(le);class ue extends n.L{static{this.ID="workbench.action.editorActionsDefault"}constructor(){super({id:ue.ID,title:(0,o.aS)(6921,"Move Editor Actions to Tab Bar"),category:s.L.View,precondition:g.M$.and(g.M$.equals("config.workbench.editor.editorActionsLocation","default").negate(),g.M$.equals("config.workbench.editor.showTabs","none").negate()),metadata:{description:(0,o.aS)(6922,"Move Editor Actions from the title bar to the tab bar")},f1:!0})}run(e){return e.get(r.p).updateValue("workbench.editor.editorActionsLocation","default")}}(0,n.ug)(ue);class pe extends n.L{static{this.ID="workbench.action.hideEditorActions"}constructor(){super({id:pe.ID,title:(0,o.aS)(6923,"Hide Editor Actions"),category:s.L.View,precondition:g.M$.equals("config.workbench.editor.editorActionsLocation","hidden").negate(),metadata:{description:(0,o.aS)(6924,"Hide Editor Actions in the tab and title bar")},f1:!0})}run(e){return e.get(r.p).updateValue("workbench.editor.editorActionsLocation","hidden")}}(0,n.ug)(pe);class ge extends n.L{static{this.ID="workbench.action.showEditorActions"}constructor(){super({id:ge.ID,title:(0,o.aS)(6925,"Show Editor Actions"),category:s.L.View,precondition:g.M$.equals("config.workbench.editor.editorActionsLocation","hidden"),metadata:{description:(0,o.aS)(6926,"Make Editor Actions visible.")},f1:!0})}run(e){return e.get(r.p).updateValue("workbench.editor.editorActionsLocation","default")}}(0,n.ug)(ge),n.ZG.appendMenuItem(n.D8.MenubarAppearanceMenu,{submenu:n.D8.EditorActionsPositionSubmenu,title:(0,o.kg)(6927,"Editor Actions Position"),group:"3_workbench_layout_move",order:11});class me extends n.L{static{this.ID="workbench.action.configureEditorTabs"}constructor(){super({id:me.ID,title:(0,o.aS)(6928,"Configure Tabs"),category:s.L.View})}run(e){e.get(A.v).openSettings({jsonEditor:!1,query:"workbench.editor tab"})}}(0,n.ug)(me);class be extends n.L{static{this.ID="workbench.action.configureEditor"}constructor(){super({id:be.ID,title:(0,o.aS)(6929,"Configure Editors"),category:s.L.View})}run(e){e.get(A.v).openSettings({jsonEditor:!1,query:"workbench.editor"})}}if((0,n.ug)(be),(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.toggleSeparatePinnedEditorTabs",title:(0,o.aS)(6930,"Separate Pinned Editor Tabs"),category:s.L.View,precondition:g.M$.equals("config.workbench.editor.showTabs","multiple"),metadata:{description:(0,o.aS)(6931,"Toggle whether pinned editor tabs are shown on a separate row above unpinned tabs.")},f1:!0})}run(e){const t=e.get(r.p),i=!t.getValue("workbench.editor.pinnedTabsOnSeparateRow");return t.updateValue("workbench.editor.pinnedTabsOnSeparateRow",i)}}),(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.toggleZenMode",title:{...(0,o.aS)(6932,"Toggle Zen Mode"),mnemonicTitle:(0,o.kg)(6933,"Zen Mode")},precondition:x.Lu.toNegated(),category:s.L.View,f1:!0,keybinding:{weight:200,primary:(0,h.m5)(2089,56)},toggled:x.qv,menu:[{id:n.D8.MenubarAppearanceMenu,group:"1_toggle_view",order:2}]})}run(e){return e.get(c.Y).toggleZenMode()}}),p.f.registerCommandAndKeybindingRule({id:"workbench.action.exitZenMode",weight:-900,handler(e){const t=e.get(c.Y),i=e.get(m.f);x.qv.getValue(i)&&t.toggleZenMode()},when:x.qv,primary:(0,h.m5)(9,9)}),l.uF||l.j9||l.HZ){(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.toggleMenuBar",title:{...(0,o.aS)(6934,"Toggle Menu Bar"),mnemonicTitle:(0,o.kg)(6935,"Menu &&Bar")},category:s.L.View,f1:!0,toggled:g.M$.and(u.Yc.toNegated(),g.M$.notEquals("config.window.menuBarVisibility","hidden"),g.M$.notEquals("config.window.menuBarVisibility","toggle"),g.M$.notEquals("config.window.menuBarVisibility","compact")),menu:[{id:n.D8.MenubarAppearanceMenu,group:"2_workbench_layout",order:0}]})}run(e){return e.get(c.Y).toggleMenuBar()}});for(const e of[n.D8.TitleBarContext,n.D8.TitleBarTitleContext])n.ZG.appendMenuItem(e,{command:{id:"workbench.action.toggleMenuBar",title:(0,o.kg)(6936,"Menu Bar"),toggled:g.M$.and(u.Yc.toNegated(),g.M$.notEquals("config.window.menuBarVisibility","hidden"),g.M$.notEquals("config.window.menuBarVisibility","toggle"),g.M$.notEquals("config.window.menuBarVisibility","compact"))},when:g.M$.and(x.Lu.toNegated(),g.M$.notEquals(x.KJ.key,"native"),x.UL.negate()),group:"2_config",order:0})}(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.resetViewLocations",title:(0,o.aS)(6937,"Reset View Locations"),category:s.L.View,f1:!0})}run(e){return e.get(w.X).reset()}}),(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.moveView",title:(0,o.aS)(6938,"Move View"),category:s.L.View,f1:!0})}async run(e){const t=e.get(w.X),i=e.get(d._Y),o=e.get(f.G),n=e.get(m.f),s=e.get(C.b),r=x.kI.getValue(n);let a;r&&t.getViewDescriptorById(r)?.canMoveView&&(a=r);try{if(a=await this.getView(o,t,s,a),!a)return;const e=new we;i.invokeFunction((t=>e.run(t,a)))}catch{}}getViewItems(e,t){const i=[];return t.getVisiblePaneCompositeIds(0).forEach((t=>{const n=e.getViewContainerById(t),s=e.getViewContainerModel(n);let r=!1;s.visibleViewDescriptors.forEach((e=>{e.canMoveView&&(r||(i.push({type:"separator",label:(0,o.kg)(6939,"Side Bar / {0}",s.title)}),r=!0),i.push({id:e.id,label:e.name.value}))}))})),t.getPinnedPaneCompositeIds(1).forEach((t=>{const n=e.getViewContainerById(t),s=e.getViewContainerModel(n);let r=!1;s.visibleViewDescriptors.forEach((e=>{e.canMoveView&&(r||(i.push({type:"separator",label:(0,o.kg)(6940,"Panel / {0}",s.title)}),r=!0),i.push({id:e.id,label:e.name.value}))}))})),t.getPinnedPaneCompositeIds(2).forEach((t=>{const n=e.getViewContainerById(t),s=e.getViewContainerModel(n);let r=!1;s.visibleViewDescriptors.forEach((e=>{e.canMoveView&&(r||(i.push({type:"separator",label:(0,o.kg)(6941,"Secondary Side Bar / {0}",s.title)}),r=!0),i.push({id:e.id,label:e.name.value}))}))})),i}async getView(e,t,i,n){const s=new I.Cm,r=s.add(e.createQuickPick({useSeparators:!0}));return r.placeholder=(0,o.kg)(6942,"Select a View to Move"),r.items=this.getViewItems(t,i),r.selectedItems=r.items.filter((e=>e.id===n)),new Promise(((e,t)=>{s.add(r.onDidAccept((()=>{const i=r.selectedItems[0];i.id?e(i.id):t(),r.hide()}))),s.add(r.onDidHide((()=>{s.dispose(),t()}))),r.show()}))}});class we extends n.L{constructor(){super({id:"workbench.action.moveFocusedView",title:(0,o.aS)(6943,"Move Focused View"),category:s.L.View,precondition:x.kI.notEqualsTo(""),f1:!0})}run(e,t){const i=e.get(w.X),n=e.get(v.R),s=e.get(f.G),r=e.get(m.f),a=e.get(y.X),c=e.get(C.b),d=t||x.kI.getValue(r);if(void 0===d||""===d.trim())return void a.error((0,o.kg)(6944,"There is no view currently focused."));const h=i.getViewDescriptorById(d);if(!h||!h.canMoveView)return void a.error((0,o.kg)(6945,"The currently focused view is not movable."));const l=new I.Cm,u=l.add(s.createQuickPick({useSeparators:!0}));u.placeholder=(0,o.kg)(6946,"Select a Destination for the View"),u.title=(0,o.kg)(6947,"View: Move {0}",h.name.value);const p=[],g=i.getViewContainerByViewId(d),b=i.getViewLocationById(d),S=1===i.getViewContainerModel(g).allViewDescriptors.length;S&&1===b||p.push({id:"_.panel.newcontainer",label:(0,o.kg)(6948,"New Panel Entry")}),S&&0===b||p.push({id:"_.sidebar.newcontainer",label:(0,o.kg)(6949,"New Side Bar Entry")}),S&&2===b||p.push({id:"_.auxiliarybar.newcontainer",label:(0,o.kg)(6950,"New Secondary Side Bar Entry")}),p.push({type:"separator",label:(0,o.kg)(6951,"Side Bar")});const k=c.getVisiblePaneCompositeIds(0);p.push(...k.filter((e=>e!==i.getViewContainerByViewId(d).id&&!i.getViewContainerById(e).rejectAddedViews)).map((e=>({id:e,label:i.getViewContainerModel(i.getViewContainerById(e)).title})))),p.push({type:"separator",label:(0,o.kg)(6952,"Panel")});const _=c.getPinnedPaneCompositeIds(1);p.push(..._.filter((e=>e!==i.getViewContainerByViewId(d).id&&!i.getViewContainerById(e).rejectAddedViews)).map((e=>({id:e,label:i.getViewContainerModel(i.getViewContainerById(e)).title})))),p.push({type:"separator",label:(0,o.kg)(6953,"Secondary Side Bar")});const E=c.getPinnedPaneCompositeIds(2);p.push(...E.filter((e=>e!==i.getViewContainerByViewId(d).id&&!i.getViewContainerById(e).rejectAddedViews)).map((e=>({id:e,label:i.getViewContainerModel(i.getViewContainerById(e)).title})))),u.items=p,l.add(u.onDidAccept((()=>{const e=u.selectedItems[0];"_.panel.newcontainer"===e.id?(i.moveViewToLocation(h,1,this.desc.id),n.openView(d,!0)):"_.sidebar.newcontainer"===e.id?(i.moveViewToLocation(h,0,this.desc.id),n.openView(d,!0)):"_.auxiliarybar.newcontainer"===e.id?(i.moveViewToLocation(h,2,this.desc.id),n.openView(d,!0)):e.id&&(i.moveViewsToContainer([h],i.getViewContainerById(e.id),void 0,this.desc.id),n.openView(d,!0)),u.hide()}))),l.add(u.onDidHide((()=>l.dispose()))),u.show()}}(0,n.ug)(we),(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.resetFocusedViewLocation",title:(0,o.aS)(6954,"Reset Focused View Location"),category:s.L.View,f1:!0,precondition:x.kI.notEqualsTo("")})}run(e){const t=e.get(w.X),i=e.get(m.f),n=e.get(y.X),s=e.get(v.R),r=x.kI.getValue(i);let a=null;if(void 0!==r&&""!==r.trim()&&(a=t.getViewDescriptorById(r)),!a)return void n.error((0,o.kg)(6955,"There is no view currently focused."));const c=t.getDefaultContainerById(a.id);c&&c!==t.getViewContainerByViewId(a.id)&&(t.moveViewsToContainer([a],c,void 0,this.desc.id),s.openView(a.id,!0))}});class ve extends n.L{static{this.RESIZE_INCREMENT=60}resizePart(e,t,i,o){let n;if(void 0===o){const e=i.hasFocus("workbench.parts.editor"),t=i.hasFocus("workbench.parts.sidebar"),o=i.hasFocus("workbench.parts.panel"),s=i.hasFocus("workbench.parts.auxiliarybar");t?n="workbench.parts.sidebar":o?n="workbench.parts.panel":e?n="workbench.parts.editor":s&&(n="workbench.parts.auxiliarybar")}else n=o;n&&i.resizePart(n,e,t)}}(0,n.ug)(class extends ve{constructor(){super({id:"workbench.action.increaseViewSize",title:(0,o.aS)(6956,"Increase Current View Size"),f1:!0,precondition:x.Lu.toNegated()})}run(e){this.resizePart(ve.RESIZE_INCREMENT,ve.RESIZE_INCREMENT,e.get(c.Y))}}),(0,n.ug)(class extends ve{constructor(){super({id:"workbench.action.increaseViewWidth",title:(0,o.aS)(6957,"Increase Editor Width"),f1:!0,precondition:x.Lu.toNegated()})}run(e){this.resizePart(ve.RESIZE_INCREMENT,0,e.get(c.Y),"workbench.parts.editor")}}),(0,n.ug)(class extends ve{constructor(){super({id:"workbench.action.increaseViewHeight",title:(0,o.aS)(6958,"Increase Editor Height"),f1:!0,precondition:x.Lu.toNegated()})}run(e){this.resizePart(0,ve.RESIZE_INCREMENT,e.get(c.Y),"workbench.parts.editor")}}),(0,n.ug)(class extends ve{constructor(){super({id:"workbench.action.decreaseViewSize",title:(0,o.aS)(6959,"Decrease Current View Size"),f1:!0,precondition:x.Lu.toNegated()})}run(e){this.resizePart(-ve.RESIZE_INCREMENT,-ve.RESIZE_INCREMENT,e.get(c.Y))}}),(0,n.ug)(class extends ve{constructor(){super({id:"workbench.action.decreaseViewWidth",title:(0,o.aS)(6960,"Decrease Editor Width"),f1:!0,precondition:x.Lu.toNegated()})}run(e){this.resizePart(-ve.RESIZE_INCREMENT,0,e.get(c.Y),"workbench.parts.editor")}}),(0,n.ug)(class extends ve{constructor(){super({id:"workbench.action.decreaseViewHeight",title:(0,o.aS)(6961,"Decrease Editor Height"),f1:!0,precondition:x.Lu.toNegated()})}run(e){this.resizePart(0,-ve.RESIZE_INCREMENT,e.get(c.Y),"workbench.parts.editor")}});const fe=(e,t,i,n)=>({id:e,active:t,label:i,visualIcon:n,activeIcon:E.W6.eye,inactiveIcon:E.W6.eyeClosed,activeAriaLabel:(0,o.kg)(6962,"Select to Hide"),inactiveAriaLabel:(0,o.kg)(6963,"Select to Show"),useButtons:!0}),ye=(e,t,i,n)=>({id:e,active:t,label:i,visualIcon:n,activeIcon:E.W6.check,activeAriaLabel:(0,o.kg)(6964,"Active"),useButtons:!1}),Ce=g.M$.and(u.Yc.toNegated(),g.M$.notEquals("config.window.menuBarVisibility","hidden"),g.M$.notEquals("config.window.menuBarVisibility","toggle"),g.M$.notEquals("config.window.menuBarVisibility","compact")),Se=[];l.zx&&l.ib||Se.push(fe("workbench.action.toggleMenuBar",Ce,(0,o.kg)(6965,"Menu Bar"),L)),Se.push(fe(Z,g.M$.notEquals("config.workbench.activityBar.location","hidden"),(0,o.kg)(6966,"Activity Bar"),{whenA:g.M$.equals("config.workbench.sideBar.location","left"),iconA:P,iconB:R}),fe(ie.ID,x.OD,(0,o.kg)(6967,"Primary Side Bar"),{whenA:g.M$.equals("config.workbench.sideBar.location","left"),iconA:B,iconB:N}),fe(S.s.ID,x.zp,(0,o.kg)(6953,"Secondary Side Bar"),{whenA:g.M$.equals("config.workbench.sideBar.location","left"),iconA:N,iconB:B}),fe(k.rI.ID,x._o,(0,o.kg)(6952,"Panel"),G),fe(oe.ID,g.M$.equals("config.workbench.statusBar.visible",!0),(0,o.kg)(6968,"Status Bar"),W));const ke=[ye(X.ID,g.M$.equals("config.workbench.sideBar.location","left"),(0,o.kg)(6969,"Left"),B),ye(J.ID,g.M$.equals("config.workbench.sideBar.location","right"),(0,o.kg)(6970,"Right"),N)],_e=[ye("workbench.action.alignPanelLeft",x.hE.isEqualTo("left"),(0,o.kg)(6971,"Left"),z),ye("workbench.action.alignPanelRight",x.hE.isEqualTo("right"),(0,o.kg)(6972,"Right"),H),ye("workbench.action.alignPanelCenter",x.hE.isEqualTo("center"),(0,o.kg)(6973,"Center"),Q),ye("workbench.action.alignPanelJustify",x.hE.isEqualTo("justify"),(0,o.kg)(6974,"Justify"),U)],xe=[ye("workbench.action.toggleFullScreen",x.UL,(0,o.kg)(6975,"Full Screen"),$),ye("workbench.action.toggleZenMode",x.qv,(0,o.kg)(6976,"Zen Mode"),j),ye("workbench.action.toggleCenteredLayout",x.Cx,(0,o.kg)(6977,"Centered Layout"),K)],Ee=new Set;for(const{active:e}of[...Se,...ke,..._e,...xe])for(const t of e.keys())Ee.add(t);(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.customizeLayout",title:(0,o.aS)(6978,"Customize Layout..."),f1:!0,icon:te,menu:[{id:n.D8.LayoutControlMenuSubmenu,group:"z_end"},{id:n.D8.LayoutControlMenu,when:g.M$.equals("config.workbench.layoutControl.type","both"),group:"z_end"}]})}getItems(e,t){const i=i=>{const o=i.active.evaluate(e.getContext(null));let n=i.useButtons?i.label:i.label+(o&&i.activeIcon?` $(${i.activeIcon.id})`:!o&&i.inactiveIcon?` $(${i.inactiveIcon.id})`:"");const s=i.label+(o&&i.activeAriaLabel?` (${i.activeAriaLabel})`:!o&&i.inactiveAriaLabel?` (${i.inactiveAriaLabel})`:"");if(i.visualIcon){let t=i.visualIcon;if(function(e){return void 0!==e.iconA}(t)){const i=t.whenA.evaluate(e.getContext(null));t=i?t.iconA:t.iconB}n=`$(${t.id}) ${n}`}const r=o?i.activeIcon:i.inactiveIcon;return{type:"item",id:i.id,label:n,ariaLabel:s,keybinding:t.lookupKeybinding(i.id,e),buttons:i.useButtons?[{alwaysVisible:!1,tooltip:s,iconClass:r?D.L0.asClassName(r):void 0}]:void 0}};return[{type:"separator",label:(0,o.kg)(6979,"Visibility")},...Se.map(i),{type:"separator",label:(0,o.kg)(6980,"Primary Side Bar Position")},...ke.map(i),{type:"separator",label:(0,o.kg)(6981,"Panel Alignment")},..._e.map(i),{type:"separator",label:(0,o.kg)(6982,"Modes")},...xe.map(i)]}run(e){if(this._currentQuickPick)return void this._currentQuickPick.hide();const t=e.get(r.p),i=e.get(m.f),n=e.get(_.w),s=e.get(f.G),a=e.get(T.b),c=new I.Cm,d=c.add(s.createQuickPick({useSeparators:!0}));this._currentQuickPick=d,d.items=this.getItems(i,a),d.ignoreFocusOut=!0,d.hideInput=!0,d.title=(0,o.kg)(6983,"Customize Layout");const h={alwaysVisible:!0,iconClass:D.L0.asClassName(E.W6.close),tooltip:(0,o.kg)(6984,"Close")},u={alwaysVisible:!0,iconClass:D.L0.asClassName(E.W6.discard),tooltip:(0,o.kg)(6985,"Restore Defaults")};let p;d.buttons=[u,h],c.add(i.onDidChangeContext((e=>{e.affectsSome(Ee)&&(d.items=this.getItems(i,a),p&&(d.activeItems=d.items.filter((e=>e.id===p?.id))),setTimeout((()=>s.focus()),0))}))),c.add(d.onDidAccept((e=>{d.selectedItems.length&&(p=d.selectedItems[0],n.executeCommand(p.id))}))),c.add(d.onDidTriggerItemButton((e=>{e.item&&(p=e.item,n.executeCommand(p.id))}))),c.add(d.onDidTriggerButton((e=>{if(e===h)d.hide();else if(e===u){const e=e=>{const i=t.inspect(e);t.updateValue(e,i.defaultValue)};e("workbench.activityBar.location"),e("workbench.sideBar.location"),e("workbench.statusBar.visible"),e("workbench.panel.defaultLocation"),l.zx&&l.ib||e("window.menuBarVisibility"),n.executeCommand("workbench.action.alignPanelCenter")}}))),c.add(d.onDidHide((()=>{d.dispose()}))),c.add(d.onDispose((()=>{this._currentQuickPick=void 0,c.dispose()}))),d.show()}})},72233:(e,t,i)=>{i.d(t,{Fd:()=>f,aN:()=>w,vM:()=>v});var o=i(92518),n=i(93152),s=i(78251),r=i(28672),a=i(76390),c=i(63288),d=i(87276),h=i(64533),l=i(84793),u=i(40240),p=i(77829),g=i(73586),m=i(44622),b=i(63101);let w=class extends s.eC{constructor(e,t,i,o,n,s,r,a){super(e,t,n,i),this.storageService=i,this.instantiationService=o,this.contextMenuService=s,this.extensionService=r,this.contextService=a}create(e){super.create(e),this.viewPaneContainer=this._register(this.createViewPaneContainer(e)),this._register(this.viewPaneContainer.onTitleAreaUpdate((()=>this.updateTitleArea()))),this.viewPaneContainer.create(e)}setVisible(e){super.setVisible(e),this.viewPaneContainer?.setVisible(e)}layout(e){this.viewPaneContainer?.layout(e)}setBoundarySashes(e){this.viewPaneContainer?.setBoundarySashes(e)}getOptimalWidth(){return this.viewPaneContainer?.getOptimalWidth()??0}openView(e,t){return this.viewPaneContainer?.openView(e,t)}getViewPaneContainer(){return this.viewPaneContainer}getActionsContext(){return this.getViewPaneContainer()?.getActionsContext()}getContextMenuActions(){return this.viewPaneContainer?.menuActions?.getContextMenuActions()??[]}getMenuIds(){const e=[];return this.viewPaneContainer?.menuActions&&(e.push(this.viewPaneContainer.menuActions.menuId),this.viewPaneContainer.isViewMergedWithContainer()&&e.push(this.viewPaneContainer.panes[0].menuActions.menuId)),e}getActions(){const e=[];if(this.viewPaneContainer?.menuActions&&(e.push(...this.viewPaneContainer.menuActions.getPrimaryActions()),this.viewPaneContainer.isViewMergedWithContainer())){const t=this.viewPaneContainer.panes[0];t.shouldShowFilterInHeader()&&e.push(b.Ah),e.push(...t.menuActions.getPrimaryActions())}return e}getSecondaryActions(){if(!this.viewPaneContainer?.menuActions)return[];const e=this.viewPaneContainer.isViewMergedWithContainer()?this.viewPaneContainer.panes[0].menuActions.getSecondaryActions():[];let t=this.viewPaneContainer.menuActions.getSecondaryActions();const i=t.findIndex((e=>e instanceof c.nI&&e.item.submenu===g.Ox));if(-1!==i){const o=t[i];o.actions.some((({enabled:e})=>e))?1===t.length&&0===e.length?t=o.actions.slice():0!==i&&(t=[o,...t.slice(0,i),...t.slice(i+1)]):t.splice(i,1)}return t.length&&e.length?[...t,new a.wv,...e]:t.length?t:e}getActionViewItem(e,t){return this.viewPaneContainer?.getActionViewItem(e,t)}getTitle(){return this.viewPaneContainer?.getTitle()??""}focus(){super.focus(),this.viewPaneContainer?.focus()}};w=(0,o.C)([(0,o.Q)(1,l.k),(0,o.Q)(2,h.C),(0,o.Q)(3,r._Y),(0,o.Q)(4,u.G),(0,o.Q)(5,d.Z),(0,o.Q)(6,m.c),(0,o.Q)(7,p.V)],w);class v extends s.RM{static create(e,t,i,o,n,s,r){return new v(e,t,i,o,n,s,r)}constructor(e,t,i,o,n,s,r){super(e,t,i,o,n,s),this.iconUrl=r}}const f={Viewlets:"workbench.contributions.viewlets",Panels:"workbench.contributions.panels",Auxiliary:"workbench.contributions.auxiliary"};class y extends s.V3{registerPaneComposite(e){super.registerComposite(e)}deregisterPaneComposite(e){super.deregisterComposite(e)}getPaneComposite(e){return this.getComposite(e)}getPaneComposites(){return this.getComposites()}}n.O.add(f.Viewlets,new y),n.O.add(f.Panels,new y),n.O.add(f.Auxiliary,new y)},19510:(e,t,i)=>{i.d(t,{S:()=>h,e:()=>c}),(0,i(6162).A)(".monaco-workbench .part{box-sizing:border-box;overflow:hidden}.monaco-workbench .part>.drop-block-overlay.visible{visibility:visible}.monaco-workbench .part>.drop-block-overlay{height:100%;opacity:0;position:absolute;top:0;visibility:hidden;width:100%;z-index:12}.monaco-workbench .part>.header-or-footer,.monaco-workbench .part>.title{box-sizing:border-box;display:none;display:flex;height:35px;overflow:hidden}.monaco-workbench .part>.title{padding-left:8px;padding-right:8px}.monaco-workbench .part>.title>.title-label{line-height:35px;overflow:hidden;padding-left:12px;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part>.title>.title-label h2{cursor:default;font-size:11px;font-weight:400;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part>.title>.title-label a{cursor:default;font-size:13px;text-decoration:none}.monaco-workbench .part>.title>.title-actions{flex:1;height:35px;padding-left:5px}.monaco-workbench .part>.title>.title-actions .action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}.monaco-workbench .part>.title>.title-actions .action-label .label{display:none}.monaco-workbench .part>.content{font-size:13px}.monaco-workbench .part.editor>.content .editor-group-container>.monaco-progress-container,.monaco-workbench .part>.content>.monaco-progress-container{left:0;position:absolute;top:33px;z-index:5}",{});var o=i(64242),n=i(68836),s=i(1661),r=i(1180),a=i(24821);class c extends o.u{get dimension(){return this._dimension}get contentPosition(){return this._contentPosition}constructor(e,t,i,o,n){super(e,i,o),this.options=t,this.layoutService=n,this._onDidVisibilityChange=this._register(new s.vl),this.onDidVisibilityChange=this._onDidVisibilityChange.event,this._onDidChange=this._register(new s.vl),this._register(n.registerPart(this))}onThemeChange(e){this.parent&&super.onThemeChange(e)}create(e,t){this.parent=e,this.titleArea=this.createTitleArea(e,t),this.contentArea=this.createContentArea(e,t),this.partLayout=new d(this.options,this.contentArea),this.updateStyles()}getContainer(){return this.parent}createTitleArea(e,t){}getTitleArea(){return this.titleArea}createContentArea(e,t){}getContentArea(){return this.contentArea}setHeaderArea(e){if(this.headerArea)throw new Error("Header already exists");this.parent&&this.titleArea&&((0,n.Hs)(this.parent,e),e.classList.add("header-or-footer"),e.classList.add("header"),this.headerArea=e,this.partLayout?.setHeaderVisibility(!0),this.relayout())}setFooterArea(e){if(this.footerArea)throw new Error("Footer already exists");this.parent&&this.titleArea&&(this.parent.appendChild(e),e.classList.add("header-or-footer"),e.classList.add("footer"),this.footerArea=e,this.partLayout?.setFooterVisibility(!0),this.relayout())}removeHeaderArea(){this.headerArea&&(this.headerArea.remove(),this.headerArea=void 0,this.partLayout?.setHeaderVisibility(!1),this.relayout())}removeFooterArea(){this.footerArea&&(this.footerArea.remove(),this.footerArea=void 0,this.partLayout?.setFooterVisibility(!1),this.relayout())}relayout(){this.dimension&&this.contentPosition&&this.layout(this.dimension.width,this.dimension.height,this.contentPosition.top,this.contentPosition.left)}layoutContents(e,t){return(0,r.eU)(this.partLayout).layout(e,t)}get onDidChange(){return this._onDidChange.event}layout(e,t,i,o){this._dimension=new n.fg(e,t),this._contentPosition={top:i,left:o}}setVisible(e){this._onDidVisibilityChange.fire(e)}}class d{static{this.HEADER_HEIGHT=35}static{this.TITLE_HEIGHT=35}static{this.Footer_HEIGHT=35}constructor(e,t){this.options=e,this.contentArea=t,this.headerVisible=!1,this.footerVisible=!1}layout(e,t){let i,o,s;i=this.options.hasTitle?new n.fg(e,Math.min(t,d.TITLE_HEIGHT)):n.fg.None,o=this.headerVisible?new n.fg(e,Math.min(t,d.HEADER_HEIGHT)):n.fg.None,s=this.footerVisible?new n.fg(e,Math.min(t,d.Footer_HEIGHT)):n.fg.None;let r=e;this.options&&"function"==typeof this.options.borderWidth&&(r-=this.options.borderWidth());const a=new n.fg(r,t-i.height-o.height-s.height);return this.contentArea&&(0,n.Ej)(this.contentArea,a.width,a.height),{headerSize:o,titleSize:i,contentSize:a,footerSize:s}}setFooterVisibility(e){this.footerVisible=e}setHeaderVisibility(e){this.headerVisible=e}}class h extends o.u{constructor(){super(...arguments),this._parts=new Set}get parts(){return Array.from(this._parts)}registerPart(e){return this._parts.add(e),(0,a.s)((()=>this.unregisterPart(e)))}unregisterPart(e){this._parts.delete(e)}getPart(e){return this.getPartByDocument(e.ownerDocument)}getPartByDocument(e){if(this._parts.size>1)for(const t of this._parts)if(t.element?.ownerDocument===e)return t;return this.mainPart}get activePart(){return this.getPartByDocument((0,n.a)())}}},62179:(e,t,i)=>{i.d(t,{s:()=>w});var o=i(14956),n=i(25934),s=i(63288),r=i(64788),a=i(63383),c=i(16409),d=i(47622),h=i(91279),l=i(39924),u=i(82561);const p=(0,a.pU)("auxiliarybar-right-layout-icon",o.W6.layoutSidebarRight,(0,n.kg)(9494,"Icon to toggle the auxiliary bar off in its right position.")),g=(0,a.pU)("auxiliarybar-right-off-layout-icon",o.W6.layoutSidebarRightOff,(0,n.kg)(9495,"Icon to toggle the auxiliary bar on in its right position.")),m=(0,a.pU)("auxiliarybar-left-layout-icon",o.W6.layoutSidebarLeft,(0,n.kg)(9496,"Icon to toggle the auxiliary bar in its left position.")),b=(0,a.pU)("auxiliarybar-left-off-layout-icon",o.W6.layoutSidebarLeftOff,(0,n.kg)(9497,"Icon to toggle the auxiliary bar on in its left position."));class w extends s.L{static{this.ID="workbench.action.toggleAuxiliaryBar"}static{this.LABEL=(0,n.aS)(9498,"Toggle Secondary Side Bar Visibility")}constructor(){super({id:w.ID,title:w.LABEL,toggled:{condition:d.zp,title:(0,n.kg)(9499,"Secondary Side Bar"),mnemonicTitle:(0,n.kg)(9500,"Secondary Si&&de Bar")},category:c.L.View,f1:!0,keybinding:{weight:200,primary:2592},menu:[{id:s.D8.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:1},{id:s.D8.MenubarAppearanceMenu,group:"2_workbench_layout",order:2}]})}async run(e){const t=e.get(l.Y);t.setPartHidden(t.isVisible("workbench.parts.auxiliarybar"),"workbench.parts.auxiliarybar")}}(0,s.ug)(w),(0,s.ug)(class e extends s.L{static{this.ID="workbench.action.focusAuxiliaryBar"}static{this.LABEL=(0,n.aS)(9501,"Focus into Secondary Side Bar")}constructor(){super({id:e.ID,title:e.LABEL,category:c.L.View,f1:!0})}async run(e){const t=e.get(u.b),i=e.get(l.Y);i.isVisible("workbench.parts.auxiliarybar")||i.setPartHidden(!1,"workbench.parts.auxiliarybar");const o=t.getActivePaneComposite(2);o?.focus()}}),s.ZG.appendMenuItems([{id:s.D8.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:w.ID,title:(0,n.kg)(9502,"Toggle Secondary Side Bar"),toggled:{condition:d.zp,icon:m},icon:b},when:r.M$.and(r.M$.or(r.M$.equals("config.workbench.layoutControl.type","toggles"),r.M$.equals("config.workbench.layoutControl.type","both")),r.M$.equals("config.workbench.sideBar.location","right")),order:0}},{id:s.D8.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:w.ID,title:(0,n.kg)(9502,"Toggle Secondary Side Bar"),toggled:{condition:d.zp,icon:p},icon:g},when:r.M$.and(r.M$.or(r.M$.equals("config.workbench.layoutControl.type","toggles"),r.M$.equals("config.workbench.layoutControl.type","both")),r.M$.equals("config.workbench.sideBar.location","left")),order:2}},{id:s.D8.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:w.ID,title:(0,n.aS)(9503,"Hide Secondary Side Bar")},when:r.M$.and(d.zp,r.M$.equals("viewLocation",(0,h._4)(2))),order:2}}])},76962:(e,t,i)=>{i.d(t,{AF:()=>L,LF:()=>I,LN:()=>V,Tu:()=>M,hC:()=>P,j:()=>D,uk:()=>A});var o,n,s=i(92518),r=i(25934),a=i(76390),c=i(68836),d=i(84261),h=i(24821),l=i(87276),u=i(40240),p=i(83443),g=i(28672),m=i(19638),b=i(76257),w=i(1661),v=i(26658),f=i(7016),y=i(14956),C=i(80914),S=i(70348),k=i(93765),_=i(819),x=(i(86849),i(55325)),E=(i(27785),i(82437),i(32802),i(77692),i(16115),i(79849),i(17960));i(69416),i(10380);class D extends a.rc{constructor(e){super(e.id,e.name,e.classNames?.join(" "),!0),this.item=e,this._onDidChangeCompositeBarActionItem=this._register(new w.vl),this.onDidChangeCompositeBarActionItem=this._onDidChangeCompositeBarActionItem.event,this._onDidChangeActivity=this._register(new w.vl),this.onDidChangeActivity=this._onDidChangeActivity.event}get compositeBarActionItem(){return this.item}set compositeBarActionItem(e){this._label=e.name,this.item=e,this._onDidChangeCompositeBarActionItem.fire(this)}get activity(){return this._activity}set activity(e){this._activity=e,this._onDidChangeActivity.fire(e)}activate(){this.checked||this._setChecked(!0)}deactivate(){this.checked&&this._setChecked(!1)}}let I=class extends f.EH{static{o=this}static{this.hoverLeaveTime=0}constructor(e,t,i,o,n,s,r){super(null,e,t),this.badgesEnabled=i,this.themeService=o,this.hoverService=n,this.configurationService=s,this.keybindingService=r,this.badgeDisposable=this._register(new h.HE),this.hoverDisposables=this._register(new h.Cm),this.showHoverScheduler=new k.uC((()=>this.showHover()),0),this.options=t,this._register(this.themeService.onDidColorThemeChange(this.onThemeChange,this)),this._register(e.onDidChangeCompositeBarActionItem((()=>this.update()))),this._register(w.Jh.filter(r.onDidUpdateKeybindings,(()=>this.keybindingLabel!==this.computeKeybindingLabel()))((()=>this.updateTitle()))),this._register(e.onDidChangeActivity((()=>this.updateActivity()))),this._register((0,h.s)((()=>this.showHoverScheduler.cancel())))}get compositeBarActionItem(){return this._action.compositeBarActionItem}updateStyles(){const e=this.themeService.getColorTheme(),t=this.options.colors(e);if(this.label){if(this.options.icon){const e=this._action.checked?t.activeForegroundColor:t.inactiveForegroundColor;this.compositeBarActionItem.iconUrl?(this.label.style.backgroundColor=e?e.toString():"",this.label.style.color=""):(this.label.style.color=e?e.toString():"",this.label.style.backgroundColor="")}else{const e=this._action.checked?t.activeForegroundColor:t.inactiveForegroundColor,i=this._action.checked?t.activeBorderBottomColor:null;this.label.style.color=e?e.toString():"",this.label.style.borderBottomColor=i?i.toString():""}this.container.style.setProperty("--insert-border-color",t.dragAndDropBorder?t.dragAndDropBorder.toString():"")}if(this.badgeContent){const i=this.getActivity()?.badge.getColors(e),o=i?.badgeForeground??t.badgeForeground??e.getColor(E.zR),n=i?.badgeBackground??t.badgeBackground??e.getColor(E.WM),s=i?.badgeBorder??e.getColor(x.b1);this.badgeContent.style.color=o?o.toString():"",this.badgeContent.style.backgroundColor=n?n.toString():"",this.badgeContent.style.borderStyle=s&&!this.options.compact?"solid":"",this.badgeContent.style.borderWidth=s?"1px":"",this.badgeContent.style.borderColor=s?s.toString():""}}render(e){super.render(e),this.container=e,this.options.icon&&this.container.classList.add("icon"),this.options.hasPopup?(this.container.setAttribute("role","button"),this.container.setAttribute("aria-haspopup","true")):this.container.setAttribute("role","tab"),this._register((0,c.ko)(this.container,c.Bx.MOUSE_DOWN,(()=>{this.container.classList.add("clicked")}))),this._register((0,c.ko)(this.container,c.Bx.MOUSE_UP,(()=>{this.mouseUpTimeout&&clearTimeout(this.mouseUpTimeout),this.mouseUpTimeout=setTimeout((()=>{this.container.classList.remove("clicked")}),800)}))),this.label=(0,c.BC)(e,(0,c.$)("a")),this.badge=(0,c.BC)(e,(0,c.$)(".badge")),this.badgeContent=(0,c.BC)(this.badge,(0,c.$)(".badge-content")),(0,c.BC)(e,(0,c.$)(".active-item-indicator")),(0,c.jD)(this.badge),this.update(),this.updateStyles(),this.updateHover()}onThemeChange(e){this.updateStyles()}update(){this.updateLabel(),this.updateActivity(),this.updateTitle(),this.updateStyles()}getActivity(){if(this._action instanceof D)return this._action.activity}updateActivity(){if(!(this.badge&&this.badgeContent&&this._action instanceof D))return;const e=this.getActivity();this.badgeDisposable.value=new h.Cm,(0,c.w_)(this.badgeContent),(0,c.jD)(this.badge);const t=this.badgesEnabled(this.compositeBarActionItem.id);if(e&&t){const{badge:t}=e,i=[];if(this.options.compact&&i.push("compact"),t instanceof p.Vm)(0,c.WU)(this.badge),i.push("progress-badge");else if(t instanceof p.hV){if(t.number){let e=t.number.toString();if(t.number>999){const i=t.number/1e3,o=Math.floor(i);e=i>o?`${o}K+`:`${i}K`}this.options.compact&&e.length>=3&&i.push("compact-content"),this.badgeContent.textContent=e,(0,c.WU)(this.badge)}}else if(t instanceof p.fk){i.push("icon-badge");const e=["icon-overlay",...C.L0.asClassNameArray(t.icon)];this.badgeContent.classList.add(...e),this.badgeDisposable.value.add((0,h.s)((()=>this.badgeContent?.classList.remove(...e)))),(0,c.WU)(this.badge)}i.length&&(this.badge.classList.add(...i),this.badgeDisposable.value.add((0,h.s)((()=>this.badge.classList.remove(...i)))))}this.updateTitle(),this.updateStyles()}updateLabel(){this.label.className="action-label",this.compositeBarActionItem.classNames&&this.label.classList.add(...this.compositeBarActionItem.classNames),this.options.icon||(this.label.textContent=this.action.label)}updateTitle(){const e=this.computeTitle();[this.label,this.badge,this.container].forEach((t=>{t&&(t.setAttribute("aria-label",e),t.setAttribute("title",""),t.removeAttribute("title"))}))}computeTitle(){this.keybindingLabel=this.computeKeybindingLabel();let e=this.keybindingLabel?(0,r.kg)(10736,"{0} ({1})",this.compositeBarActionItem.name,this.keybindingLabel):this.compositeBarActionItem.name;const t=this.action.activity?.badge;return t?.getDescription()&&(e=(0,r.kg)(10737,"{0} - {1}",e,t.getDescription())),e}computeKeybindingLabel(){const e=this.compositeBarActionItem.keybindingId?this.keybindingService.lookupKeybinding(this.compositeBarActionItem.keybindingId):null;return e?.getLabel()}updateHover(){this.hoverDisposables.clear(),this.updateTitle(),this.hoverDisposables.add((0,c.ko)(this.container,c.Bx.MOUSE_OVER,(()=>{this.showHoverScheduler.isScheduled()||(Date.now()-o.hoverLeaveTime<200?this.showHover(!0):this.showHoverScheduler.schedule(this.configurationService.getValue("workbench.hover.delay")))}),!0)),this.hoverDisposables.add((0,c.ko)(this.container,c.Bx.MOUSE_LEAVE,(e=>{e.target===this.container&&(o.hoverLeaveTime=Date.now(),this.hoverService.hideHover(),this.showHoverScheduler.cancel())}),!0)),this.hoverDisposables.add((0,h.s)((()=>{this.hoverService.hideHover(),this.showHoverScheduler.cancel()})))}showHover(e=!1){if(this.lastHover&&!this.lastHover.isDisposed)return;const t=this.options.hoverOptions.position();this.lastHover=this.hoverService.showHover({target:this.container,content:this.computeTitle(),position:{hoverPosition:t},persistence:{hideOnKeyDown:!0},appearance:{showPointer:!0,compact:!0,skipFadeInAnimation:e}})}dispose(){super.dispose(),this.mouseUpTimeout&&clearTimeout(this.mouseUpTimeout),this.badge.remove()}};I=o=(0,s.C)([(0,s.Q)(3,u.G),(0,s.Q)(4,S.T),(0,s.Q)(5,_.p),(0,s.Q)(6,b.b)],I);class V extends D{constructor(e){super({id:"additionalComposites.action",name:(0,r.kg)(10738,"Additional Views"),classNames:C.L0.asClassNameArray(y.W6.more)}),this.showMenu=e}async run(){this.showMenu()}}let M=class extends I{constructor(e,t,i,o,n,s,r,a,c,d,h,l){super(e,{icon:!0,colors:s,hasPopup:!0,hoverOptions:r},(()=>!0),c,d,h,l),this.getOverflowingComposites=t,this.getActiveCompositeId=i,this.getBadge=o,this.getCompositeOpenAction=n,this.contextMenuService=a}showMenu(){this.contextMenuService.showContextMenu({getAnchor:()=>this.container,getActions:()=>this.getActions(),getCheckedActionsRepresentation:()=>"radio"})}getActions(){return this.getOverflowingComposites().map((e=>{const t=this.getCompositeOpenAction(e.id);t.checked=this.getActiveCompositeId()===t.id;const i=this.getBadge(e.id);let o;return i instanceof p.hV&&(o=i.number),t.label=o?(0,r.kg)(10739,"{0} ({1})",e.name,o):e.name||"",t}))}};M=(0,s.C)([(0,s.Q)(7,l.Z),(0,s.Q)(8,u.G),(0,s.Q)(9,S.T),(0,s.Q)(10,_.p),(0,s.Q)(11,b.b)],M);let T=class extends a.rc{constructor(e){super("activitybar.manage.extension",(0,r.kg)(10740,"Manage Extension")),this.commandService=e}run(e){return this.commandService.executeCommand("_extensions.manage",e)}};T=(0,s.C)([(0,s.Q)(0,d.w)],T);let A=class extends I{static{n=this}constructor(e,t,i,o,s,r,a,c,d,h,l,u,p,g){super(t,e,c.areBadgesEnabled.bind(c),u,p,g,h),this.compositeActivityAction=t,this.toggleCompositePinnedAction=i,this.toggleCompositeBadgeAction=o,this.compositeContextMenuActionsProvider=s,this.contextMenuActionsProvider=r,this.dndHandler=a,this.compositeBar=c,this.contextMenuService=d,n.manageExtensionAction||(n.manageExtensionAction=l.createInstance(T))}render(e){let t;super.render(e),this.updateChecked(),this.updateEnabled(),this._register((0,c.ko)(this.container,c.Bx.CONTEXT_MENU,(t=>{c.fs.stop(t,!0),this.showContextMenu(e)}))),this._register(v.eU.INSTANCE.registerDraggable(this.container,(()=>({type:"composite",id:this.compositeBarActionItem.id})),{onDragOver:i=>{const o=i.dragAndDropData.getData().id!==this.compositeBarActionItem.id&&this.dndHandler.onDragOver(i.dragAndDropData,this.compositeBarActionItem.id,i.eventData);(0,v.FW)(i.eventData.dataTransfer,"move",o),t=this.updateFromDragging(e,o,i.eventData)},onDragLeave:i=>{t=this.updateFromDragging(e,!1,i.eventData)},onDragEnd:i=>{t=this.updateFromDragging(e,!1,i.eventData)},onDrop:i=>{c.fs.stop(i.eventData,!0),this.dndHandler.drop(i.dragAndDropData,this.compositeBarActionItem.id,i.eventData,t),t=this.updateFromDragging(e,!1,i.eventData)},onDragStart:e=>{e.dragAndDropData.getData().id===this.compositeBarActionItem.id&&(e.eventData.dataTransfer&&(e.eventData.dataTransfer.effectAllowed="move"),this.blur())}})),[this.badge,this.label].forEach((e=>this._register(new m.Db(e,(()=>{this.action.checked||this.action.run()}))))),this.updateStyles()}updateFromDragging(e,t,i){const o=e.getBoundingClientRect(),n=i.clientX,s=i.clientY,r=o.bottom-o.top,a=o.right-o.left,c=s<=o.top+.4*r,d=s>o.bottom-.4*r,h=s<=o.top+.5*r,l=n<=o.left+.4*a,u=n>o.right-.4*a,p=n<=o.left+.5*a,g=e.classList,m=g.contains("top")?"top":g.contains("bottom")?"bottom":void 0,b=g.contains("left")?"left":g.contains("right")?"right":void 0,w=c||h&&!m||!d&&"top"===m,v=d||!h&&!m||!c&&"bottom"===m,f=l||p&&!b||!u&&"left"===b,y=u||!p&&!b||!l&&"right"===b;if(e.classList.toggle("top",t&&w),e.classList.toggle("bottom",t&&v),e.classList.toggle("left",t&&f),e.classList.toggle("right",t&&y),t)return{verticallyBefore:w,horizontallyBefore:f}}showContextMenu(e){const t=[this.toggleCompositePinnedAction,this.toggleCompositeBadgeAction],i=this.compositeContextMenuActionsProvider(this.compositeBarActionItem.id);i.length&&t.push(...i),this.compositeActivityAction.compositeBarActionItem.extensionId&&(t.push(new a.wv),t.push(n.manageExtensionAction)),this.compositeBar.isPinned(this.compositeBarActionItem.id)?(this.toggleCompositePinnedAction.label=(0,r.kg)(10741,"Hide '{0}'",this.compositeBarActionItem.name),this.toggleCompositePinnedAction.checked=!1,this.toggleCompositePinnedAction.enabled=this.compositeBar.getPinnedCompositeIds().length>1):(this.toggleCompositePinnedAction.label=(0,r.kg)(10742,"Keep '{0}'",this.compositeBarActionItem.name),this.toggleCompositePinnedAction.enabled=!0);const o=this.compositeBar.areBadgesEnabled(this.compositeBarActionItem.id);this.toggleCompositeBadgeAction.label=o?(0,r.kg)(10743,"Hide Badge"):(0,r.kg)(10744,"Show Badge");const s=this.contextMenuActionsProvider();s.length&&(t.push(new a.wv),t.push(...s));const d=(0,c.BK)(e),h={x:Math.floor(d.left+d.width/2),y:d.top+d.height};this.contextMenuService.showContextMenu({getAnchor:()=>h,getActions:()=>t,getActionsContext:()=>this.compositeBarActionItem.id})}updateChecked(){this.action.checked?(this.container.classList.add("checked"),this.container.setAttribute("aria-label",this.getTooltip()??this.container.title),this.container.setAttribute("aria-expanded","true"),this.container.setAttribute("aria-selected","true")):(this.container.classList.remove("checked"),this.container.setAttribute("aria-label",this.getTooltip()??this.container.title),this.container.setAttribute("aria-expanded","false"),this.container.setAttribute("aria-selected","false")),this.updateStyles()}updateEnabled(){this.element&&(this.action.enabled?this.element.classList.remove("disabled"):this.element.classList.add("disabled"))}dispose(){super.dispose(),this.label.remove()}};A=n=(0,s.C)([(0,s.Q)(8,l.Z),(0,s.Q)(9,b.b),(0,s.Q)(10,g._Y),(0,s.Q)(11,u.G),(0,s.Q)(12,S.T),(0,s.Q)(13,_.p)],A);class L extends a.rc{constructor(e,t){super("show.toggleCompositePinned",e?e.name:(0,r.kg)(10745,"Toggle View Pinned")),this.activity=e,this.compositeBar=t,this.checked=!!this.activity&&this.compositeBar.isPinned(this.activity.id)}async run(e){const t=this.activity?this.activity.id:e;this.compositeBar.isPinned(t)?this.compositeBar.unpin(t):this.compositeBar.pin(t)}}class P extends a.rc{constructor(e,t){super("show.toggleCompositeBadge",e?e.name:(0,r.kg)(10746,"Toggle View Badge")),this.compositeBarActionItem=e,this.compositeBar=t,this.checked=!1}async run(e){const t=this.compositeBarActionItem?this.compositeBarActionItem.id:e;this.compositeBar.toggleBadgeEnablement(t)}}},9981:(e,t,i)=>{i.d(t,{pC:()=>M,BJ:()=>A,be:()=>T});var o=i(92518);(0,i(6162).A)(".monaco-editor-pane-placeholder{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;gap:10px;justify-content:center;padding:0 16px}.monaco-editor-pane-placeholder:focus{outline:none!important}.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon{font-size:48px!important}.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon.codicon-error{color:var(--vscode-editorError-foreground)}.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon.codicon-warning{color:var(--vscode-editorWarning-foreground)}.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon.codicon-info,.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon.codicon-workspace-untrusted{color:var(--vscode-editorInfo-foreground)}.monaco-editor-pane-placeholder.max-height-200px .editor-placeholder-icon-container{display:none}.monaco-editor-pane-placeholder .editor-placeholder-label-container{font-size:14px;max-width:450px;text-align:center;user-select:text;-webkit-user-select:text;word-break:break-word}.monaco-editor-pane-placeholder .editor-placeholder-buttons-container{display:flex}.monaco-editor-pane-placeholder .editor-placeholder-buttons-container>.monaco-button{font-size:14px;margin:4px 5px;outline-offset:2px!important;padding:6px 11px;width:fit-content}",{});var n,s,r,a=i(25934),c=i(78699),d=i(32834),h=i(80512),l=i(84828),u=i(84793),p=i(65734),g=i(40240),m=i(68836),b=i(24821),w=i(64533),v=i(1180),f=i(84261),y=i(81200),C=i(77829),S=i(58544),k=i(39639),_=i(52526),x=i(45103),E=i(46002),D=i(96485),I=i(69612),V=i(16093);let M=class extends l.M{static{n=this}static{this.PLACEHOLDER_LABEL_MAX_LENGTH=1024}constructor(e,t,i,o,n){super(e,t,i,o,n),this.inputDisposable=this._register(new b.HE)}createEditor(e){this.container=document.createElement("div"),this.container.className="monaco-editor-pane-placeholder",this.container.style.outline="none",this.container.tabIndex=0,this.scrollbar=this._register(new p.MU(this.container,{horizontal:1,vertical:1})),e.appendChild(this.scrollbar.getDomNode())}async setInput(e,t,i,o){await super.setInput(e,t,i,o),o.isCancellationRequested||(this.inputDisposable.value=await this.renderInput(e,t))}async renderInput(e,t){const[i,o]=(0,v.Rd)(this.container,this.scrollbar);(0,m.w_)(i);const s=new b.Cm,{icon:r,label:a,actions:d}=await this.getContents(e,t,s),h=(0,c.xv)(a,n.PLACEHOLDER_LABEL_MAX_LENGTH),l=i.appendChild((0,m.$)(".editor-placeholder-icon-container"));s.add(new E.M(l)).text=r;const u=i.appendChild((0,m.$)(".editor-placeholder-label-container")),p=document.createElement("span");if(p.textContent=h,u.appendChild(p),i.setAttribute("aria-label",`${(0,k.Y5)(e,void 0,this.group,void 0)}, ${h}`),d.length){const e=i.appendChild((0,m.$)(".editor-placeholder-buttons-container")),t=s.add(new _.WN(e));for(let e=0;e<d.length;e++){const i=s.add(t.addButton({...x.cv,secondary:0!==e}));i.label=d[e].label,s.add(i.onDidClick((t=>{t&&m.fs.stop(t,!0),d[e].run()})))}}return o.scanDomNode(),s}clearInput(){this.container&&(0,m.w_)(this.container),this.inputDisposable.clear(),super.clearInput()}layout(e){const[t,i]=(0,v.Rd)(this.container,this.scrollbar);(0,m.Ej)(t,e.width,e.height),i.scanDomNode(),t.classList.toggle("max-height-200px",e.height<=200)}focus(){super.focus(),this.container?.focus()}dispose(){this.container?.remove(),super.dispose()}};M=n=(0,o.C)([(0,o.Q)(2,u.k),(0,o.Q)(3,g.G),(0,o.Q)(4,w.C)],M);let T=class extends M{static{s=this}static{this.ID="workbench.editors.workspaceTrustRequiredEditor"}static{this.LABEL=(0,a.kg)(11843,"Workspace Trust Required")}static{this.DESCRIPTOR=k.nQ.create(s,this.ID,this.LABEL)}constructor(e,t,i,o,n,r){super(s.ID,e,t,i,r),this.commandService=o,this.workspaceService=n}getTitle(){return s.LABEL}async getContents(){return{icon:"$(workspace-untrusted)",label:(0,y.jB)((0,y.Q_)(this.workspaceService.getWorkspace()))?(0,a.kg)(11844,"The file is not displayed in the editor because trust has not been granted to the folder."):(0,a.kg)(11845,"The file is not displayed in the editor because trust has not been granted to the workspace."),actions:[{label:(0,a.kg)(11846,"Manage Workspace Trust"),run:()=>this.commandService.executeCommand("workbench.trust.manage")}]}}};T=s=(0,o.C)([(0,o.Q)(1,u.k),(0,o.Q)(2,g.G),(0,o.Q)(3,f.w),(0,o.Q)(4,C.V),(0,o.Q)(5,w.C)],T);let A=class extends M{static{r=this}static{this.ID="workbench.editors.errorEditor"}static{this.LABEL=(0,a.kg)(11847,"Error Editor")}static{this.DESCRIPTOR=k.nQ.create(r,this.ID,this.LABEL)}constructor(e,t,i,o,n,s){super(r.ID,e,t,i,o),this.fileService=n,this.dialogService=s}async getContents(e,t,i){const o=e.resource,n=t.error,s=1===n?.fileOperationResult;let r;r=s?(0,a.kg)(11848,"The editor could not be opened because the file was not found."):(0,h.uD)(n)&&n.forceMessage?n.message:n?(0,a.kg)(11849,"The editor could not be opened due to an unexpected error: {0}",(0,c.kU)((0,I.rx)(n),M.PLACEHOLDER_LABEL_MAX_LENGTH/2)):(0,a.kg)(11850,"The editor could not be opened due to an unexpected error.");let l,u="$(error)";return(0,h.uD)(n)&&(n.forceSeverity===d.A.Info?u="$(info)":n.forceSeverity===d.A.Warning&&(u="$(warning)")),l=(0,h.uD)(n)&&n.actions.length>0?n.actions.map((e=>({label:e.label,run:()=>{const t=e.run();t instanceof Promise&&t.catch((e=>this.dialogService.error((0,I.rx)(e))))}}))):[{label:(0,a.kg)(11851,"Try Again"),run:()=>this.group.openEditor(e,{...t,source:S.$N.USER})}],s&&o&&this.fileService.hasProvider(o)&&i.add(this.fileService.onDidFilesChange((i=>{i.contains(o,1,0)&&this.group.openEditor(e,t)}))),{icon:u,label:r,actions:l??[]}}};A=r=(0,o.C)([(0,o.Q)(1,u.k),(0,o.Q)(2,g.G),(0,o.Q)(3,w.C),(0,o.Q)(4,D.$),(0,o.Q)(5,V.X)],A)},88693:(e,t,i)=>{i.d(t,{f:()=>F,v:()=>G});var o=i(92518);(0,i(6162).A)(".monaco-workbench .part.editor>.content .editor-group-container>.title{cursor:pointer}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label{flex:1;white-space:nowrap!important}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label a{font-size:13px}.monaco-workbench .part.editor>.content .editor-group-container>.title .monaco-icon-label:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .monaco-icon-label:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label span,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label h2{cursor:pointer}.monaco-workbench .part.editor>.content .editor-group-container>.title .monaco-icon-label:before{height:var(--editor-group-tab-height)}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .monaco-icon-label:after,.monaco-workbench .part.editor>.content .editor-group-container>.title.tabs .monaco-icon-label:after{margin-right:0}.monaco-editor-group-drag-image{border-radius:10px;display:inline-block;font-size:12px;max-width:120px;overflow:hidden;padding:1px 7px;position:absolute;text-overflow:ellipsis;white-space:nowrap}",{});var n,s=i(25934),r=i(19638),a=i(68836),c=i(85655),d=i(19660),h=i(76390),l=i(24821),u=i(79268),p=i(63288),g=i(46361),m=i(87276),b=i(28672),w=i(76257),v=i(54521),f=i(9957),y=(i(86849),i(55325),i(27785),i(82437),i(32802),i(77692)),C=(i(16115),i(79849),i(17960),i(69416),i(10380),i(32545)),S=i(40240),k=i(26658),_=i(84828),x=i(80512),E=i(47622),D=i(1180),I=i(75824),V=i(53658),M=i(23703),T=i(33825),A=i(9117),L=i(19383),P=i(36612),R=i(71478),B=i(16849),O=i(46490),N=i(33435);class F extends h.LN{constructor(e){super(),this.context=e}run(e,t){let i=this.context;return t?.preserveFocus&&(i={...this.context,preserveFocus:!0}),super.run(e,i)}}let G=class extends C.lR{static{n=this}static{this.EDITOR_TAB_HEIGHT={normal:35,compact:22}}constructor(e,t,i,o,n,s,r,a,c,d,h,u,p,m){super(u),this.parent=e,this.editorPartsView=t,this.groupsView=i,this.groupView=o,this.tabsModel=n,this.contextMenuService=s,this.instantiationService=r,this.contextKeyService=a,this.keybindingService=c,this.notificationService=d,this.quickInputService=h,this.editorResolverService=p,this.hostService=m,this.editorTransfer=A.PD.getInstance(),this.groupTransfer=A.PD.getInstance(),this.treeItemsTransfer=A.PD.getInstance(),this.editorActionsToolbarDisposables=this._register(new l.Cm),this.editorActionsDisposables=this._register(new l.Cm),this.renderDropdownAsChildElement=!1;const b=this.create(e);this.contextMenuContextKeyService=this._register(this.contextKeyService.createScoped(b));const w=this._register(this.instantiationService.createChild(new O.a([g.f,this.contextMenuContextKeyService])));this.resourceContext=this._register(w.createInstance(E.Lc)),this.editorPinnedContext=E.F9.bindTo(this.contextMenuContextKeyService),this.editorIsFirstContext=E.L5.bindTo(this.contextMenuContextKeyService),this.editorIsLastContext=E.bS.bindTo(this.contextMenuContextKeyService),this.editorStickyContext=E.im.bindTo(this.contextMenuContextKeyService),this.editorAvailableEditorIds=E.t0.bindTo(this.contextMenuContextKeyService),this.editorCanSplitInGroupContext=E.j7.bindTo(this.contextMenuContextKeyService),this.sideBySideEditorContext=E.Ms.bindTo(this.contextMenuContextKeyService),this.groupLockedContext=E.cY.bindTo(this.contextMenuContextKeyService)}create(e){return this.updateTabHeight(),e}get editorActionsEnabled(){return"default"===this.groupsView.partOptions.editorActionsLocation&&"none"!==this.groupsView.partOptions.showTabs}createEditorActionsToolBar(e,t){this.editorActionsToolbarContainer=document.createElement("div"),this.editorActionsToolbarContainer.classList.add(...t),e.appendChild(this.editorActionsToolbarContainer),this.handleEditorActionToolBarVisibility(this.editorActionsToolbarContainer)}handleEditorActionToolBarVisibility(e){const t=this.editorActionsEnabled,i=!!this.editorActionsToolbar;t&&!i?this.doCreateEditorActionsToolBar(e):!t&&i&&(this.editorActionsToolbar?.getElement().remove(),this.editorActionsToolbar=void 0,this.editorActionsToolbarDisposables.clear(),this.editorActionsDisposables.clear()),e.classList.toggle("hidden",!t)}doCreateEditorActionsToolBar(e){const t={groupId:this.groupView.id};this.editorActionsToolbar=this.editorActionsToolbarDisposables.add(this.instantiationService.createInstance(T.p,e,{actionViewItemProvider:(e,t)=>this.actionViewItemProvider(e,t),orientation:0,ariaLabel:(0,s.kg)(7022,"Editor actions"),getKeyBinding:e=>this.getKeybinding(e),actionRunner:this.editorActionsToolbarDisposables.add(new F(t)),anchorAlignmentProvider:()=>1,renderDropdownAsChildElement:this.renderDropdownAsChildElement,telemetrySource:"editorPart",resetMenu:p.D8.EditorTitle,overflowBehavior:{maxItems:9,exempted:P.wr},highlightToggledItems:!0})),this.editorActionsToolbar.context=t,this.editorActionsToolbarDisposables.add(this.editorActionsToolbar.actionRunner.onDidRun((e=>{e.error&&!(0,V.MB)(e.error)&&this.notificationService.error(e.error)})))}actionViewItemProvider(e,t){const i=this.groupView.activeEditorPane;if(i instanceof _.M){const o=i.getActionViewItem(e,t);if(o)return o}return(0,u.rN)(this.instantiationService,e,{...t,menuAsChild:this.renderDropdownAsChildElement})}updateEditorActionsToolbar(){if(!this.editorActionsEnabled)return;this.editorActionsDisposables.clear();const e=this.groupView.createEditorActions(this.editorActionsDisposables);this.editorActionsDisposables.add(e.onDidChange((()=>this.updateEditorActionsToolbar())));const t=(0,D.eU)(this.editorActionsToolbar),{primary:i,secondary:o}=this.prepareEditorActions(e.actions);t.setActions((0,d.p)(i),(0,d.p)(o))}getEditorPaneAwareContextKeyService(){return this.groupView.activeEditorPane?.scopedContextKeyService??this.contextKeyService}clearEditorActionsToolbar(){this.editorActionsEnabled&&(0,D.eU)(this.editorActionsToolbar).setActions([],[])}onGroupDragStart(e,t){if(e.target!==t)return!1;const i=this.isNewWindowOperation(e);this.groupTransfer.setData([new k.EV(this.groupView.id)],k.EV.prototype),e.dataTransfer&&(e.dataTransfer.effectAllowed="copyMove");let o=!1;if("multiple"===this.groupsView.partOptions.showTabs?o=this.doFillResourceDataTransfers(this.groupView.getEditors(1),e,i):this.groupView.activeEditor&&(o=this.doFillResourceDataTransfers([this.groupView.activeEditor],e,i)),!o&&I.gm&&e.dataTransfer?.setData(r.tx.TEXT,String(this.groupView.label)),this.groupView.activeEditor){let t=this.groupView.activeEditor.getName();"multiple"===this.groupsView.partOptions.showTabs&&this.groupView.count>1&&(t=(0,s.kg)(7023,"{0} (+{1})",t,this.groupView.count-1)),(0,r.WN)(e,t,"monaco-editor-group-drag-image",this.getColor(y.Rj),this.getColor(y.GV))}return i}async onGroupDragEnd(e,t,i,o){if(this.groupTransfer.clearData(k.EV.prototype),e.target!==i||!o||(0,k.Nr)())return;const n=await this.maybeCreateAuxiliaryEditorPartAt(e,i);if(!n)return;const s=n.activeGroup;this.groupsView.mergeGroup(this.groupView,s.id,{mode:this.isMoveOperation(t??e,s.id)?1:0}),s.focus()}async maybeCreateAuxiliaryEditorPartAt(e,t){const{point:i,display:o}=await this.hostService.getCursorScreenPoint()??{point:{x:e.screenX,y:e.screenY}},n=(0,a.fz)();if("visible"===n.document.visibilityState&&n.document.hasFocus()&&i.x>=n.screenX&&i.x<=n.screenX+n.outerWidth&&i.y>=n.screenY&&i.y<=n.screenY+n.outerHeight)return;const s=t.offsetWidth/2,r=30+t.offsetHeight/2,c={x:i.x-s,y:i.y-r};return o&&(c.x<o.x&&(c.x=o.x),c.y<o.y&&(c.y=o.y)),this.editorPartsView.createAuxiliaryEditorPart({bounds:c})}isNewWindowOperation(e){return this.groupsView.partOptions.dragToOpenWindow?!e.altKey:e.altKey}isMoveOperation(e,t,i){return!!i?.hasCapability(8)||(!(e.ctrlKey&&!R.zx||e.altKey&&R.zx)||t===this.groupView.id)}doFillResourceDataTransfers(e,t,i){return!!e.length&&(this.instantiationService.invokeFunction(k.SI,e.map((e=>({editor:e,groupId:this.groupView.id}))),t,{disableStandardTransfer:i}),!0)}onTabContextMenu(e,t,i){this.resourceContext.set(x.tf.getOriginalUri(e,{supportSideBySide:x.zX.PRIMARY})),this.editorPinnedContext.set(this.tabsModel.isPinned(e)),this.editorIsFirstContext.set(this.tabsModel.isFirst(e)),this.editorIsLastContext.set(this.tabsModel.isLast(e)),this.editorStickyContext.set(this.tabsModel.isSticky(e)),this.groupLockedContext.set(this.tabsModel.isLocked),this.editorCanSplitInGroupContext.set(e.hasCapability(32)),this.sideBySideEditorContext.set(e.typeId===M.JL.ID),(0,E.DK)(this.editorAvailableEditorIds,e,this.editorResolverService);let o=i;(0,a.Er)(t)&&(o=new c.P((0,a.zk)(i),t)),this.contextMenuService.showContextMenu({getAnchor:()=>o,menuId:p.D8.EditorTitleContext,menuActionOptions:{shouldForwardArgs:!0,arg:this.resourceContext.get()},contextKeyService:this.contextMenuContextKeyService,getActionsContext:()=>({groupId:this.groupView.id,editorIndex:this.groupView.getIndexOfEditor(e)}),getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id,this.contextMenuContextKeyService),onHide:()=>this.groupsView.activeGroup.focus()})}getKeybinding(e){return this.keybindingService.lookupKeybinding(e.id,this.getEditorPaneAwareContextKeyService())}getKeybindingLabel(e){const t=this.getKeybinding(e);return t?t.getLabel()??void 0:void 0}get tabHeight(){return"compact"!==this.groupsView.partOptions.tabHeight?n.EDITOR_TAB_HEIGHT.normal:n.EDITOR_TAB_HEIGHT.compact}getHoverTitle(e){const t=e.getTitle(2);return this.tabsModel.isPinned(e)?t:{markdown:new N.Bc("",{supportThemeIcons:!0,isTrusted:!0}).appendText(t).appendMarkdown(' (_preview_ [$(gear)](command:workbench.action.openSettings?%5B%22workbench.editor.enablePreview%22%5D "Configure Preview Mode"))'),markdownNotSupportedFallback:t+" (preview)"}}updateTabHeight(){this.parent.style.setProperty("--editor-group-tab-height",`${this.tabHeight}px`)}updateOptions(e,t){e.tabHeight!==t.tabHeight&&this.updateTabHeight(),e.editorActionsLocation===t.editorActionsLocation&&e.showTabs===t.showTabs||this.editorActionsToolbarContainer&&(this.handleEditorActionToolBarVisibility(this.editorActionsToolbarContainer),this.updateEditorActionsToolbar())}};G=n=(0,o.C)([(0,o.Q)(5,m.Z),(0,o.Q)(6,b._Y),(0,o.Q)(7,g.f),(0,o.Q)(8,w.b),(0,o.Q)(9,v.O),(0,o.Q)(10,f.G),(0,o.Q)(11,S.G),(0,o.Q)(12,L.Y),(0,o.Q)(13,B.v)],G)},43959:(e,t,i)=>{i.d(t,{ot:()=>K,KN:()=>U,D:()=>Z,jD:()=>Y,FB:()=>J});var o=i(92518),n=i(25934),s=i(19660),r=i(40268),a=i(83443),c=i(74670),d=i(28672),h=i(24821),l=i(40240),u=i(64533),p=i(44622),g=i(76962),m=i(14956),b=i(80914),w=i(63383),v=i(76390),f=i(63288),y=i(4141),C=i(68836),S=i(999),k=i(85655),_=i(4859),x=i(31275),E=i(79268),D=i(819),I=i(46361),V=i(87276),M=i(76257),T=i(30875),A=i(62876),L=i(41189),P=i(1437),R=i(41898),B=i(85105),O=i(70348),N=i(71512),F=i(9872);const G=(0,w.pU)("settings-view-bar-icon",m.W6.settingsGear,(0,n.kg)(10747,"Settings icon in the view bar."));m.W6.vm,m.W6.server,m.W6.recordKeys,m.W6.deviceMobile,m.W6.watch,m.W6.vr,m.W6.piano,m.W6.ruby,m.W6.code,m.W6.coffee,m.W6.snake,m.W6.project,m.W6.window,m.W6.library,m.W6.extensions,m.W6.terminal,m.W6.terminalDebian,m.W6.terminalLinux,m.W6.terminalUbuntu,m.W6.beaker,m.W6.package,m.W6.cloud,m.W6.book,m.W6.globe,m.W6.database,m.W6.notebook,m.W6.robot,m.W6.game,m.W6.chip,m.W6.music,m.W6.remoteExplorer,m.W6.github,m.W6.azure,m.W6.vscode,m.W6.extensions,m.W6.gift,m.W6.send,m.W6.bookmark,m.W6.briefcase,m.W6.megaphone,m.W6.comment,m.W6.telescope,m.W6.creditCard,m.W6.map,m.W6.deviceCameraVideo,m.W6.unmute,m.W6.law,m.W6.graphLine,m.W6.heart,m.W6.home,m.W6.inbox,m.W6.mortarBoard,m.W6.rocket,m.W6.magnet,m.W6.lock,m.W6.milestone,m.W6.tag,m.W6.pulse,m.W6.radioTower,m.W6.smiley,m.W6.zap,m.W6.squirrel,m.W6.symbolColor,m.W6.mail,m.W6.key,m.W6.pieChart,m.W6.organization,m.W6.preview,m.W6.wand,m.W6.starEmpty,m.W6.lightbulb,m.W6.symbolRuler,m.W6.dashboard,m.W6.calendar,m.W6.shield,m.W6.verified,m.W6.debug,m.W6.flame,m.W6.compass,m.W6.paintcan,m.W6.archive,m.W6.mic,m.W6.jersey;var W,z=i(1180),H=i(5336),Q=i(84261);let U=class extends h.jG{static{W=this}static{this.ACCOUNTS_ACTION_INDEX=0}static{this.ACCOUNTS_ICON=(0,w.pU)("accounts-view-bar-icon",m.W6.account,(0,n.kg)(7012,"Accounts icon in the view bar."))}constructor(e,t,i,o,a,c,d){super(),this.contextMenuActionsProvider=e,this.colors=t,this.activityHoverOptions=i,this.instantiationService=a,this.storageService=c,this.extensionService=d,this.globalActivityAction=this._register(new v.rc(r.y)),this.accountAction=this._register(new v.rc(r.Z)),this.element=document.createElement("div");const h=()=>({anchorAlignment:"left"===o.getValue("workbench.sideBar.location")?1:0,anchorAxisAlignment:1});this.globalActivityActionBar=this._register(new s.E(this.element,{actionViewItemProvider:(e,t)=>{if(e.id===r.y)return this.instantiationService.createInstance(j,this.contextMenuActionsProvider,{...t,colors:this.colors,hoverOptions:this.activityHoverOptions},h);if(e.id===r.Z)return this.instantiationService.createInstance(K,this.contextMenuActionsProvider,{...t,colors:this.colors,hoverOptions:this.activityHoverOptions},h,(e=>{e.unshift((0,v.ih)({id:"hideAccounts",label:(0,n.kg)(7013,"Hide Accounts"),run:()=>X(c,!1)}),new v.wv)}));throw new Error(`No view item for action '${e.id}'`)},orientation:1,ariaLabel:(0,n.kg)(7014,"Manage"),preventLoopNavigation:!0})),this.accountsVisibilityPreference&&this.globalActivityActionBar.push(this.accountAction,{index:W.ACCOUNTS_ACTION_INDEX}),this.globalActivityActionBar.push(this.globalActivityAction),this.registerListeners()}registerListeners(){this.extensionService.whenInstalledExtensionsRegistered().then((()=>{this._store.isDisposed||this._register(this.storageService.onDidChangeValue(0,K.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)((()=>this.toggleAccountsActivity())))}))}create(e){e.appendChild(this.element)}focus(){this.globalActivityActionBar.focus(!0)}size(){return this.globalActivityActionBar.viewItems.length}getContextMenuActions(){return[(0,v.ih)({id:"toggleAccountsVisibility",label:(0,n.kg)(7015,"Accounts"),checked:this.accountsVisibilityPreference,run:()=>this.accountsVisibilityPreference=!this.accountsVisibilityPreference})]}toggleAccountsActivity(){2===this.globalActivityActionBar.length()&&this.accountsVisibilityPreference||(2===this.globalActivityActionBar.length()?this.globalActivityActionBar.pull(W.ACCOUNTS_ACTION_INDEX):this.globalActivityActionBar.push(this.accountAction,{index:W.ACCOUNTS_ACTION_INDEX}))}get accountsVisibilityPreference(){return J(this.storageService)}set accountsVisibilityPreference(e){X(this.storageService,e)}};U=W=(0,o.C)([(0,o.Q)(3,D.p),(0,o.Q)(4,d._Y),(0,o.Q)(5,u.C),(0,o.Q)(6,p.c)],U);let $=class extends g.LF{constructor(e,t,i,o,n,s,r,a,c,d,h,l,u){super(t,{draggable:!1,icon:!0,hasPopup:!0,...i},(()=>!0),s,r,h,l),this.menuId=e,this.contextMenuActionsProvider=o,this.contextMenuAlignmentOptions=n,this.menuService=a,this.contextMenuService=c,this.contextKeyService=d,this.activityService=u,this.updateItemActivity(),this._register(this.activityService.onDidChangeActivity((e=>{(0,z.Kg)(e)&&e===this.compositeBarActionItem.id&&this.updateItemActivity()})))}updateItemActivity(){const e=this.activityService.getActivity(this.compositeBarActionItem.id);let t=e[0];if(t){const{badge:i,priority:o}=t;i instanceof a.hV&&e.length>1&&(t={badge:this.getCumulativeNumberBadge(e,o??0)})}this.action.activity=t}getCumulativeNumberBadge(e,t){const i=e.filter((e=>e.badge instanceof a.hV&&(e.priority??0)===t)),o=i.reduce(((e,t)=>e+t.badge.number),0);return new a.hV(o,(()=>i.reduce(((e,t,o)=>(e+=t.badge.getDescription(),o<i.length-1&&(e=`${e}\n`),e)),"")))}render(e){super.render(e),this._register((0,C.ko)(this.container,C.Bx.MOUSE_DOWN,(async e=>{C.fs.stop(e,!0),2!==e?.button&&this.run()}))),this._register((0,C.ko)(this.container,C.Bx.CONTEXT_MENU,(async e=>{e.stopPropagation();const t=new h.Cm,i=await this.resolveContextMenuActions(t),o=new k.P((0,C.zk)(this.container),e);this.contextMenuService.showContextMenu({getAnchor:()=>o,getActions:()=>i,onHide:()=>t.dispose()})}))),this._register((0,C.ko)(this.container,C.Bx.KEY_UP,(e=>{const t=new S.Zh(e);(t.equals(3)||t.equals(10))&&(C.fs.stop(e,!0),this.run())}))),this._register((0,C.ko)(this.container,_.B.Tap,(e=>{C.fs.stop(e,!0),this.run()})))}async resolveContextMenuActions(e){return this.contextMenuActionsProvider()}async run(){const e=new h.Cm,t=e.add(this.menuService.createMenu(this.menuId,this.contextKeyService)),i=await this.resolveMainMenuActions(t,e),{anchorAlignment:o,anchorAxisAlignment:n}=this.contextMenuAlignmentOptions()??{anchorAlignment:void 0,anchorAxisAlignment:void 0};this.contextMenuService.showContextMenu({getAnchor:()=>this.label,anchorAlignment:o,anchorAxisAlignment:n,getActions:()=>i,onHide:()=>e.dispose(),menuActionOptions:{renderShortTitle:!0}})}async resolveMainMenuActions(e,t){const i=[];return(0,E.Ot)(e,{renderShortTitle:!0},{primary:[],secondary:i}),i}};$=(0,o.C)([(0,o.Q)(5,l.G),(0,o.Q)(6,O.T),(0,o.Q)(7,y.e),(0,o.Q)(8,V.Z),(0,o.Q)(9,I.f),(0,o.Q)(10,D.p),(0,o.Q)(11,M.b),(0,o.Q)(12,c.w)],$);let K=class extends ${static{this.ACCOUNTS_VISIBILITY_PREFERENCE_KEY="workbench.activity.showAccounts"}constructor(e,t,i,o,s,a,c,d,h,l,u,p,m,w,v,y,C,S,k,_){const E=k.createInstance(g.j,{id:r.Z,name:(0,n.kg)(7015,"Accounts"),classNames:b.L0.asClassNameArray(U.ACCOUNTS_ICON)});super(f.D8.AccountsContext,E,t,e,i,s,c,h,d,l,w,v,S),this.fillContextMenuActions=o,this.lifecycleService=a,this.authenticationService=u,this.productService=m,this.secretStorageService=y,this.logService=C,this.commandService=_,this.groupedAccounts=new Map,this.problematicProviders=new Set,this.initialized=!1,this.sessionFromEmbedder=new x.d((()=>(0,P.S4)(this.secretStorageService,this.productService))),this._register(E),this.registerListeners(),this.initialize()}registerListeners(){this._register(this.authenticationService.onDidRegisterAuthenticationProvider((async e=>{await this.addAccountsFromProvider(e.id)}))),this._register(this.authenticationService.onDidUnregisterAuthenticationProvider((e=>{this.groupedAccounts.delete(e.id),this.problematicProviders.delete(e.id)}))),this._register(this.authenticationService.onDidChangeSessions((async e=>{if(e.event.removed)for(const t of e.event.removed)this.removeAccount(e.providerId,t.account);for(const t of[...e.event.changed??[],...e.event.added??[]])try{await this.addOrUpdateAccount(e.providerId,t.account)}catch(e){this.logService.error(e)}})))}async initialize(){if(await this.lifecycleService.when(3),this._store.isDisposed)return;const e=this._register((0,C.U3)((0,C.zk)(this.element),(async()=>{await this.doInitialize(),e.dispose()})))}async doInitialize(){const e=this.authenticationService.getProviderIds(),t=await Promise.allSettled(e.map((e=>this.addAccountsFromProvider(e))));for(const e of t)"rejected"===e.status&&this.logService.error(e.reason);this.initialized=!0}async resolveMainMenuActions(e,t){await super.resolveMainMenuActions(e,t);const i=this.authenticationService.getProviderIds(),o=e.getActions();let s=[];for(const e of i){if(!this.initialized){const e=t.add(new v.rc("noAccountsAvailable",(0,n.kg)(7016,"Loading..."),void 0,!1));s.push(e);break}const i=this.authenticationService.getProvider(e).label,o=this.groupedAccounts.get(e);if(o)for(const t of o){const o=[(0,v.ih)({id:`configureSessions${t.label}`,label:(0,n.kg)(7018,"Manage Trusted Extensions"),enabled:!0,run:()=>this.commandService.executeCommand("_manageTrustedExtensionsForAccount",{providerId:e,accountLabel:t.label})})];t.canSignOut&&o.push((0,v.ih)({id:"signOut",label:(0,n.kg)(7019,"Sign Out"),enabled:!0,run:()=>this.commandService.executeCommand("_signOutOfAccount",{providerId:e,accountLabel:t.label})}));const r=new v.YH("activitybar.submenu",`${t.label} (${i})`,o);s.push(r)}else if(this.problematicProviders.has(e)){const o=t.add(new v.rc("providerUnavailable",(0,n.kg)(7017,"{0} is currently unavailable",i),void 0,!1));s.push(o);try{await this.addAccountsFromProvider(e)}catch(e){this.logService.error(e)}}}if(i.length&&!s.length){const e=t.add(new v.rc("noAccountsAvailable",(0,n.kg)(7020,"You are not signed in to any accounts"),void 0,!1));s.push(e)}return s.length&&o.length&&s.push(new v.wv),o.forEach(((e,t)=>{const i=e[1];s=s.concat(i),t!==o.length-1&&s.push(new v.wv)})),s}async resolveContextMenuActions(e){const t=await super.resolveContextMenuActions(e);return this.fillContextMenuActions(t),t}async addOrUpdateAccount(e,t){let i=this.groupedAccounts.get(e);i||(i=[],this.groupedAccounts.set(e,i));const o=await this.sessionFromEmbedder.value;let n=!0;o&&!o.canSignOut&&(await this.authenticationService.getSessions(e)).some((e=>e.id===o.id&&e.account.id===t.id))&&(n=!1);const s=i.find((e=>e.label===t.label));s?n||(s.canSignOut=n):i.push({...t,canSignOut:n})}removeAccount(e,t){const i=this.groupedAccounts.get(e);if(!i)return;const o=i.findIndex((e=>e.id===t.id));-1!==o&&(i.splice(o,1),0===i.length&&this.groupedAccounts.delete(e))}async addAccountsFromProvider(e){try{const t=await this.authenticationService.getSessions(e);this.problematicProviders.delete(e);for(const i of t)try{await this.addOrUpdateAccount(e,i.account)}catch(e){this.logService.error(e)}}catch(t){this.logService.error(t),this.problematicProviders.add(e)}}};K=(0,o.C)([(0,o.Q)(4,l.G),(0,o.Q)(5,N.f),(0,o.Q)(6,O.T),(0,o.Q)(7,V.Z),(0,o.Q)(8,y.e),(0,o.Q)(9,I.f),(0,o.Q)(10,R.h),(0,o.Q)(11,B.P),(0,o.Q)(12,A.Y),(0,o.Q)(13,D.p),(0,o.Q)(14,M.b),(0,o.Q)(15,L.O),(0,o.Q)(16,T.r),(0,o.Q)(17,c.w),(0,o.Q)(18,d._Y),(0,o.Q)(19,Q.w)],K);let j=class extends ${constructor(e,t,i,o,s,a,c,d,h,l,u,p,m,w){const v=m.createInstance(g.j,{id:r.y,name:(0,n.kg)(7014,"Manage"),classNames:b.L0.asClassNameArray(o.currentProfile.icon?b.L0.fromId(o.currentProfile.icon):G)});super(f.D8.GlobalActivity,v,t,e,i,s,a,c,d,h,l,p,w),this.userDataProfileService=o,this._register(v),this._register(this.userDataProfileService.onDidChangeCurrentProfile((e=>{v.compositeBarActionItem={...v.compositeBarActionItem,classNames:b.L0.asClassNameArray(o.currentProfile.icon?b.L0.fromId(o.currentProfile.icon):G)}})))}render(e){super.render(e),this.profileBadge=(0,C.BC)(e,(0,C.$)(".profile-badge")),this.profileBadgeContent=(0,C.BC)(this.profileBadge,(0,C.$)(".profile-badge-content")),this.updateProfileBadge()}updateProfileBadge(){this.profileBadge&&this.profileBadgeContent&&((0,C.w_)(this.profileBadgeContent),(0,C.jD)(this.profileBadge),this.userDataProfileService.currentProfile.isDefault||this.userDataProfileService.currentProfile.icon&&this.userDataProfileService.currentProfile.icon!==G.id||this.action.activity||((0,C.WU)(this.profileBadge),this.profileBadgeContent.classList.add("profile-text-overlay"),this.profileBadgeContent.textContent=this.userDataProfileService.currentProfile.name.substring(0,2).toUpperCase()))}updateActivity(){super.updateActivity(),this.updateProfileBadge()}computeTitle(){return this.userDataProfileService.currentProfile.isDefault?super.computeTitle():(0,n.kg)(7021,"Manage {0} (Profile)",this.userDataProfileService.currentProfile.name)}};j=(0,o.C)([(0,o.Q)(3,F.TY),(0,o.Q)(4,l.G),(0,o.Q)(5,O.T),(0,o.Q)(6,y.e),(0,o.Q)(7,V.Z),(0,o.Q)(8,I.f),(0,o.Q)(9,D.p),(0,o.Q)(10,B.P),(0,o.Q)(11,M.b),(0,o.Q)(12,d._Y),(0,o.Q)(13,c.w)],j);let Z=class extends K{constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,p,g,m,b,w,v){super((()=>q(g,!0)),{...t,colors:e=>({badgeBackground:e.getColor(H.Nl),badgeForeground:e.getColor(H.Sj)}),hoverOptions:e,compact:!0},(()=>{}),(e=>e),i,o,n,s,r,a,c,d,h,l,u,p,m,b,w,v)}};Z=(0,o.C)([(0,o.Q)(2,l.G),(0,o.Q)(3,N.f),(0,o.Q)(4,O.T),(0,o.Q)(5,V.Z),(0,o.Q)(6,y.e),(0,o.Q)(7,I.f),(0,o.Q)(8,R.h),(0,o.Q)(9,B.P),(0,o.Q)(10,A.Y),(0,o.Q)(11,D.p),(0,o.Q)(12,M.b),(0,o.Q)(13,L.O),(0,o.Q)(14,u.C),(0,o.Q)(15,T.r),(0,o.Q)(16,c.w),(0,o.Q)(17,d._Y),(0,o.Q)(18,Q.w)],Z);let Y=class extends j{constructor(e,t,i,o,n,s,r,a,c,d,h,l,u,p){super((()=>q(p,!1)),{...t,colors:e=>({badgeBackground:e.getColor(H.Nl),badgeForeground:e.getColor(H.Sj)}),hoverOptions:e,compact:!0},(()=>{}),i,o,n,s,r,a,c,d,h,l,u)}};function q(e,t){const i=[];return t&&i.push((0,v.ih)({id:"hideAccounts",label:(0,n.kg)(7013,"Hide Accounts"),run:()=>X(e,!1)}),new v.wv),[...i,(0,v.ih)({id:"toggle.hideAccounts",label:(0,n.kg)(7015,"Accounts"),checked:J(e),run:()=>X(e,!J(e))}),(0,v.ih)({id:"toggle.hideManage",label:(0,n.kg)(7014,"Manage"),checked:!0,enabled:!1,run:()=>{throw new Error('"Manage" can not be hidden')}})]}function J(e){return e.getBoolean(K.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,0,!0)}function X(e,t){e.store(K.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,t,0,0)}Y=(0,o.C)([(0,o.Q)(2,F.TY),(0,o.Q)(3,l.G),(0,o.Q)(4,O.T),(0,o.Q)(5,y.e),(0,o.Q)(6,V.Z),(0,o.Q)(7,I.f),(0,o.Q)(8,D.p),(0,o.Q)(9,B.P),(0,o.Q)(10,M.b),(0,o.Q)(11,d._Y),(0,o.Q)(12,c.w),(0,o.Q)(13,u.C)],Y)},80985:(e,t,i)=>{(0,i(6162).A)(".monaco-workbench.nopanel .part.panel{display:none!important;visibility:hidden!important}.monaco-workbench .part.panel.bottom .composite.title{border-top-style:solid;border-top-width:1px}.monaco-workbench.nomaineditorarea .part.panel.bottom .composite.title{border-top-width:0}.monaco-workbench .part.panel.top{border-bottom-style:solid;border-bottom-width:1px}.monaco-workbench.nomaineditorarea .part.panel.top{border-bottom-width:0}.monaco-workbench .part.panel.right{border-left-style:solid;border-left-width:1px}.monaco-workbench.nomaineditorarea .part.panel.right{border-left-width:0}.monaco-workbench .part.panel.left{border-right-style:solid;border-right-width:1px}.monaco-workbench.nomaineditorarea .part.panel.left{border-right-width:0}.monaco-workbench .part.panel>.content .monaco-editor,.monaco-workbench .part.panel>.content .monaco-editor .margin,.monaco-workbench .part.panel>.content .monaco-editor .monaco-editor-background{background-color:var(--vscode-panel-background)}.monaco-workbench .part.panel>.content .suggest-input-container .monaco-editor,.monaco-workbench .part.panel>.content .suggest-input-container .monaco-editor .margin,.monaco-workbench .part.panel>.content .suggest-input-container .monaco-editor .monaco-editor-background{background-color:inherit}.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before{border-top-color:var(--vscode-panelTitle-activeBorder)!important}.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-panelTitle-activeForeground)!important}.monaco-workbench .part.panel .monaco-inputbox{border-color:var(--vscode-panelInput-border,transparent)!important}.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus{outline:none}.monaco-workbench .part.basepanel.right .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.right .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.right .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(-90deg)}.monaco-workbench .part.basepanel.left .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.left .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.left .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(90deg)}.monaco-workbench .part.basepanel.top .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.top .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.top .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(180deg)}",{})},57351:(e,t,i)=>{i.d(t,{rI:()=>S}),i(80985);var o=i(25934),n=i(63288),s=i(16409),r=i(81893),a=i(39924),c=i(47622),d=i(64788),h=i(14956),l=i(63383),u=i(91279),p=i(92986),g=i(22475),m=i(82561),b=i(54521);const w=(0,l.pU)("panel-maximize",h.W6.chevronUp,(0,o.kg)(9455,"Icon to maximize a panel.")),v=(0,l.pU)("panel-restore",h.W6.chevronDown,(0,o.kg)(9456,"Icon to restore a panel.")),f=(0,l.pU)("panel-close",h.W6.close,(0,o.kg)(9457,"Icon to close a panel.")),y=(0,l.pU)("panel-layout-icon",h.W6.layoutPanel,(0,o.kg)(9458,"Icon to toggle the panel off when it is on.")),C=(0,l.pU)("panel-layout-icon-off",h.W6.layoutPanelOff,(0,o.kg)(9459,"Icon to toggle the panel on when it is off."));class S extends n.L{static{this.ID="workbench.action.togglePanel"}static{this.LABEL=(0,o.aS)(9460,"Toggle Panel Visibility")}constructor(){super({id:S.ID,title:S.LABEL,toggled:{condition:c._o,title:(0,o.kg)(9461,"Panel"),mnemonicTitle:(0,o.kg)(9462,"&&Panel")},f1:!0,category:s.L.View,keybinding:{primary:2088,weight:200},menu:[{id:n.D8.MenubarAppearanceMenu,group:"2_workbench_layout",order:5},{id:n.D8.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:4}]})}async run(e){const t=e.get(a.Y);t.setPartHidden(t.isVisible("workbench.parts.panel"),"workbench.parts.panel")}}(0,n.ug)(S),(0,n.ug)(class extends n.L{static{this.ID="workbench.action.focusPanel"}static{this.LABEL=(0,o.kg)(9463,"Focus into Panel")}constructor(){super({id:"workbench.action.focusPanel",title:(0,o.aS)(9463,"Focus into Panel"),category:s.L.View,f1:!0})}async run(e){const t=e.get(a.Y),i=e.get(m.b);t.isVisible("workbench.parts.panel")||t.setPartHidden(!1,"workbench.parts.panel");const o=i.getActivePaneComposite(1);o?.focus()}});function k(e,t,i,o,n){return{id:e,title:t,shortLabel:i,value:o,when:n}}function _(e,t,i,o){return k(e,t,i,o,c.pi.notEqualsTo((0,r.Wf)(o)))}function x(e,t,i,o){return k(e,t,i,o,c.hE.notEqualsTo(o))}const E=[_("workbench.action.positionPanelTop",(0,o.aS)(9464,"Move Panel To Top"),(0,o.kg)(9465,"Top"),3),_("workbench.action.positionPanelLeft",(0,o.aS)(9466,"Move Panel Left"),(0,o.kg)(9467,"Left"),0),_("workbench.action.positionPanelRight",(0,o.aS)(9468,"Move Panel Right"),(0,o.kg)(9469,"Right"),1),_("workbench.action.positionPanelBottom",(0,o.aS)(9470,"Move Panel To Bottom"),(0,o.kg)(9471,"Bottom"),2)],D=[x("workbench.action.alignPanelLeft",(0,o.aS)(9472,"Set Panel Alignment to Left"),(0,o.kg)(9473,"Left"),"left"),x("workbench.action.alignPanelRight",(0,o.aS)(9474,"Set Panel Alignment to Right"),(0,o.kg)(9475,"Right"),"right"),x("workbench.action.alignPanelCenter",(0,o.aS)(9476,"Set Panel Alignment to Center"),(0,o.kg)(9477,"Center"),"center"),x("workbench.action.alignPanelJustify",(0,o.aS)(9478,"Set Panel Alignment to Justify"),(0,o.kg)(9479,"Justify"),"justify")];n.ZG.appendMenuItem(n.D8.MenubarAppearanceMenu,{submenu:n.D8.PanelPositionMenu,title:(0,o.kg)(9480,"Panel Position"),group:"3_workbench_layout_move",order:4}),E.forEach(((e,t)=>{const{id:i,title:o,shortLabel:r,value:c,when:d}=e;(0,n.ug)(class extends n.L{constructor(){super({id:i,title:o,category:s.L.View,f1:!0})}run(e){e.get(a.Y).setPanelPosition(void 0===c?2:c)}}),n.ZG.appendMenuItem(n.D8.PanelPositionMenu,{command:{id:i,title:r,toggled:d.negate()},order:5+t})})),n.ZG.appendMenuItem(n.D8.MenubarAppearanceMenu,{submenu:n.D8.PanelAlignmentMenu,title:(0,o.kg)(9481,"Align Panel"),group:"3_workbench_layout_move",order:5}),D.forEach((e=>{const{id:t,title:i,shortLabel:o,value:r,when:c}=e;(0,n.ug)(class extends n.L{constructor(){super({id:t,title:i,category:s.L.View,toggled:c.negate(),f1:!0})}run(e){e.get(a.Y).setPanelAlignment(void 0===r?"center":r)}}),n.ZG.appendMenuItem(n.D8.PanelAlignmentMenu,{command:{id:t,title:o,toggled:c.negate()},order:5})}));class I extends n.L{constructor(e,t){super({id:e,title:t,category:s.L.View,f1:!0})}async run(e,t){const i=e.get(m.b),o=i.getVisiblePaneCompositeIds(1),n=i.getActivePaneComposite(1);if(!n)return;let s;for(let e=0;e<o.length;e++)if(o[e]===n.getId()){s=o[(e+o.length+t)%o.length];break}"string"==typeof s&&await i.openPaneComposite(s,1,!0)}}(0,n.ug)(class extends I{constructor(){super("workbench.action.previousPanelView",(0,o.aS)(9482,"Previous Panel View"))}run(e){return super.run(e,-1)}}),(0,n.ug)(class extends I{constructor(){super("workbench.action.nextPanelView",(0,o.aS)(9483,"Next Panel View"))}run(e){return super.run(e,1)}}),(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.toggleMaximizedPanel",title:(0,o.aS)(9484,"Toggle Maximized Panel"),tooltip:(0,o.kg)(9485,"Maximize Panel Size"),category:s.L.View,f1:!0,icon:w,precondition:d.M$.or(c.hE.isEqualTo("center"),d.M$.and(c.pi.notEqualsTo("bottom"),c.pi.notEqualsTo("top"))),toggled:{condition:c.GK,icon:v,tooltip:(0,o.kg)(9486,"Restore Panel Size")},menu:[{id:n.D8.PanelTitle,group:"navigation",order:1,when:d.M$.or(c.hE.isEqualTo("center"),d.M$.and(c.pi.notEqualsTo("bottom"),c.pi.notEqualsTo("top")))}]})}run(e){const t=e.get(a.Y),i=e.get(b.O);"center"!==t.getPanelAlignment()&&(0,r.$b)(t.getPanelPosition())?i.warn((0,o.kg)(9487,"Maximizing the panel is only supported when it is center aligned.")):t.isVisible("workbench.parts.panel")?t.toggleMaximizedPanel():(t.setPartHidden(!1,"workbench.parts.panel"),t.isPanelMaximized()||t.toggleMaximizedPanel())}}),(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.closePanel",title:(0,o.aS)(9488,"Hide Panel"),category:s.L.View,icon:f,menu:[{id:n.D8.CommandPalette,when:c._o},{id:n.D8.PanelTitle,group:"navigation",order:2}]})}run(e){e.get(a.Y).setPartHidden(!0,"workbench.parts.panel")}}),(0,n.ug)(class extends n.L{constructor(){super({id:"workbench.action.closeAuxiliaryBar",title:(0,o.aS)(9489,"Hide Secondary Side Bar"),category:s.L.View,icon:f,menu:[{id:n.D8.CommandPalette,when:c.zp},{id:n.D8.AuxiliaryBarTitle,group:"navigation",order:2,when:d.M$.notEquals("config.workbench.activityBar.location","top")}]})}run(e){e.get(a.Y).setPartHidden(!0,"workbench.parts.auxiliarybar")}}),n.ZG.appendMenuItems([{id:n.D8.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:S.ID,title:(0,o.kg)(9490,"Toggle Panel"),icon:C,toggled:{condition:c._o,icon:y}},when:d.M$.or(d.M$.equals("config.workbench.layoutControl.type","toggles"),d.M$.equals("config.workbench.layoutControl.type","both")),order:1}},{id:n.D8.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:S.ID,title:(0,o.aS)(9491,"Hide Panel")},when:d.M$.and(c._o,d.M$.equals("viewLocation",(0,u._4)(1))),order:2}}]);class V extends n.L{constructor(e,t,i){super(i),this.source=e,this.destination=t}run(e,...t){const i=e.get(p.X),o=e.get(a.Y),n=e.get(g.R),s=i.getViewContainersByLocation(this.source),r=i.getViewContainersByLocation(this.destination);if(s.length){const e=n.getVisibleViewContainer(this.source);s.forEach((e=>i.moveViewContainerToLocation(e,this.destination,void 0,this.desc.id))),o.setPartHidden(!1,1===this.destination?"workbench.parts.panel":"workbench.parts.auxiliarybar"),e&&0===r.length&&n.openViewContainer(e.id,!0)}}}class M extends V{static{this.ID="workbench.action.movePanelToSidePanel"}constructor(){super(1,2,{id:M.ID,title:(0,o.aS)(9492,"Move Panel Views To Secondary Side Bar"),category:s.L.View,f1:!1})}}class T extends V{static{this.ID="workbench.action.movePanelToSecondarySideBar"}constructor(){super(1,2,{id:T.ID,title:(0,o.aS)(9492,"Move Panel Views To Secondary Side Bar"),category:s.L.View,f1:!0})}}(0,n.ug)(M),(0,n.ug)(T);class A extends V{static{this.ID="workbench.action.moveSidePanelToPanel"}constructor(){super(2,1,{id:A.ID,title:(0,o.aS)(9493,"Move Secondary Side Bar Views To Panel"),category:s.L.View,f1:!1})}}class L extends V{static{this.ID="workbench.action.moveSecondarySideBarToPanel"}constructor(){super(2,1,{id:L.ID,title:(0,o.aS)(9493,"Move Secondary Side Bar Views To Panel"),category:s.L.View,f1:!0})}}(0,n.ug)(A),(0,n.ug)(L)},82804:(e,t,i)=>{i.d(t,{j:()=>xe});var o=i(92518),n=i(6162);(0,n.A)(".monaco-workbench .menubar .toolbar-toggle-more,.monaco-workbench .menubar>.menubar-menu-button{color:var(--vscode-titleBar-activeForeground)}.monaco-workbench .activitybar .menubar.compact .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button{color:var(--vscode-activityBar-inactiveForeground)}.monaco-workbench .activitybar .menubar.compact:not(:focus-within)>.menubar-menu-button:hover,.monaco-workbench .activitybar .menubar.compact:not(:focus-within)>.menubar-menu-button:hover .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button.open,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button.open .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus .toolbar-toggle-more{color:var(--vscode-activityBar-foreground)}.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus{background-color:var(--vscode-menubar-selectionBackground)}.monaco-workbench .menubar.inactive:not(.compact)>.menubar-menu-button,.monaco-workbench .menubar.inactive:not(.compact)>.menubar-menu-button .toolbar-toggle-more{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open .toolbar-toggle-more,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .toolbar-toggle-more,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover .toolbar-toggle-more{color:var(--vscode-menubar-selectionForeground)}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .menubar-menu-title,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover .menubar-menu-title{background-color:var(--vscode-menubar-selectionBackground)}.monaco-workbench .menubar>.menubar-menu-button:hover .menubar-menu-title{outline:dashed 1px var(--vscode-menubar-selectionBorder)}.monaco-workbench .menubar>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:focus .menubar-menu-title{outline:solid 1px var(--vscode-menubar-selectionBorder)}.monaco-workbench .menubar>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:focus .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:hover .menubar-menu-title{outline-color:var(--vscode-menubar-selectionBorder);outline-offset:-1px}",{});var s=i(25934),r=i(63288),a=i(4141),c=i(3560),d=i(46361),h=i(76390),l=i(68836),u=i(76257),p=i(71478),g=i(819),m=i(1661),b=i(24821),w=i(28036),v=i(72841),f=i(93765),y=i(1935),C=i(88901),S=i(64533),k=(i(92372),i(54521)),_=i(55196),x=i(85105),E=i(75824),D=i(999),I=i(85655),V=i(4859),M=i(35380),T=i(87427),A=i(14956),L=i(80914),P=i(61478),R=i(78699);(0,n.A)(".menubar{box-sizing:border-box;display:flex;flex-shrink:1;height:100%;overflow:hidden}.menubar.overflow-menu-only{width:38px}.fullscreen .menubar:not(.compact){margin:0;padding:4px 5px}.menubar>.menubar-menu-button{-webkit-app-region:no-drag;zoom:1;align-items:center;box-sizing:border-box;cursor:default;display:flex;outline:0!important;white-space:nowrap}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .menubar-menu-title{outline-color:var(--vscode-focusBorder);outline-offset:-1px;outline-style:solid;outline-width:1px}.menubar.compact{flex-shrink:0;overflow:visible}.menubar.compact>.menubar-menu-button{height:100%;padding:0;width:100%}.menubar-menu-title{border-radius:5px;padding:0 8px}.menubar .menubar-menu-items-holder{left:0;opacity:1;position:fixed;z-index:2000}.menubar.compact .menubar-menu-items-holder{position:fixed}.menubar .menubar-menu-items-holder.monaco-menu-container{border:none;outline:0}.menubar .menubar-menu-items-holder.monaco-menu-container :focus{outline:0}.menubar .toolbar-toggle-more{align-items:center;display:flex;height:22px;justify-content:center;padding:0 8px;vertical-align:sub;width:22px}.menubar.compact .toolbar-toggle-more{align-items:center;cursor:pointer;display:flex;justify-content:center;left:0;position:relative;top:0;width:100%}.menubar.compact .toolbar-toggle-more:before,.menubar:not(.compact) .menubar-menu-button:first-child .toolbar-toggle-more:before{content:var(--vscode-icon-menu-content)!important;font-family:var(--vscode-icon-menu-font-family)!important}.menubar.compact>.menubar-menu-button.open .menubar-menu-title,.menubar.compact>.menubar-menu-button:focus .menubar-menu-title,.menubar.compact>.menubar-menu-button:hover .menubar-menu-title{outline-offset:-8px!important;outline-width:1px!important}",{});var B=i(19730);const O=l.$;var N;!function(e){e[e.HIDDEN=0]="HIDDEN",e[e.VISIBLE=1]="VISIBLE",e[e.FOCUSED=2]="FOCUSED",e[e.OPEN=3]="OPEN"}(N||(N={}));class F extends b.jG{static{this.OVERFLOW_INDEX=-1}constructor(e,t,i){super(),this.container=e,this.options=t,this.menuStyle=i,this._mnemonicsInUse=!1,this.openedViaKeyboard=!1,this.awaitingAltRelease=!1,this.ignoreNextMouseUp=!1,this.updatePending=!1,this.numMenusShown=0,this.overflowLayoutScheduled=void 0,this.menuDisposables=this._register(new b.Cm),this.container.setAttribute("role","menubar"),this.isCompact&&this.container.classList.add("compact"),this.menus=[],this.mnemonics=new Map,this._focusState=N.VISIBLE,this._onVisibilityChange=this._register(new m.vl),this._onFocusStateChange=this._register(new m.vl),this.createOverflowMenu(),this.menuUpdater=this._register(new f.uC((()=>this.update()),200)),this.actionRunner=this.options.actionRunner??this._register(new h.LN),this._register(this.actionRunner.onWillRun((()=>{this.setUnfocusedState()}))),this._register(l.Di.getInstance().event(this.onModifierKeyToggled,this)),this._register((0,l.ko)(this.container,l.Bx.KEY_DOWN,(e=>{const t=new D.Zh(e);let i=!0;const o=e.key?e.key.toLocaleLowerCase():"",n=p.zx&&!this.isCompact;if(t.equals(15)||n&&t.equals(1026))this.focusPrevious();else if(t.equals(17)||n&&t.equals(2))this.focusNext();else if(t.equals(9)&&this.isFocused&&!this.isOpen)this.setUnfocusedState();else if(!this.isOpen&&!t.ctrlKey&&this.options.enableMnemonics&&this.mnemonicsInUse&&this.mnemonics.has(o)){const e=this.mnemonics.get(o);this.onMenuTriggered(e,!1)}else i=!1;this.isCompact||!t.equals(1026)&&!t.equals(2)||t.preventDefault(),i&&(t.preventDefault(),t.stopPropagation())})));const o=(0,l.zk)(this.container);this._register((0,l.ko)(o,l.Bx.MOUSE_DOWN,(()=>{this.isFocused&&this.setUnfocusedState()}))),this._register((0,l.ko)(this.container,l.Bx.FOCUS_IN,(e=>{const t=e;t.relatedTarget&&(this.container.contains(t.relatedTarget)||(this.focusToReturn=t.relatedTarget))}))),this._register((0,l.ko)(this.container,l.Bx.FOCUS_OUT,(e=>{const t=e;t.relatedTarget?t.relatedTarget&&!this.container.contains(t.relatedTarget)&&(this.focusToReturn=void 0,this.setUnfocusedState()):this.setUnfocusedState()}))),this._register((0,l.ko)(o,l.Bx.KEY_DOWN,(e=>{if(!this.options.enableMnemonics||!e.altKey||e.ctrlKey||e.defaultPrevented)return;const t=e.key.toLocaleLowerCase();if(!this.mnemonics.has(t))return;this.mnemonicsInUse=!0,this.updateMnemonicVisibility(!0);const i=this.mnemonics.get(t);this.onMenuTriggered(i,!1)}))),this.setUnfocusedState()}push(e){(0,T._j)(e).forEach((e=>{const t=this.menus.length,i=(0,M.ih)(e.label),o=M.tf.exec(e.label);if(o){const e=o[1]?o[1]:o[3];this.registerMnemonic(this.menus.length,e)}if(this.isCompact)this.menus.push(e);else{const o=O("div.menubar-menu-button",{role:"menuitem",tabindex:-1,"aria-label":i,"aria-haspopup":!0}),n=O("div.menubar-menu-title",{role:"none","aria-hidden":!0});o.appendChild(n),this.container.insertBefore(o,this.overflowMenu.buttonElement),this.updateLabels(n,o,e.label),this._register((0,l.ko)(o,l.Bx.KEY_UP,(e=>{const i=new D.Zh(e);let o=!0;!i.equals(18)&&!i.equals(3)||this.isOpen?o=!1:(this.focusedMenu={index:t},this.openedViaKeyboard=!0,this.focusState=N.OPEN),o&&(i.preventDefault(),i.stopPropagation())}))),this._register(V.q.addTarget(o)),this._register((0,l.ko)(o,V.B.Tap,(e=>{this.isOpen&&this.focusedMenu&&this.focusedMenu.holder&&(0,l.QX)(e.initialTarget,this.focusedMenu.holder)||(this.ignoreNextMouseUp=!1,this.onMenuTriggered(t,!0),e.preventDefault(),e.stopPropagation())}))),this._register((0,l.ko)(o,l.Bx.MOUSE_DOWN,(e=>{new I.P((0,l.zk)(o),e).leftButton?(this.isOpen?this.ignoreNextMouseUp=!1:(this.ignoreNextMouseUp=!0,this.onMenuTriggered(t,!0)),e.preventDefault(),e.stopPropagation()):e.preventDefault()}))),this._register((0,l.ko)(o,l.Bx.MOUSE_UP,(e=>{e.defaultPrevented||(this.ignoreNextMouseUp?this.ignoreNextMouseUp=!1:this.isFocused&&this.onMenuTriggered(t,!0))}))),this._register((0,l.ko)(o,l.Bx.MOUSE_ENTER,(()=>{this.isOpen&&!this.isCurrentMenu(t)?(o.focus(),this.cleanupCustomMenu(),this.showCustomMenu(t,!1)):this.isFocused&&!this.isOpen&&(this.focusedMenu={index:t},o.focus())}))),this.menus.push({label:e.label,actions:e.actions,buttonElement:o,titleElement:n})}}))}createOverflowMenu(){const e=this.isCompact?(0,s.kg)(10734,"Application Menu"):(0,s.kg)(10735,"More"),t=O("div.menubar-menu-button",{role:"menuitem",tabindex:this.isCompact?0:-1,"aria-label":e,"aria-haspopup":!0}),i=O("div.menubar-menu-title.toolbar-toggle-more"+L.L0.asCSSSelector(A.W6.menuBarMore),{role:"none","aria-hidden":!0});t.appendChild(i),this.container.appendChild(t),t.style.visibility="hidden",this._register((0,l.ko)(t,l.Bx.KEY_UP,(e=>{const t=new D.Zh(e);let i=!0;const o=[3];this.isCompact?(o.push(10),this.options.compactMode?.horizontal===M.Iu.Right?o.push(17):this.options.compactMode?.horizontal===M.Iu.Left&&o.push(15)):o.push(18),o.some((e=>t.equals(e)))&&!this.isOpen?(this.focusedMenu={index:F.OVERFLOW_INDEX},this.openedViaKeyboard=!0,this.focusState=N.OPEN):i=!1,i&&(t.preventDefault(),t.stopPropagation())}))),this._register(V.q.addTarget(t)),this._register((0,l.ko)(t,V.B.Tap,(e=>{this.isOpen&&this.focusedMenu&&this.focusedMenu.holder&&(0,l.QX)(e.initialTarget,this.focusedMenu.holder)||(this.ignoreNextMouseUp=!1,this.onMenuTriggered(F.OVERFLOW_INDEX,!0),e.preventDefault(),e.stopPropagation())}))),this._register((0,l.ko)(t,l.Bx.MOUSE_DOWN,(e=>{new I.P((0,l.zk)(t),e).leftButton?(this.isOpen?this.ignoreNextMouseUp=!1:(this.ignoreNextMouseUp=!0,this.onMenuTriggered(F.OVERFLOW_INDEX,!0)),e.preventDefault(),e.stopPropagation()):e.preventDefault()}))),this._register((0,l.ko)(t,l.Bx.MOUSE_UP,(e=>{e.defaultPrevented||(this.ignoreNextMouseUp?this.ignoreNextMouseUp=!1:this.isFocused&&this.onMenuTriggered(F.OVERFLOW_INDEX,!0))}))),this._register((0,l.ko)(t,l.Bx.MOUSE_ENTER,(()=>{this.isOpen&&!this.isCurrentMenu(F.OVERFLOW_INDEX)?(this.overflowMenu.buttonElement.focus(),this.cleanupCustomMenu(),this.showCustomMenu(F.OVERFLOW_INDEX,!1)):this.isFocused&&!this.isOpen&&(this.focusedMenu={index:F.OVERFLOW_INDEX},t.focus())}))),this.overflowMenu={buttonElement:t,titleElement:i,label:"More",actions:[]}}updateMenu(e){const t=this.menus.filter((t=>t.label===e.label));t&&t.length&&(t[0].actions=e.actions)}dispose(){super.dispose(),this.menus.forEach((e=>{e.titleElement?.remove(),e.buttonElement?.remove()})),this.overflowMenu.titleElement.remove(),this.overflowMenu.buttonElement.remove(),(0,b.AS)(this.overflowLayoutScheduled),this.overflowLayoutScheduled=void 0}blur(){this.setUnfocusedState()}getWidth(){if(!this.isCompact&&this.menus){const e=this.menus[0].buttonElement.getBoundingClientRect().left;return(this.hasOverflow?this.overflowMenu.buttonElement.getBoundingClientRect().right:this.menus[this.menus.length-1].buttonElement.getBoundingClientRect().right)-e}return 0}getHeight(){return this.container.clientHeight}toggleFocus(){this.isFocused||"hidden"===this.options.visibility?this.isOpen||this.setUnfocusedState():(this.mnemonicsInUse=!0,this.focusedMenu={index:this.numMenusShown>0?0:F.OVERFLOW_INDEX},this.focusState=N.FOCUSED)}updateOverflowAction(){if(!this.menus||!this.menus.length)return;const e="overflow-menu-only";this.container.classList.toggle(e,!1);const t=this.container.offsetWidth;let i=0,o=this.isCompact;const n=this.numMenusShown;this.numMenusShown=0;const s=this.menus.filter((e=>void 0!==e.buttonElement&&void 0!==e.titleElement));for(const e of s){if(!o){const s=e.buttonElement.offsetWidth;i+s>t?o=!0:(i+=s,this.numMenusShown++,this.numMenusShown>n&&(e.buttonElement.style.visibility="visible"))}o&&(e.buttonElement.style.visibility="hidden")}if(this.numMenusShown-1<=s.length/4){for(const e of s)e.buttonElement.style.visibility="hidden";o=!0,this.numMenusShown=0,i=0}if(this.isCompact){this.overflowMenu.actions=[];for(let e=this.numMenusShown;e<this.menus.length;e++)this.overflowMenu.actions.push(new h.YH(`menubar.submenu.${this.menus[e].label}`,this.menus[e].label,this.menus[e].actions||[]));const e=this.options.getCompactMenuActions?.();e&&e.length&&(this.overflowMenu.actions.push(new h.wv),this.overflowMenu.actions.push(...e)),this.overflowMenu.buttonElement.style.visibility="visible"}else if(o){for(;i+this.overflowMenu.buttonElement.offsetWidth>t&&this.numMenusShown>0;){this.numMenusShown--;const e=s[this.numMenusShown].buttonElement.offsetWidth;s[this.numMenusShown].buttonElement.style.visibility="hidden",i-=e}this.overflowMenu.actions=[];for(let e=this.numMenusShown;e<s.length;e++)this.overflowMenu.actions.push(new h.YH(`menubar.submenu.${s[e].label}`,s[e].label,s[e].actions||[]));this.overflowMenu.buttonElement.nextElementSibling!==s[this.numMenusShown].buttonElement&&(this.overflowMenu.buttonElement.remove(),this.container.insertBefore(this.overflowMenu.buttonElement,s[this.numMenusShown].buttonElement)),this.overflowMenu.buttonElement.style.visibility="visible"}else this.overflowMenu.buttonElement.remove(),this.container.appendChild(this.overflowMenu.buttonElement),this.overflowMenu.buttonElement.style.visibility="hidden";this.container.classList.toggle(e,0===this.numMenusShown)}updateLabels(e,t,i){const o=(0,M.ih)(i);if(this.options.enableMnemonics){const t=(0,R.ih)(i);M.LH.lastIndex=0;let o=M.LH.exec(t);for(;o&&o[1];)o=M.LH.exec(t);const n=e=>e.replace(/&amp;&amp;/g,"&amp;");o?(e.innerText="",e.append((0,R.NB)(n(t.substr(0,o.index))," "),O("mnemonic",{"aria-hidden":"true"},o[3]),(0,R.BO)(n(t.substr(o.index+o[0].length))," "))):e.innerText=n(t).trim()}else e.innerText=o.replace(/&&/g,"&");const n=M.tf.exec(i);if(n){const e=n[1]?n[1]:n[3];this.options.enableMnemonics?t.setAttribute("aria-keyshortcuts","Alt+"+e.toLocaleLowerCase()):t.removeAttribute("aria-keyshortcuts")}}update(e){e&&(this.options=e),this.isFocused?this.updatePending=!0:(this.menus.forEach((e=>{e.buttonElement&&e.titleElement&&this.updateLabels(e.titleElement,e.buttonElement,e.label)})),this.overflowLayoutScheduled||(this.overflowLayoutScheduled=(0,l.PG)((0,l.zk)(this.container),(()=>{this.updateOverflowAction(),this.overflowLayoutScheduled=void 0}))),this.setUnfocusedState())}registerMnemonic(e,t){this.mnemonics.set(t.toLocaleLowerCase(),e)}hideMenubar(){"none"!==this.container.style.display&&(this.container.style.display="none",this._onVisibilityChange.fire(!1))}showMenubar(){"flex"!==this.container.style.display&&(this.container.style.display="flex",this._onVisibilityChange.fire(!0),this.updateOverflowAction())}get focusState(){return this._focusState}set focusState(e){if(this._focusState>=N.FOCUSED&&e<N.FOCUSED&&this.updatePending&&(this.menuUpdater.schedule(),this.updatePending=!1),e===this._focusState)return;const t=this.isVisible,i=this.isOpen,o=this.isFocused;switch(this._focusState=e,e){case N.HIDDEN:t&&this.hideMenubar(),i&&this.cleanupCustomMenu(),o&&(this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case N.VISIBLE:t||this.showMenubar(),i&&this.cleanupCustomMenu(),o&&(this.focusedMenu&&(this.focusedMenu.index===F.OVERFLOW_INDEX?this.overflowMenu.buttonElement.blur():this.menus[this.focusedMenu.index].buttonElement?.blur()),this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case N.FOCUSED:t||this.showMenubar(),i&&this.cleanupCustomMenu(),this.focusedMenu&&(this.focusedMenu.index===F.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[this.focusedMenu.index].buttonElement?.focus());break;case N.OPEN:t||this.showMenubar(),this.focusedMenu&&(this.cleanupCustomMenu(),this.showCustomMenu(this.focusedMenu.index,this.openedViaKeyboard))}this._focusState=e,this._onFocusStateChange.fire(this.focusState>=N.FOCUSED)}get isVisible(){return this.focusState>=N.VISIBLE}get isFocused(){return this.focusState>=N.FOCUSED}get isOpen(){return this.focusState>=N.OPEN}get hasOverflow(){return this.isCompact||this.numMenusShown<this.menus.length}get isCompact(){return void 0!==this.options.compactMode}setUnfocusedState(){"toggle"===this.options.visibility||"hidden"===this.options.visibility||"classic"===this.options.visibility&&(0,E.aS)(B.Gs)?this.focusState=N.HIDDEN:this.focusState=N.VISIBLE,this.ignoreNextMouseUp=!1,this.mnemonicsInUse=!1,this.updateMnemonicVisibility(!1)}focusPrevious(){if(!this.focusedMenu||0===this.numMenusShown)return;let e=(this.focusedMenu.index-1+this.numMenusShown)%this.numMenusShown;this.focusedMenu.index===F.OVERFLOW_INDEX?e=this.numMenusShown-1:0===this.focusedMenu.index&&this.hasOverflow&&(e=F.OVERFLOW_INDEX),e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupCustomMenu(),this.showCustomMenu(e)):this.isFocused&&(this.focusedMenu.index=e,e===F.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[e].buttonElement?.focus()))}focusNext(){if(!this.focusedMenu||0===this.numMenusShown)return;let e=(this.focusedMenu.index+1)%this.numMenusShown;this.focusedMenu.index===F.OVERFLOW_INDEX?e=0:this.focusedMenu.index===this.numMenusShown-1&&(e=F.OVERFLOW_INDEX),e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupCustomMenu(),this.showCustomMenu(e)):this.isFocused&&(this.focusedMenu.index=e,e===F.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[e].buttonElement?.focus()))}updateMnemonicVisibility(e){this.menus&&this.menus.forEach((t=>{if(t.titleElement&&t.titleElement.children.length){const i=t.titleElement.children.item(0);i&&(i.style.textDecoration=this.options.alwaysOnMnemonics||e?"underline":"")}}))}get mnemonicsInUse(){return this._mnemonicsInUse}set mnemonicsInUse(e){this._mnemonicsInUse=e}get shouldAltKeyFocus(){return!(p.zx||this.options.disableAltFocus&&"toggle"!==this.options.visibility)}get onVisibilityChange(){return this._onVisibilityChange.event}get onFocusStateChange(){return this._onFocusStateChange.event}onMenuTriggered(e,t){this.isOpen?this.isCurrentMenu(e)?this.setUnfocusedState():(this.cleanupCustomMenu(),this.showCustomMenu(e,this.openedViaKeyboard)):(this.focusedMenu={index:e},this.openedViaKeyboard=!t,this.focusState=N.OPEN)}onModifierKeyToggled(e){const t=!(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey);"hidden"!==this.options.visibility&&(e.event&&this.shouldAltKeyFocus&&159===P.gk.toEnum(e.event.code)&&e.event.preventDefault(),this.isFocused&&"alt"===e.lastKeyPressed&&e.altKey&&(this.setUnfocusedState(),this.mnemonicsInUse=!1,this.awaitingAltRelease=!0),t&&"alt"===e.lastKeyPressed&&"alt"===e.lastKeyReleased&&(this.awaitingAltRelease||(!this.isFocused&&this.shouldAltKeyFocus?(this.mnemonicsInUse=!0,this.focusedMenu={index:this.numMenusShown>0?0:F.OVERFLOW_INDEX},this.focusState=N.FOCUSED):this.isOpen||this.setUnfocusedState())),e.altKey||"alt"!==e.lastKeyReleased||(this.awaitingAltRelease=!1),this.options.enableMnemonics&&this.menus&&!this.isOpen&&this.updateMnemonicVisibility(!this.awaitingAltRelease&&e.altKey||this.mnemonicsInUse))}isCurrentMenu(e){return!!this.focusedMenu&&this.focusedMenu.index===e}cleanupCustomMenu(){this.focusedMenu&&(this.focusedMenu.index===F.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[this.focusedMenu.index].buttonElement?.focus(),this.focusedMenu.holder&&(this.focusedMenu.holder.parentElement?.classList.remove("open"),this.focusedMenu.holder.remove()),this.focusedMenu.widget?.dispose(),this.focusedMenu={index:this.focusedMenu.index}),this.menuDisposables.clear()}showCustomMenu(e,t=!0){const i=e>=this.numMenusShown?F.OVERFLOW_INDEX:e,o=i===F.OVERFLOW_INDEX?this.overflowMenu:this.menus[i];if(!o.actions||!o.buttonElement||!o.titleElement)return;const n=O("div.menubar-menu-items-holder",{title:""});o.buttonElement.classList.add("open");const s=o.titleElement.getBoundingClientRect(),r=(0,l.mU)(o.titleElement);if(this.options.compactMode?.horizontal===M.Iu.Right)n.style.left=`${s.left+this.container.clientWidth}px`;else if(this.options.compactMode?.horizontal===M.Iu.Left){const e=(0,l.zk)(this.container).innerWidth;n.style.right=e-s.left+"px",n.style.left="auto"}else n.style.left=s.left*r+"px";this.options.compactMode?.vertical===M.mq.Above?n.style.top=`${s.top-30*this.menus.length+this.container.clientHeight}px`:this.options.compactMode?.vertical===M.mq.Below?n.style.top=`${s.top}px`:n.style.top=s.bottom*r+"px",o.buttonElement.appendChild(n);const a={getKeyBinding:this.options.getKeybinding,actionRunner:this.actionRunner,enableMnemonics:this.options.alwaysOnMnemonics||this.mnemonicsInUse&&this.options.enableMnemonics,ariaLabel:o.buttonElement.getAttribute("aria-label")??void 0,expandDirection:this.isCompact?this.options.compactMode:{horizontal:M.Iu.Right,vertical:M.mq.Below},useEventAsContext:!0},c=this.menuDisposables.add(new M.W1(n,o.actions,a,this.menuStyle));this.menuDisposables.add(c.onDidCancel((()=>{this.focusState=N.FOCUSED}))),i!==e?c.trigger(e-this.numMenusShown):c.focus(t),this.focusedMenu={index:i,holder:n,widget:c}}}var G=i(80222),W=i(88875),z=i(16849),H=i(99968),Q=i(19643),U=i(84261),$=i(84793),K=i(16093),j=i(47622),Z=i(16409),Y=i(77512),q=i(9957),J=i(77829),X=i(55359),ee=i(4239),te=i(82563),ie=i(94384),oe=i(64788),ne=i(20729),se=i(79367),re=i(50928);function ae(e){return e&&e.hasOwnProperty("folderUri")}const ce="inRecentFilesPicker";class de extends r.L{constructor(e){super(e),this.removeFromRecentlyOpened={iconClass:L.L0.asClassName(A.W6.removeClose),tooltip:(0,s.kg)(10263,"Remove from Recently Opened")},this.dirtyRecentlyOpenedFolder={iconClass:"dirty-workspace "+L.L0.asClassName(A.W6.closeDirty),tooltip:(0,s.kg)(10264,"Folder With Unsaved Files"),alwaysVisible:!0},this.dirtyRecentlyOpenedWorkspace={...this.dirtyRecentlyOpenedFolder,tooltip:(0,s.kg)(10265,"Workspace With Unsaved Files")}}async run(e){const t=e.get(v.J),i=e.get(q.G),o=e.get(J.V),n=e.get(y.L),r=e.get(u.b),a=e.get(X.S),c=e.get(ee.L),d=e.get(z.v),h=e.get(K.X),l=await t.getRecentlyOpened(),g=await t.getDirtyWorkspaces();let m=!1;const b=new se.fT,f=new se.fT;for(const e of g)ae(e)?b.set(e.folderUri,!0):(f.set(e.workspace.configPath,e.workspace),m=!0);const C=new se.fT,S=new se.fT;for(const e of l.workspaces)(0,w.Uk)(e)?C.set(e.folderUri,!0):(S.set(e.workspace.configPath,e.workspace),m=!0);const k=[];for(const e of l.workspaces){const t=(0,w.Uk)(e)?b.has(e.folderUri):f.has(e.workspace.configPath);k.push(this.toQuickPick(a,c,n,e,t))}for(const e of g)(ae(e)&&!C.has(e.folderUri)||(_=e)&&_.hasOwnProperty("workspace")&&!S.has(e.workspace.configPath))&&k.push(this.toQuickPick(a,c,n,e,!0));var _;const x=l.files.map((e=>this.toQuickPick(a,c,n,e,!1))),E=l.workspaces[0],D=E&&o.isCurrentWorkspace((0,w.p1)(E)?E.workspace:E.folderUri);let I;const V={type:"separator",label:m?(0,s.kg)(10266,"folders & workspaces"):(0,s.kg)(10267,"folders")},M={type:"separator",label:(0,s.kg)(10268,"files")},T=[V,...k,M,...x],A=await i.pick(T,{contextKey:ce,activeItem:[...k,...x][D?1:0],placeHolder:p.zx?(0,s.kg)(10269,"Select to open (hold Cmd-key to force new window or Option-key for same window)"):(0,s.kg)(10270,"Select to open (hold Ctrl-key to force new window or Alt-key for same window)"),matchOnDescription:!0,onKeyMods:e=>I=e,quickNavigate:this.isQuickNavigate()?{keybindings:r.lookupKeybindings(this.desc.id)}:void 0,hideInput:this.isQuickNavigate(),onDidTriggerItemButton:async e=>{if(e.button===this.removeFromRecentlyOpened)await t.removeRecentlyOpened([e.item.resource]),e.removeItem();else if(e.button===this.dirtyRecentlyOpenedFolder||e.button===this.dirtyRecentlyOpenedWorkspace){const t=e.button===this.dirtyRecentlyOpenedWorkspace,{confirmed:o}=await h.confirm({title:t?(0,s.kg)(10271,"Workspace with Unsaved Files"):(0,s.kg)(10272,"Folder with Unsaved Files"),message:t?(0,s.kg)(10273,"Do you want to open the workspace to review the unsaved files?"):(0,s.kg)(10274,"Do you want to open the folder to review the unsaved files?"),detail:t?(0,s.kg)(10275,"Workspaces with unsaved files cannot be removed until all unsaved files have been saved or reverted."):(0,s.kg)(10276,"Folders with unsaved files cannot be removed until all unsaved files have been saved or reverted.")});o&&(d.openWindow([e.item.openable],{remoteAuthority:e.item.remoteAuthority||null}),i.cancel())}}});if(A)return d.openWindow([A.openable],{forceNewWindow:I?.ctrlCmd,forceReuseWindow:I?.alt,remoteAuthority:A.remoteAuthority||null})}toQuickPick(e,t,i,o,n){let r,a,c,d,h=!1;(0,w.Uk)(o)?(d=o.folderUri,a=(0,te.I)(e,t,d,ie.pc.FOLDER),r={folderUri:d},c=o.label||i.getWorkspaceLabel(d,{verbose:2})):(0,w.p1)(o)?(d=o.workspace.configPath,a=(0,te.I)(e,t,d,ie.pc.ROOT_FOLDER),r={workspaceUri:d},c=o.label||i.getWorkspaceLabel(o.workspace,{verbose:2}),h=!0):(d=o.fileUri,a=(0,te.I)(e,t,d,ie.pc.FILE),r={fileUri:d},c=o.label||i.getUriLabel(d));const{name:l,parentPath:u}=(0,G.ej)(c);return{iconClasses:a,label:l,ariaLabel:n?h?(0,s.kg)(10277,"{0}, workspace with unsaved changes",l):(0,s.kg)(10278,"{0}, folder with unsaved changes",l):l,description:u,buttons:n?[h?this.dirtyRecentlyOpenedWorkspace:this.dirtyRecentlyOpenedFolder]:[this.removeFromRecentlyOpened],openable:r,resource:d,remoteAuthority:o.remoteAuthority}}}class he extends de{static{this.ID="workbench.action.openRecent"}constructor(){super({id:he.ID,title:{...(0,s.aS)(10279,"Open Recent..."),mnemonicTitle:(0,s.kg)(10280,"&&More...")},category:Z.L.File,f1:!0,keybinding:{weight:200,primary:2096,mac:{primary:304}},menu:{id:r.D8.MenubarRecentMenu,group:"y_more",order:1}})}isQuickNavigate(){return!1}}class le extends r.L{constructor(){super({id:"workbench.action.toggleFullScreen",title:{...(0,s.aS)(10282,"Toggle Full Screen"),mnemonicTitle:(0,s.kg)(10283,"&&Full Screen")},category:Z.L.View,f1:!0,keybinding:{weight:200,primary:69,mac:{primary:2340}},precondition:Q.LT.toNegated(),toggled:j.UL,menu:[{id:r.D8.MenubarAppearanceMenu,group:"1_toggle_view",order:1}]})}run(e){return e.get(z.v).toggleFullScreen((0,l.fz)())}}class ue extends r.L{static{this.ID="workbench.action.reloadWindow"}constructor(){super({id:ue.ID,title:(0,s.aS)(10284,"Reload Window"),category:Z.L.Developer,f1:!0,keybinding:{weight:250,when:Q.BE,primary:2096}})}async run(e){return e.get(z.v).reload()}}class pe extends r.L{constructor(){super({id:"workbench.action.showAboutDialog",title:{...(0,s.aS)(10285,"About"),mnemonicTitle:(0,s.kg)(10286,"&&About")},category:Z.L.Help,f1:!0,menu:{id:r.D8.MenubarHelpMenu,group:"z_about",order:1,when:Q.Yc.toNegated()}})}run(e){return e.get(K.X).about()}}class ge extends r.L{constructor(){super({id:"workbench.action.newWindow",title:{...(0,s.aS)(10287,"New Window"),mnemonicTitle:(0,s.kg)(10288,"New &&Window")},f1:!0,keybinding:{weight:200,primary:p.HZ?p.uF?(0,P.m5)(2089,1068):3628:3116,secondary:p.HZ?[3116]:void 0},menu:{id:r.D8.MenubarFileMenu,group:"1_new",order:3}})}run(e){return e.get(z.v).openWindow({remoteAuthority:null})}}class me extends r.L{constructor(){super({id:"workbench.action.blur",title:(0,s.aS)(10289,"Remove keyboard focus from focused element")})}run(){const e=(0,l.bq)();(0,l.sb)(e)&&e.blur()}}(0,r.ug)(ge),(0,r.ug)(le),(0,r.ug)(class extends de{constructor(){super({id:"workbench.action.quickOpenRecent",title:(0,s.aS)(10281,"Quick Open Recent..."),category:Z.L.File,f1:!1})}isQuickNavigate(){return!0}}),(0,r.ug)(he),(0,r.ug)(ue),(0,r.ug)(pe),(0,r.ug)(me);const be=oe.M$.and(ne.b2,oe.M$.has(ce)),we="workbench.action.quickOpenNavigateNextInRecentFilesPicker";Y.f.registerCommandAndKeybindingRule({id:we,weight:250,handler:(0,ne.JB)(we,!0),when:be,primary:2096,mac:{primary:304}});const ve="workbench.action.quickOpenNavigatePreviousInRecentFilesPicker";Y.f.registerCommandAndKeybindingRule({id:ve,weight:250,handler:(0,ne.JB)(ve,!1),when:be,primary:3120,mac:{primary:1328}}),re.w.registerCommand("workbench.action.toggleConfirmBeforeClose",(e=>{const t=e.get(g.p),i=t.inspect("window.confirmBeforeClose").userValue;return t.updateValue("window.confirmBeforeClose","never"===i?"keyboardOnly":"never")})),r.ZG.appendMenuItem(r.D8.MenubarFileMenu,{group:"z_ConfirmClose",command:{id:"workbench.action.toggleConfirmBeforeClose",title:(0,s.kg)(10290,"Confirm Before Close"),toggled:oe.M$.notEquals("config.window.confirmBeforeClose","never")},order:1,when:Q.W0}),r.ZG.appendMenuItem(r.D8.MenubarFileMenu,{title:(0,s.kg)(10291,"Open &&Recent"),submenu:r.D8.MenubarRecentMenu,group:"2_open",order:4});var fe=i(34948),ye=i(79268),Ce=i(45103),Se=i(32834);r.ZG.appendMenuItem(r.D8.MenubarMainMenu,{submenu:r.D8.MenubarFileMenu,title:{value:"File",original:"File",mnemonicTitle:(0,s.kg)(6988,"&&File")},order:1}),r.ZG.appendMenuItem(r.D8.MenubarMainMenu,{submenu:r.D8.MenubarEditMenu,title:{value:"Edit",original:"Edit",mnemonicTitle:(0,s.kg)(6989,"&&Edit")},order:2}),r.ZG.appendMenuItem(r.D8.MenubarMainMenu,{submenu:r.D8.MenubarSelectionMenu,title:{value:"Selection",original:"Selection",mnemonicTitle:(0,s.kg)(6990,"&&Selection")},order:3}),r.ZG.appendMenuItem(r.D8.MenubarMainMenu,{submenu:r.D8.MenubarViewMenu,title:{value:"View",original:"View",mnemonicTitle:(0,s.kg)(6991,"&&View")},order:4}),r.ZG.appendMenuItem(r.D8.MenubarMainMenu,{submenu:r.D8.MenubarGoMenu,title:{value:"Go",original:"Go",mnemonicTitle:(0,s.kg)(6992,"&&Go")},order:5}),r.ZG.appendMenuItem(r.D8.MenubarMainMenu,{submenu:r.D8.MenubarTerminalMenu,title:{value:"Terminal",original:"Terminal",mnemonicTitle:(0,s.kg)(6993,"&&Terminal")},order:7}),r.ZG.appendMenuItem(r.D8.MenubarMainMenu,{submenu:r.D8.MenubarHelpMenu,title:{value:"Help",original:"Help",mnemonicTitle:(0,s.kg)(6994,"&&Help")},order:8}),r.ZG.appendMenuItem(r.D8.MenubarMainMenu,{submenu:r.D8.MenubarPreferencesMenu,title:{value:"Preferences",original:"Preferences",mnemonicTitle:(0,s.kg)(6995,"Preferences")},when:Q.Yc,order:9});class ke extends b.jG{static{this.MAX_MENU_RECENT_ENTRIES=10}constructor(e,t,i,o,n,s,a,c,d,h,l,u,p,g){super(),this.menuService=e,this.workspacesService=t,this.contextKeyService=i,this.keybindingService=o,this.configurationService=n,this.labelService=s,this.updateService=a,this.storageService=c,this.notificationService=d,this.preferencesService=h,this.environmentService=l,this.accessibilityService=u,this.hostService=p,this.commandService=g,this.keys=["window.menuBarVisibility","window.enableMenuBarMnemonics","window.customMenuBarAltFocus","workbench.sideBar.location","window.nativeTabs"],this.menus={},this.topLevelTitles={},this.recentlyOpened={files:[],workspaces:[]},this.mainMenu=this._register(this.menuService.createMenu(r.D8.MenubarMainMenu,this.contextKeyService)),this.mainMenuDisposables=this._register(new b.Cm),this.setupMainMenu(),this.menuUpdater=this._register(new f.uC((()=>this.doUpdateMenubar(!1)),200)),this.notifyUserOfCustomMenubarAccessibility()}registerListeners(){this._register(this.hostService.onDidChangeFocus((e=>this.onDidChangeWindowFocus(e)))),this._register(this.configurationService.onDidChangeConfiguration((e=>this.onConfigurationUpdated(e)))),this._register(this.updateService.onStateChange((()=>this.onUpdateStateChange()))),this._register(this.workspacesService.onDidChangeRecentlyOpened((()=>{this.onDidChangeRecentlyOpened()}))),this._register(this.keybindingService.onDidUpdateKeybindings((()=>this.updateMenubar()))),this._register(this.labelService.onDidChangeFormatters((()=>{this.onDidChangeRecentlyOpened()}))),this._register(this.mainMenu.onDidChange((()=>{this.setupMainMenu(),this.doUpdateMenubar(!0)})))}setupMainMenu(){this.mainMenuDisposables.clear(),this.menus={},this.topLevelTitles={};const[,e]=this.mainMenu.getActions()[0];for(const t of e)t instanceof r.nI&&"string"!=typeof t.item.title&&(this.menus[t.item.title.original]=this.mainMenuDisposables.add(this.menuService.createMenu(t.item.submenu,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.topLevelTitles[t.item.title.original]=t.item.title.mnemonicTitle??t.item.title.value)}updateMenubar(){this.menuUpdater.schedule()}calculateActionLabel(e){return e.label}onUpdateStateChange(){this.updateMenubar()}onUpdateKeybindings(){this.updateMenubar()}getOpenRecentActions(){if(!this.recentlyOpened)return[];const{workspaces:e,files:t}=this.recentlyOpened,i=[];if(e.length>0){for(let t=0;t<ke.MAX_MENU_RECENT_ENTRIES&&t<e.length;t++)i.push(this.createOpenRecentMenuAction(e[t]));i.push(new h.wv)}if(t.length>0){for(let e=0;e<ke.MAX_MENU_RECENT_ENTRIES&&e<t.length;e++)i.push(this.createOpenRecentMenuAction(t[e]));i.push(new h.wv)}return i}onDidChangeWindowFocus(e){e&&this.onDidChangeRecentlyOpened()}onConfigurationUpdated(e){this.keys.some((t=>e.affectsConfiguration(t)))&&this.updateMenubar(),e.affectsConfiguration("editor.accessibilitySupport")&&this.notifyUserOfCustomMenubarAccessibility(),e.affectsConfiguration("window.menuBarVisibility")&&this.onDidChangeRecentlyOpened()}get menubarHidden(){return!(p.zx&&p.ib||"hidden"!==(0,c.nx)(this.configurationService))}onDidChangeRecentlyOpened(){this.menubarHidden||this.workspacesService.getRecentlyOpened().then((e=>{this.recentlyOpened=e,this.updateMenubar()}))}createOpenRecentMenuAction(e){let t,i,o,n;const s=e.remoteAuthority;(0,w.Uk)(e)?(i=e.folderUri,t=e.label||this.labelService.getWorkspaceLabel(i,{verbose:2}),o="openRecentFolder",n={folderUri:i}):(0,w.p1)(e)?(i=e.workspace.configPath,t=e.label||this.labelService.getWorkspaceLabel(e.workspace,{verbose:2}),o="openRecentWorkspace",n={workspaceUri:i}):(i=e.fileUri,t=e.label||this.labelService.getUriLabel(i),o="openRecentFile",n={fileUri:i});const r=(0,h.ih)({id:o,label:(0,G.We)(t),run:e=>{const t=e&&(!p.zx&&(e.ctrlKey||e.shiftKey)||p.zx&&(e.metaKey||e.altKey));return this.hostService.openWindow([n],{forceNewWindow:!!t,remoteAuthority:s||null})}});return Object.assign(r,{uri:i,remoteAuthority:s})}notifyUserOfCustomMenubarAccessibility(){if(p.HZ||p.zx)return;const e=this.storageService.getBoolean("menubar/accessibleMenubarNotified",-1,!1),t=!(0,c.tx)(this.configurationService);if(e||t||!this.accessibilityService.isScreenReaderOptimized())return;const i=(0,s.kg)(6996,"Accessibility support is enabled for you. For the most accessible experience, we recommend the custom title bar style.");this.notificationService.prompt(Se.A.Info,i,[{label:(0,s.kg)(6997,"Open Settings"),run:()=>this.preferencesService.openUserSettings({query:"window.titleBarStyle"})}]),this.storageService.store("menubar/accessibleMenubarNotified",!0,-1,0)}}let _e,xe=class extends ke{constructor(e,t,i,o,n,s,a,c,d,l,u,p,g,w,v){super(e,t,i,o,n,s,a,c,d,l,u,p,w,v),this.telemetryService=g,this.alwaysOnMnemonics=!1,this.focusInsideMenubar=!1,this.pendingFirstTimeUpdate=!1,this.visible=!0,this.webNavigationMenu=this._register(this.menuService.createMenu(r.D8.MenubarHomeMenu,this.contextKeyService)),this.reinstallDisposables=this._register(new b.Cm),this._onVisibilityChange=this._register(new m.vl),this._onFocusStateChange=this._register(new m.vl),this.actionRunner=this._register(new h.LN),this.actionRunner.onDidRun((e=>{this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"menu"})})),this.workspacesService.getRecentlyOpened().then((e=>{this.recentlyOpened=e})),this.registerListeners()}doUpdateMenubar(e){this.focusInsideMenubar||this.setupCustomMenubar(e),e&&(this.pendingFirstTimeUpdate=!0)}getUpdateAction(){switch(this.updateService.state.type){case"idle":return new h.rc("update.check",(0,s.kg)(6999,"Check for &&Updates..."),void 0,!0,(()=>this.updateService.checkForUpdates(!0)));case"checking for updates":return new h.rc("update.checking",(0,s.kg)(7e3,"Checking for Updates..."),void 0,!1);case"available for download":return new h.rc("update.downloadNow",(0,s.kg)(7001,"D&&ownload Update"),void 0,!0,(()=>this.updateService.downloadUpdate()));case"downloading":return new h.rc("update.downloading",(0,s.kg)(7002,"Downloading Update..."),void 0,!1);case"downloaded":return p.zx?null:new h.rc("update.install",(0,s.kg)(7003,"Install &&Update..."),void 0,!0,(()=>this.updateService.applyUpdate()));case"updating":return new h.rc("update.updating",(0,s.kg)(7004,"Installing Update..."),void 0,!1);case"ready":return new h.rc("update.restart",(0,s.kg)(7005,"Restart to &&Update"),void 0,!0,(()=>this.updateService.quitAndInstall()));default:return null}}get currentMenubarVisibility(){return(0,c.nx)(this.configurationService)}get currentDisableMenuBarAltFocus(){const e=this.configurationService.getValue("window.customMenuBarAltFocus");let t=!1;return"boolean"==typeof e&&(t=!e),t}insertActionsBefore(e,t){switch(e.id){case he.ID:t.push(...this.getOpenRecentActions());break;case"workbench.action.showAboutDialog":if(!p.zx&&!p.HZ){const e=this.getUpdateAction();e&&(e.label=(0,G.S0)(e.label),t.push(e),t.push(new h.wv))}}}get currentEnableMenuBarMnemonics(){let e=this.configurationService.getValue("window.enableMenuBarMnemonics");return"boolean"!=typeof e&&(e=!0),e&&(!p.HZ||(0,E.aS)(B.Gs))}get currentCompactMenuMode(){if("compact"===this.currentMenubarVisibility)return{horizontal:"right"===this.configurationService.getValue("workbench.sideBar.location")?M.Iu.Left:M.Iu.Right,vertical:"bottom"===this.configurationService.getValue("workbench.activityBar.location")?M.mq.Above:M.mq.Below}}onDidVisibilityChange(e){this.visible=e,this.onDidChangeRecentlyOpened(),this._onVisibilityChange.fire(e)}toActionsArray(e){const t=[];return(0,ye.$u)(e,{shouldForwardArgs:!0},t),t}setupCustomMenubar(e){if(!this.container)return;e?(this.menubar&&this.reinstallDisposables.clear(),this.menubar=this.reinstallDisposables.add(new F(this.container,this.getMenuBarOptions(),Ce.XS)),this.accessibilityService.alwaysUnderlineAccessKeys().then((e=>{this.alwaysOnMnemonics=e,this.menubar?.update(this.getMenuBarOptions())})),this.reinstallDisposables.add(this.menubar.onFocusStateChange((e=>{this._onFocusStateChange.fire(e),e||(this.pendingFirstTimeUpdate?(this.setupCustomMenubar(!0),this.pendingFirstTimeUpdate=!1):this.updateMenubar(),this.focusInsideMenubar=!1)}))),this.reinstallDisposables.add(this.menubar.onVisibilityChange((e=>this.onDidVisibilityChange(e)))),this.reinstallDisposables.add((0,l.ko)(this.container,l.Bx.FOCUS_IN,(()=>{this.focusInsideMenubar=!0}))),this.reinstallDisposables.add((0,l.ko)(this.container,l.Bx.FOCUS_OUT,(()=>{this.focusInsideMenubar=!1}))),this.menubar.isVisible&&this.onDidVisibilityChange(!0)):this.menubar?.update(this.getMenuBarOptions());const t=(e,i,o)=>{i.splice(0);for(const n of e)if(this.insertActionsBefore(n,i),n instanceof h.wv)i.push(n);else if(n instanceof r.nI||n instanceof r.Xe){let e="string"==typeof n.item.title?n.item.title:n.item.title.mnemonicTitle??n.item.title.value;if(n instanceof r.nI){const s=[];t(n.actions,s,o),s.length>0&&i.push(new h.YH(n.id,(0,G.S0)(e),s))}else{(0,fe.N)(n.item.toggled)&&(e=n.item.toggled.mnemonicTitle??n.item.toggled.title??e);const t=new h.rc(n.id,(0,G.S0)(e),n.class,n.enabled,(()=>this.commandService.executeCommand(n.id)));t.tooltip=n.tooltip,t.checked=n.checked,i.push(t)}}if("File"===o&&void 0===this.currentCompactMenuMode){const e=this.getWebNavigationActions();e.length&&i.push(...e)}};for(const i of Object.keys(this.topLevelTitles)){const o=this.menus[i];e&&o&&(this.reinstallDisposables.add(o.onDidChange((()=>{if(!this.focusInsideMenubar){const e=[];t(this.toActionsArray(o),e,i),this.menubar?.updateMenu({actions:e,label:(0,G.S0)(this.topLevelTitles[i])})}}))),o===this.menus.File&&this.reinstallDisposables.add(this.webNavigationMenu.onDidChange((()=>{if(!this.focusInsideMenubar){const e=[];t(this.toActionsArray(o),e,i),this.menubar?.updateMenu({actions:e,label:(0,G.S0)(this.topLevelTitles[i])})}}))));const n=[];o&&t(this.toActionsArray(o),n,i),this.menubar&&(e?this.menubar.push({actions:n,label:(0,G.S0)(this.topLevelTitles[i])}):this.menubar.updateMenu({actions:n,label:(0,G.S0)(this.topLevelTitles[i])}))}}getWebNavigationActions(){if(!p.HZ)return[];const e=[];for(const t of this.webNavigationMenu.getActions()){const[,i]=t;for(const t of i)if(t instanceof r.Xe){const i="string"==typeof t.item.title?t.item.title:t.item.title.mnemonicTitle??t.item.title.value;e.push(new h.rc(t.id,(0,G.S0)(i),t.class,t.enabled,(async e=>{this.commandService.executeCommand(t.id,e)})))}e.push(new h.wv)}return e.length&&e.pop(),e}getMenuBarOptions(){return{enableMnemonics:this.currentEnableMenuBarMnemonics,disableAltFocus:this.currentDisableMenuBarAltFocus,visibility:this.currentMenubarVisibility,actionRunner:this.actionRunner,getKeybinding:e=>this.keybindingService.lookupKeybinding(e.id),alwaysOnMnemonics:this.alwaysOnMnemonics,compactMode:this.currentCompactMenuMode,getCompactMenuActions:()=>p.HZ?this.getWebNavigationActions():[]}}onDidChangeWindowFocus(e){this.visible&&(super.onDidChangeWindowFocus(e),this.container&&(e?this.container.classList.remove("inactive"):(this.container.classList.add("inactive"),this.menubar?.blur())))}onUpdateStateChange(){this.visible&&super.onUpdateStateChange()}onDidChangeRecentlyOpened(){this.visible&&super.onDidChangeRecentlyOpened()}onUpdateKeybindings(){this.visible&&super.onUpdateKeybindings()}registerListeners(){super.registerListeners(),this._register((0,l.ko)(B.Gs,l.Bx.RESIZE,(()=>{!this.menubar||p.un&&H.e.pointerEvents||this.menubar.blur()}))),p.HZ&&(this._register((0,E.EX)((e=>{e===B.Gs.vscodeWindowId&&this.updateMenubar()}))),this._register(this.webNavigationMenu.onDidChange((()=>this.updateMenubar()))),this._register((_e||(_e=new m.vl,(0,r.ug)(class extends r.L{constructor(){super({id:"workbench.actions.menubar.focus",title:(0,s.aS)(6998,"Focus Application Menu"),keybinding:{primary:580,weight:200,when:Q.W0},f1:!0})}async run(){_e?.fire()}})),_e).event((()=>this.menubar?.toggleFocus()))))}get onVisibilityChange(){return this._onVisibilityChange.event}get onFocusStateChange(){return this._onFocusStateChange.event}getMenubarItemsDimensions(){return this.menubar?new l.fg(this.menubar.getWidth(),this.menubar.getHeight()):new l.fg(0,0)}create(e){return this.container=e,this.container&&this.doUpdateMenubar(!0),this.container}layout(e){this.menubar?.update(this.getMenuBarOptions())}toggleFocus(){this.menubar?.toggleFocus()}};xe=(0,o.C)([(0,o.Q)(0,a.e),(0,o.Q)(1,v.J),(0,o.Q)(2,d.f),(0,o.Q)(3,u.b),(0,o.Q)(4,g.p),(0,o.Q)(5,y.L),(0,o.Q)(6,C.s),(0,o.Q)(7,S.C),(0,o.Q)(8,k.O),(0,o.Q)(9,_.v),(0,o.Q)(10,x.P),(0,o.Q)(11,W.j),(0,o.Q)(12,$.k),(0,o.Q)(13,z.v),(0,o.Q)(14,U.w)],xe)},80118:(e,t,i)=>{(0,i(6162).A)('@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.mac .monaco-workbench-part,.mac.monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,sans-serif}.mac:lang(zh-Hans) .monaco-workbench-part,.mac:lang(zh-Hans).monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,PingFang SC,Hiragino Sans GB,sans-serif}.mac:lang(zh-Hant) .monaco-workbench-part,.mac:lang(zh-Hant).monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,PingFang TC,sans-serif}.mac:lang(ja) .monaco-workbench-part,.mac:lang(ja).monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,Hiragino Kaku Gothic Pro,sans-serif}.mac:lang(ko) .monaco-workbench-part,.mac:lang(ko).monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,Apple SD Gothic Neo,Nanum Gothic,AppleGothic,sans-serif}.windows .monaco-workbench-part,.windows.monaco-workbench-part{font-family:Segoe WPC,Segoe UI,sans-serif}.windows:lang(zh-Hans) .monaco-workbench-part,.windows:lang(zh-Hans).monaco-workbench-part{font-family:Segoe WPC,Segoe UI,Microsoft YaHei,sans-serif}.windows:lang(zh-Hant) .monaco-workbench-part,.windows:lang(zh-Hant).monaco-workbench-part{font-family:Segoe WPC,Segoe UI,Microsoft Jhenghei,sans-serif}.windows:lang(ja) .monaco-workbench-part,.windows:lang(ja).monaco-workbench-part{font-family:Segoe WPC,Segoe UI,Yu Gothic UI,Meiryo UI,sans-serif}.windows:lang(ko) .monaco-workbench-part,.windows:lang(ko).monaco-workbench-part{font-family:Segoe WPC,Segoe UI,Malgun Gothic,Dotom,sans-serif}.linux .monaco-workbench-part,.linux.monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,sans-serif}.linux:lang(zh-Hans) .monaco-workbench-part,.linux:lang(zh-Hans).monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,Source Han Sans SC,Source Han Sans CN,Source Han Sans,sans-serif}.linux:lang(zh-Hant) .monaco-workbench-part,.linux:lang(zh-Hant).monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,Source Han Sans TC,Source Han Sans TW,Source Han Sans,sans-serif}.linux:lang(ja) .monaco-workbench-part,.linux:lang(ja).monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,Source Han Sans J,Source Han Sans JP,Source Han Sans,sans-serif}.linux:lang(ko) .monaco-workbench-part,.linux:lang(ko).monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,Source Han Sans K,Source Han Sans JR,Source Han Sans,UnDotum,FBaekmuk Gulim,sans-serif}.mac .monaco-workbench-part,.mac.monaco-workbench-part{--monaco-monospace-font:"SF Mono",Monaco,Menlo,Courier,monospace}.windows .monaco-workbench-part,.windows.monaco-workbench-part{--monaco-monospace-font:Consolas,"Courier New",monospace}.linux .monaco-workbench-part,.linux.monaco-workbench-part{--monaco-monospace-font:"Ubuntu Mono","Liberation Mono","DejaVu Sans Mono","Courier New",monospace}.monaco-workbench-part{color:var(--vscode-foreground);font-size:13px;line-height:1.4em}.monaco-workbench-part.web,.monaco-workbench.web .monaco-workbench-part{touch-action:none}.monaco-workbench.border:not(.fullscreen){border:1px solid var(--window-border-color);box-sizing:border-box}.monaco-workbench.border.mac{border-radius:5px}.monaco-workbench.border.mac.macos-bigsur-or-newer{border-radius:10px}.monaco-workbench-part img{border:0}.monaco-workbench-part label{cursor:pointer}.monaco-workbench-part a{text-decoration:none}.monaco-workbench-part p>a{text-decoration:var(--text-link-decoration)}.monaco-workbench.underline-links .monaco-workbench-part{--text-link-decoration:underline}.monaco-workbench.hc-black .monaco-workbench-part p>a,.monaco-workbench.hc-black.monaco-workbench-part p>a,.monaco-workbench.hc-light .monaco-workbench-part p>a,.monaco-workbench.hc-light.monaco-workbench-part p>a{text-decoration:underline!important}.monaco-workbench-part a:active{background-color:inherit;color:inherit}.monaco-workbench-part a.plain,.monaco-workbench-part a.plain.hover,.monaco-workbench-part a.plain:hover{color:inherit;text-decoration:none}.monaco-workbench-part input{color:inherit;font-family:inherit;font-size:100%}.monaco-workbench-part table{color:inherit;font-size:inherit}.monaco-workbench-part input::placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part input::-webkit-input-placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part input::-moz-placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part textarea::placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part textarea::-webkit-input-placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part textarea::-moz-placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part .pointer{cursor:pointer}.monaco-workbench.mac.monaco-font-aliasing-antialiased .monaco-workbench-part,.monaco-workbench.mac.monaco-font-aliasing-antialiased.monaco-workbench-part{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.monaco-workbench.mac.monaco-font-aliasing-none .monaco-workbench-part,.monaco-workbench.mac.monaco-font-aliasing-none.monaco-workbench-part{-webkit-font-smoothing:none;-moz-osx-font-smoothing:unset}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){.monaco-workbench.mac.monaco-font-aliasing-auto .monaco-workbench-part,.monaco-workbench.mac.monaco-font-aliasing-auto.monaco-workbench-part{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}.monaco-workbench-part .context-view{-webkit-app-region:no-drag}.monaco-workbench-part .codicon{color:var(--vscode-icon-foreground)}.monaco-workbench-part .codicon[class*=codicon-]{font-size:16px}.monaco-workbench-part .predefined-file-icon[class*=codicon-]:before{padding-left:3px;padding-right:3px;width:16px}.predefined-file-icon:before{font-family:codicon}.monaco-workbench:not(.file-icons-enabled) .predefined-file-icon[class*=codicon-]:before{content:unset!important}.monaco-workbench.modal-dialog-visible .monaco-progress-container.infinite .progress-bit{display:none}.monaco-workbench-part select{appearance:none;-webkit-appearance:none;-moz-appearance:none;border:1px solid;font-family:inherit}.monaco-workbench-part .select-container{position:relative}.monaco-workbench-part .select-container:after{bottom:0;content:var(--vscode-icon-chevron-down-content);font-family:var(--vscode-icon-chevron-down-font-family);font-size:16px;height:16px;line-height:16px;margin:auto;pointer-events:none;position:absolute;right:6px;top:0;width:16px}.monaco-workbench-part .synthetic-focus,.monaco-workbench-part [tabindex="-1"]:focus,.monaco-workbench-part [tabindex="0"]:focus,.monaco-workbench-part button:focus,.monaco-workbench-part input[type=button]:focus,.monaco-workbench-part input[type=checkbox]:focus,.monaco-workbench-part input[type=search]:focus,.monaco-workbench-part input[type=text]:focus,.monaco-workbench-part select:focus,.monaco-workbench-part textarea:focus{opacity:1;outline-color:var(--vscode-focusBorder);outline-offset:-1px;outline-style:solid;outline-width:1px}.monaco-workbench.hc-black .synthetic-focus input,.monaco-workbench.hc-light .synthetic-focus input{background:transparent}.monaco-workbench-part input[type=checkbox]:focus{outline-offset:2px}.monaco-workbench-part [tabindex="-1"]:active,.monaco-workbench-part [tabindex="0"]:active,.monaco-workbench-part input[type=button]:active,.monaco-workbench-part input[type=checkbox]:active,.monaco-workbench-part select:active{outline:0!important}.monaco-workbench.mac .monaco-workbench-part select:focus,.monaco-workbench.mac.monaco-workbench-part select:focus{border-color:transparent}.monaco-workbench .monaco-list:not(.element-focused):focus:before{content:"";height:100%;left:0;outline:1px solid;outline-color:var(--vscode-focusBorder);outline-offset:-1px;outline-style:solid;outline-width:1px;pointer-events:none;position:absolute;top:0;width:100%;z-index:15}.monaco-workbench .monaco-list .monaco-list-row .monaco-highlighted-label .highlight{color:var(--vscode-list-highlightForeground)}.monaco-workbench .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight{color:var(--vscode-list-focusHighlightForeground)}.monaco-workbench-part .monaco-inputbox.error input[type=text]:focus,.monaco-workbench-part .monaco-inputbox.error.synthetic-focus,.monaco-workbench-part .monaco-inputbox.info input[type=text]:focus,.monaco-workbench-part .monaco-inputbox.info.synthetic-focus,.monaco-workbench-part .monaco-inputbox.warning input[type=text]:focus,.monaco-workbench-part .monaco-inputbox.warning.synthetic-focus,.monaco-workbench-part .monaco-list:focus,.monaco-workbench-part .synthetic-focus :focus{outline:0!important}.monaco-workbench-part a.monaco-link:hover{text-decoration:underline}.monaco-workbench-part .monaco-action-bar:not(.vertical) .action-label:not(.disabled):hover,.monaco-workbench-part .monaco-action-bar:not(.vertical) .monaco-dropdown-with-primary:not(.disabled):hover{background-color:var(--vscode-toolbar-hoverBackground)}.monaco-workbench-part .monaco-action-bar:not(.vertical) .action-item.active .action-label:not(.disabled),.monaco-workbench-part .monaco-action-bar:not(.vertical) .monaco-dropdown.active .action-label:not(.disabled){background-color:var(--vscode-toolbar-activeBackground)}.monaco-workbench-part .monaco-action-bar:not(.vertical) .action-item .action-label:hover:not(.disabled){outline:1px dashed var(--vscode-toolbar-hoverOutline);outline-offset:-1px}',{});var o=i(32545),n=i(5336),s=i(71478),r=i(68836),a=i(75824),c=(i(86849),i(55325)),d=(i(27785),i(82437),i(32802),i(77692),i(16115),i(79849),i(17960),i(69416),i(10380),i(19730));(0,o.zy)(((e,t)=>{const i=(0,n.p9)(e);t.addRule(`.monaco-workbench-part { background-color: ${i}; }`);const o=e.getColor(c.RQ);if(o&&t.addRule(`.monaco-workbench-part ::selection { background-color: ${o}; }`),s.HZ){const t=e.getColor(n.Jl);if(t){const e="monaco-workbench-meta-theme-color";let i=d.Gs.document.getElementById(e);i||(i=(0,r.__)(),i.name="theme-color",i.id=e),i.content=t.toString()}}a.nr&&t.addRule("\n\t\t\t.monaco-workbench-part.web {\n\t\t\t\ttouch-action: none;\n\t\t\t}\n\t\t\t.monaco-workbench-part .monaco-editor .view-lines {\n\t\t\t\tuser-select: text;\n\t\t\t\t-webkit-user-select: text;\n\t\t\t}\n\t\t"),s.un&&(0,a.Qu)()&&t.addRule(`.monaco-workbench-part { background-color: ${i}; }`)}))},47060:(e,t,i)=>{i.d(t,{c:()=>F,Z:()=>G});var o=i(92518),n=i(75824),s=i(68836),r=i(96288),a=i(93765),c=i(1661),d=i(24821),h=i(30787),l=i(71478),u=i(32834),p=i(19871),g=i(25934),m=i(50928),b=i(16093),w=i(28672),v=i(1935),f=i(43773),y=i(62876),C=i(3272),S=i(39924),k=i(71512),_=i(16849),x=i(19730),E=i(87427),D=i(96181),I=i(96485),V={open:(0,g.kg)(11098,"open"),close:(0,g.kg)(11099,"close"),find:(0,g.kg)(11100,"find")},M=i(68585),T=i(30875),A=i(93152),L=i(87866);let P=class{constructor(e,t,i,o){this.fileService=e,this.environmentService=t,this.lifecycleService=i,this.logService=o}async getLogs(){return(0,M.a)(this.fileService,this.environmentService)}async whenWorkbenchRestored(){this.logService.info("[driver] Waiting for restored lifecycle phase..."),await this.lifecycleService.when(3),this.logService.info("[driver] Restored lifecycle phase reached. Waiting for contributions..."),await A.O.as(L.Fd.Workbench).whenRestored,this.logService.info("[driver] Workbench contributions created.")}async setValue(e,t){const i=x.Gs.document.querySelector(e);if(!i)return Promise.reject(new Error(`Element not found: ${e}`));const o=i;o.value=t;const n=new Event("input",{bubbles:!0,cancelable:!0});o.dispatchEvent(n)}async isActiveElement(e){if(x.Gs.document.querySelector(e)!==x.Gs.document.activeElement){const t=[];let i=x.Gs.document.activeElement;for(;i;){const e=i.tagName,o=i.id?`#${i.id}`:"",n=(0,E.Yc)(i.className.split(/\s+/g).map((e=>e.trim()))).map((e=>`.${e}`)).join("");t.unshift(`${e}${o}${n}`),i=i.parentElement}throw new Error(`Active element not found. Current active element is '${t.join(" > ")}'. Looking for ${e}`)}return!0}async getElements(e,t){const i=x.Gs.document.querySelectorAll(e),o=[];for(let e=0;e<i.length;e++){const n=i.item(e);o.push(this.serializeElement(n,t))}return o}serializeElement(e,t){const i=Object.create(null);for(let t=0;t<e.attributes.length;t++){const o=e.attributes.item(t);o&&(i[o.name]=o.value)}const o=[];if(t)for(let t=0;t<e.children.length;t++){const i=e.children.item(t);i&&o.push(this.serializeElement(i,!0))}const{left:n,top:r}=(0,s.cL)(e);return{tagName:e.tagName,className:e.className,textContent:e.textContent||"",attributes:i,children:o,left:n,top:r}}async getElementXY(e,t,i){const o="number"==typeof t&&"number"==typeof i?{x:t,y:i}:void 0;return this._getElementXY(e,o)}async typeInEditor(e,t){const i=x.Gs.document.querySelector(e);if(!i)throw new Error(`Editor not found: ${e}`);const o=i,n=o.selectionStart,s=n+t.length,r=o.value,a=r.substr(0,n)+t+r.substr(n);o.value=a,o.setSelectionRange(s,s);const c=new Event("input",{bubbles:!0,cancelable:!0});o.dispatchEvent(c)}async getTerminalBuffer(e){const t=x.Gs.document.querySelector(e);if(!t)throw new Error(`Terminal not found: ${e}`);const i=t.xterm;if(!i)throw new Error(`Xterm not found: ${e}`);const o=[];for(let e=0;e<i.buffer.active.length;e++)o.push(i.buffer.active.getLine(e).translateToString(!0));return o}async writeInTerminal(e,t){const i=x.Gs.document.querySelector(e);if(!i)throw new Error(`Element not found: ${e}`);const o=i.xterm;if(!o)throw new Error(`Xterm not found: ${e}`);o.input(t)}getLocaleInfo(){return Promise.resolve({language:l.BH,locale:l.Hg})}getLocalizedStrings(){return Promise.resolve({open:V.open,close:V.close,find:V.find})}async _getElementXY(e,t){const i=x.Gs.document.querySelector(e);if(!i)return Promise.reject(new Error(`Element not found: ${e}`));const{left:o,top:n}=(0,s.cL)(i),{width:r,height:a}=(0,s.tG)(i);let c,d;return t?(c=o+t.x,d=n+t.y):(c=o+r/2,d=n+a/2),c=Math.round(c),d=Math.round(d),{x:c,y:d}}async exitApplication(){}};P=(0,o.C)([(0,o.Q)(0,I.$),(0,o.Q)(1,D.k),(0,o.Q)(2,k.f),(0,o.Q)(3,T.r)],P);var R,B=i(20404),O=i(819),N=i(85105);let F=class extends d.jG{static{R=this}static{this.TIMEOUT_HANDLES=Number.MIN_SAFE_INTEGER}static{this.TIMEOUT_DISPOSABLES=new Map}constructor(e,t={getWindowsCount:s.Lg,getWindows:s.sl},i,o){super(),this.hostService=i,this.environmentService=o,this.enableWindowFocusOnElementFocus(e),this.enableMultiWindowAwareTimeout(e,t),this.registerFullScreenListeners(e.vscodeWindowId)}enableWindowFocusOnElementFocus(e){const t=e.HTMLElement.prototype.focus,i=this;e.HTMLElement.prototype.focus=function(e){i.onElementFocus((0,s.zk)(this)),t.apply(this,[e])}}onElementFocus(e){const t=(0,s.fz)();t!==e&&t.document.hasFocus()&&(e.focus(),this.environmentService.extensionTestsLocationURI||e.document.hasFocus()||this.hostService.focus(e))}enableMultiWindowAwareTimeout(e,t={getWindowsCount:s.Lg,getWindows:s.sl}){const i=e.setTimeout;Object.defineProperty(e,"vscodeOriginalSetTimeout",{get:()=>i});const o=e.clearTimeout;Object.defineProperty(e,"vscodeOriginalClearTimeout",{get:()=>o}),e.setTimeout=function(e,o=0,...n){if(1===t.getWindowsCount()||"string"==typeof e||0===o)return i.apply(this,[e,o,...n]);const s=new Set,r=R.TIMEOUT_HANDLES++;R.TIMEOUT_DISPOSABLES.set(r,s);const a=(0,B.P)(e,(()=>{(0,d.AS)(s),R.TIMEOUT_DISPOSABLES.delete(r)}));for(const{window:e,disposables:i}of t.getWindows()){if((0,x.$M)(e)&&"hidden"===e.document.visibilityState)continue;let t=!1;const r=e.vscodeOriginalSetTimeout.apply(this,[(...e)=>{t||a(...e)},o,...n]),c=(0,d.s)((()=>{t=!0,e.vscodeOriginalClearTimeout(r),s.delete(c)}));i.add(c),s.add(c)}return r},e.clearTimeout=function(e){const t="number"==typeof e?R.TIMEOUT_DISPOSABLES.get(e):void 0;t?((0,d.AS)(t),R.TIMEOUT_DISPOSABLES.delete(e)):o.apply(this,[e])}}registerFullScreenListeners(e){this._register(this.hostService.onDidChangeFullScreen((({windowId:t,fullscreen:i})=>{if(t===e){const t=(0,s.ZF)(e);t&&(0,n.gO)(i,t.window)}})))}static async confirmOnShutdown(e,t){const i=e.get(b.X),o=e.get(O.p),n=2===t?l.zx?(0,g.kg)(3086,"Are you sure you want to quit?"):(0,g.kg)(3087,"Are you sure you want to exit?"):(0,g.kg)(3088,"Are you sure you want to close the window?"),s=2===t?l.zx?(0,g.kg)(3089,"&&Quit"):(0,g.kg)(3090,"&&Exit"):(0,g.kg)(3091,"&&Close Window"),r=await i.confirm({message:n,primaryButton:s,checkbox:{label:(0,g.kg)(3092,"Do not ask me again")}});return r.confirmed&&r.checkboxChecked&&await o.updateValue("window.confirmBeforeClose","never"),r.confirmed}};F=R=(0,o.C)([(0,o.Q)(2,_.v),(0,o.Q)(3,N.P)],F);let G=class extends F{constructor(e,t,i,o,n,s,r,a,c){super(x.Gs,void 0,c,s),this.openerService=e,this.lifecycleService=t,this.dialogService=i,this.labelService=o,this.productService=n,this.browserEnvironmentService=s,this.layoutService=r,this.instantiationService=a,this.registerListeners(),this.create()}registerListeners(){this._register(this.lifecycleService.onWillShutdown((()=>this.onWillShutdown())));const e=l.un&&x.Gs.visualViewport?x.Gs.visualViewport:x.Gs;this._register((0,s.ko)(e,s.Bx.RESIZE,(()=>{this.layoutService.layout(),l.un&&x.Gs.scrollTo(0,0)}))),this._register((0,s.ko)(this.layoutService.mainContainer,s.Bx.WHEEL,(e=>e.preventDefault()),{passive:!1})),this._register((0,s.ko)(this.layoutService.mainContainer,s.Bx.CONTEXT_MENU,(e=>s.fs.stop(e,!0)))),this._register((0,s.ko)(this.layoutService.mainContainer,s.Bx.DROP,(e=>s.fs.stop(e,!0))))}onWillShutdown(){c.Jh.toPromise(c.Jh.any(c.Jh.once(new r.f(x.Gs.document.body,s.Bx.KEY_DOWN,!0).event),c.Jh.once(new r.f(x.Gs.document.body,s.Bx.MOUSE_DOWN,!0).event))).then((async()=>{await(0,a.wR)(3e3),await this.dialogService.prompt({type:u.A.Error,message:(0,g.kg)(3093,"An unexpected error occurred that requires a reload of this page."),detail:(0,g.kg)(3094,"The workbench was unexpectedly disposed while running."),buttons:[{label:(0,g.kg)(3095,"&&Reload"),run:()=>x.Gs.location.reload()}]})}))}create(){this.setupOpenHandlers(),this.registerLabelFormatters(),this.registerCommands(),this.setupDriver()}setupDriver(){var e;this.environmentService.enableSmokeTestDriver&&(e=this.instantiationService,Object.assign(x.Gs,{driver:e.createInstance(P)}))}setupOpenHandlers(){this.openerService.setDefaultExternalOpener({openExternal:async e=>{let t=!1;if(this.browserEnvironmentService.options?.openerAllowedExternalUrlPrefixes)for(const i of this.browserEnvironmentService.options.openerAllowedExternalUrlPrefixes)if(e.startsWith(i)){t=!0;break}if((0,h.v$)(e,h.ny.http)||(0,h.v$)(e,h.ny.https))n.nr?(0,s.kP)(e,!t)||await this.dialogService.prompt({type:u.A.Warning,message:(0,g.kg)(3096,"The browser interrupted the opening of a new tab or window. Press 'Open' to open it anyway."),detail:e,buttons:[{label:(0,g.kg)(3097,"&&Open"),run:()=>t?(0,s.VU)(e):(0,s.CE)(e)},{label:(0,g.kg)(3098,"&&Learn More"),run:()=>this.openerService.open(p.rz.parse("https://aka.ms/allow-vscode-popup"))}],cancelButton:!0}):t?(0,s.VU)(e):(0,s.CE)(e);else{const t=()=>{this.lifecycleService.withExpectedShutdown({disableShutdownHandling:!0},(()=>x.Gs.location.href=e))};t();const i=async()=>{const{downloadUrl:e}=this.productService;let o;const n=[{label:(0,g.kg)(3099,"&&Try Again"),run:()=>t()}];void 0!==e?(o=(0,g.kg)(3100,"We launched {0} on your computer.\n\nIf {1} did not launch, try again or install it below.",this.productService.nameLong,this.productService.nameLong),n.push({label:(0,g.kg)(3101,"&&Install"),run:async()=>{await this.openerService.open(p.rz.parse(e)),i()}})):o=(0,g.kg)(3102,"We launched {0} on your computer.\n\nIf {1} did not launch, try again below.",this.productService.nameLong,this.productService.nameLong),await this.hostService.withExpectedShutdown((()=>this.dialogService.prompt({type:u.A.Info,message:(0,g.kg)(3103,"All done. You can close this tab now."),detail:o,buttons:n,cancelButton:!0})))};(0,h.v$)(e,this.productService.urlProtocol)&&await i()}return!0}})}registerLabelFormatters(){this._register(this.labelService.registerFormatter({scheme:h.ny.vscodeUserData,priority:!0,formatting:{label:"(Settings) ${path}",separator:"/"}}))}registerCommands(){m.w.registerCommand("workbench.experimental.requestUsbDevice",(async(e,t)=>async function(e){const t=navigator.usb;if(!t)return;const i=await t.requestDevice({filters:e?.filters??[]});return i?{deviceClass:i.deviceClass,deviceProtocol:i.deviceProtocol,deviceSubclass:i.deviceSubclass,deviceVersionMajor:i.deviceVersionMajor,deviceVersionMinor:i.deviceVersionMinor,deviceVersionSubminor:i.deviceVersionSubminor,manufacturerName:i.manufacturerName,productId:i.productId,productName:i.productName,serialNumber:i.serialNumber,usbVersionMajor:i.usbVersionMajor,usbVersionMinor:i.usbVersionMinor,usbVersionSubminor:i.usbVersionSubminor,vendorId:i.vendorId}:void 0}(t))),m.w.registerCommand("workbench.experimental.requestSerialPort",(async(e,t)=>async function(e){const t=navigator.serial;if(!t)return;const i=await t.requestPort({filters:e?.filters??[]});if(!i)return;const o=i.getInfo();return{usbVendorId:o.usbVendorId,usbProductId:o.usbProductId}}(t))),m.w.registerCommand("workbench.experimental.requestHidDevice",(async(e,t)=>async function(e){const t=navigator.hid;if(!t)return;const i=await t.requestDevice({filters:e?.filters??[]});if(!i.length)return;const o=i[0];return{opened:o.opened,vendorId:o.vendorId,productId:o.productId,productName:o.productName,collections:o.collections}}(t)))}};G=(0,o.C)([(0,o.Q)(0,f.C),(0,o.Q)(1,k.f),(0,o.Q)(2,b.X),(0,o.Q)(3,v.L),(0,o.Q)(4,y.Y),(0,o.Q)(5,C.L),(0,o.Q)(6,S.Y),(0,o.Q)(7,w._Y),(0,o.Q)(8,_.v)],G)},31255:(e,t,i)=>{i.d(t,{T:()=>u});var o=i(92518),n=i(74670),s=i(24821),r=i(92986),a=i(40268),c=i(1661),d=i(28672),h=i(1180);let l=class extends s.jG{constructor(e,t,i){super(),this.viewId=e,this.viewDescriptorService=t,this.activityService=i,this.activity=void 0,this.activityDisposable=s.jG.None,this._register(c.Jh.filter(this.viewDescriptorService.onDidChangeContainer,(t=>t.views.some((t=>t.id===e))))((()=>this.update()))),this._register(c.Jh.filter(this.viewDescriptorService.onDidChangeLocation,(t=>t.views.some((t=>t.id===e))))((()=>this.update())))}setActivity(e){this.activity=e,this.update()}clearActivity(){this.activity=void 0,this.update()}update(){this.activityDisposable.dispose();const e=this.viewDescriptorService.getViewContainerByViewId(this.viewId);e&&this.activity&&(this.activityDisposable=this.activityService.showViewContainerActivity(e.id,this.activity))}dispose(){this.activityDisposable.dispose(),super.dispose()}};l=(0,o.C)([(0,o.Q)(1,r.X),(0,o.Q)(2,n.w)],l);let u=class extends s.jG{constructor(e,t){super(),this.viewDescriptorService=e,this.instantiationService=t,this.viewActivities=new Map,this._onDidChangeActivity=this._register(new c.vl),this.onDidChangeActivity=this._onDidChangeActivity.event,this.viewContainerActivities=new Map,this.globalActivities=new Map}showViewContainerActivity(e,t){const i=this.viewDescriptorService.getViewContainerById(e);if(i){let o=this.viewContainerActivities.get(e);o||(o=[],this.viewContainerActivities.set(e,o));for(let e=0;e<=o.length;e++){if(e===o.length||(0,h.b0)(t.priority)){o.push(t);break}if((0,h.b0)(o[e].priority)||o[e].priority<=t.priority){o.splice(e,0,t);break}}return this._onDidChangeActivity.fire(i),(0,s.s)((()=>{o.splice(o.indexOf(t),1),0===o.length&&this.viewContainerActivities.delete(e),this._onDidChangeActivity.fire(i)}))}return s.jG.None}getViewContainerActivities(e){return this.viewDescriptorService.getViewContainerById(e)?this.viewContainerActivities.get(e)??[]:[]}showViewActivity(e,t){let i=this.viewActivities.get(e);i?i.id++:(i={id:1,activity:this.instantiationService.createInstance(l,e)},this.viewActivities.set(e,i));const o=i.id;i.activity.setActivity(t);const n=i;return(0,s.s)((()=>{n.id===o&&(n.activity.dispose(),this.viewActivities.delete(e))}))}showAccountsActivity(e){return this.showActivity(a.Z,e)}showGlobalActivity(e){return this.showActivity(a.y,e)}getActivity(e){return this.globalActivities.get(e)??[]}showActivity(e,t){let i=this.globalActivities.get(e);return i||(i=[],this.globalActivities.set(e,i)),i.push(t),this._onDidChangeActivity.fire(e),(0,s.s)((()=>{i.splice(i.indexOf(t),1),0===i.length&&this.globalActivities.delete(e),this._onDidChangeActivity.fire(e)}))}};u=(0,o.C)([(0,o.Q)(0,r.X),(0,o.Q)(1,d._Y)],u)},83443:(e,t,i)=>{i.d(t,{Vm:()=>d,fk:()=>c,hV:()=>a});var o=i(10442),n=i(86849),s=i(25934);i(14956);class r{constructor(e,t){this.descriptorFn=e,this.stylesFn=t}getDescription(){return this.descriptorFn(null)}getColors(e){return this.stylesFn?.(e)}}class a extends r{constructor(e,t){super(t,void 0),this.number=e,this.number=e}getDescription(){return this.descriptorFn(this.number)}}class c extends r{constructor(e,t,i){super(t,i),this.icon=e}}class d extends r{constructor(e){super(e,void 0)}}(0,n.x1)("activityWarningBadge.foreground",{dark:o.Q1.black.lighten(.2),light:o.Q1.white,hcDark:null,hcLight:o.Q1.black.lighten(.2)},(0,s.kg)(5270,"Foreground color of the warning activity badge")),(0,n.x1)("activityWarningBadge.background",{dark:"#CCA700",light:"#BF8803",hcDark:null,hcLight:"#CCA700"},(0,s.kg)(5271,"Background color of the warning activity badge")),(0,n.x1)("activityErrorBadge.foreground",{dark:o.Q1.black.lighten(.2),light:o.Q1.white,hcDark:null,hcLight:o.Q1.black.lighten(.2)},(0,s.kg)(5272,"Foreground color of the error activity badge")),(0,n.x1)("activityErrorBadge.background",{dark:"#F14C4C",light:"#E51400",hcDark:null,hcLight:"#F14C4C"},(0,s.kg)(5273,"Background color of the error activity badge"))},66512:(e,t,i)=>{function o(e){const t=e;return"string"==typeof t?.id&&"number"==typeof t.alignment}function n(e){const t=e;return("number"==typeof t?.primary||o(t?.primary))&&"number"==typeof t?.secondary}i.d(t,{eq:()=>n,q6:()=>s,vm:()=>r,xR:()=>o});const s={id:"statusBar.entry.showTooltip",title:""},r=["standard","warning","error","prominent","remote","offline"]},94717:(e,t,i)=>{i.d(t,{t:()=>s});var o=i(28672),n=i(40240);const s=(0,o.GU)(n.G)}}]);
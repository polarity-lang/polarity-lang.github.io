"use strict";(self.webpackChunkmonaco_lsp_streams=self.webpackChunkmonaco_lsp_streams||[]).push([[5813],{35813:(n,t,e)=>{e.d(t,{YW:()=>S,qg:()=>C});var s=e(90377),r=e(88107),l=e(4897),a=e(22156),u=e(52888),o=e(6729);const c="**",i="/",f="[/\\\\]",h="[^/\\\\]",g=/\//g;function p(n,t){switch(n){case 0:return"";case 1:return`${h}*?`;default:return`(?:${f}|${h}+${f}${t?`|${f}${h}+`:""})*?`}}function m(n,t){if(!n)return[];const e=[];let s=!1,r=!1,l="";for(const a of n){switch(a){case t:if(!s&&!r){e.push(l),l="";continue}break;case"{":s=!0;break;case"}":s=!1;break;case"[":r=!0;break;case"]":r=!1}l+=a}return l&&e.push(l),e}function b(n){if(!n)return"";let t="";const e=m(n,i);if(e.every((n=>n===c)))t=".*";else{let n=!1;e.forEach(((s,r)=>{if(s===c){if(n)return;t+=p(2,r===e.length-1)}else{let n=!1,l="",a=!1,u="";for(const e of s)if("}"!==e&&n)l+=e;else if(!a||"]"===e&&u)switch(e){case"{":n=!0;continue;case"[":a=!0;continue;case"}":{const e=`(?:${m(l,",").map((n=>b(n))).join("|")})`;t+=e,n=!1,l="";break}case"]":t+="["+u+"]",a=!1,u="";break;case"?":t+=h;continue;case"*":t+=p(1);continue;default:t+=(0,o.bm)(e)}else{let n;n="-"===e?e:"^"!==e&&"!"!==e||u?e===i?"":(0,o.bm)(e):"^",u+=n}r<e.length-1&&(e[r+1]!==c||r+2<e.length)&&(t+=f)}n=s===c}))}return t}const y=/^\*\*\/\*\.[\w\.-]+$/,d=/^\*\*\/([\w\.-]+)\/?$/,$=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,w=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,B=/^\*\*((\/[\w\.-]+)+)\/?$/,P=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,k=new l.qK(1e4),x=function(){return!1},W=function(){return null};function _(n,t){if(!n)return W;let e;e="string"!=typeof n?n.pattern:n,e=e.trim();const s=`${e}_${!!t.trimForExclusions}`;let l,c=k.get(s);return c||(c=y.test(e)?function(n,t){return function(e,s){return"string"==typeof e&&e.endsWith(n)?t:null}}(e.substr(4),e):(l=d.exec(q(e,t)))?function(n,t){const e=`/${n}`,s=`\\${n}`,r=function(r,l){return"string"!=typeof r?null:l?l===n?t:null:r===n||r.endsWith(e)||r.endsWith(s)?t:null},l=[n];return r.basenames=l,r.patterns=[t],r.allBasenames=l,r}(l[1],e):(t.trimForExclusions?w:$).test(e)?function(n,t){const e=V(n.slice(1,-1).split(",").map((n=>_(n,t))).filter((n=>n!==W)),n),s=e.length;if(!s)return W;if(1===s)return e[0];const r=function(t,s){for(let r=0,l=e.length;r<l;r++)if(e[r](t,s))return n;return null},l=e.find((n=>!!n.allBasenames));l&&(r.allBasenames=l.allBasenames);const a=e.reduce(((n,t)=>t.allPaths?n.concat(t.allPaths):n),[]);return a.length&&(r.allPaths=a),r}(e,t):(l=B.exec(q(e,t)))?E(l[1].substr(1),e,!0):(l=P.exec(q(e,t)))?E(l[1],e,!1):function(n){try{const t=new RegExp(`^${b(n)}$`);return function(e){return t.lastIndex=0,"string"==typeof e&&t.test(e)?n:null}}catch(n){return W}}(e),k.set(s,c)),function(n,t){if("string"==typeof t)return n;const e=function(e,s){return(0,r._1)(e,t.base,!u.j9)?n((0,o.NB)(e.substr(t.base.length),a.Vn),s):null};return e.allBasenames=n.allBasenames,e.allPaths=n.allPaths,e.basenames=n.basenames,e.patterns=n.patterns,e}(c,n)}function q(n,t){return t.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function E(n,t,e){const s=a.Vn===a.SA.sep,r=s?n:n.replace(g,a.Vn),l=a.Vn+r,u=a.SA.sep+n;let o;return o=e?function(e,a){return"string"!=typeof e||e!==r&&!e.endsWith(l)&&(s||e!==n&&!e.endsWith(u))?null:t}:function(e,l){return"string"!=typeof e||e!==r&&(s||e!==n)?null:t},o.allPaths=[(e?"*/":"./")+n],o}function S(n,t,e){return!(!n||"string"!=typeof t)&&C(n)(t,void 0,e)}function C(n,t={}){if(!n)return x;if("string"==typeof n||function(n){const t=n;return!!t&&("string"==typeof t.base&&"string"==typeof t.pattern)}(n)){const e=_(n,t);if(e===W)return x;const s=function(n,t){return!!e(n,t)};return e.allBasenames&&(s.allBasenames=e.allBasenames),e.allPaths&&(s.allPaths=e.allPaths),s}return function(n,t){const e=V(Object.getOwnPropertyNames(n).map((e=>function(n,t,e){if(!1===t)return W;const r=_(n,e);if(r===W)return W;if("boolean"==typeof t)return r;if(t){const e=t.when;if("string"==typeof e){const t=(t,l,a,u)=>{if(!u||!r(t,l))return null;const o=u(e.replace("$(basename)",(()=>a)));return(0,s.Qg)(o)?o.then((t=>t?n:null)):o?n:null};return t.requiresSiblings=!0,t}}return r}(e,n[e],t))).filter((n=>n!==W))),r=e.length;if(!r)return W;if(!e.some((n=>!!n.requiresSiblings))){if(1===r)return e[0];const n=function(n,t){let r;for(let l=0,a=e.length;l<a;l++){const a=e[l](n,t);if("string"==typeof a)return a;(0,s.Qg)(a)&&(r||(r=[]),r.push(a))}return r?(async()=>{for(const n of r){const t=await n;if("string"==typeof t)return t}return null})():null},t=e.find((n=>!!n.allBasenames));t&&(n.allBasenames=t.allBasenames);const l=e.reduce(((n,t)=>t.allPaths?n.concat(t.allPaths):n),[]);return l.length&&(n.allPaths=l),n}const l=function(n,t,r){let l,u;for(let o=0,c=e.length;o<c;o++){const c=e[o];c.requiresSiblings&&r&&(t||(t=(0,a.P8)(n)),l||(l=t.substr(0,t.length-(0,a.LC)(n).length)));const i=c(n,t,l,r);if("string"==typeof i)return i;(0,s.Qg)(i)&&(u||(u=[]),u.push(i))}return u?(async()=>{for(const n of u){const t=await n;if("string"==typeof t)return t}return null})():null},u=e.find((n=>!!n.allBasenames));u&&(l.allBasenames=u.allBasenames);const o=e.reduce(((n,t)=>t.allPaths?n.concat(t.allPaths):n),[]);return o.length&&(l.allPaths=o),l}(n,t)}function V(n,t){const e=n.filter((n=>!!n.basenames));if(e.length<2)return n;const s=e.reduce(((n,t)=>{const e=t.basenames;return e?n.concat(e):n}),[]);let r;if(t){r=[];for(let n=0,e=s.length;n<e;n++)r.push(t)}else r=e.reduce(((n,t)=>{const e=t.patterns;return e?n.concat(e):n}),[]);const l=function(n,t){if("string"!=typeof n)return null;if(!t){let e;for(e=n.length;e>0;e--){const t=n.charCodeAt(e-1);if(47===t||92===t)break}t=n.substr(e)}const e=s.indexOf(t);return-1!==e?r[e]:null};l.basenames=s,l.patterns=r,l.allBasenames=s;const a=n.filter((n=>!n.basenames));return a.push(l),a}}}]);